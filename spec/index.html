<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="Asciidoctor 0.1.4">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OGC® GeoPackage Encoding Standard with corrigendum</title>
<link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.1/css/font-awesome.min.css">
<link rel="stylesheet" href="./asciidoctor-coderay.css">
</head>
<body class="book">
<div id="header">
</div>
<div id="content">
<div class="docwarning hide-on-print">
<br>This Document is a Corrigendum. A version with tracked changes from the original document is available upon request.<br><br>
</div>
<div id="ogcname" class="paragraph">
<p>Open Geospatial Consortium<br></p>
</div>
<div id="ogcheading" class="paragraph">
<p>Publication Date: 2015-08-04<br>
Approval Date:   2015-08-04<br>
Submission Date: 2015-08-04<br>
External identifier of this OGC® document: <a href="http://www.opengis.net/doc/IS/geopackage/1.0.2">http://www.opengis.net/doc/IS/geopackage/1.0.2</a><br>
URL for this OGC® document: <a href="http://www.geopackage.org/spec">http://www.geopackage.org/spec</a><br>
Internal reference number of this OGC® document: OGC 12-128r12<br>
Version: 1.0.2<br>
Category: OGC® Encoding Standard<br>
Editor:   Paul Daisey<br>
<em>Previous Version: <a href="http://www.opengis.net/doc/IS/geopackage/1.0.1">http://www.opengis.net/doc/IS/geopackage/1.0.1</a></em><br>
<em>Original Version: <a href="http://www.opengis.net/doc/IS/geopackage/1.0">http://www.opengis.net/doc/IS/geopackage/1.0</a></em><br></p>
</div>
<div class="sect1">
<h2 id="_ogc_geopackage_encoding_standard_with_corrigendum">OGC® GeoPackage Encoding Standard with corrigendum</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Copyright © 2015 Open Geospatial Consortium.<br>
To obtain additional rights of use, visit <a href="http://www.opengeospatial.org/legal/">http://www.opengeospatial.org/legal/</a><br></p>
</div>
<div class="paragraph">
<p><strong>Warning</strong></p>
</div>
<div class="paragraph">
<p>This document is an OGC Member approved international standard. This document is available on a royalty free, non-discriminatory basis. Recipients of this document are invited to submit, with their comments, notification of any relevant patent rights of which they are aware and to provide supporting documentation. This is a corrigendum for OGC 12-128r1.</p>
</div>
<div class="paragraph">
<p>Document type:   	OGC® Publicly Available Standard<br>
Document subtype:   	Encoding Standard <br>
Document stage:   	Approved<br>
Document language: 	English<br></p>
</div>
<div class="sect1">
<h2 id="_license_agreement">License Agreement</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Permission is hereby granted by the Open Geospatial Consortium, ("Licensor"), free of charge and subject to the terms set forth below, to any person obtaining a copy of this Intellectual Property and any associated documentation, to deal in the Intellectual Property without restriction (except as set forth below), including without limitation the rights to implement, use, copy, modify, merge, publish, distribute, and/or sublicense copies of the Intellectual Property, and to permit persons to whom the Intellectual Property is furnished to do so, provided that all copyright notices on the intellectual property are retained intact and that each person to whom the Intellectual Property is furnished agrees to the terms of this Agreement.</p>
</div>
<div class="paragraph">
<p>If you modify the Intellectual Property, all copies of the modified Intellectual Property must include, in addition to the above copyright notice, a notice that the Intellectual Property includes modifications that have not been approved or adopted by LICENSOR.</p>
</div>
<div class="paragraph">
<p>THIS LICENSE IS A COPYRIGHT LICENSE ONLY, AND DOES NOT CONVEY ANY RIGHTS UNDER ANY PATENTS THAT MAY BE IN FORCE ANYWHERE IN THE WORLD.</p>
</div>
<div class="paragraph">
<p>THE INTELLECTUAL PROPERTY IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, AND NONINFRINGEMENT OF THIRD PARTY RIGHTS. THE COPYRIGHT HOLDER OR HOLDERS INCLUDED IN THIS NOTICE DO NOT WARRANT THAT THE FUNCTIONS CONTAINED IN THE INTELLECTUAL PROPERTY WILL MEET YOUR REQUIREMENTS OR THAT THE OPERATION OF THE INTELLECTUAL PROPERTY WILL BE UNINTERRUPTED OR ERROR FREE. ANY USE OF THE INTELLECTUAL PROPERTY SHALL BE MADE ENTIRELY AT THE USER’S OWN RISK. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR ANY CONTRIBUTOR OF INTELLECTUAL PROPERTY RIGHTS TO THE INTELLECTUAL PROPERTY BE LIABLE FOR ANY CLAIM, OR ANY DIRECT, SPECIAL, INDIRECT OR CONSEQUENTIAL DAMAGES, OR ANY DAMAGES WHATSOEVER RESULTING FROM ANY ALLEGED INFRINGEMENT OR ANY LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR UNDER ANY OTHER LEGAL THEORY, ARISING OUT OF OR IN CONNECTION WITH THE IMPLEMENTATION, USE, COMMERCIALIZATION OR PERFORMANCE OF THIS INTELLECTUAL PROPERTY.</p>
</div>
<div class="paragraph">
<p>This license is effective until terminated. You may terminate it at any time by destroying the Intellectual Property together with all copies in any form. The license will also terminate if you fail to comply with any term or condition of this Agreement. Except as provided in the following sentence, no such termination of this license shall require the termination of any third party end-user sublicense to the Intellectual Property which is in force as of the date of notice of such termination. In addition, should the Intellectual Property, or the operation of the Intellectual Property, infringe, or in LICENSOR’s sole opinion be likely to infringe, any patent, copyright, trademark or other right of a third party, you agree that LICENSOR, in its sole discretion, may terminate this license without any compensation or liability to you, your licensees or any other party. You agree upon termination of any kind to destroy or cause to be destroyed the Intellectual Property together with all copies in any form, whether held by you or by any third party.</p>
</div>
<div class="paragraph">
<p>Except as contained in this notice, the name of LICENSOR or of any other holder of a copyright in all or part of the Intellectual Property shall not be used in advertising or otherwise to promote the sale, use or other dealings in this Intellectual Property without prior written authorization of LICENSOR or such copyright holder. LICENSOR is and shall at all times be the sole entity that may authorize you or any third party to use certification marks, trademarks or other special designations to indicate compliance with any LICENSOR standards or specifications.</p>
</div>
<div class="paragraph">
<p>This Agreement is governed by the laws of the Commonwealth of Massachusetts. The application to this Agreement of the United Nations Convention on Contracts for the International Sale of Goods is hereby expressly excluded. In the event any provision of this Agreement shall be deemed unenforceable, void or invalid, such provision shall be modified so as to make it valid and enforceable, and as so modified the entire Agreement shall remain in full force and effect. No decision, action or inaction by LICENSOR shall be construed to be a waiver of any rights or remedies available to it. None of the Intellectual Property or underlying information or technology may be downloaded or otherwise exported or reexported in violation of U.S. export laws and regulations. In addition, you are responsible for complying with any local laws in your jurisdiction which may impact your right to import, export or use the Intellectual Property, and you represent that you have complied with any regulations or registration procedures required by applicable law to make this license enforceable.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_patent_call">Patent Call</h2>
<div class="sectionbody">
<div class="paragraph">
<p><em>Attention is drawn to the possibility that some of the elements of this document may be the subject of patent rights. The Open Geospatial Consortium shall not be held responsible for identifying any or all such patent rights.</em></p>
</div>
<div class="paragraph">
<p><em>Recipients of this document are requested to submit, with their comments, notification of any relevant patent claims or other intellectual property rights of which they may be aware that might be infringed by any implementation of the standard set forth in this document, and to provide supporting documentation.</em></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_abstract">Abstract</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This OGC® Encoding Standard defines GeoPackages for exchange and GeoPackage SQLite Extensions for direct use of vector geospatial features and / or tile matrix sets of earth images and raster maps at various scales. Direct use means the ability to access and update data in a "native" storage format without intermediate format translations in an environment (e.g. through an API) that guarantees data model and data set integrity and identical access and update results in response to identical requests from different client applications.  GeoPackages are interoperable across all enterprise and personal computing environments, and are particularly useful on mobile devices like cell phones and tablets in communications environments with limited connectivity and bandwidth.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_keywords">Keywords</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ogcdoc, geopackage, sqlite, raster, tiles, vector, feature, data, storage, exchange, mobile, smartphone, tablet</p>
</div>
<div id="toc" class="toc2">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_ogc_geopackage_encoding_standard_with_corrigendum">OGC® GeoPackage Encoding Standard with corrigendum</a></li>
<li>
<ul class="sectlevel1">
<li><a href="#_license_agreement">License Agreement</a></li>
<li><a href="#_patent_call">Patent Call</a></li>
<li><a href="#_abstract">Abstract</a></li>
<li><a href="#_keywords">Keywords</a></li>
<li><a href="#_introduction">Introduction</a></li>
<li><a href="#_base">1. Base</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_core">1.1. Core</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_sqlite_container">1.1.1. SQLite Container</a></li>
<li><a href="#spatial_ref_sys">1.1.2. Spatial Reference Systems</a></li>
<li><a href="#_contents">1.1.3. Contents</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_options">2. Options</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#features">2.1. Features</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#sfsql_intro">2.1.1. Simple Features SQL Introduction</a></li>
<li><a href="#_contents_2">2.1.2. Contents</a></li>
<li><a href="#gpb_format">2.1.3. Geometry Encoding</a></li>
<li><a href="#sql_geometry_types">2.1.4. SQL Geometry Types</a></li>
<li><a href="#_geometry_columns">2.1.5. Geometry Columns</a></li>
<li><a href="#feature_user_tables">2.1.6. Vector Feature User Data Tables</a></li>
</ul>
</li>
<li><a href="#tiles">2.2. Tiles</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_tile_matrix_introduction">2.2.1. Tile Matrix Introduction</a></li>
<li><a href="#_contents_3">2.2.2. Contents</a></li>
<li><a href="#zoom_levels">2.2.3. Zoom Levels</a></li>
<li><a href="#tile_enc_png">2.2.4. Tile Encoding PNG</a></li>
<li><a href="#tile_enc_jpeg">2.2.5. Tile Encoding JPEG</a></li>
<li><a href="#_tile_matrix_set">2.2.6. Tile Matrix Set</a></li>
<li><a href="#tile_matrix">2.2.7. Tile Matrix</a></li>
<li><a href="#tiles_user_tables">2.2.8. Tile Pyramid User Data Tables</a></li>
</ul>
</li>
<li><a href="#_schema">2.3. Schema</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_schema_introduction">2.3.1. Schema Introduction</a></li>
<li><a href="#_data_columns">2.3.2. Data Columns</a></li>
<li><a href="#_data_column_constraints">2.3.3. Data Column Constraints</a></li>
</ul>
</li>
<li><a href="#_metadata">2.4. Metadata</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_introduction_2">2.4.1. Introduction</a></li>
<li><a href="#_metadata_table">2.4.2. Metadata Table</a></li>
<li><a href="#_metadata_reference_table">2.4.3. Metadata Reference Table</a></li>
</ul>
</li>
<li><a href="#_extension_mechanism">2.5. Extension Mechanism</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_introduction_3">2.5.1. Introduction</a></li>
<li><a href="#_extensions">2.5.2. Extensions</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_security_considerations">3. Security Considerations</a></li>
<li><a href="#abstract_test_suite"> Annex A: Conformance / Abstract Test Suite (Normative)</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_base_2">A.1. Base</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_core_2">A.1.1. Core</a></li>
</ul>
</li>
<li><a href="#_options_2">A.2. Options</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_features">A.2.1. Features</a></li>
<li><a href="#_tiles">A.2.2. Tiles</a></li>
<li><a href="#_schema_2">A.2.3. Schema</a></li>
<li><a href="#_metadata_2">A.2.4. Metadata</a></li>
<li><a href="#_extension_mechanism_2">A.2.5. Extension Mechanism</a></li>
</ul>
</li>
<li><a href="#_registered_extensions">A.3. Registered Extensions</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_features_2">A.3.1. Features</a></li>
<li><a href="#_tiles_2">A.3.2. Tiles</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#background_and_context"> Annex B: Background and Context (Normative)</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_background">B.1. Background</a></li>
<li><a href="#_document_terms_and_definitions">B.2. Document terms and definitions</a></li>
<li><a href="#_conventions">B.3. Conventions</a></li>
<li><a href="#_submitting_organizations_informative">B.4. Submitting Organizations (Informative)</a></li>
<li><a href="#_document_contributor_contact_points_informative">B.5. Document contributor contact points (Informative)</a></li>
<li><a href="#_revision_history_informative">B.6. Revision History (Informative)</a></li>
<li><a href="#_changes_to_the_ogc_abstract_specification">B.7. Changes to the OGC® Abstract Specification</a></li>
<li><a href="#_changes_to_ogc_implementation_standards">B.8. Changes to OGC® Implementation Standards</a></li>
<li><a href="#_potential_future_work_informative">B.9. Potential Future Work (Informative)</a></li>
<li><a href="#_uml_notation">B.10. UML Notation</a></li>
<li><a href="#_geopackage_tables_detailed_diagram">B.11. GeoPackage Tables Detailed Diagram</a></li>
<li><a href="#_geopackage_minimal_tables_for_features_diagram">B.12. GeoPackage Minimal Tables for Features Diagram</a></li>
<li><a href="#_geopackage_minimal_tables_for_tiles_diagram">B.13. GeoPackage Minimal Tables for Tiles Diagram</a></li>
</ul>
</li>
<li><a href="#table_definition_sql"> Annex C: Table Definition SQL (Normative)</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_gpkg_spatial_ref_sys">C.1. gpkg_spatial_ref_sys</a></li>
<li><a href="#_gpkg_contents">C.2. gpkg_contents</a></li>
<li><a href="#_gpkg_geometry_columns">C.3. gpkg_geometry_columns</a></li>
<li><a href="#_sample_feature_table_informative">C.4. sample_feature_table (Informative)</a></li>
<li><a href="#_gpkg_tile_matrix_set">C.5. gpkg_tile_matrix_set</a></li>
<li><a href="#_gpkg_tile_matrix">C.6. gpkg_tile_matrix</a></li>
<li><a href="#_sample_tile_pyramid_informative">C.7. sample_tile_pyramid (Informative)</a></li>
<li><a href="#_gpkg_data_columns">C.8. gpkg_data_columns</a></li>
<li><a href="#_gpkg_data_column_constraints">C.9. gpkg_data_column_constraints</a></li>
<li><a href="#_gpkg_metadata">C.10. gpkg_metadata</a></li>
<li><a href="#_gpkg_metadata_reference">C.11. gpkg_metadata_reference</a></li>
<li><a href="#_gpkg_extensions">C.12. gpkg_extensions</a></li>
</ul>
</li>
<li><a href="#_trigger_definition_sql_informative"> Annex D: Trigger Definition SQL (Informative)</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_gpkg_tile_matrix_2">D.1. gpkg_tile_matrix</a></li>
<li><a href="#_metadata_3">D.2. metadata</a></li>
<li><a href="#_metadata_reference">D.3. metadata_reference</a></li>
<li><a href="#_sample_feature_table">D.4. sample_feature_table</a></li>
<li><a href="#_sample_tile_pyramid">D.5. sample_tile_pyramid</a></li>
</ul>
</li>
<li><a href="#geometry_types"> Annex E: Geometry Types (Normative)</a></li>
<li><a href="#tiles_factor2_example_appendix"> Annex F: Tiles Zoom Times Two Example (Informative)</a></li>
<li><a href="#metadata_example_appendix"> Annex G: Hierarchical Metadata Example (Informative)</a></li>
<li><a href="#raster_or_tile_metadata_example_appendix"> Annex H: Raster or Tile Metadata Example (Informative)</a></li>
<li><a href="#extension_template"> Annex I: GeoPackage Extension Template (Normative)</a></li>
<li><a href="#registered_extensions"> Annex J: Registered Extensions</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_features_3">J.1. Features</a></li>
<li><a href="#gpkg_geometry_types_extension">J.2. GeoPackage Geometry Types Extension</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_data_48">J.2.1. Data</a></li>
</ul>
</li>
<li><a href="#extension_geometry_types">J.3. GeoPackage Geometry Types Extension Template (Normative)</a></li>
<li><a href="#gpkg_user_geometry_types_extension">J.4. User-Defined Geometry Types Extension</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_data_49">J.4.1. Data</a></li>
</ul>
</li>
<li><a href="#extension_geometry_encoding">J.5. User-Defined Geometry Types Encoding Extension Template (Normative)</a></li>
<li><a href="#_rtree_spatial_indexes">J.6. RTree Spatial Indexes</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_data_50">J.6.1. Data</a></li>
</ul>
</li>
<li><a href="#extension_rtree">J.7. RTree Spatial Index Extension (Normative)</a></li>
<li><a href="#_geometry_type_triggers_2">J.8. Geometry Type Triggers</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_data_51">J.8.1. Data</a></li>
</ul>
</li>
<li><a href="#extension_geometry_type_triggers">J.9. Geometry Type Triggers Extension (Normative)</a></li>
<li><a href="#_srs_id_triggers_2">J.10. SRS_ID Triggers</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_data_52">J.10.1. Data</a></li>
</ul>
</li>
<li><a href="#extension_geometry_srsid_triggers">J.11. Geometry SRS ID Triggers Extension (Normative)</a></li>
<li><a href="#_tiles_3">J.12. Tiles</a></li>
<li><a href="#_zoom_levels_3">J.13. Zoom Levels</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_data_53">J.13.1. Data</a></li>
</ul>
</li>
<li><a href="#extension_zoom_other_intervals">J.14. Zoom Other Intervals Extension (Normative)</a></li>
<li><a href="#tile_enc_webp">J.15. Tile Encoding WEBP</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_data_54">J.15.1. Data</a></li>
<li><a href="#_webp_mime_type">J.15.2. WEBP MIME Type</a></li>
</ul>
</li>
<li><a href="#extension_tiles_webp">J.16. Tiles Encoding WebP Extension (Normative)</a></li>
</ul>
</li>
<li><a href="#_normative_references_normative"> Annex K: Normative References (Normative)</a></li>
<li><a href="#_bibliography_informative"> Annex L: Bibliography (Informative)</a></li>
</ul>
</li>
</ul>
</div>

</div>
</div>
<div class="sect1">
<h2 id="_introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Mobile device users who require map/geospatial application services and operate in disconnected or limited network connectivity environments are challenged by limited storage capacity and the lack of open format geospatial data to support these applications.
The current situation is that each map/geospatial application requires its own potentially proprietary geospatial data store.
These separate application-specific data stores may contain the same geospatial data, wasting the limited storage available, and requiring custom applications for data translation, replication, and synchronization to enable different map/geospatial applications to share the same world view. In addition, many existing geospatial data stores are platform-specific, which means that users with different platforms must translate data to share it.</p>
</div>
<div class="paragraph">
<p>An open, standards-based, application-independent, platform-independent, portable, interoperable, self-describing, GeoPackage (GPKG) data container, API and manifest are needed to overcome these challenges and to effectively support multiple map/geospatial applications such as fixed product distribution, local data collection, and geospatially enabled analytics.
This standard is intended to facilitate widespread adoption and use of GeoPackages by both COTS and open-source software applications on enterprise production platforms as well as mobile hand-held devices <a href="#B1">[B1]</a> <a href="#B2">[B2]</a>, given that mobile hand held devices do not yet have the processing power or battery life to effectively tackle difficult geospatial product production and analysis tasks.
An application that accesses a GPKG will make use of the GPKG capabilities it requires; few if any such applications will make use of all GPKG capabilities.</p>
</div>
<div class="paragraph">
<p>This OGC® Encoding Standard defines GeoPackages for exchange and GeoPackage SQLite Extensions for direct use of vector geospatial features and / or tile matrix sets of earth images and raster maps at various scales.
Direct use means the ability to access and update data in a “native” format without intermediate format translations in an environment (e.g. through an API) that guarantees data model and data set integrity and identical access and update results in response to identical requests from different client applications.</p>
</div>
<div class="paragraph">
<p>A <strong>GeoPackage</strong> is a platform-independent SQLite <a href="#5">[5]</a> database file that contains GeoPackage data and metadata tables shown in <a href="#geopackage_tables_figure">GeoPackage Tables Overview</a> below, with specified definitions, integrity assertions, format limitations and content constraints.
The allowable content of a GeoPackage is entirely defined in this standard.</p>
</div>
<div class="paragraph">
<p>An <strong>Extended GeoPackage</strong> is a <strong>GeoPackage</strong> that contains any additional data elements (tables or columns) or SQL constructs (data types, functions, indexes, constraints or triggers) that are not specified in this encoding standard.</p>
</div>
<div class="paragraph">
<p>A <strong>GeoPackage</strong> MAY be “empty” (contain user data table(s) for vector features and/or tile matrix pyramids with no row record content) or contain one or many vector feature type records and /or one or many tile matrix pyramid tile images.
GeoPackage metadata CAN describe GeoPackage data contents and identify external data synchronization sources and targets.
A GeoPackage MAY contain spatial indexes on feature geometries and SQL triggers to maintain indexes and enforce content constraints.</p>
</div>
<div class="paragraph">
<p>A <strong>GeoPackage SQLite Configuration</strong> consists of the SQLite 3 software library and a set of compile- and runtime configurations options.</p>
</div>
<div class="paragraph">
<p>A <strong>GeoPackage SQLite Extension</strong> is a SQLite loadable extension that MAY provide SQL functions <a href="#12">[12]</a> to support spatial indexes and SQL triggers linked to a SQLite library with specified configuration requirements to provide SQL API <a href="#1">[1]</a> <a href="#2">[2]</a> <a href="#3">[3]</a> <a href="#4">[4]</a> access to a GeoPackage file. This standard does not address the issues listed in the <a href="#_potential_future_work">[_potential_future_work]</a> clause in <a href="#background_and_context">Background and Context (Normative)</a>, which MAY be addressed in a subsequent version of this standard or by other specifications.</p>
</div>
<div id="geopackage_tables_figure" class="imageblock">
<div class="content">
<img src="geopackage-overview.png" alt="GeoPackage Tables">
</div>
<div class="title">Figure 1. GeoPackage Tables Overview</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_base">1. Base</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The required capabilities specified in this clause serve as the base for options specified in clause <a href="#_options">Options</a> and extensions specified in clause <a href="#_registered_extensions">Registered Extensions</a>.
All gpkg_* tables and views and all tiles user data tables specified in this standard SHALL have only the specified columns and table constraints. Any features user data tables MAY have columns in addition to those specified.
All specified table, view, column, trigger, and constraint name values SHALL be lowercase.</p>
</div>
<div class="sect2">
<h3 id="_core">1.1. Core</h3>
<div class="paragraph">
<p>The mandatory core capabilities defined in sub clauses and requirement statements of this clause SHALL be implemented by every <strong>GeoPackage</strong> and <strong>GeoPackage SQLite Configuration</strong>.</p>
</div>
<div class="sect3">
<h4 id="_sqlite_container">1.1.1. SQLite Container</h4>
<div class="paragraph">
<p>The SQLite software library provides a self-contained, single-file, cross-platform, serverless, transactional, open source RDBMS container.
The GeoPackage standard defines a SQL database schema designed for use with the SQLite software library.
Using SQLite as the basis for GeoPackage simplifies production, distribution and use of GeoPackages and assists in guaranteeing the integrity of the data they contain.</p>
</div>
<div class="paragraph">
<p>“Self-contained” means that container software requires very minimal support from external libraries or from the operating system.
“Single-file” means that a container not currently opened by any software application consists of a single file in a file system supported by a computing platform operating system.
“Cross-platform” means that a container file MAY be created and loaded with data on one computing platform, and used and updated on another, even if they use different operating systems, file systems, and byte order (endian) conventions.
“Serverless” means that the RDBMS container is implemented without any intermediary server process, and accessed directly by application software.
“Transactional” means that RDBMS transactions guarantee that all changes to data in the container are Atomic, Consistent, Isolated, and Durable (ACID) despite program crashes, operating system crashes, and power failures.</p>
</div>
<div class="sect4">
<h5 id="_data">1.1.1.1. Data</h5>
<div class="sect5">
<h6 id="_file_format">1.1.1.1.1. File Format</h6>
<div id="_requirement-1" class="quoteblock">
<div class="title">Requirement 1</div>
<blockquote>
A GeoPackage SHALL be a <a href="http://www.sqlite.org/">SQLite</a> <a href="#5">[5]</a> database file using <a href="http://sqlite.org/fileformat2.html">version 3 of the SQLite file format</a> <a href="#6">[6]</a> <a href="#7">[7]</a>.
The first 16 bytes of a GeoPackage SHALL contain “SQLite format 3” <span class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnote_1" title="View footnote.">1</a>]</span> in ASCII <a href="#B4">[B4]</a>. <span class="footnote">[<a id="_footnoteref_2" class="footnote" href="#_footnote_2" title="View footnote.">2</a>]</span>
</blockquote>
</div>
<div id="_requirement-2" class="quoteblock">
<div class="title">Requirement 2</div>
<blockquote>
A GeoPackage SHALL contain 0x47503130 ("GP10" in ASCII) in the application id field of the SQLite database header to indicate a GeoPackage version 1.0 file. <span class="footnote">[<a id="_footnoteref_3" class="footnote" href="#_footnote_3" title="View footnote.">3</a>]</span>
</blockquote>
</div>
<div class="paragraph">
<p>The maximum size of a GeoPackage file is about 140TB.
In practice a lower size limit MAY be imposed by the filesystem to which the file is written.
Many mobile devices require external memory cards to be formatted using the FAT32 file system which imposes a maximum size limit of 4GB.</p>
</div>
</div>
<div class="sect5">
<h6 id="_file_extension_name">1.1.1.1.2. File Extension Name</h6>
<div id="_requirement-3" class="quoteblock">
<div class="title">Requirement 3</div>
<blockquote>
A GeoPackage SHALL have the file extension name “.gpkg”.
</blockquote>
</div>
<div class="paragraph">
<p>It is RECOMMENDED that Extended GeoPackages use the file extension “.gpkx”, but this is NOT a GeoPackage requirement.</p>
</div>
</div>
<div class="sect5">
<h6 id="_file_contents">1.1.1.1.3. File Contents</h6>
<div id="_requirement-4" class="quoteblock">
<div class="title">Requirement 4</div>
<blockquote>
A GeoPackage SHALL only contain data elements, SQL constructs and GeoPackage extensions with the “gpkg” author name specified in this encoding standard.
</blockquote>
</div>
<div class="paragraph">
<p>In order to guarantee maximum interoperability between applications, GeoPackages SHALL NOT contain data elements (tables or columns), SQL constructs (data types, indexes, constraints or triggers) or extensions that are not specified in this encoding standard.
SQLite databases that use constructs from the GeoPackage standard but extend those constructs to contain elements not specified in the core GeoPackage standard are referred to as Extended GeoPackages throughout this standard.</p>
</div>
<div id="_requirement-5" class="quoteblock">
<div class="title">Requirement 5</div>
<blockquote>
The columns of tables in a GeoPackage SHALL only be declared using one of the data types specified in table <a href="#table_column_data_types">GeoPackage Data Types</a>.
</blockquote>
</div>
<table id="table_column_data_types" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 1. GeoPackage Data Types</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Data Type</th>
<th class="tableblock halign-left valign-top">Size and Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BOOLEAN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A boolean value representing true or false. Stored as SQLite INTEGER with value 0 for false or 1 for true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TINYINT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8-bit signed two&#8217;s complement integer. Stored as SQLite INTEGER with values in the range [-128, 127]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMALLINT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16-bit signed two&#8217;s complement integer. Stored as SQLite INTEGER with values in the range [-32768, 32767]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MEDIUMINT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32-bit signed two&#8217;s complement integer. Stored as SQLite INTEGER with values in the range [-2147483648, 2147483647]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">INT, INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64-bit signed two&#8217;s complement integer. Stored as SQLite INTEGER with values in the range [-9223372036854775808, 9223372036854775807]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">FLOAT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32-bit IEEE floating point number. Stored as SQLite REAL limited to values that can be represented as a 4-byte IEEE floating point number</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOUBLE, REAL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64-bit IEEE floating point number. Stored as SQLite REAL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT{(maxchar_count)}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Variable length string encoded in either UTF-8 or UTF-16, determined by PRAGMA encoding; see <a href="http://www.sqlite.org/pragma.html#pragma_encoding">http://www.sqlite.org/pragma.html#pragma_encoding</a>. The optional maxchar_count defines the maximum number of characters in the string. If not specified, the length is unbounded. The count is provided for informational purposes, and applications MAY choose to truncate longer strings if encountered. When present, it is best practice for applications to adhere to the character count. Stored as SQLite TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BLOB{(max_size)}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Variable length binary data. The optional max_size defines the maximum number of bytes in the blob. If not specified, the length is unbounded. The size is provided for informational purposes. When present, it is best practice for applications adhere to the maximum blob size. Stored as SQLite BLOB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;geometry_type_name&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Geometry encoded as per clause <a href="#_geometry_encoding">Geometry Encoding</a>. &lt;geometry type_name&gt; is one of the geometry types listed in <a href="#geometry_types">Geometry Types (Normative)</a> encoded per clause 2.1.3 or a user-defined geometry type encoded per clause 3.1.2 and <a href="#extension_geometry_encoding">User-Defined Geometry Types Encoding Extension Template (Normative)</a>. Geometry Types XY, XYZ, XYM and XYZM geometries use the same data type. Stored as SQLite BLOB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DATE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO-8601 date string in the form YYYY-MM-DD encoded in either UTF-8 or UTF-16. See TEXT. Stored as SQLite TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DATETIME</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO-8601 date/time string in the form YYYY-MM-DDTHH:MM:SS.SSSZ with T separator character and Z suffix for coordinated universal time (UTC) encoded in either UTF-8 or UTF-16. See TEXT. Stored as SQLite TEXT</p></td>
</tr>
</tbody>
</table>

</div>
<div class="sect5">
<h6 id="_file_integrity">1.1.1.1.4. File Integrity</h6>
<div id="_requirement-6" class="quoteblock">
<div class="title">Requirement 6</div>
<blockquote>
The SQLite PRAGMA integrity_check SQL command SHALL return “ok” for a GeoPackage file. <span class="footnote">[<a id="_footnoteref_4" class="footnote" href="#_footnote_4" title="View footnote.">4</a>]</span>
</blockquote>
</div>
<div id="_requirement-7" class="quoteblock">
<div class="title">Requirement 7</div>
<blockquote>
The SQLite PRAGMA foreign_key_check SQL with no parameter value SHALL return an empty result set indicating no invalid foreign key values for a GeoPackage file.
</blockquote>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_api">1.1.1.2. API</h5>
<div class="sect5">
<h6 id="api_sql">1.1.1.2.1. Structured Query Language (SQL)</h6>
<div id="_requirement-8" class="quoteblock">
<div class="title">Requirement 8</div>
<blockquote>
A GeoPackage SQLite Configuration SHALL provide SQL access to GeoPackage contents via <a href="http://www.sqlite.org/download.html">SQLite version 3</a> <a href="#6">[6]</a> software APIs. <span class="footnote">[<a id="_footnoteref_5" class="footnote" href="#_footnote_5" title="View footnote.">5</a>]</span>
</blockquote>
</div>
</div>
<div class="sect5">
<h6 id="_every_gpkg_sqlite_configuration">1.1.1.2.2. Every GPKG SQLite Configuration</h6>
<div class="paragraph">
<p>The <a href="http://www.sqlite.org/download.html">SQLite</a> <a href="#8">[8]</a> library has many <a href="http://www.sqlite.org/compile.html">compile time</a> and <a href="http://www.sqlite.org/pragma.html">run time</a> options that MAY be used to configure SQLite for different uses. Certain elements of the GeoPackage specification depend on the availability of SQLite functionality at runtime. This clause specifies the set of compile  time options that SHALL or SHALL NOT be used.</p>
</div>
<div id="_requirement-9" class="quoteblock">
<div class="title">Requirement 9</div>
<blockquote>
Every GeoPackage SQLite Configuration SHALL have the SQLite library compile time options specified in clause 1.1.1.2.2 table <a href="#every_gpkg_sqlite_config_table">Every GeoPackage SQLite Configuration</a>.
</blockquote>
</div>
<table id="every_gpkg_sqlite_config_table" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 2. Every GeoPackage SQLite Configuration</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Option</th>
<th class="tableblock halign-left valign-top">Shall / Not</th>
<th class="tableblock halign-left valign-top">Discussion</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">compile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQLITE_OMIT_*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SHALL NOT include any OMIT options from <a href="http://www.sqlite.org/compile.html#omitfeatures">http://www.sqlite.org/compile.html#omitfeatures</a>.</p></td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="sect3">
<h4 id="spatial_ref_sys">1.1.2. Spatial Reference Systems</h4>
<div class="sect4">
<h5 id="_data_2">1.1.2.1. Data</h5>
<div class="sect5">
<h6 id="spatial_ref_sys_data_table_definition">1.1.2.1.1. Table Definition</h6>
<div id="_requirement-10" class="quoteblock">
<div class="title">Requirement 10</div>
<blockquote>
A GeoPackage SHALL include a <code>gpkg_spatial_ref_sys</code> table per clause 1.1.2.1.1 <a href="#spatial_ref_sys_data_table_definition">Table Definition</a>, Table <a href="#gpkg_spatial_ref_sys_cols">Spatial Ref Sys Table Definition</a> and Table <a href="#gpkg_spatial_ref_sys_sql">gpkg_spatial_ref_sys Table Definition SQL</a>.
</blockquote>
</div>
<div class="paragraph">
<p>A table named <code>gpkg_spatial_ref_sys</code> is the first component of the standard SQL schema for simple features described in clause <a href="#sfsql_intro">Simple Features SQL Introduction</a> below.
The coordinate reference system definitions it contains are referenced by the GeoPackage <code>gpkg_contents</code> and <code>gpkg_geometry_columns</code> tables to relate the vector and tile data in user tables to locations on the earth.</p>
</div>
<div class="paragraph">
<p>The <code>gpkg_spatial_ref_sys</code> table includes the columns specified in SQL/MM (ISO 13249-3) <a href="#12">[12]</a> and shown in <a href="#gpkg_spatial_ref_sys_cols">Spatial Ref Sys Table Definition</a> below containing data that defines spatial reference systems.
Views of this table MAY be used to provide compatibility with the <a href="http://www.iso.org/iso/home/store/catalogue_ics/catalogue_detail_ics.htm?csnumber=53698">SQL/MM</a> <a href="#12">[12]</a> (see <a href="#sqlmm_gpkg_spatial_ref_sys_sql">SQL/MM View of gpkg_spatial_ref_sys Definition SQL (Informative)</a>) and OGC <a href="http://portal.opengeospatial.org/files/?artifact_id=25354">Simple Features SQL</a> <a href="#9">[9]</a><a href="#10">[10]</a><a href="#11">[11]</a> (Table 21) specifications.</p>
</div>
<table id="gpkg_spatial_ref_sys_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 3. Spatial Ref Sys Table Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Column Type</th>
<th class="tableblock halign-left valign-top">Column Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>srs_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Human readable name of this SRS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>srs_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique identifier for each Spatial Reference System within a GeoPackage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>organization</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Case-insensitive name of the defining organization e.g. EPSG or epsg</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>organization_coordsys_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Numeric ID of the Spatial Reference System assigned by the organization</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>definition</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Well-known Text <a href="#32">[32]</a> Representation of the Spatial Reference System</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Human readable description of this SRS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>See <a href="#gpkg_spatial_ref_sys_sql">gpkg_spatial_ref_sys Table Definition SQL</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_table_data_values">1.1.2.1.2. Table Data Values</h6>
<div class="paragraph">
<p>Definition column WKT values in the <code>gpkg_spatial_ref_sys</code> table SHALL define the Spatial Reference Systems used by feature geometries and tile images, unless these SRS are unknown and therefore undefined as specified in <a href="#_requirement-11">Requirement 11</a>. Values SHALL be constructed per the EBNF syntax in <a href="#32">[32]</a> clause 7. EBNF name and number values MAY be obtained from any specified authority, e.g. <a href="#13">[13]</a><a href="#14">[14]</a>. For example, see the return value in <a href="#spatial_ref_sys_data_values_default">[spatial_ref_sys_data_values_default]</a> Test Method step (3) used to test the definition for WGS-84 per <a href="#_requirement-11">Requirement 11</a>:</p>
</div>
<div id="_requirement-11" class="quoteblock">
<div class="title">Requirement 11</div>
<blockquote>
The <code>gpkg_spatial_ref_sys</code> table SHALL contain at a minimum the records listed in <a href="#gpkg_spatial_ref_sys_records">Spatial Ref Sys Table Records</a>. The record with an <code>srs_id</code> of 4326 SHALL correspond to <a href="http://www.google.com/search?as_q=WGS-84">WGS-84</a> <a href="#15">[15]</a> as defined by  <a href="http://www.epsg.org/Geodetic.html">EPSG</a> <a href="#B3">[B3]</a> in <a href="http://www.epsg-registry.org/report.htm?type=selection&amp;entity=urn:ogc:def:crs:EPSG::4326&amp;reportDetail=long&amp;title=WGS%2084&amp;style=urn:uuid:report-style:default-with-code&amp;style_name=OGP%20Default%20With%20Code">4326</a> <a href="#13">[13]</a><a href="#14">[14]</a>. The record with an <code>srs_id</code> of -1 SHALL be used for undefined Cartesian coordinate reference systems. The record with an <code>srs_id</code> of 0 SHALL be used for undefined geographic coordinate reference systems.
</blockquote>
</div>
<table id="gpkg_spatial_ref_sys_records" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 4. Spatial Ref Sys Table Records</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code>srs_name</code></th>
<th class="tableblock halign-left valign-top"><code>srs_id</code></th>
<th class="tableblock halign-left valign-top"><code>organization</code></th>
<th class="tableblock halign-left valign-top"><code>organization_coordsys_id</code></th>
<th class="tableblock halign-left valign-top"><code>definition</code></th>
<th class="tableblock halign-left valign-top"><code>description</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">any</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4326</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EPSG</code> or <code>epsg</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4326</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">any</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">any</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">any</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NONE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>undefined</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">any</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">any</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NONE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>undefined</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">any</p></td>
</tr>
</tbody>
</table>

<div id="_requirement-12" class="quoteblock">
<div class="title">Requirement 12</div>
<blockquote>
The <code>gpkg_spatial_ref_sys</code> table in a GeoPackage SHALL contain records to define all spatial reference systems used by features and tiles in a GeoPackage.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_contents">1.1.3. Contents</h4>
<div class="sect4">
<h5 id="_data_3">1.1.3.1. Data</h5>
<div class="sect5">
<h6 id="_table_definition">1.1.3.1.1. Table Definition</h6>
<div id="_requirement-13" class="quoteblock">
<div class="title">Requirement 13</div>
<blockquote>
A GeoPackage file SHALL include a <code>gpkg_contents</code> table per table <a href="#gpkg_contents_cols">Contents Table or View Definition</a> and <a href="#gpkg_contents_sql">gpkg_contents Table Definition SQL</a>.
</blockquote>
</div>
<div class="paragraph">
<p>The purpose of the <code>gpkg_contents</code> table is to provide identifying and descriptive information that an application can display to a user in a menu of geospatial data that is available for access and/or update.</p>
</div>
<table id="gpkg_contents_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 5. Contents Table or View Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>table_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the tiles, or feature table</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>data_type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type of data stored in the table:. “features” per clause <a href="#features">Features</a>, “tiles” per clause <a href="#tiles">Tiles</a>, or an implementer-defined value for other data tables per clause in an Extended GeoPackage.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>identifier</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A human-readable identifier (e.g. short name) for the table_name content</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A human-readable description for the table_name content</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">''</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>last_change</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DATETIME</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">timestamp value in ISO 8601 format as defined by the strftime function <em>%Y-%m-%dT%H:%M:%fZ</em> format string applied to the current time</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>strftime('%Y-%m-%dT%H:%M:%fZ', 'now')</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>min_x</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOUBLE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bounding box minimum easting or longitude for all content in table_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>min_y</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOUBLE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bounding box minimum northing or latitude for all content in table_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>max_x</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOUBLE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bounding box maximum easting or longitude for all content in table_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>max_y</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOUBLE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bounding box maximum northing or latitude for all content in table_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>srs_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spatial Reference System ID: <code>gpkg_spatial_ref_sys.srs_id</code>; when <code>data_type</code> is features, SHALL also match <code>gpkg_geometry_columns.srs_id</code>; When data_type is tiles, SHALL also match <code>gpkg_tile_matrix_set.srs_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FK</p></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>The <code>gpkg_contents</code> table is intended to provide a list of all geospatial contents in a GeoPackage.
The <code>data_type</code> specifies the type of content.
The bounding box (<code>min_x</code>, <code>min_y</code>, <code>max_x</code>, <code>max_y</code>) provides an informative bounding box (not necessarily minimum bounding box) of the content.
If the <code>srs_id</code> column value references a geographic coordinate reference system (CRS), then the min/max x/y values are in decimal degrees; otherwise, the srs_id references a projected CRS and the min/max x/y values are in the units specified by that CRS.</p>
</div>
<div class="paragraph">
<p>See <a href="#gpkg_contents_sql">gpkg_contents Table Definition SQL</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_table_data_values_2">1.1.3.1.2. Table Data Values</h6>
<div id="_requirement-14" class="quoteblock">
<div class="title">Requirement 14</div>
<blockquote>
The <code>table_name</code> column value in a <code>gpkg_contents</code> table row SHALL contain the name of a SQLite table or view.
</blockquote>
</div>
<div id="_requirement-15" class="quoteblock">
<div class="title">Requirement 15</div>
<blockquote>
Values of the <code>gpkg_contents</code> table <code>last_change</code> column SHALL be in <a href="http://www.iso.org/iso/catalogue_detail?csnumber=40874">ISO 8601</a> <a href="#29">[29]</a> format containing a complete date plus UTC hours, minutes, seconds and a decimal fraction of a second, with a ‘Z’ (‘zulu’) suffix indicating UTC. <span class="footnote">[<a id="_footnoteref_6" class="footnote" href="#_footnote_6" title="View footnote.">6</a>]</span>
</blockquote>
</div>
<div id="_requirement-16" class="quoteblock">
<div class="title">Requirement 16</div>
<blockquote>
Values of the <code>gpkg_contents</code> table <code>srs_id</code> column SHALL reference values in the <code>gpkg_spatial_ref_sys</code> table <code>srs_id</code> column.
</blockquote>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_options">2. Options</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The optional capabilities specified in this clause depend on the required capabilities specified in clause <a href="#_base">Base</a> above.
Each subclause of this clause defines an indivisible module of functionality that can be used in GeoPackages. These modules are referred to as options.
GeoPackages MAY use one or more options defined in this section.
GeoPackages MAY omit the tables for options that are not used.
As a minimum, a GeoPackage SHALL contain one user data table as defined by the Features or Tiles options in clauses <a href="#features">Features</a> and <a href="#tiles">Tiles</a> respectively.</p>
</div>
<div id="_requirement-17" class="quoteblock">
<div class="title">Requirement 17</div>
<blockquote>
A GeoPackage SHALL contain features per clause <a href="#features">Features</a> and/or tiles per clause <a href="#tiles">Tiles</a> and row(s) in the <code>gpkg_contents</code> table with lowercase <code>data_type</code> column values of “features” and/or “tiles” describing the user data tables.
</blockquote>
</div>
<div class="sect2">
<h3 id="features">2.1. Features</h3>
<div class="sect3">
<h4 id="sfsql_intro">2.1.1. Simple Features SQL Introduction</h4>
<div class="paragraph">
<p>Vector feature data represents geolocated entities including conceptual ones such as districts, real world objects such as roads and rivers, and observations thereof.
International standards <a href="#9">[9]</a><a href="#10">[10]</a><a href="#11">[11]</a><a href="#12">[12]</a> have standardized practices for the storage, access and use of vector geospatial features and geometries via SQL in relational databases.
The first component of the SQL schema for vector features in a GeoPackage is the <code>gpkg_spatial_ref_sys</code> table defined in clause <a href="#spatial_ref_sys">Spatial Reference Systems</a> above.
Other components are defined below.</p>
</div>
<div class="paragraph">
<p>In a GeoPackage, “simple” features are geolocated using a linear geometry subset of the SQL/MM (ISO 13249-3) <a href="#12">[12]</a> geometry model shown in <a href="#core_geometry_model_figure">Core Geometry Model</a> below.</p>
</div>
<div id="core_geometry_model_figure" class="imageblock">
<div class="content">
<img src="core-geometry-model.png" alt="Core geometry model">
</div>
<div class="title">Figure 2. Core Geometry Model</div>
</div>
<div class="paragraph">
<p>The instantiable (not abstract) geometry types defined in this Standard are restricted to 0, 1 and 2-dimensional geometric objects that exist in 2, 3 or 4-dimensional coordinate space (R2, R3 or R4).
Geometry values in R2 have points with coordinate values for x and y.
Geometry values in R3 have points with coordinate values for x, y and z or for x, y and m.
Geometry values in R4 have points with coordinate values for x, y, z and m.
The interpretation of the coordinates is subject to the coordinate reference systems associated to the point.
All coordinates within a geometry object should be in the same coordinate reference systems.</p>
</div>
<div class="paragraph">
<p>Geometries MAY include z coordinate values.
The z coordinate value traditionally represents the third dimension (i.e. 3D).
In a Geographic Information System (GIS) this may be height above or below sea level.
For example: A map might have a point identifying the position of a mountain peak by its location on the earth, with the x and y coordinate values, and the height of the mountain, with the z coordinate value.</p>
</div>
<div class="paragraph">
<p>Geometries MAY include m coordinate values.
The m coordinate value allows the application environment to associate some measure with the point values.
For example: A stream network may be modeled as multilinestring value with the m coordinate values measuring the distance from the mouth of stream.</p>
</div>
<div class="paragraph">
<p>All geometry types described in this standard are defined so that instances of Geometry are topologically closed, i.e. all represented geometries include their boundary as point sets.
This does not affect their representation, and open version of the same classes MAY be used in other circumstances, such as topological representations.</p>
</div>
<div class="paragraph">
<p>A brief description of each geometry type is provided below.
A more detailed description can be found in ISO 13249-3 <a href="#12">[12]</a>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Geometry: the root of the geometry type hierarchy.</p>
</li>
<li>
<p>Point: a single location in space.
Each point has an X and Y coordinate.
A point MAY optionally also have a Z and/or an M value.</p>
</li>
<li>
<p>Curve: the base type for all 1-dimensional geometry types.
A 1-dimensional geometry is a geometry that has a length, but no area.
A curve is considered simple if it does not intersect itself (except at the start and end point).
A curve is considered closed its start and end point are coincident.
A simple, closed curve is called a ring.</p>
</li>
<li>
<p>LineString: A Curve that connects two or more points in space.</p>
</li>
<li>
<p>Surface: the base type for all 2-dimensional geometry types.
A 2-dimensional geometry is a geometry that has an area.</p>
</li>
<li>
<p>CurvePolygon: A planar surface defined by an exterior ring and zero or more interior ring.
Each ring is defined by a Curve instance.</p>
</li>
<li>
<p>Polygon: A restricted form of CurvePolygon where each ring is defined as a simple, closed LineString.</p>
</li>
<li>
<p>GeometryCollection: A collection of zero or more Geometry instances. <span class="footnote">[<a id="_footnoteref_7" class="footnote" href="#_footnote_7" title="View footnote.">7</a>]</span></p>
</li>
<li>
<p>MultiSurface: A restricted form of GeometryCollection where each Geometry in the collection must be of type Surface.</p>
</li>
<li>
<p>MultiPolygon: A restricted form of MultiSurface where each Surface in the collection must be of type Polygon.</p>
</li>
<li>
<p>MultiCurve: A restricted form of GeometryCollection where each Geometry in the collection must be of type Curve.</p>
</li>
<li>
<p>MultiLineString: A restricted form of MultiCurve where each Curve in the collection must be of type LineString.</p>
</li>
<li>
<p>MultiPoint: A restricted form of GeometryCollection where each Geometry in the collection must be of type Point.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_contents_2">2.1.2. Contents</h4>
<div class="sect4">
<h5 id="_data_4">2.1.2.1. Data</h5>
<div class="sect5">
<h6 id="_contents_table_features_row">2.1.2.1.1. Contents Table – Features Row</h6>
<div id="_requirement-18" class="quoteblock">
<div class="title">Requirement 18</div>
<blockquote>
The <code>gpkg_contents</code> table SHALL contain a row with a lowercase <code>data_type</code> column value of “features” for each vector features user data table or view.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="gpb_format">2.1.3. Geometry Encoding</h4>
<div class="sect4">
<h5 id="_data_5">2.1.3.1. Data</h5>
<div class="sect5">
<h6 id="gpb_data_blob_format">2.1.3.1.1. BLOB Format</h6>
<div id="_requirement-19" class="quoteblock">
<div class="title">Requirement 19</div>
<blockquote>
A GeoPackage SHALL store feature table geometries with or without optional elevation (Z) and/or measure (M) values in SQL BLOBs using the Standard GeoPackageBinary format specified in table <a href="#gpb_spec">GeoPackage SQL Geometry Binary Format</a> and clause <a href="#gpb_data_blob_format">BLOB Format</a>.
</blockquote>
</div>
<div id="gpb_spec" class="listingblock">
<div class="title">GeoPackage SQL Geometry Binary Format</div>
<div class="content">
<pre>GeoPackageBinaryHeader {
  byte[2] magic = 0x4750; <i class="conum" data-value="1"></i><b>(1)</b>
  byte version;           <i class="conum" data-value="2"></i><b>(2)</b>
  byte flags;             <i class="conum" data-value="3"></i><b>(3)</b>
  int32 srs_id;
  double[] envelope;      <i class="conum" data-value="4"></i><b>(4)</b>
}

StandardGeoPackageBinary {
  GeoPackageBinaryHeader header; <i class="conum" data-value="5"></i><b>(5)</b>
  WKBGeometry geometry;          <i class="conum" data-value="6"></i><b>(6)</b>
}</pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><em>GP</em> in ASCII</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>8-bit unsigned integer, 0 = version 1</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>see <a href="#flags_layout">bit layout of GeoPackageBinary flags byte</a></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>see flags envelope contents indicator code below</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>The X bit in the header flags field must be set to 0.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>per  OGC 06-103r4 <a href="#9">[9]</a>  <span class="footnote">[<a id="_footnoteref_8" class="footnote" href="#_footnote_8" title="View footnote.">8</a>]</span><span class="footnote">[<a id="_footnoteref_9" class="footnote" href="#_footnote_9" title="View footnote.">9</a>]</span><span class="footnote">[<a id="_footnoteref_10" class="footnote" href="#_footnote_10" title="View footnote.">10</a>]</span></td>
</tr>
</table>
</div>
<table id="flags_layout" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 6. bit layout of GeoPackageBinary flags byte</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">bit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">use</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">E</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">E</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">E</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">B</p></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><strong>flag bits use:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>R: reserved for future use; set to 0</p>
</li>
<li>
<p>X: GeoPackageBinary type</p>
<div class="ulist">
<ul>
<li>
<p>0: StandardGeoPackageBinary. See below</p>
</li>
<li>
<p>1: ExtendedGeoPackageBinary. See <a href="#extension_geometry_encoding">User-Defined Geometry Types Encoding Extension Template (Normative)</a>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Y: empty geometry flag</p>
<div class="ulist">
<ul>
<li>
<p>0: non-empty geometry</p>
</li>
<li>
<p>1: empty geometry</p>
</li>
</ul>
</div>
</li>
<li>
<p>E: envelope contents indicator code (3-bit unsigned integer)</p>
<div class="ulist">
<ul>
<li>
<p>0: no envelope (space saving slower indexing option), 0 bytes</p>
</li>
<li>
<p>1: envelope is [minx, maxx, miny, maxy], 32 bytes</p>
</li>
<li>
<p>2: envelope is [minx, maxx, miny, maxy, minz, maxz], 48 bytes</p>
</li>
<li>
<p>3: envelope is [minx, maxx, miny, maxy, minm, maxm], 48 bytes</p>
</li>
<li>
<p>4: envelope is [minx, maxx, miny, maxy, minz, maxz, minm, maxm], 64 bytes</p>
</li>
<li>
<p>5-7: invalid</p>
</li>
</ul>
</div>
</li>
<li>
<p>B: byte order for header values (1-bit Boolean)</p>
<div class="ulist">
<ul>
<li>
<p>0: Big Endian (most significant byte first)</p>
</li>
<li>
<p>1: Little Endian (least significant byte first)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Well-Known Binary as defined in OGC 06-103r4 <a href="#9">[9]</a> does not provide a standardized encoding for an empty point set (i.e., <em>Point Empty</em> in Well-Known Text).
In GeoPackages these points SHALL be encoded as a Point where each coordinate value is set to an IEEE-754 quiet NaN value.
GeoPackages SHALL use big endian 0x7ff8000000000000 or little endian 0x000000000000f87f as the binary encoding of the NaN values.</p>
</div>
<div class="paragraph">
<p>When the WKBGeometry in a GeoPackageBinary is empty, either the envelope contents indicator code SHALL be 0 indicating no envelope, or the envelope SHALL have its values set to NaN as defined for an empty point.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="sql_geometry_types">2.1.4. SQL Geometry Types</h4>
<div class="sect4">
<h5 id="_data_6">2.1.4.1. Data</h5>
<div class="sect5">
<h6 id="_core_types">2.1.4.1.1. Core Types</h6>
<div id="_requirement-20" class="quoteblock">
<div class="title">Requirement 20</div>
<blockquote>
A GeoPackage SHALL store feature table geometries with the basic simple feature geometry types (Geometry, Point, LineString, Polygon, MultiPoint, MultiLineString, MultiPolygon, GeomCollection) in <a href="#geometry_types">Geometry Types (Normative)</a> <a href="#geometry_types_core">Geometry Type Codes (Core)</a> in the GeoPackageBinary geometry encoding format.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_geometry_columns">2.1.5. Geometry Columns</h4>
<div class="sect4">
<h5 id="_data_7">2.1.5.1. Data</h5>
<div class="sect5">
<h6 id="_table_definition_2">2.1.5.1.1. Table Definition</h6>
<div id="_requirement-21" class="quoteblock">
<div class="title">Requirement 21</div>
<blockquote>
A GeoPackage with a <code>gpkg_contents</code> table row with a “features” <code>data_type</code> SHALL contain a <code>gpkg_geometry_columns</code> table or updateable view per <a href="#gpkg_geometry_columns_cols">Geometry Columns Table or View Definition</a> and <a href="#gpkg_geometry_columns_sql">gpkg_geometry_columns Table Definition SQL</a>.
</blockquote>
</div>
<div class="paragraph">
<p>The second component of the SQL schema for vector features in a GeoPackage is a <code>gpkg_geometry_columns</code> table that
identifies the geometry columns and geometry types in tables that contain user data representing features.</p>
</div>
<table id="gpkg_geometry_columns_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 7. Geometry Columns Table or View Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>table_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the table containing the geometry column</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK, FK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>column_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of a column in the feature table that is a Geometry Column</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>geometry_type_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name from <a href="#geometry_types_core">Geometry Type Codes (Core)</a> or <a href="#geometry_types_extension">Geometry Type Codes (Extension)</a> in <a href="#geometry_types">Geometry Types (Normative)</a></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>srs_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spatial Reference System ID: <code>gpkg_spatial_ref_sys.srs_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>z</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TINYINT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0: z values prohibited; 1: z values mandatory; 2: z values optional</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>m</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TINYINT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0: m values prohibited; 1: m values mandatory; 2: m values optional</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>The FK on <code>gpkg_geometry_columns.srs_id</code> references the PK on <code>gpkg_spatial_ref_sys.srs_id</code> to ensure that geometry columns are only defined in feature tables for defined spatial reference systems.</p>
</div>
<div class="paragraph">
<p>Views of this table or view MAY be used to provide compatibility with the SQL/MM <a href="#12">[12]</a> <a href="#sqlmm_gpkg_geometry_columns_sql">SQL/MM View of gpkg_geometry_columns Definition SQL (Informative)</a> and OGC Simple Features SQL <a href="#9">[9]</a><a href="#10">[10]</a><a href="#11">[11]</a> <a href="#sfsql_gpkg_geometry_columns_sql">SF/SQL VIEW of gpkg_geometry_columns Definition SQL (Informative)</a> specifications.</p>
</div>
<div class="paragraph">
<p>See <a href="#gpkg_geometry_columns_sql">gpkg_geometry_columns Table Definition SQL</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_table_data_values_3">2.1.5.1.2. Table Data Values</h6>
<div id="_requirement-22" class="quoteblock">
<div class="title">Requirement 22</div>
<blockquote>
The <code>gpkg_geometry_columns</code> table or updateable view SHALL contain one row record for the geometry column in each vector feature data table (clause <a href="#feature_user_tables">Vector Feature User Data Tables</a>) in a GeoPackage.
</blockquote>
</div>
<div id="_requirement-23" class="quoteblock">
<div class="title">Requirement 23</div>
<blockquote>
Values of the <code>gpkg_geometry_columns</code> <code>table_name</code> column SHALL reference values in the <code>gpkg_contents</code> <code>table_name</code> column for rows with a <code>data_type</code> of <em>features</em>.
</blockquote>
</div>
<div id="_requirement-24" class="quoteblock">
<div class="title">Requirement 24</div>
<blockquote>
The <code>column_name</code> column value in a <code>gpkg_geometry_columns</code> row SHALL be the name of a column in the table or view specified by the <code>table_name</code> column value for that row.
</blockquote>
</div>
<div id="_requirement-25" class="quoteblock">
<div class="title">Requirement 25</div>
<blockquote>
The <code>geometry_type_name</code> value in a <code>gpkg_geometry_columns</code> row SHALL be one of the uppercase geometry type names specified in <a href="#geometry_types">Geometry Types (Normative)</a>.
</blockquote>
</div>
<div id="_requirement-26" class="quoteblock">
<div class="title">Requirement 26</div>
<blockquote>
The <code>srs_id</code> value in a <code>gpkg_geometry_columns</code> table row SHALL be an <code>srs_id</code> column value from the <code>gpkg_spatial_ref_sys</code> table.
</blockquote>
</div>
<div id="_requirement-27" class="quoteblock">
<div class="title">Requirement 27</div>
<blockquote>
The z value in a <code>gpkg_geometry_columns</code> table row SHALL be one of 0, 1, or 2.
</blockquote>
</div>
<div id="_requirement-28" class="quoteblock">
<div class="title">Requirement 28</div>
<blockquote>
The m value in a <code>gpkg_geometry_columns</code> table row SHALL be one of 0, 1, or 2.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="feature_user_tables">2.1.6. Vector Feature User Data Tables</h4>
<div class="sect4">
<h5 id="_data_8">2.1.6.1. Data</h5>
<div class="sect5">
<h6 id="_table_definition_3">2.1.6.1.1. Table Definition</h6>
<div class="paragraph">
<p>The third component of the SQL schema for vector features in a GeoPackage described in clause <a href="#sfsql_intro">Simple Features SQL Introduction</a> above are tables that contain user data representing features.
Feature attributes are columns in a feature table, including geometries.
Features are rows in a feature table.
<span class="footnote">[<a id="_footnoteref_11" class="footnote" href="#_footnote_11" title="View footnote.">11</a>]</span></p>
</div>
<div id="requirement_feature_integer_pk" class="quoteblock">
<div class="title">Requirement 29</div>
<blockquote>
A GeoPackage MAY contain tables or updateable views containing vector features.
Every such feature table or view in a GeoPackage SHALL have a column with column type INTEGER and <em>PRIMARY KEY AUTOINCREMENT</em> column constraints per <a href="#example_feature_table_cols">EXAMPLE : Sample Feature Table or View Definition</a> and <a href="#example_feature_table_sql">sample_feature_table Table Definition SQL (Informative)</a>.
</blockquote>
</div>
<div class="paragraph">
<p>The integer primary key of a feature table allows features to be linked to row level metadata records in the <code>gpkg_metadata</code> table by rowid <a href="#B5">[B5]</a> values in the <code>gpkg_metadata_reference</code> table as described in clause <a href="#_metadata_reference_table">Metadata Reference Table</a> below.</p>
</div>
<div id="_requirement-30" class="quoteblock">
<div class="title">Requirement 30</div>
<blockquote>
A feature table SHALL have only one geometry column.
</blockquote>
</div>
<div class="paragraph">
<p>Feature data models <a href="#B23">[B23]</a> from non-GeoPackage implementations that have multiple geometry columns per feature table MAY be transformed into GeoPackage implementations with a separate feature table for each geometry type whose rows have matching integer primary key values that allow them to be joined in a view with the same column definitions as the non-GeoPackage feature data model with multiple geometry columns.</p>
</div>
<div id="_requirement-31" class="quoteblock">
<div class="title">Requirement 31</div>
<blockquote>
The declared SQL type of the geometry column in a vector feature user data table SHALL be the uppercase geometry type name from Annex E specified by the geometry_type_name column for that column_name and table_name in the gpkg_geometry_columns table.
</blockquote>
</div>
<table id="example_feature_table_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 8. EXAMPLE : Sample Feature Table or View Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Autoincrement primary key</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>geometry</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GEOMETRY</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GeoPackage Geometry</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>text_attribute</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Text attribute of feature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real_attribute</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REAL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Real attribute of feature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean_attribute</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BOOLEAN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean attribute of feature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>raster_or_photo</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BLOB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Photograph of the area</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>See <a href="#example_feature_table_sql">sample_feature_table Table Definition SQL (Informative)</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_table_data_values_4">2.1.6.1.2. Table Data Values</h6>
<div class="paragraph">
<p>A feature geometry is stored in a geometry column specified by the <code>geometry_column</code> value for the feature table in the <code>gpkg_geometry_columns</code> table defined in clause <a href="#_geometry_columns">Geometry Columns</a> above.</p>
</div>
<div class="paragraph">
<p>The geometry type of a feature geometry column specified in the <code>gpkg_geometry_columns</code> table <code>geometry_type_name</code> column is a name from <a href="#geometry_types">Geometry Types (Normative)</a>.</p>
</div>
<div id="_requirement-32" class="quoteblock">
<div class="title">Requirement 32</div>
<blockquote>
Feature table geometry columns SHALL contain geometries of the type or assignable for the type specified for the column by the <code>gpkg_geometry_columns</code> table <code>geometry_type_name</code> uppercase column value <span class="footnote">[<a id="_footnoteref_12" class="footnote" href="#_footnote_12" title="View footnote.">12</a>]</span>.
</blockquote>
</div>
<div class="paragraph">
<p>Geometry subtypes are assignable as defined in <a href="#geometry_types">Geometry Types (Normative)</a> and shown in part in <a href="#core_geometry_model_figure">Core Geometry Model</a>.
For example, if the <code>geometry_type_name</code> value in the <code>gpkg_geometry_columns</code> table is for a geometry type like POINT that has no subtypes, then the feature table geometry column MAY only contain geometries of that type.
If the geometry <code>type_name</code> value in the <code>gpkg_geometry_columns</code> table is for a geometry type like GEOMCOLLECTION that has subtypes, then the feature table geometry column MAY only contain geometries of that type or any of its direct or indirect subtypes.
If the geometry <code>type_name</code> is GEOMETRY (the root of the geometry type hierarchy) then the feature table geometry column MAY contain geometries of any geometry type.</p>
</div>
<div class="paragraph">
<p>The presence or absence of optional elevation (Z) and/or measure (M) values in a geometry does not change its type or assignability. The unit of measure for optional elevation(Z) values is determined by the CRS of the geometry; it is as-defined by a 3D CRS, and undefined for a 2D CRS. The unit of measure for optional measure (M) values is determined by the CRS of the geometry.</p>
</div>
<div class="paragraph">
<p>The spatial reference system type of a feature geometry column specified by a <code>gpkg_geometry_columns</code> table <code>srs_id</code> column value is a code from the <code>gpkg_spatial_ref_sys</code> table <code>srs_id</code> column.</p>
</div>
<div id="_requirement-33" class="quoteblock">
<div class="title">Requirement 33</div>
<blockquote>
Feature table geometry columns SHALL contain geometries with the <code>srs_id</code> specified for the column by the <code>gpkg_geometry_columns</code> table <code>srs_id</code> column value.
</blockquote>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="tiles">2.2. Tiles</h3>
<div class="sect3">
<h4 id="_tile_matrix_introduction">2.2.1. Tile Matrix Introduction</h4>
<div class="paragraph">
<p>There are a wide variety of commercial and open source conventions for storing, indexing, accessing and describing tiles in tile pyramids. Unfortunately, no applicable existing consensus, national or international specifications have standardized practices in this domain. In addition, various image file formats have different representational capabilities, and include different self-descriptive metadata.</p>
</div>
<div class="paragraph">
<p>The tile store data / metadata model and convention described below support direct use of tiles in a GeoPackage in two ways. First, they specify how existing application MAY create SQL Views of the data /metadata model on top of existing application tables that that follow different interface conventions. Second, they include and expose enough metadata information at both the dataset and record level to allow applications that use GeoPackage data to discover its characteristics without having to parse all of the stored images. Applications that store GeoPackage tile data, which are presumed to have this information available, SHALL store sufficient metadata to enable its intended use.</p>
</div>
<div class="paragraph">
<p>The GeoPackage tile store data model MAY be implemented directly as SQL tables in a SQLite database for maximum performance, or as SQL views on top of tables in an existing SQLite tile store for maximum adaptability and loose coupling to enable widespread implementation.</p>
</div>
<div class="paragraph">
<p>A GeoPackage CAN store multiple raster and tile pyramid data sets in different tables or views in the same container.
<span class="footnote">[<a id="_footnoteref_13" class="footnote" href="#_footnote_13" title="View footnote.">13</a>]</span> “Tile pyramid” refers to the concept of pyramid structure of tiles of different spatial extent and resolution at different zoom levels, and the tile data itself.
“Tile matrix” refers to rows and columns of tiles that all have the same spatial extent and resolution at a particular zoom level.
“Tile matrix set” refers to the definition of a tile pyramid’s tiling structure.</p>
</div>
<div class="paragraph">
<p>The tables or views that implement the GeoPackage tile store data / metadata model are described and discussed individually in the following subsections.</p>
</div>
</div>
<div class="sect3">
<h4 id="_contents_3">2.2.2. Contents</h4>
<div class="sect4">
<h5 id="_data_9">2.2.2.1. Data</h5>
<div class="sect5">
<h6 id="_contents_table_tiles_row">2.2.2.1.1. Contents Table – Tiles Row</h6>
<div id="_requirement-34" class="quoteblock">
<div class="title">Requirement 34</div>
<blockquote>
The <code>gpkg_contents</code> table SHALL contain a row with a <code>data_type</code> column value of “tiles” for each tile pyramid user data table or view.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="zoom_levels">2.2.3. Zoom Levels</h4>
<div class="paragraph">
<p>In a GeoPackage, zoom levels are integers in sequence from 0 to n that identify tile matrix layers in a tile matrix set that contain tiles of decreasing spatial extent and finer spatial resolution.
Adjacent zoom levels immediately preceed or follow each other and differ by a value of 1.
Pixel sizes are real numbers in the terrain units of the spatial reference system of a tile image specifying the dimensions of the real world area represented by one pixel.
Pixel size MAY vary by a constant factor or by different factors or intervals between some or all adjacent zoom levels in a tile matrix set.
In the commonly used "zoom times two" convention, pixel sizes vary by a factor of 2 between all adjacent zoom levels, as shown in the example in <a href="#tiles_factor2_example_appendix">Tiles Zoom Times Two Example (Informative)</a>.
Other "zoom other intervals" conventions use different factors or irregular intervals with pixel sizes chosen for intuitive cartographic representation of raster data, or to coincide with the original pixel size of commonly used global image products.
See Web Map Tile Service (WMTS) <a href="#16">[16]</a> Annex E for additional examples of both conventions.</p>
</div>
<div class="sect4">
<h5 id="_data_10">2.2.3.1. Data</h5>
<div class="sect5">
<h6 id="_zoom_times_two">2.2.3.1.1. Zoom Times Two</h6>
<div id="_requirement-35" class="quoteblock">
<div class="title">Requirement 35</div>
<blockquote>
In a GeoPackage that contains a tile pyramid user data table that contains tile data, by default <span class="footnote">[<a id="_footnoteref_14" class="footnote" href="#_footnote_14" title="View footnote.">14</a>]</span>, zoom level pixel sizes for that table SHALL vary by a factor of 2 between adjacent zoom levels in the tile matrix metadata table.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="tile_enc_png">2.2.4. Tile Encoding PNG</h4>
<div class="sect4">
<h5 id="_data_11">2.2.4.1. Data</h5>
<div class="sect5">
<h6 id="_mime_type_png">2.2.4.1.1. MIME Type PNG</h6>
<div id="_requirement-36" class="quoteblock">
<div class="title">Requirement 36</div>
<blockquote>
In a GeoPackage that contains a tile pyramid user data table that contains tile data that is not <a href="http://www.ietf.org/rfc/rfc2046.txt">MIME type</a> <a href="http://www.jpeg.org/public/jfif.pdf">image/jpeg</a> <a href="#17">[17]</a><a href="#18">[18]</a><a href="#19">[19]</a>, by default SHALL store that tile data in <a href="http://www.iana.org/assignments/media-types/index.html">MIME type</a> <a href="http://libpng.org/pub/png/">image/png</a> <a href="#20">[20]</a><a href="#21">[21]</a>. <span class="footnote">[<a id="_footnoteref_15" class="footnote" href="#_footnote_15" title="View footnote.">15</a>]</span>
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="tile_enc_jpeg">2.2.5. Tile Encoding JPEG</h4>
<div class="sect4">
<h5 id="_data_12">2.2.5.1. Data</h5>
<div class="sect5">
<h6 id="_mime_type_jpeg">2.2.5.1.1. MIME Type JPEG</h6>
<div id="_requirement-37" class="quoteblock">
<div class="title">Requirement 37</div>
<blockquote>
In a GeoPackage that contains a tile pyramid user data table that contains tile data that is not <a href="http://www.iana.org/assignments/media-types/index.html">MIME type</a> <a href="http://libpng.org/pub/png/">image/png</a> <a href="#20">[20]</a><a href="#21">[21]</a>, by default SHALL store that tile data in <a href="http://www.ietf.org/rfc/rfc2046.txt">MIME type</a> <a href="http://www.jpeg.org/public/jfif.pdf">image/jpeg</a> <a href="#17">[17]</a><a href="#18">[18]</a><a href="#19">[19]</a>. <span class="footnote">[<a id="_footnoteref_16" class="footnote" href="#_footnote_16" title="View footnote.">16</a>]</span>
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_tile_matrix_set">2.2.6. Tile Matrix Set</h4>
<div class="sect4">
<h5 id="_data_13">2.2.6.1. Data</h5>
<div class="sect5">
<h6 id="tile_matrix_set_data_table_definition">2.2.6.1.1. Table Definition</h6>
<div id="_requirement-38" class="quoteblock">
<div class="title">Requirement 38</div>
<blockquote>
A GeoPackage that contains a tile pyramid user data table SHALL contain  <code>gpkg_tile_matrix_set</code> table or view per <a href="#tile_matrix_set_data_table_definition">Table Definition</a>, <a href="#gpkg_tile_matrix_set_cols">Tile Matrix Set Table or View Definition</a> and <a href="#gpkg_tile_matrix_set_sql">gpkg_tile_matrix_set Table Creation SQL</a>.
</blockquote>
</div>
<table id="gpkg_tile_matrix_set_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 9. Tile Matrix Set Table or View Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Column Type</th>
<th class="tableblock halign-left valign-top">Column Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>table_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tile Pyramid User Data Table Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK, FK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>srs_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spatial Reference System ID: gpkg_spatial_ref_sys.srs_id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>min_x</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOUBLE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bounding box minimum easting or longitude for all content in table_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>min_y</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOUBLE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bounding box minimum northing or latitude for all content in table_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>max_x</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOUBLE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bounding box maximum easting or longitude for all content in table_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>max_y</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOUBLE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bounding box maximum northing or latitude for all content in table_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>The gpkg_tile_matrix_set table or updateable view defines the spatial reference system (srs_id) and the maximum bounding box (min_x, min_y, max_x, max_y) for all possible tiles in a tile pyramid user data table.
All tiles present in the tile pyramid SHALL fall within this bounding box. However, the bounding box MAY be larger than the minimum bounding rectangle around the actual tiles in that pyramid.</p>
</div>
<div class="paragraph">
<p>See <a href="#gpkg_tile_matrix_set_sql">gpkg_tile_matrix_set Table Creation SQL</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="clause_tile_matrix_set_table_data_values">2.2.6.1.2. Table Data Values</h6>
<div class="paragraph">
<p>The minimum bounding box defined in the gpkg_tile_matrix_set table or view for a tile pyramid user data table SHALL be exact so that the bounding box coordinates for individual tiles in a tile pyramid MAY be calculated based on the column values for the user data table in the gpkg_tile_matrix table or view.  For example, because GeoPackages use the upper left tile origin convention defined in clause <a href="#clause_tile_matrix_table_data_values">Table Data Values</a> below, the gpkg_tile_matrix_set (min_x, max_y) ordinate is the upper-left corner of tile (0,0) for all zoom levels in a table_name tile pyramid user data table.</p>
</div>
<div id="_requirement-39" class="quoteblock">
<div class="title">Requirement 39</div>
<blockquote>
Values of the <code>gpkg_tile_matrix_set</code> <code>table_name</code> column SHALL reference values in th gpkg_contents table_name column for rows with a data type of "tiles".
</blockquote>
</div>
<div id="_requirement-40" class="quoteblock">
<div class="title">Requirement 40</div>
<blockquote>
The gpkg_tile_matrix_set table or view SHALL contain one row record for each tile pyramid user data table.
</blockquote>
</div>
<div id="_requirement-41" class="quoteblock">
<div class="title">Requirement 41</div>
<blockquote>
Values of the <code>gpkg_tile_matrix_set</code> <code>srs_id</code> column SHALL reference values in the <code>gpkg_spatial_ref_sys</code> <code>srs_id</code> column.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="tile_matrix">2.2.7. Tile Matrix</h4>
<div class="sect4">
<h5 id="_data_14">2.2.7.1. Data</h5>
<div class="sect5">
<h6 id="tile_matrix_data_table_definition">2.2.7.1.1. Table Definition</h6>
<div id="_requirement-42" class="quoteblock">
<div class="title">Requirement 42</div>
<blockquote>
A GeoPackage that contains a tile pyramid user data table SHALL contain a <code>gpkg_tile_matrix</code> table or view per clause 2.2.7.1.1 <a href="#tile_matrix_data_table_definition">Table Definition</a>, Table <a href="#gpkg_tile_matrix_cols">Tile Matrix Metadata Table or View Definition</a> and Table <a href="#gpkg_tile_matrix_sql">gpkg_tile_matrix Table Creation SQL</a>.
</blockquote>
</div>
<table id="gpkg_tile_matrix_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 10. Tile Matrix Metadata Table or View Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Column Type</th>
<th class="tableblock halign-left valign-top">Column Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>table_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tile Pyramid User Data Table Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK, FK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>zoom_level</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0 &#8656; <code>zoom_level</code> &#8656; max_level for <code>table_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>matrix_width</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of columns (&gt;= 1) in tile matrix at this zoom level</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>matrix_height</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of rows (&gt;= 1) in tile matrix at this zoom level</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tile_width</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tile width in pixels (&gt;= 1)for this zoom level</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tile_height</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tile height in pixels (&gt;= 1) for this zoom level</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pixel_x_size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOUBLE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In <code>t_table_name</code> srid units or default meters for srid 0 (&gt;0)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pixel_y_size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOUBLE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In <code>t_table_name</code> srid units or default meters for srid 0 (&gt;0)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>The <code>gpkg_tile_matrix</code> table or updateable view documents the structure of the tile matrix at each zoom level in each tiles table.
It allows GeoPackages to contain rectangular as well as square tiles (e.g. for better representation of polar regions).
It allows tile pyramids with zoom levels that differ in resolution by factors of 2, irregular intervals, or regular intervals other than factors of 2.</p>
</div>
<div class="paragraph">
<p>See <a href="#gpkg_tile_matrix_sql">gpkg_tile_matrix Table Creation SQL</a></p>
</div>
</div>
<div class="sect5">
<h6 id="clause_tile_matrix_table_data_values">2.2.7.1.2. Table Data Values</h6>
<div id="_requirement-43" class="quoteblock">
<div class="title">Requirement 43</div>
<blockquote>
Values of the <code>gpkg_tile_matrix</code> <code>table_name</code> column SHALL reference values in the <code>gpkg_contents</code> <code>table_name</code> column for rows with a <code>data_type</code> of “tiles”.
</blockquote>
</div>
<div id="_requirement-44" class="quoteblock">
<div class="title">Requirement 44</div>
<blockquote>
The <code>gpkg_tile_matrix</code> table or view SHALL contain one row record for each zoom level that contains one or more tiles in each tile pyramid user data table or view.
</blockquote>
</div>
<div id="_requirement-45" class="quoteblock">
<div class="title">Requirement 45</div>
<blockquote>
The width of a tile matrix (the difference between <code>min_x</code> and <code>max_x</code> in <code>gpkg_tile_matrix_set</code>) SHALL equal the product of <code>matrix_width</code>, <code>tile_width</code>, and <code>pixel_x_size</code> for that zoom level.
Similarly, height of a tile matrix (the difference between <code>min_y</code> and <code>max_y</code> in <code>gpkg_tile_matrix_set</code>) SHALL equal the product of <code>matrix_height</code>, <code>tile_height</code>, and <code>pixel_y_size</code> for that zoom level.
</blockquote>
</div>
<div class="paragraph">
<p>The <code>gpkg_tile_matrix</code> table or view MAY contain row records for zoom levels in a tile pyramid user data table that do not contain tiles.</p>
</div>
<div class="paragraph">
<p>GeoPackages follow the most frequently used conventions of a tile origin at the upper left and a zoom-out-level of 0 for the smallest map scale “whole world” zoom level view <span class="footnote">[<a id="_footnoteref_17" class="footnote" href="#_footnote_17" title="View footnote.">17</a>]</span>, as specified by <a href="http://portal.opengeospatial.org/files/?artifact_id=35326">WMTS</a> <a href="#16">[16]</a>.
The tile coordinate (0,0) always refers to the tile in the upper left corner of the tile matrix at any zoom level, regardless of the actual availability of that tile.</p>
</div>
<div id="_requirement-46" class="quoteblock">
<div class="title">Requirement 46</div>
<blockquote>
The <code>zoom_level</code> column value in a <code>gpkg_tile_matrix</code> table row SHALL not be negative.
</blockquote>
</div>
<div id="_requirement-47" class="quoteblock">
<div class="title">Requirement 47</div>
<blockquote>
The <code>matrix_width</code> column value in a <code>gpkg_tile_matrix</code> table row SHALL be greater than 0.
</blockquote>
</div>
<div id="_requirement-48" class="quoteblock">
<div class="title">Requirement 48</div>
<blockquote>
The <code>matrix_height</code> column value in a <code>gpkg_tile_matrix</code> table row SHALL be greater than 0.
</blockquote>
</div>
<div id="_requirement-49" class="quoteblock">
<div class="title">Requirement 49</div>
<blockquote>
The <code>tile_width</code> column value in a <code>gpkg_tile_matrix</code> table row SHALL be greater than 0.
</blockquote>
</div>
<div id="_requirement-50" class="quoteblock">
<div class="title">Requirement 50</div>
<blockquote>
The <code>tile_height</code> column value in a <code>gpkg_tile_matrix</code> table row SHALL be greater than 0.
</blockquote>
</div>
<div id="_requirement-51" class="quoteblock">
<div class="title">Requirement 51</div>
<blockquote>
The <code>pixel_x_size</code> column value in a <code>gpkg_tile_matrix</code> table row SHALL be greater than 0.
</blockquote>
</div>
<div id="_requirement-52" class="quoteblock">
<div class="title">Requirement 52</div>
<blockquote>
The <code>pixel_y_size</code> column value in a <code>gpkg_tile_matrix</code> table row SHALL be greater than 0.
</blockquote>
</div>
<div id="_requirement-53" class="quoteblock">
<div class="title">Requirement 53</div>
<blockquote>
The <code>pixel_x_size</code> and <code>pixel_y_size</code> column values for <code>zoom_level</code> column values in a <code>gpkg_tile_matrix</code> table sorted in ascending order SHALL be sorted in descending order.
</blockquote>
</div>
<div class="paragraph">
<p>Tiles MAY or MAY NOT be provided for level 0 or any other particular zoom level. <span class="footnote">[<a id="_footnoteref_18" class="footnote" href="#_footnote_18" title="View footnote.">18</a>]</span>
This means that a tile matrix set can be sparse, i.e. not contain a tile for any particular position at a certain tile zoom level.
<span class="footnote">[<a id="_footnoteref_19" class="footnote" href="#_footnote_19" title="View footnote.">19</a>]</span> This does not affect the informative spatial extent stated by the min/max x/y columns values in the <code>gpkg_contents</code> record for the same <code>table_name</code>, the exact spatial extent stated by the min/max x/y columns values in the <code>gpkg_tile_matrix_set</code> record for the same table name, or the tile matrix width and height at that level. <span class="footnote">[<a id="_footnoteref_20" class="footnote" href="#_footnote_20" title="View footnote.">20</a>]</span></p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="tiles_user_tables">2.2.8. Tile Pyramid User Data Tables</h4>
<div class="sect4">
<h5 id="_data_15">2.2.8.1. Data</h5>
<div class="sect5">
<h6 id="tiles_user_tables_data_table_definition">2.2.8.1.1. Table Definition</h6>
<div id="_requirement-54" class="quoteblock">
<div class="title">Requirement 54</div>
<blockquote>
Each tile matrix set in a GeoPackage SHALL be stored in a different tile pyramid user data table or updateable view with a unique name that SHALL have a column named "id" with column type INTEGER and <em>PRIMARY KEY AUTOINCREMENT</em> column constraints per Clause 2.2.8.1.1 <a href="#tiles_user_tables_data_table_definition">Table Definition</a>, <a href="#example_tiles_table_cols">Tiles Table or View Definition</a> and <a href="#example_tiles_table_sql">EXAMPLE: tiles table Create Table SQL (Informative)</a>.
</blockquote>
</div>
<table id="example_tiles_table_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 11. Tiles Table or View Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Column Type</th>
<th class="tableblock halign-left valign-top">Column Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Autoincrement primary key</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>zoom_level</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">min(zoom_level) &#8656; <code>zoom_level</code> &#8656; max(zoom_level) for <code>t_table_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tile_column</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0 to <code>tile_matrix</code> <code>matrix_width</code> – 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tile_row</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0 to <code>tile_matrix</code> <code>matrix_height</code> - 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tile_data</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BLOB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Of an image MIME type specified in clauses <a href="#tile_enc_png">Tile Encoding PNG</a>, <a href="#tile_enc_jpeg">Tile Encoding JPEG</a>, <a href="#tile_enc_webp">Tile Encoding WEBP</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>See <a href="#example_tiles_table_sql">EXAMPLE: tiles table Create Table SQL (Informative)</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_table_data_values_5">2.2.8.1.2. Table Data Values</h6>
<div class="paragraph">
<p>Each tile pyramid user data table or view <span class="footnote">[<a id="_footnoteref_21" class="footnote" href="#_footnote_21" title="View footnote.">21</a>]</span> MAY contain tile matrices at zero or more zoom levels of different spatial resolution (map scale).</p>
</div>
<div id="_requirement-55" class="quoteblock">
<div class="title">Requirement 55</div>
<blockquote>
For each distinct <code>table_name</code> from the <code>gpkg_tile_matrix</code> (tm) table, the tile pyramid (tp) user data table <code>zoom_level</code> column value in a GeoPackage SHALL be in the range min(tm.zoom_level) &#8656; tp.zoom_level &#8656; max(tm.zoom_level).
</blockquote>
</div>
<div id="_requirement-56" class="quoteblock">
<div class="title">Requirement 56</div>
<blockquote>
For each distinct <code>table_name</code> from the <code>gpkg_tile_matrix</code> (tm) table, the tile pyramid (tp) user data table <code>tile_column</code> column value in a GeoPackage SHALL be in the range 0 &#8656; tp.tile_column &#8656; tm.matrix_width – 1 where the tm and tp <code>zoom_level</code> column values are equal.
</blockquote>
</div>
<div id="_requirement-57" class="quoteblock">
<div class="title">Requirement 57</div>
<blockquote>
For each distinct <code>table_name</code> from the <code>gpkg_tile_matrix</code> (tm) table, the tile pyramid (tp) user data table <code>tile_row</code> column value in a GeoPackage SHALL be in the range 0 &#8656; tp.tile_row &#8656; tm.matrix_height – 1 where the tm and tp <code>zoom_level</code> column values are equal.
</blockquote>
</div>
<div class="paragraph">
<p>All tiles at a particular zoom level have the same <code>pixel_x_size</code> and <code>pixel_y_size</code> values specified in the <code>gpkg_tile_matrix</code> row record for that tiles table and zoom level. <span class="footnote">[<a id="_footnoteref_22" class="footnote" href="#_footnote_22" title="View footnote.">22</a>]</span></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_schema">2.3. Schema</h3>
<div class="sect3">
<h4 id="_schema_introduction">2.3.1. Schema Introduction</h4>
<div class="paragraph">
<p>The schema option provides a means to describe the columns of tables in a GeoPackage with more detail than can be captured by the SQL table definition directly.
The information provided by this option can be used by applications to, for instance, present data contained in a GeoPackage in a more user-friendly fashion or implement data validation logic.</p>
</div>
</div>
<div class="sect3">
<h4 id="_data_columns">2.3.2. Data Columns</h4>
<div class="sect4">
<h5 id="_data_16">2.3.2.1. Data</h5>
<div class="sect5">
<h6 id="schema_data_columns_table_definition">2.3.2.1.1. Table Definition</h6>
<div id="_requirement-58" class="quoteblock">
<div class="title">Requirement 58</div>
<blockquote>
A GeoPackage MAY contain a table or updateable view named <code>gpkg_data_columns</code>.
If present it SHALL be defined per clause 2.3.2.1.1 <a href="#schema_data_columns_table_definition">Table Definition</a>, <a href="#gpkg_data_columns_cols">Data Columns Table or View Definition</a> and <a href="#gpkg_data_columns_sql">gpkg_data_columns Table Definition SQL</a>.
</blockquote>
</div>
<table id="gpkg_data_columns_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 12. Data Columns Table or View Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Column Type</th>
<th class="tableblock halign-left valign-top">Column Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>table_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the tiles or feature table</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>column_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the table column</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A human-readable identifier (e.g. short name) for the column_name content</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>title</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A human-readable formal title for the column_name content</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A human-readable description for the table_name content</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mime_type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.iana.org/assignments/media-types/index.html">MIME</a> <a href="#21">[21]</a> type of column_name if BLOB type, or NULL for other types</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>constraint_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Column value constraint name (lowercase) specified by reference to <code>gpkg_data_column_constraints.constraint</code> name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>GeoPackage applications MAY <span class="footnote">[<a id="_footnoteref_23" class="footnote" href="#_footnote_23" title="View footnote.">23</a>]</span> use the <code>gpkg_data_columns</code> table to store minimal application schema identifying, descriptive and <a href="http://www.iana.org/assignments/media-types/index.html">MIME</a> <a href="#21">[21]</a> type <span class="footnote">[<a id="_footnoteref_24" class="footnote" href="#_footnote_24" title="View footnote.">24</a>]</span> information about columns in user vector feature and tile matrix data tables that supplements the data available from the SQLite <code>sqlite_master</code> table and pragma <code>table_info(table_name)</code> SQL function.
The <code>gpkg_data_columns</code> data CAN be used to provide more specific column data types and value ranges and application specific structural and semantic information to enable more informative user menu displays and more effective user decisions on the suitability of GeoPackage contents for specific purposes.</p>
</div>
<div class="paragraph">
<p>See <a href="#gpkg_data_columns_sql">gpkg_data_columns Table Definition SQL</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_table_data_values_6">2.3.2.1.2. Table Data Values</h6>
<div id="_requirement-59" class="quoteblock">
<div class="title">Requirement 59</div>
<blockquote>
Values of the <code>gpkg_data_columns</code> table <code>table_name</code> column value SHALL reference values in the <code>gpkg_contents</code> <code>table_name</code> column.
</blockquote>
</div>
<div id="_requirement-60" class="quoteblock">
<div class="title">Requirement 60</div>
<blockquote>
The <code>column_name</code> column value in a <code>gpkg_data_columns</code> table row SHALL contain the name of a column in the SQLite table or view identified by the <code>table_name</code> column value.
</blockquote>
</div>
<div id="_requirement-61" class="quoteblock">
<div class="title">Requirement 61</div>
<blockquote>
The constraint_name column value in a gpkg_data_columns table MAY be NULL.
If it is not NULL, it SHALL contain a constraint_name column value (which SHALL be lowercase) from the gpkg_data_column_constraints table.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_data_column_constraints">2.3.3. Data Column Constraints</h4>
<div class="sect4">
<h5 id="_data_17">2.3.3.1. Data</h5>
<div class="sect5">
<h6 id="data_column_constraints_table_definition">2.3.3.1.1. Table Definition</h6>
<div id="_requirement-62" class="quoteblock">
<div class="title">Requirement 62</div>
<blockquote>
A GeoPackage MAY contain a table or updateable view named gpkg_data_column_constraints.
If present it SHALL be defined per clause 2.3.3.1.1 <a href="#data_column_constraints_table_definition">Table Definition</a>, <a href="#gpkg_data_column_constraints_cols">Data Column Constraints Table or View Definition</a> and <a href="#gpkg_data_column_constraints_sql">gpkg_data_columns Table Definition SQL</a>.
</blockquote>
</div>
<div class="paragraph">
<p>The <code>gpkg_data_column_constraints</code> table contains data to specify restrictions on basic data type column values.
The constraint_name column is referenced by the <code>constraint_name</code> column in the <code>gpkg_data_columns</code> table defined in <a href="#gpkg_data_columns_cols">Data Columns Table or View Definition</a>.</p>
</div>
<table id="gpkg_data_column_constraints_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 13. Data Column Constraints Table or View Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Column Type</th>
<th class="tableblock halign-left valign-top">Column Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>constraint_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of constraint (lowercase)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>constraint_type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type name of constraint: <em>range</em> | <em>enum</em> | <em>glob</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>value</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specified case sensitive value for <em>enum</em> or <em>glob</em> or NULL for <em>range</em> constraint_type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>min</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NUMERIC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum value for ‘range’ or NULL for ‘enum’ or ‘glob’ constraint_type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>min_is_inclusive</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BOOLEAN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0 (false) if min value is exclusive, or 1 (true) if min value is inclusive</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>max</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NUMERIC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum value for ‘range’ or NULL for ‘enum’ or ‘glob’ constraint_type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>max_is_inclusive</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BOOLEAN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0 (false) if max value is exclusive, or 1 (true) if max value is inclusive</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For ranges and globs, describes the constraint; for enums, describes the enum value.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><em>The min and max columns are defined as NUMERIC to be able to contain range values for any numeric data column defined with a data type from Table 1. These are the only exceptions to the data type rule stated in Req 5.</em></p>
</div>
<div class="paragraph">
<p>See <a href="#gpkg_data_column_constraints_sql">gpkg_data_columns Table Definition SQL</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_table_data_values_7">2.3.3.1.2. Table Data Values</h6>
<div class="paragraph">
<p>The lowercase gpkg_data_column_constraints constraint_type column value specifies the type of constraint: "range", "enum", or "glob" (GLOB is a text pattern match - see <a href="#33">[33]</a>).
The case sensitive value column contains an enumerated legal value for constraint_type "enum", a pattern match string for constraint_type "glob", or NULL for constraint_type "range". The set of value column values in rows of constraint_type "enum" with the same constraint_name contains all possible enumerated values for the constraint name. The min and max column values specify the minim and maximum valid values for constraint_type "range", or are NULL for constraint_type "enum" or "glob". The min_is_inclusive and max_is_inclusive column values contain 1 if the min and max values are inclusive, 0 if they are exclusive, or are NULL for constraint_type "enum" or "glob".
These restrictions MAY be enforced by SQL triggers or by code in applications that update GeoPackage data values.</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 14. Sample Data Column Constraints</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">constraint_name</th>
<th class="tableblock halign-left valign-top">constraint_type</th>
<th class="tableblock halign-left valign-top">value</th>
<th class="tableblock halign-left valign-top">min</th>
<th class="tableblock halign-left valign-top">min_is_inclusive</th>
<th class="tableblock halign-left valign-top">max</th>
<th class="tableblock halign-left valign-top">max_is_inclusive</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sampleRange</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">range</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sampleEnum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">enum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sampleEnum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">enum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sampleEnum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">enum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sampleEnum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">enum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sampleEnum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">enum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sampleGlob</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">glob</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[1-2][0-9][0-9][0-9]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
</tr>
</tbody>
</table>

<div id="_requirement-63" class="quoteblock">
<div class="title">Requirement 63</div>
<blockquote>
The <code>gpkg_data_column_constraints</code> table MAY be empty.
If it contains data, the lowercase <code>constraint_type</code> column values SHALL be one of "range", "enum", or "glob".
</blockquote>
</div>
<div id="_requirement-64" class="quoteblock">
<div class="title">Requirement 64</div>
<blockquote>
gpkg_data_column_constraint constraint_name values for rows with constraint_type values of <em>range</em> and <em>glob</em> SHALL be unique.
</blockquote>
</div>
<div id="_requirement-65" class="quoteblock">
<div class="title">Requirement 65</div>
<blockquote>
The <code>gpkg_data_column_constraints</code> table MAY be empty.
If it contains rows with constraint_type column values of "range", the <code>value</code> column values for those rows SHALL be NULL.
</blockquote>
</div>
<div id="_requirement-66" class="quoteblock">
<div class="title">Requirement 66</div>
<blockquote>
The <code>gpkg_data_column_constraints</code> table MAY be empty.
If it contains rows with <code>constraint_type</code> column values of "range", the <code>min</code> column values for those rows SHALL be NOT NULL and less than the <code>max</code> column value which shall be NOT NULL.
</blockquote>
</div>
<div id="_requirement-67" class="quoteblock">
<div class="title">Requirement 67</div>
<blockquote>
The <code>gpkg_data_column_constraints</code> table MAY be empty.
If it contains rows with <code>constraint_type</code> column values of "range", the <code>min_is_inclusive</code> and <code>max_is_inclusive</code> column values for those rows SHALL be 0 or 1.
</blockquote>
</div>
<div id="_requirement-68" class="quoteblock">
<div class="title">Requirement 68</div>
<blockquote>
The <code>gpkg_data_column_constraints</code> table MAY be empty.
If it contains rows with <code>constraint_type</code> column values of "enum" or "glob", the <code>min</code>, <code>max</code>, <code>min_is_inclusive</code> and <code>max_is_inclusive</code> column values for those rows SHALL be NULL.
</blockquote>
</div>
<div id="_requirement-69" class="quoteblock">
<div class="title">Requirement 69</div>
<blockquote>
The <code>gpkg_data_column_constraints</code> table MAY be empty.
If it contains rows with <code>constraint_type</code> column values of "enum" or "glob", the <code>value</code> column SHALL NOT be NULL.
</blockquote>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_metadata">2.4. Metadata</h3>
<div class="sect3">
<h4 id="_introduction_2">2.4.1. Introduction</h4>
<div class="paragraph">
<p>Two tables in a GeoPackage provide a means of storing metadata in MIME <a href="#21">[21]</a> encodings that are defined in accordance with any authoritative metadata specifications, and relating it to the features, rasters, and tiles data in a GeoPackage.
These tables are intended to provide the support necessary to implement the hierarchical metadata model defined in ISO 19115 <a href="#28">[28]</a>, Annex B B.5.25 MD_ScopeCode, <a href="#metadata_example_appendix">Hierarchical Metadata Example (Informative)</a> and <a href="#raster_or_tile_metadata_example_appendix">Raster or Tile Metadata Example (Informative)</a>, so that as GeoPackage data is captured and updated, the most local and specific detailed metadata changes associated with the new or modified data MAY be captured separately, and referenced to existing global and general metadata.</p>
</div>
<div class="paragraph">
<p>The <code>gpkg_metadata</code> table that contains metadata is described in clause <a href="#_metadata_table">Metadata Table</a>, and the <code>gpkg_metadata_reference</code> table that relates <code>gpkg_metadata</code> to GeoPackage data is described in clause <a href="#_metadata_reference_table">Metadata Reference Table</a>.
There is no GeoPackage requirement that such metadata be provided or that defined metadata be structured in a hierarchical fashion <span class="footnote">[<a id="_footnoteref_25" class="footnote" href="#_footnote_25" title="View footnote.">25</a>]</span> with more than one level, only that if it is, these tables SHALL be used. Such metadata <span class="footnote">[<a id="_footnoteref_26" class="footnote" href="#_footnote_26" title="View footnote.">26</a>]</span> and data that relates it to GeoPackage contents SHALL NOT be stored in other tables.</p>
</div>
</div>
<div class="sect3">
<h4 id="_metadata_table">2.4.2. Metadata Table</h4>
<div class="sect4">
<h5 id="_data_18">2.4.2.1. Data</h5>
<div class="sect5">
<h6 id="metadata_table_table_definition">2.4.2.1.1. Table Definition</h6>
<div id="_requirement-70" class="quoteblock">
<div class="title">Requirement 70</div>
<blockquote>
A GeoPackage MAY contain a table named gpkg_metadata. If present it SHALL be defined per clause 2.4.2.1.1 <a href="#metadata_table_table_definition">Table Definition</a>, <a href="#gpkg_metadata_cols">Metadata Table Definition</a> and <a href="#gpkg_metadata_sql">gpkg_metadata Table Definition SQL</a>.
</blockquote>
</div>
<div class="paragraph">
<p>The first component of GeoPackage metadata is the <code>gpkg_metadata</code> table that MAY contain metadata in MIME <a href="#21">[21]</a> encodings structured in accordance with any authoritative metadata specification, such as ISO 19115 <a href="#28">[28]</a>, ISO 19115-2 <a href="#B6">[B6]</a>, ISO 19139 <a href="#B7">[B7]</a>, Dublin Core <a href="#B8">[B8]</a>, CSDGM <a href="#B10">[B10]</a>, DDMS <a href="#B12">[B12]</a>, NMF/NMIS <a href="#B13">[B13]</a>, etc.
The GeoPackage interpretation of what constitutes “metadata” is a broad one that includes UML models <a href="#B14">[B14]</a> encoded in XMI <a href="#B15">[B15]</a>, GML Application Schemas <a href="#30">[30]</a>, ISO 19110 feature catalogues <a href="#B18">[B18]</a>, OWL <a href="#B20">[B20]</a> and SKOS <a href="#B21">[B21]</a> taxonomies, etc.</p>
</div>
<table id="gpkg_metadata_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 15. Metadata Table Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Column Type</th>
<th class="tableblock halign-left valign-top">Column Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Metadata primary key</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>md_scope</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Case sensitive name of the data scope to which this metadata applies; see <a href="#metadata_scopes">Metadata Scopes</a> below</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">‘dataset’</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>md_standard_uri</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URI <a href="#23">[23]</a> reference to the metadata structure definition authority <span class="footnote">[<a id="_footnoteref_27" class="footnote" href="#_footnote_27" title="View footnote.">27</a>]</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mime_type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MIME <a href="#21">[21]</a> encoding of metadata</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text/xml <a href="#24">[24]</a></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>metadata</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">metadata</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">’’</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>The md_standard_uri data value provides an identifier for the metadata structure (schema) specified by its definition authority.
The structure (schema) information could be in whatever encoding is used by the definition authority, e.g. UML <a href="#B14">[B14]</a>, or IDEF1x <a href="#B16">[B16]</a>, or XML/Schema <a href="#25">[25]</a><a href="#26">[26]</a><a href="#27">[27]</a>, or RDF/S <a href="#B19">[B19]</a>.</p>
</div>
<div class="paragraph">
<p>See <a href="#gpkg_metadata_sql">gpkg_metadata Table Definition SQL</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_table_data_values_8">2.4.2.1.2. Table Data Values</h6>
<div class="paragraph">
<p>The <code>md_scope</code> column in the <code>gpkg_metadata</code> table is the name of the applicable scope for the contents of the metadata column for a given row.
The list of valid scope names and their definitions is provided in <a href="#metadata_scopes">Metadata Scopes</a> below.
The initial contents of this table were obtained from the ISO 19115 <a href="#40">[40]</a>, Annex B B.5.25 MD_ScopeCode code list, which was extended <span class="footnote">[<a id="_footnoteref_28" class="footnote" href="#_footnote_28" title="View footnote.">28</a>]</span> for use in the GeoPackage specification by addition of entries with “NA” as the scope code column in <a href="#gpkg_metadata_cols">Metadata Table Definition</a>.</p>
</div>
<table id="metadata_scopes" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 16. Metadata Scopes</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name (md_scope)</th>
<th class="tableblock halign-left valign-top">Scope Code</th>
<th class="tableblock halign-left valign-top">Definition</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">undefined</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Metadata information scope is undefined</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">fieldSession</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">012</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to the field session</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">collectionSession</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">004</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to the collection session</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">series</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">006</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to the (dataset) series <span class="footnote">[<a id="_footnoteref_29" class="footnote" href="#_footnote_29" title="View footnote.">29</a>]</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dataset</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">005</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to the (geographic feature) dataset</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">featureType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">010</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to a feature type (class)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">feature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">009</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to a feature (instance)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">attributeType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">002</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to the attribute class</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">attribute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">001</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to the characteristic of a feature (instance)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">016</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to a tile, a spatial subset of geographic data</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">model</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">015</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to a copy or imitation of an existing or hypothetical object</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">catalog</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Metadata applies to a feature catalog <span class="footnote">[<a id="_footnoteref_30" class="footnote" href="#_footnote_30" title="View footnote.">30</a>]</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">schema</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Metadata applies to an application schema <span class="footnote">[<a id="_footnoteref_31" class="footnote" href="#_footnote_31" title="View footnote.">31</a>]</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">taxonomy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Metadata applies to a taxonomy or knowledge system <span class="footnote">[<a id="_footnoteref_32" class="footnote" href="#_footnote_32" title="View footnote.">32</a>]</span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">software</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">013</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to a computer program or routine</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">014</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to a capability which a service provider entity makes available to a service user entity through a set of interfaces that define a behaviour, such as a use case</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">collectionHardware</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">003</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to the collection hardware class</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nonGeographicDataset</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">007</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to non-geographic data</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dimensionGroup</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">008</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to a dimension group</p></td>
</tr>
</tbody>
</table>

<div id="_requirement-71" class="quoteblock">
<div class="title">Requirement 71</div>
<blockquote>
Each <code>md_scope</code> column value in a <code>gpkg_metadata</code> table or updateable view SHALL be one of the name column values from <a href="#metadata_scopes">Metadata Scopes</a>.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_metadata_reference_table">2.4.3. Metadata Reference Table</h4>
<div class="sect4">
<h5 id="_data_19">2.4.3.1. Data</h5>
<div class="sect5">
<h6 id="metadata_reference_table_table_definition">2.4.3.1.1. Table Definition</h6>
<div id="_requirement-72" class="quoteblock">
<div class="title">Requirement 72</div>
<blockquote>
A GeoPackage that contains a <code>gpkg_metadata</code> table SHALL contain a <code>gpkg_metadata_reference</code> table per clause 2.4.3.1.1 <a href="#metadata_reference_table_table_definition">Table Definition</a>, <a href="#gpkg_metadata_reference_cols">Metadata Reference Table Definition (Table Name: gpkg_metadata_reference)</a> and <a href="#gpkg_metadata_reference_sql">gpkg_metadata_reference Table Definition SQL</a>.
</blockquote>
</div>
<div class="paragraph">
<p>The second component of GeoPackage metadata is the <code>gpkg_metadata_reference</code> table that links metadata in the <code>gpkg_metadata</code> table to data in the feature, and tiles tables defined in clauses 2.1.6 and 2.2.7.
The <code>gpkg_metadata_reference</code> table is not required to contain any rows.</p>
</div>
<table id="gpkg_metadata_reference_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 17. Metadata Reference Table Definition (Table Name: gpkg_metadata_reference)</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Col Type</th>
<th class="tableblock halign-left valign-top">Column Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>reference_scope</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lowercase metadata reference scope; one of ‘geopackage’, ‘table’,‘column’, ’row’, ’row/col’</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>table_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the table to which this metadata reference applies, or NULL for reference_scope of ‘geopackage’.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>column_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the column to which this metadata reference applies; NULL for <code>reference_scope</code> of ‘geopackage’,‘table’ or ‘row’, or the name of a column in the <code>table_name</code> table for <code>reference_scope</code> of ‘column’ or ‘row/col’</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>row_id_value</code> <span class="footnote">[<a id="_footnoteref_33" class="footnote" href="#_footnote_33" title="View footnote.">33</a>]</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL for <code>reference_scope</code> of ‘geopackage’, ‘table’ or ‘column’, or the rowed of a row record in the <code>table_name</code> table for <code>reference_scope</code> of ‘row’ or ‘row/col’</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>timestamp</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DATETIME</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">timestamp value in ISO 8601 format as defined by the strftime function '%Y-%m-%dT%H:%M:%fZ' format string applied to the current time</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">strftime('%Y-%m-%dT%H:%M:%fZ', 'now')</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>md_file_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>gpkg_metadata</code> table id column value for the metadata to which this <code>gpkg_metadata_reference</code> applies</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>md_parent_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>gpkg_metadata</code> table id column value for the hierarchical parent <code>gpkg_metadata</code> for the <code>gpkg_metadata</code> to which this <code>gpkg_metadata_reference</code> applies, or NULL if <code>md_file_id</code> forms the root of a metadata hierarchy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FK</p></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>Every row in <code>gpkg_metadata_reference</code> that has null value as <code>md_parent_id</code> forms the root of a metadata hierarchy.<span class="footnote">[<a id="_footnoteref_34" class="footnote" href="#_footnote_34" title="View footnote.">34</a>]</span></p>
</div>
<div class="paragraph">
<p>See <a href="#table_definition_sql">Table Definition SQL (Normative)</a> clause <a href="#gpkg_metadata_reference_sql">gpkg_metadata_reference Table Definition SQL</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_table_data_values_9">2.4.3.1.2. Table Data Values</h6>
<div id="_requirement-73" class="quoteblock">
<div class="title">Requirement 73</div>
<blockquote>
Every <code>gpkg_metadata_reference</code> table reference scope column value SHALL be one of ‘geopackage’, ‘table’, ‘column’, ’row’, ’row/col’ in lowercase.
</blockquote>
</div>
<div id="_requirement-74" class="quoteblock">
<div class="title">Requirement 74</div>
<blockquote>
Every <code>gpkg_metadata_reference</code> table row with a <code>reference_scope</code> column value of ‘geopackage’ SHALL have a <code>table_name</code> column value that is NULL.
Every other <code>gpkg_metadata_reference</code> table row SHALL have a <code>table_name</code> column value that references a value in the <code>gpkg_contents</code> <code>table_name</code> column.
</blockquote>
</div>
<div id="_requirement-75" class="quoteblock">
<div class="title">Requirement 75</div>
<blockquote>
Every <code>gpkg_metadata_reference</code> table row with a <code>reference_scope</code> column value of ‘geopackage’,‘table’ or ‘row’ SHALL have a <code>column_name</code> column value that is NULL.
Every other <code>gpkg_metadata_reference</code> table row SHALL have a <code>column_name</code> column value that contains the name of a column in the SQLite table or view identified by the <code>table_name</code> column value.
</blockquote>
</div>
<div id="_requirement-76" class="quoteblock">
<div class="title">Requirement 76</div>
<blockquote>
Every <code>gpkg_metadata_reference</code> table row with a <code>reference_scope</code> column value of ‘geopackage’, ‘table’ or ‘column’ SHALL have a <code>row_id_value</code> column value that is NULL.
Every other <code>gpkg_metadata_reference</code> table row SHALL have a <code>row_id_value</code> column value that contains the ROWID of a row in the SQLite table or view identified by the <code>table_name</code> column value.
</blockquote>
</div>
<div id="_requirement-77" class="quoteblock">
<div class="title">Requirement 77</div>
<blockquote>
Every <code>gpkg_metadata_reference</code> table row timestamp column value SHALL be in ISO 8601 <a href="#29">[29]</a> format containing a complete date plus UTC hours, minutes, seconds and a decimal fraction of a second, with a ‘Z’ (‘zulu’) suffix indicating UTC.<span class="footnote">[<a id="_footnoteref_35" class="footnote" href="#_footnote_35" title="View footnote.">35</a>]</span>
</blockquote>
</div>
<div id="_requirement-78" class="quoteblock">
<div class="title">Requirement 78</div>
<blockquote>
Every <code>gpkg_metadata_reference</code> table row <code>md_file_id</code> column value SHALL be an id column value from the <code>gpkg_metadata</code> table.
</blockquote>
</div>
<div id="_requirement-79" class="quoteblock">
<div class="title">Requirement 79</div>
<blockquote>
Every <code>gpkg_metadata_reference</code> table row <code>md_parent_id</code> column value that is NOT NULL SHALL be an id column value from the <code>gpkg_metadata</code> table that is not equal to the <code>md_file_id</code> column value for that row.
</blockquote>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_extension_mechanism">2.5. Extension Mechanism</h3>
<div class="sect3">
<h4 id="_introduction_3">2.5.1. Introduction</h4>
<div class="paragraph">
<p>A GeoPackage extension is a set of one or more requirements clauses that are documented by filling out the GeoPackage Extension Template in <a href="#extension_template">GeoPackage Extension Template (Normative)</a>. A GeoPackage Extension either profiles / extends existing requirements clauses in the GeoPackage standard or adds new requirements clauses. Existing requirement clause extension examples include additional geometry types, additional SQL geometry functions, and additional tile image formats. New requirement clause extension examples include spatial indexes, triggers, additional tables, other BLOB column encodings, and other SQL functions.</p>
</div>
<div class="paragraph">
<p>GeoPackage extensions are identified by a name of the form &lt;author&gt;_&lt;extension name&gt; where &lt;author&gt; indicates the person or organization that developed and maintains the extension.
The author value “gpkg” is reserved for GeoPackage extensions that are developed and maintained by OGC and used in GeoPackages.
Implementers use their own author names to register other extensions<span class="footnote">[<a id="_footnoteref_36" class="footnote" href="#_footnote_36" title="View footnote.">36</a>]</span> used in Extended GeoPackages.</p>
</div>
</div>
<div class="sect3">
<h4 id="_extensions">2.5.2. Extensions</h4>
<div class="sect4">
<h5 id="_data_20">2.5.2.1. Data</h5>
<div class="sect5">
<h6 id="extensions_table_definition">2.5.2.1.1. Table Definition</h6>
<div id="_requirement-80" class="quoteblock">
<div class="title">Requirement 80</div>
<blockquote>
A GeoPackage MAY contain a table or updateable view named gpkg_extensions.
If present this table SHALL be defined per clause 2.5.2.1.1 <a href="#extensions_table_definition">Table Definition</a>, <a href="#gpkg_extensions_cols">GeoPackage Extensions Table or View Definition (Table or View Name: gpkg_extensions)</a> and <a href="#gpkg_extensions_sql">gpkg_extensions Table Definition SQL</a>.
</blockquote>
</div>
<div class="paragraph">
<p>The <code>gpkg_extensions</code> table or updateable view in a GeoPackage is used to indicate that a particular extension applies to a GeoPackage, a table in a GeoPackage or a column of a table in a GeoPackage.
An application that accesses a GeoPackage can query the <code>gpkg_extensions</code> table instead of the contents of all the user data tables to determine if it has the required capabilitiesto read or write to tables with extensions, and to “fail fast” and return an error message if it does not.</p>
</div>
<table id="gpkg_extensions_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 18. GeoPackage Extensions Table or View Definition (Table or View Name: gpkg_extensions)</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Col Type</th>
<th class="tableblock halign-left valign-top">Column Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>table_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the table that requires the extension. When NULL, the extension is required for the entire GeoPackage. SHALL NOT be NULL when the column_name is not NULL.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>column_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the column that requires the extension. When NULL, the extension is required for the entire table.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>extension_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The case sensitive name of the extension that is required, in the form &lt;author&gt;_&lt;extension_name&gt;.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>definition</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Definition of the extension in the form specfied by the template in <a href="#extension_template">GeoPackage Extension Template (Normative)</a> or reference thereto.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scope</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates scope of extension effects on readers / writers: <em>read-write</em> or <em>write-only</em> in lowercase.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>See <a href="#gpkg_extensions_sql">gpkg_extensions Table Definition SQL</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_table_data_values_10">2.5.2.1.2. Table Data Values</h6>
<div id="_requirement-81" class="quoteblock">
<div class="title">Requirement 81</div>
<blockquote>
Every extension of a GeoPackage SHALL be registered in a corresponding row in the gpkg_extensions table.
The absence of a gpkg_extensions table or the absence of rows in gpkg_extnsions table SHALL both indicate the absence of extensions to a GeoPackage.
</blockquote>
</div>
<div id="_requirement-82" class="quoteblock">
<div class="title">Requirement 82</div>
<blockquote>
Values of the <code>gpkg_extensions</code> <code>table_name</code> column SHALL reference values in the <code>gpkg_contents</code> <code>table_name</code> column or be NULL.
They SHALL NOT be NULL for rows where the <code>column_name</code> value is not NULL.
</blockquote>
</div>
<div id="_requirement-83" class="quoteblock">
<div class="title">Requirement 83</div>
<blockquote>
The <code>column_name</code> column value in a <code>gpkg_extensions</code> row SHALL be the name of a column in the table specified by the <code>table_name</code> column value for that row, or be NULL.
</blockquote>
</div>
<div id="_requirement-84" class="quoteblock">
<div class="title">Requirement 84</div>
<blockquote>
Each <code>extension_name</code> column value in a <code>gpkg_extensions</code> row SHALL be a unique case sensitive value of the form &lt;author&gt;_&lt;extension_name&gt; where &lt;author&gt; indicates the person or organization that developed and
maintains the extension. The valid character set for &lt;author&gt; SHALL be [a-zA-Z0-9].
The valid character set for &lt;extension_name&gt; SHALL be [a-zA-Z0-9_].
An <code>extension_name</code> for the “gpkg” author name SHALL be one of those defined in this encoding standard or in an OGC Best Practices Document that extends it.
</blockquote>
</div>
<div class="paragraph">
<p>Complete examples of how to fill out the GeoPackage Extension Template in <a href="#extension_template">GeoPackage Extension Template (Normative)</a> are provided by Annex L through Annex P.
The definition column value in a <code>gpkg_extensions</code> row for those extensions SHALL contain the Annex name as a reference.</p>
</div>
<div class="paragraph">
<p>Partial examples of how to fill out the GeoPackage Extension Template in <a href="#extension_template">GeoPackage Extension Template (Normative)</a> are provided by the templates in <a href="#extension_geometry_types">GeoPackage Geometry Types Extension Template (Normative)</a> and <a href="#extension_geometry_encoding">User-Defined Geometry Types Encoding Extension Template (Normative)</a>.
Extension definitions created using those template and other extension definitions MAY be provided in the definition column, preferably as ASCII text, or as a reference such as a URI <a href="#23">[23]</a> or email address whereby the definition may be obtained.</p>
</div>
<div id="_requirement-85" class="quoteblock">
<div class="title">Requirement 85</div>
<blockquote>
The definition column value in a <code>gpkg_extensions</code> row SHALL contain or reference the text that results from documenting an extension by filling out the GeoPackage Extension Template in <a href="#extension_template">GeoPackage Extension Template (Normative)</a>.
</blockquote>
</div>
<div class="paragraph">
<p>Some extensions do not impose any additional requirements on software that accesses a GeoPackage in a read-only fashion.
An example of this is an extension that defines an SQL trigger that uses a non-standard SQL function defined in a GeoPackage SQLite Extension.
Triggers are only invoked when data is written to the GeoPackage, so usage of this type of extension can be safely ignored for read-only access.
This is indicated by a gpkg_extensions.scope column value of “write_only”.</p>
</div>
<div id="_requirement-86" class="quoteblock">
<div class="title">Requirement 86</div>
<blockquote>
The scope column value in a <code>gpkg_extensions</code> row SHALL be lowercase "read-write" for an extension that affects both readers and writers, or "write-only" for an extension that affects only writers.
</blockquote>
</div>
<div class="paragraph">
<p>The author value “gpkg” is reserved for GeoPackage extensions that are developed and maintained by OGC.
Requirements for extension names for the “gpkg” author name are defined in the clauses listed in 14 below.
GeoPackage implementers use their own author names to register other extensions.</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_security_considerations">3. Security Considerations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Security considerations for implementations utilizing GeoPackages are in the domain of the implementing application, deployment platform, operating system and networking environment.
The GeoPackage standard does not place any constraints on application, platform, operating system level or network security.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="abstract_test_suite"> Annex A: Conformance / Abstract Test Suite (Normative)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_base_2">A.1. Base</h3>
<div class="sect3">
<h4 id="_core_2">A.1.1. Core</h4>
<div class="sect4">
<h5 id="_sqlite_container_2">A.1.1.1. SQLite Container</h5>
<div class="sect5">
<h6 id="_data_21">A.1.1.1.1. Data</h6>
<div class="paragraph">
<p><strong>File Format</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/base/core/container/data/file_format</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the Geopackage is an SQLite version_3 database</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Pass if the first 16 bytes of the file contain “SQLite format 3” in ASCII.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 1.1.1.1.1 Req 1:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/base/core/container/data/file_format/application_id</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the SQLite database header application id field indicates GeoPackage version 1.0</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Pass if the application id field of the SQLite database header contains “GP10” in ASCII.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 1.1.1.1.1 Req 2:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><strong>File Extension Name</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/base/core/container/data/file_extension_name</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the geopackage extension is ".gpkg"</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Pass if the geopackage file extension is ".gpkg"</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 1.1.1.1.2 Req 3:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><strong>File Contents</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/base/core/container/data/file_contents</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the Geopackage only contains specified contents</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>For each gpkg_* table_name</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>PRAGMA table_info(table_name)</p>
</li>
<li>
<p>Continue if returns an empty result set</p>
</li>
<li>
<p>Fail if column definitions returned by PRAGMA table_info do not match column definitions for the table in Annex C.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Do test /opt/features/vector_features/data/feature_table_integer_primary_key</p>
</li>
<li>
<p>Do test /opt/features/vector/features/data/feature_table_one_geometry_column</p>
</li>
<li>
<p>Do test /opt/tiles/contents/data/tiles_row</p>
</li>
<li>
<p>SELECT extension_name FROM gpkg_contents</p>
</li>
<li>
<p>For each row from #4</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Fail if the substring before the first “_” is not “gpkg”</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 1.1.1.1.3 Req 4:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/base/core/container/data/table_data_types</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the data types of GeoPackage columns include only the types specified by <a href="#table_column_data_types">[table_column_data_types]</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p><code>SELECT table_name FROM gpkg_contents WHERE data_type = ‘features’</code></p>
</li>
<li>
<p>Not testable if returns empty set</p>
</li>
<li>
<p>For each row table name from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>PRAGMA table_info(table_name)</p>
</li>
<li>
<p>Fail if returns empty set</p>
</li>
<li>
<p>For each row type column value</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Fail if value is not one of the data type names specified by <a href="#table_column_data_types">[table_column_data_types]</a></p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="#table_column_data_types">[table_column_data_types]</a> Req 5:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><strong>Integrity Check</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/base/core/container/data/file_integrity</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the geopackage  passes the SQLite integrity check.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Pass if PRAGMA integrity_check returns “ok"</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause <a href="#_file_integrity">[_file_integrity]</a> Req 6:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/base/core/container/data/foreign_key_integrity</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the geopackage passes the SQLite foreign_key_check.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Pass if PRAGMA foreign_key_check() with no parameter value returns an empty result set</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause <a href="#_file_integrity">[_file_integrity]</a> Req 7:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
<div class="sect5">
<h6 id="_api_2">A.1.1.1.2. API</h6>
<div class="paragraph">
<p><strong>Structured Query Language</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/base/core/container/api/sql</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Test that the GeoPackage SQLite Extension provides the SQLite SQL API interface.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>sqlite3_exec(‘SELECT * FROM sqlite_master;)</p>
</li>
<li>
<p>Fail if returns an SQL error.</p>
</li>
<li>
<p>Pass otherwise</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 1.1.1.2.1 Req 8:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><strong>Every GPKG SQLite Configuration</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/base/core/container/api/every_gpkg_sqlite_config</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that a GeoPackage SQLite Extension has the Every GeoPackage SQLite Configuration compile and run time options.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>For each “SQLITE_OMIT_*” &lt;option&gt; listed at <a href="http://www.sqlite.org/compile.html#omitfeatures">http://www.sqlite.org/compile.html#omitfeatures</a></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><code>SELECT sqlite_compileoption_used(<em>SQLITE_OMIT_&lt;option&gt;</em>)</code></p>
</li>
<li>
<p>Fail if returns 1</p>
</li>
</ol>
</div>
</li>
<li>
<p>PRAGMA foreign_keys</p>
</li>
<li>
<p>Fail if returns 0</p>
</li>
<li>
<p>Pass otherwise</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 1.1.1.2.2 Req 9:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="sect4">
<h5 id="_spatial_reference_systems">A.1.1.2. Spatial Reference Systems</h5>
<div class="sect5">
<h6 id="_data_22">A.1.1.2.1. Data</h6>
<div class="paragraph">
<p><strong>Table Definition</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/base/core/gpkg_spatial_ref_sys/data/table_def</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_spatial_ref_sys table exists and has the correct definition.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p><code>SELECT sql FROM sqlite_master WHERE type = 'table' AND tbl_name = 'gpkg_spatial_ref_sys'</code></p>
</li>
<li>
<p>Fail if returns an empty result set</p>
</li>
<li>
<p>Pass if column names and column definitions in the returned <code>CREATE TABLE statement</code> in the sql column value, including data type, nullability,  and primary key constraints match all of those in the contents of C.1 Table 18. Column order, check constraint and trigger definitions, and other column definitions in the returned sql are irrelevant.</p>
</li>
<li>
<p>Fail otherwise.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 1.1.2.1.1 Req 10:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<div id="spatial_ref_sys_data_values_default" class="paragraph">
<p><strong>Table Data Values</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/base/core/gpkg_spatial_ref_sys/data_values_default</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the spatial_ref_sys table contains the required default contents.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p><code>SELECT srid, auth_name, auth_srid, srtext FROM gpkg_spatial_ref_sys WHERE srid = -1 returns -1 “NONE” -1 “Undefined”, AND</code></p>
</li>
<li>
<p><code>SELECT srid, auth_name, auth_srid, srtext FROM gpkg_spatial_ref_sys WHERE srid = 0 returns 0 “NONE” 0 “Undefined”, AND</code></p>
</li>
<li>
<p><code>SELECT definition FROM gpkg_spatial_ref_sys WHERE organization IN (“epsg”,”EPSG”) AND organization_coordsys_id 4326</code> returns GEOGCS ["WGS 84",
DATUM ["World Geodetic System 1984",
  SPHEROID["WGS 84", 6378137, 298.257223563 , AUTHORITY["EPSG","7030"]],
  AUTHORITY["EPSG","6326"]],
PRIMEM["Greenwich", 0 , AUTHORITY["EPSG","8901"]],
UNIT["degree", 0.017453292519943278, AUTHORITY["EPSG","9102"]],
AUTHORITY["EPSG","4326"] (rounding the UNIT conversion factors to 16 decimal places, and ignoring any optional EBNF components &lt;twin axes&gt; and &lt;to wgs84&gt; and whitespace differences in the returned text)</p>
</li>
<li>
<p>Pass if tests 1-3 are met</p>
</li>
<li>
<p>Fail otherwise</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 1.1.2.1.2 Requirement 11:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/base/core/spatial_ref_sys/data_values_required</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the spatial_ref_sys table contains rows to define all srs_id values used by features and tiles in a GeoPackage.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT DISTINCT gc.srs_id AS gc_srid, srs.srs_name, srs.srs_id, srs.organization, srs.organization_coordsys_id, srs.definition FROM gpkg_contents AS gc LEFT OUTER JOIN gpkg_spatial_ref_sys AS srs ON srs.srs_id = gc.srs_id</p>
</li>
<li>
<p>Pass if no returned srs values are NULL.</p>
</li>
<li>
<p>Fail otherwise</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause Clause 1.1.2.1.2 Req 12:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="sect4">
<h5 id="_contents_4">A.1.1.3. Contents</h5>
<div class="sect5">
<h6 id="_data_23">A.1.1.3.1. Data</h6>
<div class="paragraph">
<p><strong>Table Definition</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/base/core/contents/data/table_def</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_contents table exists and has the correct definition.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT sql FROM sqlite_master WHERE type = 'table' AND tbl_name = 'gpkg_contents'</p>
</li>
<li>
<p>Fail if returns an empty result set.</p>
</li>
<li>
<p>Pass if the column names and column definitions in the returned CREATE TABLE statement, including data type, nullability, default values and primary, foreign and unique key constraints match all of those in the contents of C.2 Table <a href="#gpkg_contents_sql">[gpkg_contents_sql]</a>. Column order, check constraint and trigger definitions, and other column definitions in the returned sql are irrelevant.</p>
</li>
<li>
<p>Fail Otherwise</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 1.1.3.1.1 Req 13:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><strong>Table Data Values</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/base/core/contents/data/data_values_table_name</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the table_name column values in the gpkg_contents table are valid.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT DISTINCT gc.table_name AS gc_table, sm.tbl_name
FROM gpkg_contents AS ge LEFT OUTER JOIN sqlite_master AS sm ON gc.table_name = sm.tbl_name</p>
</li>
<li>
<p>Not testable if returns an empty result set.</p>
</li>
<li>
<p>Fail if any gpkg_contents.table_name value is NULL</p>
</li>
<li>
<p>Pass otherwise.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 1.1.3.1.2 Req 14:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/base/core/contents/data/data_values_last_change</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_contents table last_change column values are in ISO 8601 [29]format containing a complete date plus UTC hours, minutes, seconds and a decimal fraction of a second, with a ‘Z’ (‘zulu’) suffix indicating UTC.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT last_change from gpkg_contents.</p>
</li>
<li>
<p>Not testable if returns an empty result set.</p>
</li>
<li>
<p>For each row from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Fail if format of returned value does not match yyyy-mm-ddThh:mm:ss.hhhZ</p>
</li>
<li>
<p>Log pass otherwise</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if logged pass and no fails.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 1.1.3.1.2 Req 15:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/base/core/contents/data/data_values_srs_id</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_contents table srs_id column values reference gpkg_spatial_ref_sys srs_id column values.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>PRAGMA foreign_key_check(‘gpkg_contents’)</p>
</li>
<li>
<p>Fail if does not return an empty result set</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 1.1.3.1.2 Req 16:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_options_2">A.2. Options</h3>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/valid_geopackage</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that a GeoPackage contains a features or tiles table and gpkg_contents table row describing it.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>Execute test /opt/features/contents/data/features_row</p>
</li>
<li>
<p>Pass if test passed</p>
</li>
<li>
<p>Execute test /opt/tiles/contents/data/tiles_row</p>
</li>
<li>
<p>Pass if test passed</p>
</li>
<li>
<p>Fail otherwise</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2 Req 17:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="sect3">
<h4 id="_features">A.2.1. Features</h4>
<div class="sect4">
<h5 id="_simple_features_sql_introduction">A.2.1.1. Simple Features SQL Introduction</h5>

</div>
<div class="sect4">
<h5 id="_contents_5">A.2.1.2. Contents</h5>
<div class="sect5">
<h6 id="_data_24">A.2.1.2.1. Data</h6>
<div class="paragraph">
<p><strong>Contents Table Feature Row</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/features/contents/data/features_row</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_contents table_name value table exists, and is apparently a feature table for every row with a data_type column value of “features”</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>Execute test /opt/features/vector_features/data/feature_table_integer_primary_key</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.1.2.1.1 Req 18:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="sect4">
<h5 id="_geometry_encoding">A.2.1.3. Geometry Encoding</h5>
<div class="sect5">
<h6 id="_data_25">A.2.1.3.1. Data</h6>
<div class="paragraph">
<p><strong>BLOB Format</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/features/geometry_encoding/data/blob</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that geometries stored in feature table geometry columns are encoded in the StandardGeoPackageBinary format.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name AS tn, column_name AS cn FROM gpkg_geometry_columns WHERE table_name IN (SELECT table_name FROM gpkg_contents WHERE data_type = ‘features’)</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT cn FROM tn</p>
</li>
<li>
<p>Not testable if none found</p>
</li>
<li>
<p>For each cn value from step a</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Fail if the first two bytes of each gc are not “GP”</p>
</li>
<li>
<p>Fail if gc.version_number is not 0</p>
</li>
<li>
<p>Fail if gc.flags.GeopackageBinary type != 0</p>
</li>
<li>
<p>Fail if ST_IsEmpty(cn value) = 1 and gc.flags.envelope != 0 and envelope values are not NaN</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.1.3.1.1 Req 19:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="sect4">
<h5 id="_sql_geometry_types">A.2.1.4. SQL Geometry Types</h5>
<div class="sect5">
<h6 id="_data_26">A.2.1.4.1. Data</h6>
<div class="paragraph">
<p><strong>Core Types</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/features/geometry_encoding/data/core_types_existing_sparse_data</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that existing basic simple feature geometries are stored in valid GeoPackageBinary format encodings.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name FROM gpkg_geometry_columns</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT table_name AS tn, column_name AS cn FROM gpkg_geometry_columns WHERE table_name IN (SELECT table_name FROM gpkg_contents WHERE data_type = ‘features’),</p>
</li>
<li>
<p>Fail if returns an empty result set</p>
</li>
<li>
<p>For each row from step 3</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT cn FROM tn;</p>
</li>
<li>
<p>For each row from step a, if bytes 2-5 of cn.wkb as uint32 in endianness of gc.wkb byte 1of cn from #1 are a geometry type value from Annex E Table 42, then</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Log cn.header values, wkb endianness and geometry type</p>
</li>
<li>
<p>If cn.wkb is not correctly encoded per ISO 13249-3 clause 5.1.46 then log fail</p>
</li>
<li>
<p>If cn.flags.E is 1 - 4 and some cn.wkbx is outside of cn.envelope.minx,maxx then log fail</p>
</li>
<li>
<p>If cn.flags.E is 1 - 4 and some gc.wkby is outside of cn.envelope.miny,maxy then log fail</p>
</li>
<li>
<p>If cn.flags.E is 2,4 and some gc.wkb.z is outside of cnenvelope.minz,maxz then log fail</p>
</li>
<li>
<p>If cn.flags.E is 3,4 and some gc.wkb.m is outside of cn.envelope.minm,maxm then log fail</p>
</li>
<li>
<p>If cn.flags.E is 5-7 then log fail</p>
</li>
<li>
<p>Otherwise log pass</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if log contanins pass and no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.1.4.1.1 Req 20:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/features/geometry_encoding/data/core_types_all_types_test_data</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that all basic simple feature geometry types and options are stored in valid GeoPackageBinary format encodings.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>Open GeoPackage that has feature geometry values of geometry type inAnnex E, for an assortment of srs_ids, for an assortment of coordinate values, without and with z and / or m values, in both big and little endian encodings:</p>
</li>
<li>
<p>/opt/features/geometry_encoding/data/core_types_existing_sparse_data</p>
</li>
<li>
<p>Pass if log contains pass record for big and little endian GP headers containing big and little endian WKBs for 0-1 envelope contents indicator codes for every geometry type value from Annex E Table 41 without and with z and/or m values.</p>
</li>
<li>
<p>Fail otherwise</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.1.4.1.1 Req 20:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="sect4">
<h5 id="_geometry_columns_2">A.2.1.5. Geometry Columns</h5>
<div class="sect5">
<h6 id="_data_27">A.2.1.5.1. Data</h6>
<div class="paragraph">
<p><strong>Table Definition</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/features/geometry_columns/data/table_def</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_geometry_columns table exists and has the correct definition.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT sql FROM sqlite_master WHERE type = 'table' AND tbl_name = 'gpkg_geometry_columns'</p>
</li>
<li>
<p>Fail if returns an empty result set.</p>
</li>
<li>
<p>Pass if the column names and column definitions in the returned Create TABLE statement in the sql column value, including data type, nullability, default values and primary, foreign and unique key constraints match all of those in the contents of C.4Table 20. Column order, check constraint and trigger definitions, and other column definitions in the returned sql are irrelevant.</p>
</li>
<li>
<p>Fail otherwise.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.1.5.1.1 Req 21:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><strong>Table Data Values</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/features/geometry_columns/data/data_values_geometry_columns</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that gpkg_geometry_columns contains one row record for each geometry column in each vector feature user data table.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name FROM gpkg_contents WHERE data_type = 'features'</p>
</li>
<li>
<p>Not testable  if returns an empty result set</p>
</li>
<li>
<p>SELECT table_name FROM gpkg_contents WHERE data_type = 'features' AND table_name NOT IN (SELECT table_name FROM gpkg_geometry_columns)</p>
</li>
<li>
<p>Fail if result set is not empty</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.1.5.1.2 Req 22:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/features/geometry_columns/data/data_values_table_name</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the table_name column values in the gpkg_geometry_columns table are valid.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>PRAGMA foreign_key_check(‘geometry_columns’)</p>
</li>
<li>
<p>Fail if returns any rows with a fourth column foreign key index value of 1 (gpkg_contents)</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.1.5.1.2 Req 23:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/features/geometry_columns/data/data_values_column_name</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the column_name column values in the gpkg_geometry_columns table are valid.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name, column_name FROM gpkg_geometry_columns</p>
</li>
<li>
<p>Not testable  if returns an empty result set</p>
</li>
<li>
<p>For each row from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>PRAGMA table_info(table_name)</p>
</li>
<li>
<p>Fail if gpkg_geometry_columns.column_name value does not equal a name column value returned by PRAGMA table_info.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.1.5.1.2 Req 24:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/features/geometry_columns/data/data_values_geometry_type_name</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the geometry_type_name column values in the gpkg_geometry_columns table are valid.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT DISTINCT geometry_type_name from gpkg_geometry_columns</p>
</li>
<li>
<p>Not testable  if returns an empty result set</p>
</li>
<li>
<p>For each row from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Fail if a returned geometry_type_name value is not in Table 42 or Table 43 in Annex E</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.1.5.1.2 Req 25:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/features/geometry_columns/data/data_values_srs_id</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_geometry_columns table srs_id column values are valid.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>PRAGMA foreign_key_check(‘gpkg_geometry_columns’)</p>
</li>
<li>
<p>Fail if returns any rows with a fourth column foreign key index value of 0</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.1.5.1.2 Req 26:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/features/geometry_columns/data/data_values_z</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_geometry_columns table z column values are valid.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT z FROM gpkg_geometry_columns</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT z FROM gpkg_geometry_columns WHERE z NOT IN (0,1,2)</p>
</li>
<li>
<p>Fail if does not return an empty result set</p>
</li>
<li>
<p>Pass otherwise.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.1.5.1.2 Req 27:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/features/geometry_columns/data/data_values_m</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_geometry_columns table m column values are valid.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT m FROM gpkg_geometry_columns</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT m FROM gpkg_geometry_columns WHERE m NOT IN (0,1,2)</p>
</li>
<li>
<p>Fail if does not return an empty result set</p>
</li>
<li>
<p>Pass otherwise.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.1.5.1.2 Req 28:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="sect4">
<h5 id="_vector_features_user_data_tables">A.2.1.6. Vector Features User Data Tables</h5>
<div class="sect5">
<h6 id="_data_28">A.2.1.6.1. Data</h6>
<div class="paragraph">
<p><strong>Table Definition</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/features/vector_features/data/feature_table_integer_primary_key</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that every vector features user data table has an integer primary key.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name FROM gpkg_contents WERE data_type = ‘features’</p>
</li>
<li>
<p>Not testable  if returns an empty result set</p>
</li>
<li>
<p>For each row from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>PRAGMA table_info(table_name)</p>
</li>
<li>
<p>Fail if returns an empty result set</p>
</li>
<li>
<p>Fail if result set does not contain one row where the pk column value is 1 and the not null column value is 1 and the type column value is “INTEGER”</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.1.6.1.1 Req 29:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/features/vector_features/data/feature_table_one_geometry_column</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that every vector features user data table has one geometry column.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name FROM gpkg_contents WERE data_type = ‘features’</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row table name from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT column_name from gpkg_geometry_columns where table_name = row table name</p>
</li>
<li>
<p>Fail if returns more than one column name</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.1.6.1.1 Req 30:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/features/vector_features/data/feature_table_geometry_column_type</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the declared SQL type of a feature table geometry column is the uppercase geometry type name from Annex E specified by the geometry_type_name
column for that column_name and table_name in the gpkg_geometry_columns table.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name, column_name, geometry_type_name table_name
FROM gpkg_geometry_columns WHERE table_name IN
(SELECT table_name FROM gpkg_contents WHERE data_type = <em>features</em>)</p>
</li>
<li>
<p>For each row selected in (1):</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Fail if selected geometry_type_name value is not a value from the NAME column in Annex E Table 42 or Table 43.</p>
</li>
<li>
<p>SELECT sql FROM sqlite_master
WHERE type = <em>table</em> AND name = ‘{selected table_ name}’</p>
</li>
<li>
<p>Pass if declared type of column_name selected in (1) is the geometry_type_name selected in (1)</p>
</li>
<li>
<p>Fail otherwise</p>
</li>
</ol>
</div>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.1.6.1.1 Req 30b:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><strong>Table Data Values</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/features/vector_features/data/data_values_geometry_type</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the geometry type of feature geometries are of the type or are assignable for the geometry type specified by the gpkg_geometry columns table geometry_type_name column value.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name AS tn, column_name AS cn, geometry_type_name AS gt_name FROM gpkg_geometry_columns WHERE table_name IN (SELECT table_name FROM gpkg_contents WHERE data_type = ‘features’)</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT DISTINCT ST_GeometryType(cn) FROM tn</p>
</li>
<li>
<p>For each row actual_type_name from step a</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>SELECT GPKG_IsAssignable(geometry_type_name, actual_type_name)</p>
</li>
<li>
<p>Fail if any returned 0</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.1.6.1.2 Req 31:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/features/vector_features/data/data_value_geometry_srs_id</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify the the srs_id of feature geometries are the srs_id specified for the gpkg_geometry_columns table srs_id column value.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name AS tn, column_name AS cn, srs_id AS gc_srs_id FROM gpkg_geometry_columns WHERE table_name IN (SELECT table_name FROM gpkg_contents where data_type = ‘features’)</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT DISTINCT st_srid(cn) FROM tn</p>
</li>
<li>
<p>For each row from step a</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Fail if returnvalue not equal to gc_srs_id</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.1.6.1.2 Req 32:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="sect3">
<h4 id="_tiles">A.2.2. Tiles</h4>
<div class="sect4">
<h5 id="_contents_6">A.2.2.1. Contents</h5>
<div class="sect5">
<h6 id="_data_29">A.2.2.1.1. Data</h6>
<div class="paragraph">
<p><strong>Contents Table – Tiles Row</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/contents/data/tiles_row</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_contents table_name value table exists and is apparently a tiles table for every row with a data_type column value of “tiles”.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name FROM gpkg_contents WHERE data_type = “tiles”</p>
</li>
<li>
<p>Not testable  if returns empty result set</p>
</li>
<li>
<p>For each row from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>PRAGMA table_info(table_name)</p>
</li>
<li>
<p>Fail if returns an empty result set</p>
</li>
<li>
<p>Fail if result set does not contain one row where the pk column value is 1 and the not null column value is 1 and the type column value is “INTEGER”and the name column value is “id”</p>
</li>
<li>
<p>Fail if result set does not contain four other rows where the name column values are “zoom_level”,”tile_column”,”tile_row”, and “tile_data”.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.2.1.1 Req 33:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="sect4">
<h5 id="_zoom_levels">A.2.2.2. Zoom Levels</h5>
<div class="sect5">
<h6 id="_data_30">A.2.2.2.1. Data</h6>
<div class="paragraph">
<p><strong>Zoom Times Two</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/zoom_levels/data/zoom_times_two</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that by default zoom level pixel sizes for tile matrix user data tables vary by factors of 2 between adjacent zoom levels in the tile matrix metadata table.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT CASE
WHEN (SELECT tbl_name FROM sqlite_master WHERE tbl_name = <em>gpkg_extensions</em>) = <em>gpkg_extensions</em> THEN
(SELECT table_name FROM gpkg_contents WHERE data_type = <em>tiles</em> AND table_name NOT IN
 (SELECT table_name from gpkg_extensions WHERE extension_name = <em>gpkg_zoom_other</em>))
ELSE (SELECT table_name FROM gpkg_contents WHERE data_type = <em>tiles</em>)
END;</p>
</li>
<li>
<p>Not testable  if returns empty result set</p>
</li>
<li>
<p>For each row table_name from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT zoom_level, pixel_x_size, pixel_y_size FROM gpkg_tile_matrix WHERE table_name = selected table name ORDER BY zoom_level ASC</p>
</li>
<li>
<p>Not testable  if returns empty result set, or only one row</p>
</li>
<li>
<p>Not testable  if there are not two rows with adjacent zoom levels</p>
</li>
<li>
<p>Fail if any pair of rows for adjacent zoom levels have pixel_x_size or pixel_y_size values that differ by other than factors of two</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.3.1.1 Req 34:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="sect4">
<h5 id="_tile_encoding_png">A.2.2.3. Tile Encoding PNG</h5>
<div class="sect5">
<h6 id="_data_31">A.2.2.3.1. Data</h6>
<div class="paragraph">
<p><strong>MIME Type PNG</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/tiles_encoding/data/mime_type_png</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that a tile matrix user data table that contains tile data that is not MIME type image/jpeg by default contains tile data in MIME type image/png.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT CASE
WHEN (SELECT tbl_name FROM sqlite_master WHERE tbl_name = 'gpkg_extensions') = 'gpkg_extensions' THEN
(SELECT table_name FROM gpkg_contents WHERE data_type = 'tiles' AND table_name NOT IN
 (SELECT table_name from gpkg_extensions WHERE extension_name IN ('gpkg_webp')))
ELSE (SELECT table_name FROM gpkg_contents WHERE data_type = 'tiles')
END;</p>
</li>
<li>
<p>Not testable if returns empty result set</p>
</li>
<li>
<p>For each row tbl_name from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT tile_data FROM tbl_name</p>
</li>
<li>
<p>For each row tile_data from step a</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Pass if tile data in MIME type image/png</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Fail if no passes</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.4.1.1 Req 35:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="sect4">
<h5 id="_tile_encoding_jpeg">A.2.2.4. Tile Encoding JPEG</h5>
<div class="sect5">
<h6 id="_data_32">A.2.2.4.1. Data</h6>
<div class="paragraph">
<p><strong>MIME Type JPEG</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/tiles_encoding/data/mime_type_jpeg</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that a tile matrix user data table that contains tile data that is not MIME type image/png by default contains tile data in MIME type image/jpeg.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT CASE
WHEN (SELECT tbl_name FROM sqlite_master WHERE tbl_name = 'gpkg_extensions') = 'gpkg_extensions' THEN
(SELECT table_name FROM gpkg_contents WHERE data_type = 'tiles' AND table_name NOT IN
 (SELECT table_name from gpkg_extensions WHERE extension_name IN ('gpkg_webp')))
ELSE (SELECT table_name FROM gpkg_contents WHERE data_type = 'tiles')
END;</p>
</li>
<li>
<p>Not testable if returns empty result set</p>
</li>
<li>
<p>For each row tbl_name from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT tile_data FROM tbl_name</p>
</li>
<li>
<p>For each row tile_data from step a</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Pass if tile data in MIME type image/jpeg</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Fail if no passes</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.5.1.1 Req 36:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="sect4">
<h5 id="_tile_matrix_set_2">A.2.2.5. Tile Matrix Set</h5>
<div class="sect5">
<h6 id="_data_33">A.2.2.5.1. Data</h6>
<div class="paragraph">
<p><strong>Table Definition</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/gpkg_tile_matrix_set/data/table_def</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_tile_matrix_set table exists and has the correct definition.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT sql FROM sqlite_master WHERE type = 'table' AND tbl_name = 'gpkg_tile_matrix_set'</p>
</li>
<li>
<p>Fail if returns an empty result set.</p>
</li>
<li>
<p>Pass if the column names and column definitions in the returned CREATE TABLE statement in the sql column value,, including data type, nullability, default values and primary, foreign and unique key constraints match all of those in the contents of <a href="#example_feature_table_sql">[example_feature_table_sql]</a>. Column order, check constraint and trigger definitions, and other column definitions in the returned sql are irrelevant.</p>
</li>
<li>
<p>Fail otherwise.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.6.1.1 Req 37:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><strong>Table Data Values</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/gpkg_tile_matrix_set/data/data_values_table_name</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that values of the gpkg_tile_matrix_set table_name column reference values in the gpkg_contents table_name column for rows with a data type of “tiles”.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name FROM gpkg_tile_matrix_set</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT table_name FROM gpkg_tile_matrix_set tms WHERE table_name NOT IN (SELECT table_name FROM gpkg_contents gc WHERE tms.table_name = gc.table_name AND gc.data_type != ‘tiles’)</p>
</li>
<li>
<p>Fail if result set contains any rows</p>
</li>
<li>
<p>Pass otherwise</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.6.1.2 Req 38:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/gpkg_tile_matrix_set/data/data_values_row_record</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_tile_matrix_set table contains a row record for each tile pyramid  user data table .</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name AS &lt;user_data_tiles_table&gt; from gpkg_contents where data_type = ‘tiles’</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT sql FROM sqlite_master WHERE type=’table’ AND tbl_name =  <em>&lt;user_data_tiles_table&gt;</em></p>
</li>
<li>
<p>Fail if returns an empty result set</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.6.1.2 Req 39:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/gpkg_tile_matrix_set/data/data_values_srs_id</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_tile_matrix_set table srs_id column values reference gpkg_spatial_ref_sys srs_id column values.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>PRAGMA foreign_key_check(‘gpkg_geometry_columns’)</p>
</li>
<li>
<p>Fail if returns any rows with a fourth column foreign key index value of 1 (gpkg_spatial_ref_sys)</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.6.1.2 Req 40:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="sect4">
<h5 id="_tile_matrix">A.2.2.6. Tile Matrix</h5>
<div class="sect5">
<h6 id="_data_34">A.2.2.6.1. Data</h6>
<div class="paragraph">
<p><strong>Table Definition</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/gpkg_tile_matrix/data/table_def</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_tile_matrix table exists and has the correct definition.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT sql FROM sqlite_master WHERE type = 'table' AND tbl_name = 'gpkg_tile_matrix'</p>
</li>
<li>
<p>Fail if returns an empty result set.</p>
</li>
<li>
<p>Pass if the column names and column definitions in the returned CREATE TABLE statement in the sql column value, including data type, nullability, default values, primary, and foreign key constraints match all of those in the contents of Annex C Table 23.</p>
</li>
<li>
<p>Fail otherwise.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.7.1.1 Req 41:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><strong>Table Data Values</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/gpkg_tile_matrix/data/data_values_table_name</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that values of the gpkg_tile_matrix table_name column reference values in the gpkg_contents table_name column for rows with a data type of “tiles”.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name FROM gpkg_tile_matrix</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT table_name FROM gpkg_tile_matrix tmm WHERE table_name NOT IN (SELECT table_name FROM gpkg_contents gc WHERE tmm.table_name = gc.table_name AND gc.data_type != ‘tiles’)</p>
</li>
<li>
<p>Fail if result set contains any rows</p>
</li>
<li>
<p>Pass otherwise</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.7.1.2 Req 42:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/gpkg_tile_matrix/data/data_values_zoom_level_rows</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_tile_matrix table contains a row record for each zoom level that contains one or more tiles in each tile pyramid  user data table.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name AS &lt;user_data_tiles_table&gt; from gpkg_contents where data_type = ‘tiles’</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT DISTINCT gtmm.zoom_level AS gtmm_zoom, udt.zoom_level AS udtt_zoom FROM gpkg_tile_matrix AS gtmm
LEFT OUTER JOIN &lt;user_data_tiles_table&gt; AS udtt ON udtt.zoom_level =  gtmm.zoom_level AND gtmm.t_table_name = <em>&lt;user_data_tiles_table&gt;</em></p>
</li>
<li>
<p>Fail if any gtmm_zoom column value in the result set is NULL</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.7.1.2 Req 43:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/gpkg_tile_matrix/data/data_values_zoom_level</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that zoom level column values in the gpkg_tile_matrix table are not negative.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT zoom_level FROM gpkg_tile_matrix</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT min(zoom_level) FROM gpkg_tile_matrix_metadata.</p>
</li>
<li>
<p>Fail if less than 0.</p>
</li>
<li>
<p>Pass otherwise.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.7.1.2 Req 44:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/gpkg_tile_matrix/data/data_values_matrix_width</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the matrix_width values in the gpkg_tile_matrix table are valid.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT matrix_width FROM gpkg_tile_matrix</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT min(matrix_width) FROM gpkg_tile_matrix.</p>
</li>
<li>
<p>Fail if less than 1.</p>
</li>
<li>
<p>Pass otherwise.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference:</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.7.1.2 Req 45:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type:</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/gpkg_tile_matrix/data/data_values_matrix_height</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the matrix_height values in the gpkg_tile_matrix table are valid.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT matrix_height FROM gpkg_tile_matrix</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT min(matrix_height) FROM gpkg_tile_matrix.</p>
</li>
<li>
<p>Fail if less than 1.</p>
</li>
<li>
<p>Pass otherwise.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.7.1.2 Req 46:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/gpkg_tile_matrix/data/data_values_tile_width</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the tile_width values in the gpkg_tile_matrix table are valid.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT tile_width FROM gpkg_tile_matrix</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT min(tile_width) FROM gpkg_tile_matrix.</p>
</li>
<li>
<p>Fail if less than 1.</p>
</li>
<li>
<p>Pass otherwise.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.7.1.2 Req 47:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/gpkg_tile_matrix/data/data_values_tile_height</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the tile_height values in the gpkg_tile_matrix table are valid.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT tile_height FROM gpkg_tile_matrix</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT min(tile_height) FROM gpkg_tile_matrix.</p>
</li>
<li>
<p>Fail if less than 1.</p>
</li>
<li>
<p>Pass otherwise.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.7.1.2 Req 48:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/gpkg_tile_matrix/data/data_values_pixel_x_size</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the pixel_x_size values in the gpkg_tile_matrix table are valid.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT pixel_x_size FROM gpkg_tile_matrix</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT min(pixel_x_size) FROM gpkg_tile_matrix.</p>
</li>
<li>
<p>Fail if less than 0.</p>
</li>
<li>
<p>Pass otherwise.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.7.1.2 Req 49:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/gpkg_tile_matrix/data/data_values_pixel_y_size</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the pixel_y_size values in the gpkg_tile_matrix table are valid.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT pixel_y_size FROM gpkg_tile_matrix</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT min(pixel_y_size) FROM gpkg_tile_matrix.</p>
</li>
<li>
<p>Fail if less than 0.</p>
</li>
<li>
<p>Pass otherwise.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.7.1.2 Req 50:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/gpkg_tile_matrix/data/data_values_pixel_size_sort</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the pixel_x_size and pixel_y_size column values for zoom level column values in a gpkg_tile_matrix table sorted in ascending order are sorted in descending order, showing that lower zoom levels are zoomed “out”.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name FROM gpkg_contents WHERE data_type = ‘tiles’</p>
</li>
<li>
<p>Not testable if returns empty result set</p>
</li>
<li>
<p>For each row table_name from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT zoom_level, pixel_x_size, pixel_y_size from gpkg_tile_matrix WHERE table_name = row table name ORDER BY zoom_level ASC</p>
</li>
<li>
<p>Not testable if returns empty result set</p>
</li>
<li>
<p>Fail if pixel_x_sizes are not sorted in descending order</p>
</li>
<li>
<p>Fail if pixel_y_sizes are not sorted in descending order</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if testable and no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.7.1.2 Req 51:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="sect4">
<h5 id="_tile_pyramid_user_data">A.2.2.7. Tile Pyramid User Data</h5>
<div class="sect5">
<h6 id="_data_35">A.2.2.7.1. Data</h6>
<div class="paragraph">
<p><strong>Table Definition</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/tile_pyramid/data/table_def</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that multiple tile pyramids are stored in different tiles tables with unique names containing the required columns.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT COUNT(table_name) FROM gpkg_contents WERE data_type = “tiles”</p>
</li>
<li>
<p>Not testable if less than 1</p>
</li>
<li>
<p>SELECT table_name FROM gpkg_contents WHERE data_type = “tiles”</p>
</li>
<li>
<p>For each row from step 3</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>PRAGMA table_info(table_name)</p>
</li>
<li>
<p>Fail if returns an empty result set</p>
</li>
<li>
<p>Fail if result set does not contain one row where the pk column value is 1 and the not null column value is 1 and the type column value is “INTEGER”and the name column value is “id”</p>
</li>
<li>
<p>Fail if result set does not contain four other rows where the name column values are “zoom_level”,”tile_column”,”tile_row”, and “tile_data”.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.8.1.1 Req 52:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><strong>Table Data Values</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/tile_pyramid/data/data_values_zoom_levels</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the zoom level column values in each tile pyramid user data table are within the range of zoom levels defined by rows in the gpkg_tile_matrix table.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT DISTINCT table_name AS &lt;user_data_tiles_table&gt; FROM gpkg_tile_matrix</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row &lt;user_data_tiles_table&gt; from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT zoom_level FROM &lt;user_data_tiles_table&gt;</p>
</li>
<li>
<p>If result set not empty</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>SELECT MIN(gtmm.zoom_level) AS min_gtmm_zoom, MAX(gtmm.zoom_level) AS max_gtmm_zoom FROM gpkg_tile_matrix WHERE table_name = &lt;user_data_tiles_table&gt;</p>
</li>
<li>
<p>SELECT id FROM &lt;user_data_tiles_table&gt; WHERE zoom_level &lt; min_gtmm_zoom</p>
</li>
<li>
<p>Fail if result set not empty</p>
</li>
<li>
<p>SELECT id FROM &lt;user_data_tiles_table&gt; WHERE zoom_level &gt; max_gtmm_zoom</p>
</li>
<li>
<p>Fail if result set not empty</p>
</li>
<li>
<p>Log pass otherwise</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if logged pas and no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.8.1.2 Req 53:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/tile_pyramid/data/data_values_tile_column</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the tile_column column values for each zoom level value in each tile pyramid user data table are within the range of columns defined by rows in the gpkg_tile_matrix table.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT DISTINCT table_name AS &lt;user_data_tiles_table&gt; FROM gpkg_tile_matrix</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row &lt;user_data_tiles_table&gt; from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT DISTINCT gtmm.zoom_level AS gtmm_zoom, gtmm.matrix_width AS gtmm_width, udt.zoom_level AS udt_zoom, udt.tile_column AS udt_column FROM gpkg_tile_matrix AS gtmm LEFT OUTER JOIN &lt;user_data_tiles_table&gt; AS udt ON udt.zoom_level = gtmm.zoom_level AND gtmm.t_table_name = <em>&lt;user_data_tiles_table&gt;</em> AND (udt_column &lt; 0 OR udt_column &gt; (gtmm_width - 1))</p>
</li>
<li>
<p>Fail if any udt_column value in the result set is not NULL</p>
</li>
<li>
<p>Log pass otherwise</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if logged pass and no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.8.1.2 Req 54:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/tile_pyramid_data/data_values_tile_row</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the tile_row column values for each zoom level value in each tile pyramid user data table are within the range of rows defined by rows in the gpkg_tile_matrix table.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT DISTINCT table_name AS &lt;user_data_tiles_table&gt; FROM gpkg_tile_matrix</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row &lt;user_data_tiles_table&gt; from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT DISTINCT gtmm.zoom_level AS gtmm_zoom, gtmm.matrix_height AS gtmm_height, udt.zoom_level AS udt_zoom, udt.tile_row AS udt_row FROM gpkg_tile_matrix AS gtmm LEFT OUTER JOIN &lt;user_data_tiles_table&gt;  AS udt ON udt.zoom_level = gtmm.zoom_level AND gtmm.t_table_name = ‘&lt;user_data_tiles_table&gt; ' AND (udt_row &lt; 0 OR udt_row &gt; (gtmm_height - 1))</p>
</li>
<li>
<p>Fail if any udt_row value in the result set is not NULL</p>
</li>
<li>
<p>Log pass otherwise</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if logged pass and no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.8.1.2 Req 55:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="sect3">
<h4 id="_schema_2">A.2.3. Schema</h4>
<div class="sect4">
<h5 id="_data_columns_2">A.2.3.1. Data Columns</h5>
<div class="sect5">
<h6 id="_data_36">A.2.3.1.1. Data</h6>
<div class="paragraph">
<p><strong>Table Definition</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/schema/data_columns/data/data_table_def</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_data_columns table exists and has the correct definition.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT sql FROM sqlite_master WHERE type = 'table' AND tbl_name = 'gpkg_data_columns'</p>
</li>
<li>
<p>Fail if returns an empty result set</p>
</li>
<li>
<p>Pass if column names and column definitions in the returned CREATE TABLE statement in the sql column value, including data type, nullability, default values and primary, foreign and unique key constraints match all of those in the contents of Annex C8 Table 30. Column order, check constraint and trigger definitions, and other column definitions in the returned sql are irrelevant.</p>
</li>
<li>
<p>Fail otherwise.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.3.2.1.1 Req 56:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><strong>Data Values</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/schema/data_columns/data/data_values_column_name</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that for each gpkg_data_columns row, the column_name value is the name of a column in the table_name table.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name, column_name FROM gpkg_data_columns</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>PRAGMA table_info(table_name)</p>
</li>
<li>
<p>Fail if gpkg_data_columns.column_name value does not equal a name column value returned by PRAGMA table_info.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.3.2.1.2 Req 58:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/schema/data_columns/data/data_values_constraint_name</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that for each gpkg_data_columns row, the constraint_name value is either NULL or a constraint_name column value from the gpkg_data_column_constraints table.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT constraint_name AS cn FROM gpkg_data_columns</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each NOT NULL cn value from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT constraint_name FROM gpkg_data_column_constraints WHERE constraint_name = cn</p>
</li>
<li>
<p>Fail if returns an empty result set</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.3.2.1.2 Req 59:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/schema/data_columns/data/data_values_constraint_type</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that for each gpkg_data_columns row, if the constraint_name value is NOT NULL then the constraint_type column value contains a constraint_type column value from the gpkg_data_column_constraints table for a row with a matching constraint_name value.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT constraint_name AS cn, constraint_type AS ct FROM gpkg_data_columns</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each NOT NULL cn value from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Fail if ct is NULL</p>
</li>
<li>
<p>If ct NOT NULL, SELECT constraint_type FROM gpkg_data_column_constraints WHERE constraint_name = cn AND constraint_type = ct</p>
</li>
<li>
<p>Fail if returns an empty result set</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.3.2.1.2 Req 59:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="sect4">
<h5 id="_data_column_constraints_2">A.2.3.2. Data Column Constraints</h5>
<div class="sect5">
<h6 id="_data_37">A.2.3.2.1. Data</h6>
<div class="paragraph">
<p><strong>Table Definition</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/schema/data_column_constraints/data/table_def</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_data_column_constraints table exists and has the correct definition.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT sql FROM sqlite_master WHERE type = 'table' AND tbl_name = 'gpkg_data_column_constraints'</p>
</li>
<li>
<p>Fail if returns an empty result set</p>
</li>
<li>
<p>Pass if column names and column definitions in the returned CREATE TABLE statement in the sql column value, including data type, nullability, default values and primary, foreign and unique key constraints match all of those in the contents of Annex C Table 31. Column order, check constraint and trigger definitions, and other column definitions in the returned sql are irrelevant.</p>
</li>
<li>
<p>Fail otherwise.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.3.3.1.1 Req 60:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><strong>Data Values</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/schema/data_column_constraints/data/data_values_constraint_type</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_data_column_constraints constraint_type column values are one of "range", "enum", or "glob".</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT constraint_type AS ct FROM gpkg_data column_constraints</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each ct value returned by step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Fail if ct NOT IN ("range", "enum", "glob").</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 0 Req 61:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/schema/data_column_constraints/data/data_values_constraint_names_unique</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_data_column_constraints constraint_name column values for constraint_type values  of "range", or "glob" are unique.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>For each SELECT DISTINCT constraint_name AS cn FROM gpkg_data_column_constraints  WHERE constraint_type IN (‘range’, ‘glob’)</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT count(*) FROM gpkg_data column_constraints WHERE constraint_name = cn</p>
</li>
<li>
<p>Fail if count &gt; 1</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.3.3.1.2 Req 62:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/schema/data_column_constraints/data/data_values_value_for_range</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_data_column_constraints value column values are NULL for rows with a constraint_type value of "range".</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT constraint_type AS ct, value AS v FROM gpkg_data column_constraints WHERE constraint_type = ‘range’</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each v value returned by step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Fail if v IS NOT NULL</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.3.3.1.2 Req 63:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/schema/data_column_constraints/data/data_values_min_max_for_range</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_data_column_constraints min column values are NOT NULL and less than the max column values for rows with a constraint_type value of "range".</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT min, max FROM gpkg_data column_constraints WHERE constraint_type = ‘range’</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each set of min and max values returned by step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Fail if min IS NULL</p>
</li>
<li>
<p>Fail if max IS NULL</p>
</li>
<li>
<p>Fail if min &gt;= max</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.3.3.1.2 Req 64:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/schema/data_column_constraints/data/data_values_inclusive_for_range</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_data_column_constraints minIsInclusive and maxIsInclusive  column values are NOT NULL and either 0 or 1 for rows with a constraint_type value of "range".</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT minIsInclusive, maxIsInclusive FROM gpkg_data column_constraints WHERE constraint_type = ‘range’</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each set of values returned by step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Fail if minIsInclusive IS NULL</p>
</li>
<li>
<p>Fail if maxIsInclusive IS NULL</p>
</li>
<li>
<p>Fail if minIsInclusive is NOT IN (0,1)</p>
</li>
<li>
<p>Fail if maxIsInclusive is NOT IN (0,1)</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.3.3.1.2 Req 65:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID:</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/schema/data_column_constraints/data/data_values_min_max_inclusive_for_enum_glob</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose:</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_data_column_constraints min, max, minIsInclusive and maxIsInclusive column values are NULL for rows with a constraint_type value of "enum" or “glob”.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method:</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT min, max, minIsInclusive, maxIsInclusive FROM gpkg_data column_constraints WHERE constraint_type  IN (‘enum’,’glob)</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each set of values returned by step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Fail if min IS NOT NULL</p>
</li>
<li>
<p>Fail if max IS NOT NULL</p>
</li>
<li>
<p>Fail if minIsInclusive IS NOT NULL</p>
</li>
<li>
<p>Fail if maxIsInclusive IS NOT NULL</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.3.3.1.2 Req 66:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID:</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/schema/data_column_constraints/data/data_values_value_for_enum_glob</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose:</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_data_column_constraints value column values are NOT NULL for rows with a constraint_type value of "enum" or “glob”.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method:</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT value FROM gpkg_data column_constraints WHERE constraint_type  IN (‘enum’,’glob)</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each value returned by step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Fail if value IS NULL</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.3.3.1.2 Req 67:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="sect3">
<h4 id="_metadata_2">A.2.4. Metadata</h4>
<div class="sect4">
<h5 id="_metadata_table_2">A.2.4.1. Metadata Table</h5>
<div class="sect5">
<h6 id="_data_38">A.2.4.1.1. Data</h6>
<div class="paragraph">
<p><strong>Table Definition</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/metadata/metadata/data/table_def</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_metadata table exists and has the correct definition.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT sql FROM sqlite_master WHERE type = 'table' AND tbl_name = 'gpkg_metadata'</p>
</li>
<li>
<p>Fail if returns an empty result set.</p>
</li>
<li>
<p>Pass if the column names and column definitions in the returned Create TABLE statement in the sql column value, including data type, nullability, default values and primary, foreign and unique key constraints match all of those in the contents of Table 33. Column order, check constraint and trigger definitions, and other column definitions in the returned sql are irrelevant.</p>
</li>
<li>
<p>Fail otherwise.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.4.2.1.1 Req 68:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><strong>Table Data Values</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/metadata/metadata/data/data_values_md_scope</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that each of the md_scope column values in a gpkg_metadata table is one of the name column values from Table 15 in clause 2.4.2.1.2.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT md_scope FROM gpkg_metadata</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row returned from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Fail if md_scope value not one of the name column values from Table 15 in clause 2.4.2.1.2</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.4.2.1.2 Req 69:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type:</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capabilities</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="sect4">
<h5 id="_metadata_reference_table_2">A.2.4.2. Metadata Reference Table</h5>
<div class="sect5">
<h6 id="_data_39">A.2.4.2.1. Data</h6>
<div class="paragraph">
<p><strong>Table Definition</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/metadata/metadata_reference/data/table_def</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_metadata_reference table exists and has the correct definition.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT sql FROM sqlite_master WHERE type = 'table' AND tbl_name = 'gpkg_metadata_reference'</p>
</li>
<li>
<p>Fail if returns an empty result set.</p>
</li>
<li>
<p>Pass if the column names and column definitions in the returned Create TABLE statement in the sql column value, including data type, nullability, default values and primary, foreign and unique key constraints match all of those in the contents of Table 33.  Column order, check constraint and trigger definitions, and other column definitions in the returned sql are irrelevant.</p>
</li>
<li>
<p>Fail otherwise.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.4.3.1.1 Req 70:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><strong>Data Values</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/metadata/metadata_reference/data/data_values_reference_scope</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that gpkg_metadata_reference table reference_scope column values are valid.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT reference_scope FROM gpkg_metadata_reference</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT reference_scope FROM gpkg_metadata_reference WHERE reference_scope NOT IN (‘geopackage’,’table’,’column’,’row’,’row/col’)</p>
</li>
<li>
<p>Fail if does not return an empty result set</p>
</li>
<li>
<p>Pass otherwise.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.4.3.1.2 Req 71:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/metadata/metadata_reference/data/data_values_table_name</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that gpkg_metadata_reference table_name column values are NULL for rows with reference_scope values of ‘geopackage’, and reference gpkg_contents table_name values for all other reference_scope values.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name FROM gpkg_metadata_reference</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT table_name FROM gpkg_metadata_reference WHERE reference_scope = 'geopackage'</p>
</li>
<li>
<p>Fail if result set contains any non-NULL values</p>
</li>
<li>
<p>SELECT table_name FROM metadata_reference WHERE reference_scope != 'geopackage' AND table_name NOT IN (SELECT table_name FROM gpkg_contents)</p>
</li>
<li>
<p>Fail if result set is not empty</p>
</li>
<li>
<p>Pass otherwise.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.4.3.1.2 Req 72:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/metadata/metadata_reference/data/data_values_column_name</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that gpkg_metadata_reference column_name column values are NULL for rows with reference scope values of ‘geopackage’, ‘table’, or ‘row’, and contain the name of a column in table_name table for other reference scope values.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT column_name FROM gpkg_metadata_reference</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT column_name FROM gpkg_metadata_reference WHERE reference_scope IN (<em>geopackage</em>, ‘table’, ‘row’)</p>
</li>
<li>
<p>Fail if result set contains any non-NULL values</p>
</li>
<li>
<p>SELECT &lt;table_name&gt;, &lt;column_name&gt; FROM metadata_reference WHERE reference_scope NOT IN (<em>geopackage</em>, ‘table’, ‘row’)</p>
</li>
<li>
<p>For each row from step 5</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT sql FROM sqlite_master WHERE type = 'table' AND tbl_name = '&lt;table_name&gt;'</p>
</li>
<li>
<p>Fail if returns an empty result set.</p>
</li>
<li>
<p>Fail if the one of the column names in the returned sql Create TABLE statement is not  &lt;column_name&gt;</p>
</li>
<li>
<p>Log pass otherwise</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if logged pass and no fails.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.4.3.1.2 Req 73:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/metadata/metadata_reference/data/data_values_row_id_value</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that gpkg_metadata_reference row_id_value column values are NULL for rows with reference scope values of ‘geopackage’, ‘table’, or ‘row’, and contain the ROWID of a row in the table_name for other reference scope values.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT row_id_value FROM gpkg_metadata_reference</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT row_id_value FROM gpkg_metadata_reference WHERE reference_scope IN (<em>geopackage</em>, ‘table’, ‘row’)</p>
</li>
<li>
<p>Fail if result set contains any non-NULL values</p>
</li>
<li>
<p>For each SELECT &lt;table_name&gt;, &lt;row_id_value&gt; FROM gpkg_metadata_reference WHERE reference_scope NOT IN (<em>geopackage</em>, ‘table’, ‘row’)</p>
</li>
<li>
<p>For each row from step 5</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT * FROM &lt;table_name&gt; WHERE ROWID = &lt;row_id_value&gt;</p>
</li>
<li>
<p>Fail if result set is empty</p>
</li>
<li>
<p>Log pass otherwise</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if logged pass and no fails.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.4.3.1.2 Req 74:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/metadata/metadata_reference/data/data_values_timestamp</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that every gpkg_metadata_reference table row timestamp column value is in ISO 8601 UTC format.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT timestamp from gpkg_metadata_reference.</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Fail if format of returned value does not match yyyy-mm-ddThh:mm:ss.hhhZ</p>
</li>
<li>
<p>Log pass otherwise</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if logged pass and no fails.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.4.3.1.2 Req 75:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/metadata/metadata_reference/data/data_values_md_file_id</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that every gpkg_metadata_reference table row md_file_id column value references a gpkg_metadata id column value.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>PRAGMA foreign_key_check(‘geometry_columns’)</p>
</li>
<li>
<p>Fail if returns any rows with a fourth column foreign key index value of 0</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.4.3.1.2 Req 76:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/metadata/metadata_reference/data/data_values_md_parent_id</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that every gpkg_metadata_reference table row md_parent_id column value that is not null is an id column value from the gpkg_metadata_table that is not equal to the md_file_id column value for that row.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT md_file_id FROM gpkg_metadata_reference</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT gmr.md_file_id, gmr.md_parent_id FROM gpkg_metadata_reference AS gmr WHERE gmr.md_file_id == gmr.md_parent_id</p>
</li>
<li>
<p>Fail if result set is not empty</p>
</li>
<li>
<p>SELECT gmr.md_file_id, gmr.md_parent_id, gm.id FROM gpkg_metadata_reference  AS gmr LEFT OUTER JOIN gpkg_metadata gm ON gmr.md_parent_id =gm.id</p>
</li>
<li>
<p>Fail if any result set gm.id values are NULL</p>
</li>
<li>
<p>Pass otherwise</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.4.3.1.2 Req 77:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="sect3">
<h4 id="_extension_mechanism_2">A.2.5. Extension Mechanism</h4>
<div class="sect4">
<h5 id="_extensions_2">A.2.5.1. Extensions</h5>
<div class="sect5">
<h6 id="_data_40">A.2.5.1.1. Data</h6>
<div class="paragraph">
<p><strong>Table Definition</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/extension_mechanism/extensions/data/table_def</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that a gpkg_extensions table exists and has the correct definition.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT sql FROM sqlite_master WHERE type = 'table' AND tbl_name = 'gpkg_extensions'</p>
</li>
<li>
<p>Fail if returns an empty result set.</p>
</li>
<li>
<p>Pass if the column names and column definitions in the returned Create TABLE statement in the sql column value, including data type, nullability, default values and primary, foreign and unique key constraints match all of those in the contents of Table 36. Column order, check constraint and trigger definitions, and other column definitions in the returned sql are irrelevant.</p>
</li>
<li>
<p>Fail otherwise.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.5.2.1.1 Req 78:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><strong>Table Data Values</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/extension_metchanism/extensions/data/data_values_for_extensions</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that every extension of a GeoPackage is registered in a row in the gpkg_extensions table</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>For each SELECT DISTINCT geometry_type_name FROM geometry_columns</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Fail if geometry_type_name IN Annex E Table 43 and gpkg_extensions does not contain a row where extension_name = gpkg_geom_&lt;geometry_type_name&gt;</p>
</li>
<li>
<p>Fail if geometry_type_name NOT IN Annex E Table 42 or Table 43 and gpkg_extensions does not contain a row where the extension_name does not begin with “gpkg” and the extension_name ends with “<em>geom</em>&lt;geometry_type_name&gt;</p>
</li>
</ol>
</div>
</li>
<li>
<p>For each SELECT tbl_name FROM sqlite_master WHERE tbl_name LIKE ‘rtree_%’</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Fail if gpkg_extensions does not contain a row where extension_name = “gpkg_rtree_index”</p>
</li>
</ol>
</div>
</li>
<li>
<p>For each SELECT tbl_name FROM sqlite_master WHERE name LIKE ‘fgti_%’</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Fail if gpkg_extensions does not contain a row where extension_name = “gpkg_geometry_type_trigger”</p>
</li>
</ol>
</div>
</li>
<li>
<p>For each SELECT tbl_name FROM sqlite_master WHERE name LIKE ‘fgsi_%’</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Fail if gpkg_extensions does not contain a row where extension_name = “gpkg_srs_id_trigger”</p>
</li>
</ol>
</div>
</li>
<li>
<p>Do test / reg_ext/tiles/zoom_levels/data/zoom_other_ext_row</p>
</li>
<li>
<p>Do test /reg_ext/tiles/tile_encoding_webp/data/webp_ext_row</p>
</li>
<li>
<p>Do test /reg_ext/tiles/tile_encoding_webp/data/tiff_ext_row</p>
</li>
<li>
<p>Do test /reg_ext/tiles/tile_encoding_webp/data/nitf_ext_row</p>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.5.2.1.2 Req 79:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/extension_metchanism/extensions/data/data_values_table_name</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the table_name column values in the gpkg_extensions table are valid.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name, column_name FROM gpkg_extensions</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row from step one</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Fail if table_name value is NULL and column_name value is not NULL.</p>
</li>
<li>
<p>SELECT DISTINCT ge.table_name AS ge_table, sm.tbl_name FROM gpkg_extensions AS ge LEFT OUTER JOIN sqlite_master AS sm ON ge.table_name = sm.tbl_name</p>
</li>
<li>
<p>Log pass if every row ge.table_name = sm.tbl_name (MAY both be NULL).</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if logged pass and no fails.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.5.2.1.2 Req 80:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/extension_metchanism/extensions/data/data_values_column_name</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the column_name column values in the gpkg_extensions table are valid.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name, column_name FROM gpkg_extensions</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT table_name, column_name FROM gpkg_extensions WHERE table_name IS NOT NULL AND column_name IS NOT NULL</p>
</li>
<li>
<p>Pass if returns an empty result set</p>
</li>
<li>
<p>For each row from step 3</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>PRAGMA table_info(table_name)</p>
</li>
<li>
<p>Fail if gpkg_extensions.column_name value does not equal a name column value returned by PRAGMA table_info.</p>
</li>
<li>
<p>Log pass otherwise</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if logged pass and no fails.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.5.2.1.2 Req 81:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/extension_mechanism/extensions/data/data_values_extension_name</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the extension_name column values in the gpkg_extensions table are valid.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT extension_name FROM gpkg_extensions</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row returned from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Log pass if extension_name is one of those listed in Annex J or Annex L through Annex P.</p>
</li>
<li>
<p>Separate extension_name into &lt;author&gt; and &lt;extension&gt; at the first “_”</p>
</li>
<li>
<p>Fail if &lt;author&gt; is “gpkg”</p>
</li>
<li>
<p>Fail if &lt;author&gt; contains characters other than [a-zA-Z0-9]</p>
</li>
<li>
<p>Fail if &lt;extension&gt; contains characters other than [a-zA-Z0-9_]</p>
</li>
<li>
<p>Log pass otherwise</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if logged pass and no fails.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.5.2.1.2 Req 82:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/extension_mechanism/extensions/data/data_values_definition</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the definition column value contains or references extension documentation</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT definition FROM gpkg_extensions</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row returned from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Inspect if definition value is not like “Annex %”, or “http%” or mailto:% or “Extension Title%”</p>
</li>
<li>
<p>Fail if definition value does not contain or reference extension documentation</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.5.2.1.2 Req 83:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/extension_mechanism/extensions/data/data_values_scope</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the scope column value is “read-write” or “write-only”</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT scope FROM gpkg_extensions</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row returned from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Fail is value is not “read-write” or “write-only”</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.5.2.1.2 Req 84:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_registered_extensions">A.3. Registered Extensions</h3>
<div class="sect3">
<h4 id="_features_2">A.3.1. Features</h4>
<div class="sect4">
<h5 id="_geometry_types">A.3.1.1. Geometry Types</h5>
<div class="sect5">
<h6 id="_data_41">A.3.1.1.1. Data</h6>
<div class="paragraph">
<p><strong>GeoPackage Extension Types</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/reg_ext/features/geometry_encoding/data/geopackage_extension_types/existing_sparse_data</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that existing extended non-linear geometry types are stored in valid StandardGeoPackageBinary format encodings.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name FROM gpkg_geometry_columns</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT table_name AS tn, column_name AS cn FROM gpkg_geometry_columns WHERE table_name IN (SELECT table_name FROM gpkg_contents WHERE data_type = ‘features’),</p>
</li>
<li>
<p>Fail if returns an empty result set</p>
</li>
<li>
<p>For each row from step 3</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT cn FROM tn;</p>
</li>
<li>
<p>For each row from step a, log fail if GeoPackageBinary “X” type flag is 1</p>
</li>
<li>
<p>For each row from step a, if bytes 2-5 of cn.wkb as uint32 in endianness of gc.wkb byte 1of cn from #1 are a geometry type value from Annex E Table 43, then</p>
</li>
<li>
<p>Log cn.header values, wkb endianness and geometry type
ii. If cn.wkb is not correctly encoded per ISO 13249-3 clause 5.1.46 then log fail
iii. If cn.flags.E is 1 - 4 and some cn.wkbx is outside of cn.envelope.minx,maxx then log fail
iv. If cn.flags.E is 1 - 4 and some gc.wkby is outside of cn.envelope.miny,maxy then log fail</p>
</li>
<li>
<p>If cn.flags.E is 2,4 and some gc.wkb.z is outside of cnenvelope.minz,maxz then log fail
vi. If cn.flags.E is 3,4 and some gc.wkb.m is outside of cn.envelope.minm,maxm then log fail
vii. If cn.flags.E is 5-7 then log fail
viii. Otherwise log pass</p>
</li>
</ol>
</div>
</li>
<li>
<p>Log pass if log contains pass and no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 3.1.1.1.1 Req 85:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/reg_ext/features/geometry_encoding/data/geopackage_extension_types/all_types_test_data</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that all extended non-linear geometry types and options are stored in valid GeoPackageBinary format encodings.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>Open GeoPackage that has feature geometry values of geometry type in Annex E, for an assortment of srs_ids, for an assortment of coordinate values, without and with z and / or m values, in both big and little endian encodings:</p>
</li>
<li>
<p>/reg_ext/features/geometry_encoding/data/extension_types_existing_sparse_data</p>
</li>
<li>
<p>Pass if log contains pass record for big and little endian GP headers containing big and little endian WKBs for 0-1 envelope contents indicator codes for every geometry type value from Annex E Table 43 without and with z and/or m values.</p>
</li>
<li>
<p>Fail otherwise</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 3.1.1.1.1 Req 85:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><strong>GeoPackage Geometry Types&#8201;&#8212;&#8201;Extensions Name</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/reg_ext/features/geometry_encoding/data/geopackage_extension_types/extension_name</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that an extension name in the form gpkg_geom_&lt;gname&gt; is defined for each &lt;gname&gt; extension geometry type from Annex E Table 43  used in a GeoPackage.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name, column_name FROM gpkg_geometry_columns WHERE table_name IN (SELECT table_name FROM gpkg_contents WHERE data_type  == ‘features'))</p>
</li>
<li>
<p>Not testable if result set is empty</p>
</li>
<li>
<p>For each row result set table_name, column_name from step 3</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT result_set_column_name FROM result_set_table_name</p>
</li>
<li>
<p>For each geometry column value from step a</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>If the first two bytes of each geometry column value are “GP”, then</p>
<div class="olist upperalpha">
<ol class="upperalpha" type="A">
<li>
<p>/opt/extension_mechanism/extensions/data/table_def</p>
</li>
<li>
<p>Fail if failed</p>
</li>
<li>
<p>SELECT ST_GeometryType(geometry column value) AS &lt;gtype&gt;;</p>
</li>
<li>
<p>SELECT extension_name FROM gpkg_extensions WERE table_name = result_set_table_name AND column_name = result_set_column_name AND extension_name = 'gpkg_geom_' || &lt;gtype&gt;</p>
<div class="olist upperroman">
<ol class="upperroman" type="I">
<li>
<p>Fail if result set is empty</p>
</li>
<li>
<p>Log pass otherwise</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if logged pass and no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 3.1.1.1.2 Req 86:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><strong>GeoPackage Geometry Types&#8201;&#8212;&#8201;Extensions Row</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/reg_ext/features/geometry_encoding/data/geopackage_extension_types/extension_row</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_extensions table contains a row with an extension_name in the form gpkg_geom_&lt;gname&gt; for each table_name and column_name in the gpkg_geometry_columns table with a &lt;gname&gt; geometry_type_name.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>/reg_ext/features/geometry_encoding/data/extension_name</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 3.1.1.1.3 Req 87:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="sect4">
<h5 id="_user_defined_geometry_types">A.3.1.2. User-Defined Geometry Types</h5>
<div class="sect5">
<h6 id="_data_42">A.3.1.2.1. Data</h6>
<div class="paragraph">
<p><strong>Extensions Encoding</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/reg_ext/features/geometry_encoding/data/user_defined-geometry_types/existing_sparse_data</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that existing extended geometry types not listed in Annex E are stored in valid ExtendedGeoPackageBinary format encodings.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name FROM gpkg_geometry_columns</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT table_name AS tn, column_name AS cn FROM gpkg_geometry_columns WHERE geometry_type_name NOT IN (all geometry types listed in Annex E) AND table_name IN (SELECT table_name FROM gpkg_contents WHERE data_type = ‘features’),</p>
</li>
<li>
<p>Fail if returns an empty result set</p>
</li>
<li>
<p>For each row from step 3</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT cn FROM tn;</p>
</li>
<li>
<p>For each row from step a,</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>log fail if GeoPackageBinary “X” type flag is 0</p>
</li>
<li>
<p>Otherwise log pass</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Log pass if log contains pass and no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 3.1.1.1.1 Req 88:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><strong>Extensions Name</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/reg_ext/features/geometry_encoding/data/user_defined_geometry_types/extension_name</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that an extension name in the form &lt;author&gt;_geom_&lt;gname&gt; is defined for each extended geometry type not listed in Annex E used in a GeoPackage.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name, column_name FROM gpkg_geometry_columns WHERE table_name IN (SELECT table_name FROM gpkg_contents WHERE data_type  == 'features'))</p>
</li>
<li>
<p>Not testable if result set is empty</p>
</li>
<li>
<p>For each row result set table_name, column_name from step 3</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT result_set_column_name FROM result_set_table_name</p>
</li>
<li>
<p>For each geometry column value from step a</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>If the first two bytes of each geometry column value are “GP”, then</p>
<div class="olist upperalpha">
<ol class="upperalpha" type="A">
<li>
<p>/opt/extension_mechanism/extensions/data/table_def</p>
</li>
<li>
<p>Fail if failed</p>
</li>
<li>
<p>SELECT ST_GeometryType(geometry column value) AS &lt;gtype&gt;;</p>
</li>
<li>
<p>SELECT extension_name FROM gpkg_extensions WERE table_name = result_set_table_name AND column_name = result_set_column_name AND extension_name NOT LIKE ‘gpkg_%’ and extension_name  LIKE '%<em>geom</em>' || &lt;gtype&gt;</p>
<div class="olist upperroman">
<ol class="upperroman" type="I">
<li>
<p>Fail if result set is empty</p>
</li>
<li>
<p>Log pass otherwise</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if logged pass and no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 3.1.1.1.2 Req 89:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><strong>Extensions Row</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/reg_ext/features/geometry_encoding/data/user_defined_geometry_types/extension_row</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_extensions table contains a row with an extension_name in the form &lt;author&gt;_geom_&lt;gname&gt; for each table_name and column_name in the gpkg_geometry_columns table with a &lt;gname&gt; geometry_type_name.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Do test /reg_ext/features/geometry_encoding/data/extension_encoding/extension_name</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 3.1.1.1.3 Req 90:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><strong>Geometry Columns Row</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/reg_ext/features/geometry_encoding/data/user_defined_geometry_types/geometry_columns_row</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_geometry_columns table contains a row with a geometry_type_name  in the form &lt;author&gt;_geom_&lt;gname&gt; for each feature table that contains user-defined geometry types specified in the gpkg_extensions table.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT extension_name FROM gpkg_extensions WHERE extension_name LIKE ‘%<em>geom</em>%’ AND extension_name NOT LIKE ‘gpkg_geom_%’</p>
</li>
<li>
<p>FOR EACH extension_name from #1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT * FROM gpkg_geometry_columns WHERE geometry_type_name = extension_name</p>
</li>
<li>
<p>Fail if returns an empty result set</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 3.1.2.1.4 Req 91:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="sect4">
<h5 id="_spatial_indexes">A.3.1.3. Spatial Indexes</h5>
<div class="sect5">
<h6 id="_data_43">A.3.1.3.1. Data</h6>
<div class="paragraph">
<p><strong>Spatial Indexes Implementation</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/reg_ext/features/spatial_indexes/implementation</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify the correct implementation of spatial indexes on feature table geometry columns.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name, column_name FROM gpkg_geometry_columns WHERE table_name IN (SELECT table_name FROM gpkg_contents WHERE data_type  == ‘features'))</p>
</li>
<li>
<p>Not testable if result set is empty</p>
</li>
<li>
<p>For each row table_name, column_name from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT sql FROM sqlite_master WHERE tbl_name = ‘rtree_’ || result_set_table_name || ‘_’ || result_set_column_name</p>
</li>
<li>
<p>Not testable if result set is empty</p>
</li>
<li>
<p>Fail if returned sql != ‘CREATE VIRTUAL TABLE rtree_’ ’ || result_set_table_name || ‘_’ || result_set_column_name || USING rtree(id, minx, maxx, miny, maxy)</p>
</li>
<li>
<p>SELECT sql FROM sqlite_master WHERE type = ‘trigger’ AND tname = ‘rtree_’ || result_set_table_name || ‘_’ || result_set_column_name || ‘_insert’</p>
</li>
<li>
<p>Fail if returned sql != result of populating insert triggers template in Annex L using result_set_table_name for &lt;t&gt; and result_set_column_name for &lt;c&gt;</p>
</li>
<li>
<p>SELECT sql FROM sqlite_master WHERE type = ‘trigger’ AND name LIKE ‘rtree_’ || result_set_table_name || ‘_’ || result_set_column_name || ‘_update%’</p>
</li>
<li>
<p>Fail if returned sql != result of populating 4 update triggers templates in Annex L using result_set_table_name for &lt;t&gt; and result_set_column_name for &lt;c&gt;</p>
</li>
<li>
<p>SELECT sql FROM sqlite_master WHERE type=’trigger’ AND name = ‘rtree_’ || result_set_table_name || ‘_’ || result_set_column_name || ‘_delete’</p>
</li>
<li>
<p>Fail if returned sql != result of populating delete trigger template in Annex L using result_set_table_name for &lt;t&gt; and result_set_column_name for &lt;c&gt;</p>
</li>
<li>
<p>Log pass otherwise</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if logged pass and no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 3.1.3.1.1 Req 92:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/reg_ext/features/spatial_indexes/implementation/sql_functions</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify the correct implementation of sql functions used in spatial indexes on feature table geometry columns.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>Open Geometry Test Data Set GeoPackage with GeoPackage SQLite Extension</p>
</li>
<li>
<p>For each Geometry Test Data Set &lt;gtype_test&gt; data table row for each geometry type in Annex E, for an assortment of srs_ids, for an assortment of coordinate values including empty geometries, without and with z and / or m values, in both big and little endian encodings:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT ‘Fail’ FROM &lt;gtype_test&gt; WHERE ST_IsEmpty(geom.) != empty</p>
</li>
<li>
<p>SELECT ‘Fail’ FROM &lt;gtype_test&gt;  WHERE ST_MinX(geom) != minx</p>
</li>
<li>
<p>SELECT ‘Fail’ FROM &lt;gtype_test&gt;  WHERE ST_MaxX(geom) != maxx</p>
</li>
<li>
<p>SELECT ‘Fail’ FROM &lt;gtype_test&gt;  WHERE ST_MinY(geom) != miny</p>
</li>
<li>
<p>SELECT ‘Fail’ FROM &lt;gtype_test&gt;  WHERE ST_MaxY(geom) != maxy
..</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no ‘Fail’ selected from step 2</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 3.1.3.1.1 Req 92:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><strong>Spatial Indexes – Extensions Name</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/reg_ext/features/spatial_indexes/extension_name</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the “gpkg_rtree_index” extension name is used to register spatial index extensions.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name, column_name FROM gpkg_geometry_columns WHERE table_name IN (SELECT table_name FROM gpkg_contents WHERE data_type  == ‘features'))</p>
</li>
<li>
<p>Not testable if result set is empty</p>
</li>
<li>
<p>For each row table_name, column_name from step 3</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT sql FROM sqlite_master WHERE tbl_name = ‘rtree_’ || result_set_table_name || ‘_’ || result_set_column_name</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>/opt/extension_mechanism/extensions/data/table_def</p>
</li>
<li>
<p>Fail if failed</p>
</li>
<li>
<p>SELECT extension_name from gpkg_extensions WHERE table_name = result_set_table_name AND column_name = result_set_column_name</p>
</li>
<li>
<p>Log pass if result is “gpkg_rtree_index”</p>
</li>
<li>
<p>Fail otherwise</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if logged pass and no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 3.1.3.1.2 Req 93:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><strong>Spatial Indexes – Extensions Row</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/reg_ext/features/spatial_indexes/extension_row</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that spatial index extensions are registered using the “gpkg_rtree_index” name in the gpkg_extensions table.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>/reg_ext/features/spatial_indexes/extension_name</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 3.1.3.1.3 Req 94:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="sect4">
<h5 id="_geometry_type_triggers">A.3.1.4. Geometry Type Triggers</h5>
<div class="sect5">
<h6 id="_data_44">A.3.1.4.1. Data</h6>
<div class="paragraph">
<p><strong>Geometry Type Triggers Implementation</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/reg_ext/features/geometry_type_triggers/implementation</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that user feature data table geometry type triggers are implemented correctly.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name, column_name FROM gpkg_geometry_columns WHERE table_name IN (SELECT table_name FROM gpkg_contents WHERE data_type  == ‘features'))</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row table_name, column_name from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT sql FROM sqlite_master WHERE type = ‘trigger’ AND tbl_name = ‘fgti_’ || result_set_table_name || ‘_’ || result_set_column_name</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>Fail if sql != result of populating the first trigger template in Annex M with &lt;t&gt; as result_set_table_name and &lt;c&gt; as result_set_column_name</p>
</li>
<li>
<p>SELECT sql FROM sqlite_master WHERE type = ‘trigger’ AND tbl_name = ‘fgtu_’ || result_set_table_name || ‘_’ || result_set_column_name</p>
</li>
<li>
<p>Fail if sql != result of populating the second trigger template in Annex M with &lt;t&gt; as result_set_table_name and &lt;c&gt; as result_set_column_name</p>
</li>
<li>
<p>Log pass otherwise</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if logged pass and no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 3.1.4.1.1 Req 95:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/reg_ext/features/geometry_type_triggers/implementation/sql_functions</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify the correct implementation of sql functions used in geometry type triggers on feature table geometry columns.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>Open Geometry Test Data Set GeoPackage with GeoPackage SQLite Extension</p>
</li>
<li>
<p>For each Geometry Test Data Set &lt;gtype_test&gt; data table row for each assignable (gtype, atype) and non-assignable (ntype, atype) combination of geometry type in Annex E, for an assortment of srs_ids, for an assortment of coordinate values, without and with z and / or m values, in both big and little endian encodings:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT ‘Fail’ FROM &lt;gtype_test&gt; WHERE GPKG_IsAssignable(gtype, atype) =0</p>
</li>
<li>
<p>SELECT ‘Fail’ FROM &lt;gtype_test&gt; WHERE GPKG_IsAssignable(ntype, atype) = 1</p>
</li>
<li>
<p>SELECT ‘Fail’ FROM &lt;gtype_test&gt; WHERE ST_GeometryType(geom) != atype</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no ‘Fail’ selected from step 2</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 3.1.4.1.1 Req 95:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><strong>Geometry Type Triggers – Extensions Name</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/reg_ext/features/geometry_type_triggers/extension_name</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the “gpkg_geometry_type_trigger” extension name is used to register geometry type triggers.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name, column_name FROM gpkg_geometry_columns WHERE table_name IN (SELECT table_name FROM gpkg_contents WHERE data_type  == ‘features'))</p>
</li>
<li>
<p>Not testable if result set is empty</p>
</li>
<li>
<p>For each row table_name, column_name from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT sql FROM sqlite_master WHERE type = ‘trigger’ AND tbl_name = ‘fgti_’ || result_set_table_name || ‘_’ || result_set_column_name</p>
</li>
<li>
<p>Not testable if result set is empty</p>
</li>
<li>
<p>/opt/extension_mechanism/extensions/data/table_def</p>
</li>
<li>
<p>Fail if failed</p>
</li>
<li>
<p>SELECT extension_name from gpkg_extensions WHERE table_name = result_set_table_name AND column_name = result_set_column_name</p>
</li>
<li>
<p>Log pass if result is “gpkg_geometry_type_trigger”</p>
</li>
<li>
<p>Fail otherwise</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if logged pass and no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 3.1.4.1.2 Req 96:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><strong>Geometry Type Triggers – Extensions Row</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/reg_ext/features/geometry_type_triggers/extension_row</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that geometry type triggers are registered using the “gpkg_geometry_type_trigger” extension name.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Do test /reg_ext/features/geometry_type_triggers/extension_name</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 3.1.4.1.3 Req 97:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="sect4">
<h5 id="_srs_id_triggers">A.3.1.5. SRS_ID Triggers</h5>
<div class="sect5">
<h6 id="_data_45">A.3.1.5.1. Data</h6>
<div class="paragraph">
<p><strong>SRS_ID Triggers – Implementation</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/reg_ext/features/srs_id_triggers/implementation</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that user feature data table srs_id triggers are implemented correctly.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name, column_name FROM gpkg_geometry_columns WHERE table_name IN (SELECT table_name FROM gpkg_contents WHERE data_type  == ‘features'))</p>
</li>
<li>
<p>Not testable if result set is empty</p>
</li>
<li>
<p>For each row table_name, column_name from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT sql FROM sqlite_master WHERE type = ‘trigger’ AND tbl_name = ‘fgsi_’ || result_set_table_name || ‘_’ || result_set_column_name</p>
</li>
<li>
<p>Not testable if result set is empty</p>
</li>
<li>
<p>Fail if sql != result of populating the first trigger template in Annex N with &lt;t&gt; as result_set_table_name and &lt;c&gt; as result_set_column_name</p>
</li>
<li>
<p>SELECT sql FROM sqlite_master WHERE type = ‘trigger’ AND tbl_name = ‘fgsu_’ || result_set_table_name || ‘_’ || result_set_column_name</p>
</li>
<li>
<p>Fail if sql != result of populating the second trigger template in Annex N with &lt;t&gt; as result_set_table_name and &lt;c&gt; as result_set_column_name</p>
</li>
<li>
<p>Log pass otherwise</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if logged pass and no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 3.1.5.1.1 Req 98:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/reg_ext/features/srs_id_triggers/implementation/sql_functions</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify the correct implementation of sql functions used in srs_id triggers on feature table geometry columns.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>Open Geometry Test Data Set GeoPackage with GeoPackage SQLite Extension</p>
</li>
<li>
<p>For each Geometry Test Data Set &lt;gtype_test&gt; data table row for each geometry type in Annex E, for an assortment of srs_ids, for an assortment of coordinate values, without and with z and / or m values, in both big and little endian encodings:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT ‘Fail’ FROM &lt;gtype_test&gt; WHERE ST_SRID(geom) != srs_id</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no ‘Fail’ selected from step 2</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 3.1.5.1.1 Req 98:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><strong>SRS_ID Triggers – Extensions Name</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/reg_ext/features/srs_id_triggers/extension_name</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the “gpkg_srs_id_trigger” extension name is used to register srs_id triggers.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name, column_name FROM gpkg_geometry_columns WHERE table_name IN (SELECT table_name FROM gpkg_contents WHERE data_type  == ‘features'))</p>
</li>
<li>
<p>Not testable if result set is empty</p>
</li>
<li>
<p>For each row table_name, column_name from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT sql FROM sqlite_master WHERE type = ‘trigger’ AND tbl_name = ‘fgsi_’ || result_set_table_name || ‘_’ || result_set_column_name</p>
</li>
<li>
<p>Not testable if result set is empty</p>
</li>
<li>
<p>/opt/extension_mechanism/extensions/data/table_def</p>
</li>
<li>
<p>Fail if failed</p>
</li>
<li>
<p>SELECT extension_name from gpkg_extensions WHERE table_name = result_set_table_name AND column_name = result_set_column_name</p>
</li>
<li>
<p>Pass if result is “gpkg_srs_id_trigger”</p>
</li>
<li>
<p>Fail otherwise</p>
</li>
</ol>
</div>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 3.1.5.1.2 Req 99:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><strong>SRS_ID Triggers – Extensions Row</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/reg_ext/features/srs_id_triggers/extension_row</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that srs_id triggers are registered using the “gpkg_srs_id_trigger” extension name.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Do test /reg_ext/features/srs_id_triggers/extension_name</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 3.1.5.1.3 Req 100:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="sect3">
<h4 id="_tiles_2">A.3.2. Tiles</h4>
<div class="sect4">
<h5 id="_zoom_levels_2">A.3.2.1. Zoom Levels</h5>
<div class="sect5">
<h6 id="_data_46">A.3.2.1.1. Data</h6>
<div class="paragraph">
<p><strong>Zoom Other Intervals—Extensions Name</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/reg_ext/tiles/zoom_levels/data/zoom_other_ext_name</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the “gpkg_zoom_other” extension name is used to register tiles tables with other than factors of two zoom intervals.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name FROM gpkg_contents WHERE data_type = 'tiles'</p>
</li>
<li>
<p>Not testable if empty result set</p>
</li>
<li>
<p>For each row table_name from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT zoom_level, pixel_x_size, pixel_y_size FROM gpkg_tile_matrix WHERE table_name = selected table name ORDER BY zoom_level ASC</p>
</li>
<li>
<p>Not testable if returns empty result set</p>
</li>
<li>
<p>Not testable if there are not two rows with adjacent zoom levels</p>
</li>
<li>
<p>Not testable if no pair of rows for adjacent zoom levels have pixel_x_size or pixel_y_size values that differ by other than factors of two</p>
</li>
<li>
<p>/opt/extension_mechanism/extensions/data/table_def</p>
</li>
<li>
<p>Fail if failed</p>
</li>
<li>
<p>SELECT * FROM gpkg_extensions WHERE table_name = selected table name AND extension_name = 'gpkg_zoom_other'</p>
</li>
<li>
<p>Fail if returns an empty result set</p>
</li>
<li>
<p>Log pass otherwise</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if logged pass and no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 3.2.1.1.1 Req 101:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><strong>Zoom Other Intervals – Extensions Row</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/reg_ext/tiles/zoom_levels/data/zoom_other_ext_row</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that tiles tables with other than factors of two zoom intervals are registered using the “gpkg_zoom_other” extension name.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>/reg_ext/tiles/zoom_levels/data/zoom_other_ext_name</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 3.2.1.1.2 Req 102:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type:</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="sect4">
<h5 id="_tile_encoding_webp">A.3.2.2. Tile Encoding WEBP</h5>
<div class="sect5">
<h6 id="_data_47">A.3.2.2.1. Data</h6>
<div class="paragraph">
<p><strong>WEBP – Extensions Name</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/reg_ext/tiles/tile_encoding_webp/data/webp_ext_name</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose:</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the “gpkg_webp” extensions name is used to register WEBP tile encoding implementations.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method:</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p><code>SELECT table_name FROM gpkg_contents WHERE data_type = 'tiles'</code></p>
</li>
<li>
<p>Not testable if empty result set</p>
</li>
<li>
<p>For each row table_name from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Select tile_data FROM row table_name</p>
</li>
<li>
<p>For each row tile_data from step a</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Log webp if tile data in MIME type image/webp</p>
</li>
</ol>
</div>
</li>
<li>
<p>Not testable if no logged webps</p>
</li>
<li>
<p>/opt/extension_mechanism/extensions/data/table_def</p>
</li>
<li>
<p>Fail if failed</p>
</li>
<li>
<p><code>SELECT * FROM gpkg_extensions WHERE table_name = selected table name AND extension_name = 'gpkg_webp’</code></p>
</li>
<li>
<p>Fail if returns an empty result set</p>
</li>
<li>
<p>Log pass otherwise</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if logged pass and no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 3.2.2.2.1 Req 103:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><strong>WEBP – Extensions Row</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/reg_ext/tiles/tile_encoding_webp/data/webp_ext_row</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose:</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that WEBP tile encodings are registered using the “gpkg_webp” extensions name.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method:</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/reg_ext/tiles/tile_encoding_webp/data/webp_ext_name</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference:</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 3.2.2.2.2 Req 104:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="background_and_context"> Annex B: Background and Context (Normative)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_background">B.1. Background</h3>
<div class="paragraph">
<p>An open standard non-proprietary platform-independent GeoPackage container for distribution and direct use of all kinds of geospatial data will increase the cross-platform interoperability of geospatial applications and web services. Standard APIs for access and management of GeoPackage data will provide consistent query and update results across such applications and services. Increased interoperability and result consistency will enlarge the potential market for such  applications and services, particularly in resource-constrained mobile computing environments like cell phones and tablets. GeoPackages will become the standard containers for "MyGeoData" that are used as a transfer format by users and Geospatial Web Services and a storage format on personal and enterprise devices.</p>
</div>
<div class="paragraph">
<p>This OGC® GeoPackage Encoding Standard defines a GeoPackage as a self-contained, single-file,
cross-platform, serverless, transactional, open source SQLite data container with table definitions, relational
integrity constraints, an SQL API exposed via a "C" CLI and JDBC, and manifest tables that together act as an exchange and direct-use format for multiple types of geospatial data including vector features, features with raster attributes and tile matrix pyramids, especially on mobile / hand held devices in disconnected or limited network connectivity environments.</p>
</div>
<div class="paragraph">
<p>Table formats, definitions of geometry types and metadata tables, relational integrity constraints, and SQL API are interdependent specification facets of the SF-SQL <a href="#9">[9]</a><a href="#10">[10]</a><a href="#11">[11]</a> and SQL-MM (Spatial) <a href="#12">[12]</a> standards that serve as normative references for the vector feature portion of this standard.</p>
</div>
<div class="paragraph">
<p>This standard attempts to support and use relevant raster types, storage table definitions, and metadata from widely adopted implementations and existing standards such as WMTS <a href="#16">[16]</a> and ISO metadata <a href="#28">[28]</a>, to integrate use of rasters as attributes of geospatial features, and to define relational integrity constraints and an SQL API thereon to provide a raster analogy to the SF-SQL and SF-MM data access and data quality assurance capabilities.</p>
</div>
<div class="paragraph">
<p>Conformance classes for this standard are classified as core (mandatory) and extension (optional). The simple core of an Empty GeoPackage contains two SQL tables.</p>
</div>
<div class="paragraph">
<p>Future versions of this standard may include requirements for elevation data and routes. Future enhancements to this standard, a future GeoPackage Web Service specification, and modifications to existing OGC Web Service (OWS) specifications to use GeoPackages as exchange formats may allow OWS to support provisioning of GeoPackages throughout an enterprise or information community.</p>
</div>
</div>
<div class="sect2">
<h3 id="_document_terms_and_definitions">B.2. Document terms and definitions</h3>
<div class="paragraph">
<p>This document uses the standard terms defined in Subclause 5.3 of [OGC 06-121], which is based on the ISO/IEC Directives, Part 2. Rules for the structure and drafting of International Standards. In particular, the word "shall" (not "must") is the verb form used to indicate a requirement to be strictly followed to conform to this standard.</p>
</div>
<div class="paragraph">
<p>For the purposes of this document, the following terms and definitions apply.</p>
</div>
<div class="dlist glossary">
<dl>
<dt>Empty GeoPackage</dt>
<dd>
<p>A GeoPackage that contains a <code>gpkg_spatial_ref_sys</code> table, a <code>gpkg_contents</code> table with row record(s) with <code>data_type</code> column values of "features" or "tiles", and corresponding features tables per clause <a href="#features">Features</a> and/or tiles tables per clause <a href="#tiles">Tiles</a> where the user data tables per clauses 2.1.6. and 2.2.8 exist but contain no rows.</p>
</dd>
<dt>Extended GeoPackage</dt>
<dd>
<p>A GeoPackage that contains any additional data elements (tables or columns) or SQL constructs (data types, indexes, constraints or triggers) that are not specified in this encoding standard.</p>
</dd>
<dt>geolocate</dt>
<dd>
<p>identify a real-world geographic location</p>
</dd>
<dt>GeoPackage file</dt>
<dd>
<p>a platform-independent SQLite database file that contains GeoPackage data and metadata tables with specified definitions, integrity assertions, format limitations and content constraints.</p>
</dd>
<dt>GeoPackage SQLite Configuration</dt>
<dd>
<p>consists of the SQLite 3 software library and a set of compile- and runtime configurations options.</p>
</dd>
<dt>GeoPackage SQLite Extension</dt>
<dd>
<p>a SQLite loadable extension that MAY provide SQL functions to support spatial indexes and SQL triggers linked to a SQLite library with specified configuration requirements to provide SQL API access to a GeoPackage.</p>
</dd>
<dt>georectified</dt>
<dd>
<p>raster whose pixels have been regularly spaced in a geographic (i.e., latitude / longitude) or projected map coordinate system using ground control points so that any pixel can be geolocated given its grid coordinate and the grid origin, cell spacing, and orientation.</p>
</dd>
<dt>orthorectified</dt>
<dd>
<p>georectified raster that has also been corrected to remove image perspective (camera angle tilt), camera and lens induced distortions, and terrain induced distortions using camera calibration parameters and DEM elevation data to accurately align with real world coordinates, have constant scale, and support direct measurement of distances, angles, and areas.</p>
</dd>
<dt>Valid GeoPackage</dt>
<dd>
<p>A GeoPackage that contains features per clause <a href="#_features">Features</a> and/or tiles per clause <a href="#tiles">Tiles</a> and row(s) in the <code>gpkg_contents</code> table with <code>data_type</code> column values of "features" and/or "tiles" describing the user data tables.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_conventions">B.3. Conventions</h3>
<div class="paragraph">
<p>Symbols (and abbreviated terms)</p>
</div>
<div class="dlist terms">
<dl>
<dt>ACID</dt>
<dd>
<p>Atomic, Consistent, Isolated, and Durable</p>
</dd>
<dt>ASCII</dt>
<dd>
<p>American Standard Code for Information Interchange</p>
</dd>
<dt>API</dt>
<dd>
<p>Application Program Interface</p>
</dd>
<dt>BLOB</dt>
<dd>
<p>Binary Large OBject</p>
</dd>
<dt>CLI</dt>
<dd>
<p>Call-Level Interface</p>
</dd>
<dt>COTS</dt>
<dd>
<p>Commercial Off The Shelf</p>
</dd>
<dt>DEM</dt>
<dd>
<p>Digital Elevation Model</p>
</dd>
<dt>GPKG</dt>
<dd>
<p>GeoPackage</p>
</dd>
<dt>GRD</dt>
<dd>
<p>Ground Resolved Distance</p>
</dd>
<dt>EPSG</dt>
<dd>
<p>European Petroleum Survey Group</p>
</dd>
<dt>FK</dt>
<dd>
<p>Foreign Key</p>
</dd>
<dt>IETF</dt>
<dd>
<p>Internet Engineering Task Force</p>
</dd>
<dt>IIRS</dt>
<dd>
<p>Image Interpretability Rating Scale</p>
</dd>
<dt>IRARS</dt>
<dd>
<p>Imagery Resolution Assessments and Reporting Standards (Committee)</p>
</dd>
<dt>ISO</dt>
<dd>
<p>International Organization for Standardization</p>
</dd>
<dt>JDBC</dt>
<dd>
<p>Java Data Base Connectivity</p>
</dd>
<dt>JPEG</dt>
<dd>
<p>Joint Photographics Expert Group (image format)</p>
</dd>
<dt>MIME</dt>
<dd>
<p>Multipurpose Internet Mail Extensions</p>
</dd>
<dt>NIIRS</dt>
<dd>
<p>National Imagery Interpretability Rating Scale</p>
</dd>
<dt>OGC</dt>
<dd>
<p>Open Geospatial Consortium</p>
</dd>
<dt>PK</dt>
<dd>
<p>Primary Key</p>
</dd>
<dt>PNG</dt>
<dd>
<p>Portable Network Graphics (image format)</p>
</dd>
<dt>RDBMS</dt>
<dd>
<p>Relational Data Base Management System</p>
</dd>
<dt>RFC</dt>
<dd>
<p>Request For Comments</p>
</dd>
<dt>SQL</dt>
<dd>
<p>Structured Query Language</p>
</dd>
<dt>SRID</dt>
<dd>
<p>Spatial Reference (System) Identifier</p>
</dd>
<dt>UML</dt>
<dd>
<p>Unified Modeling Language</p>
</dd>
<dt>UTC</dt>
<dd>
<p>Coordinated Universal Time</p>
</dd>
<dt>XML</dt>
<dd>
<p>eXtensible Markup Language</p>
</dd>
<dt>1D</dt>
<dd>
<p>One Dimensional</p>
</dd>
<dt>2D</dt>
<dd>
<p>Two Dimensional</p>
</dd>
<dt>3D</dt>
<dd>
<p>Three Dimensional</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_submitting_organizations_informative">B.4. Submitting Organizations (Informative)</h3>
<div class="paragraph">
<p>The following organizations submitted this Encoding Standard to the Open Geospatial Consortium as a
Request For Comment (RFC).</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Envitia</p>
</li>
<li>
<p>Luciad</p>
</li>
<li>
<p>Sigma Bravo</p>
</li>
<li>
<p>The Carbon Project</p>
</li>
<li>
<p>U.S. Army Geospatial Center</p>
</li>
<li>
<p>U.S. National Geospatial Intelligence Agency</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_document_contributor_contact_points_informative">B.5. Document contributor contact points (Informative)</h3>
<div class="paragraph">
<p>All questions regarding this document should be directed to the editor or the contributors:</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 19. Document contributors</caption>
<colgroup>
<col style="width:20%;">
<col style="width:40%;">
<col style="width:40%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Organization</th>
<th class="tableblock halign-left valign-top">Email</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Brett Antonides</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LNM Solutions</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>brett.antonides&lt;at&gt;lmnsolutions.com</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kevin Backe</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">U.S. Army Geospatial Center GASD</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Kevin.Backe&lt;at&gt;usace.army.mil</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Roger Brackin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Envitia</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>roger.brackin&lt;at&gt;envitia.com</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scott Clark</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LNM Solutions</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>scott.clark&lt;at&gt;lmnsolutions.com</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">David Cray</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">U.S. Army Geospatial Center GASD</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>David.Cray&lt;at&gt;usace.army.mil</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Paul Daisey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Image Matters</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>pauld&lt;at&gt;imagemattersllc.com</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nathan P. Frantz</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">U.S. Army Geospatial Center ERDC</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Nathan.P.Frantz&lt;at&gt;usace.army.mil</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alessandro Furieri</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spatialite</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>a.furieri&lt;at&gt;lqt.it</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Randy Gladish</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Image Matters</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>randyg&lt;at&gt;imagemattersllc.com</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Eric Gundersen</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MapBox</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>eric&lt;at&gt;mapbox.com</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Brad Hards</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sigma Bravo</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>bhards&lt;at&gt;sigmabravo.com</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jeff Harrison</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Carbon Project</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>jharrison&lt;at&gt;thecarbonproject.com</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Chris Holmes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenGeo</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>cholmes&lt;at&gt;9eo.org</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sean Hogan</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compusult</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>sean&lt;at&gt;compusult.net</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kirk Jensen</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Image Matters</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>kirkj&lt;at&gt;imagemattersllc.com</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">(chinese chars not working) Joshua</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Feng China University</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>joshua&lt;at&gt;gis.tw</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Terry A. Idol</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">U.S. National Geospatial Intelligence Agency</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Terry.A.Idol&lt;at&gt;nga.mil</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Drew Kurry</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Digital Globe</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>dkurry&lt;at&gt;digitalglobe.com</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Steven Lander</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reinventing Geospatial</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>steven.lander&lt;at&gt;rgi-corp.com</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tom MacWright</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MapBox</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>tom&lt;at&gt;mapbox.com</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Joan Maso Pau</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Universitat Autònoma de Barcelona (CREAF)</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>joan.maso&lt;at&gt;uab.es</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kevin S. Mullane</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">U.S. Army Geospatial Center GASD</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Kevin.S.Mullane&lt;at&gt;usace.army.mil</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">(chinese chars not working) Yi-Min Huang</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Feng China University</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>niner&lt;at&gt;gis.tw</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Andrea Peri</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Regione Toscana Italy</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>andrea.peri&lt;at&gt;regione.toscana.it</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Paul Ramsey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenGeo</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>pramsey&lt;at&gt;opengeo.org</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Matthew L. Renner</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">U.S. Army Geospatial Center ERDC</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Matthew.L.Renner&lt;at&gt;usace.army.mil</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Even Rouault</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mines-Paris</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>even.rouault&lt;at&gt;mines-paris.org</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Keith Ryden</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Environmental Systems Research Institute</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>kryden&lt;at&gt;esri.com</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scott Simmons</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CACI</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>scsimmons&lt;at&gt;caci.com</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ingo Simonis</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">International Geospatial Services Institute</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>ingo.simonis&lt;at&gt;igsi.eu</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Raj Singh</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Open Geospatial Consortium</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>rsingh&lt;at&gt;opengeospatial.org</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Steve Smyth</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Open Site Plan</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>steve&lt;at&gt;opensiteplan.org</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Donald V. Sullivan</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">U.S. National Aeronautics and Space Administration</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>donald.v.sullivan&lt;at&gt;nasa.gov</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Christopher Tucker</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mapstory</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>tucker&lt;at&gt;mapstory.org</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Benjamin T. Tuttle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">U.S. National Geospatial Intelligence Agency</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Benjamin.T.Tuttle&lt;at&gt;nga.mil</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pepijn Van Eeckhoudt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Luciad</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>pepijn.vaneeckhoudt&lt;at&gt;luciad.com</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">David G. Wesloh</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">U.S. National Geospatial Intelligence Agency</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>David.G.Wesloh&lt;at&gt;nga.mil</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jeff Yutzler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Image Matters</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>jeffy&lt;at&gt;imagemattersllc.com</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Eric Zimmerman</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">U.S. Army Geospatial Center ERDC</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Eric.Zimmerman&lt;at&gt;usace.army.mil</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
<div class="sect2">
<h3 id="_revision_history_informative">B.6. Revision History (Informative)</h3>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 20. Revision History</caption>
<colgroup>
<col style="width:16%;">
<col style="width:8%;">
<col style="width:16%;">
<col style="width:16%;">
<col style="width:41%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Date</th>
<th class="tableblock halign-left valign-top">Rel</th>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Paragraph modified</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2014-07-14</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Paul Daisey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.1.2.1.1</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Remove “at a minimum” after “includes” in 2nd paragraph, 1st sentence; conflicts with Clause 1</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2014-07-14</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Paul Daisey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.1.4.1.1</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Req 20 42in insert space between 42 and in</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2014-07-14</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Paul Daisey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.2.8.1.1</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Change Table 30 to Table 29</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2014-07-14</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Paul Daisey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.5.2.1.1</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Change access to accesses in 1st paragraph, 2nd sentence</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2014-07-14</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Paul Daisey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Annex A, A.3.1.1.1</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>inAnnex E insert space between in and Annex</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2014-07-14</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Paul Daisey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Annex A, A.3.1.1.1</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>43without insert space between 43 and without</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2014-07-14</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Paul Daisey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Annex B, B.5</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Change pepijn.vaneeckhoudt email from gmail to Luciad</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2014-07-14</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Paul Daisey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Annex B, B.5</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Change all "@" to “&lt;at&gt;”</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2014-07-14</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Paul Daisey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Annex C, C.10</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Remove UNIQUE from PK constraint</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2014-12-12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Paul Daisey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.1.1</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Add a footnote to "GeometryCollection" description</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2014-12-12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Paul Daisey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.1.6.1.1</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Add new Req 30b</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2014-12-12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Paul Daisey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Annex A, A.2.1.6.1.1</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Add feature_table_geometry_column_type test</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2014-12-12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Paul Daisey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.1.5.1.1</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Add “and geometry types” to 1st paragraph 1st sentence</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2014-12-12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Paul Daisey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.1.1.1.4</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Add footnote to Req 6</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2014-12-12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Paul Daisey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.1.3.1.1</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>replace ISO 13249-3 with OGC 06-103r4</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2014-12-12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Paul Daisey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.1.3.1.1</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Correct references in footnote 1:  [13] becomes [9] and [16] becomes [12]</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2014-12-12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Paul Daisey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.1.1.2.2</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Remove “and run” from clause and Req 9</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2014-12-12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Paul Daisey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.1.1.2.2</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Remove PRAGMA foreign_keys runtime option from Table 2</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2014-12-12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Paul Daisey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Annex A, A.2.2.7.1.1</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Change step 2 to “Not testable if less than 1”</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2014-12-12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Paul Daisey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Annex A, A.2.2.6.1.1</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Remove obsolete provisions (unique, column order, other columns) from step 3</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2014-12-12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Paul Daisey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.1.6.1.2</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Add sentences specifying unit of measure determination for geometry Z and M values.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2014-12-12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Paul Daisey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.1.3.1.1, Table 4</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Change description column default value to ‘’</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2014-12-12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Paul Daisey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Annex C, C.7, Table 29</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Remove spurious “)” from tile_data column definition</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2014-12-12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Paul Daisey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Annex D, D.3, Table 39</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Correct ISO 8601 timestamp GLOB expressions</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2015-03-16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scott Simmons</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">entire document</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Minor format corrections</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2015-04-27</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Joe Brumley</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">entire document</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Minor format corrections for corrigendum</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2015-06-10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Brad Hards</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.2.1</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Fixed typos</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2015-06-17</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jeff Yutzler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.2.6.1.1</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clarify role of bounding box in Tile Matrix Set table <a href="https://github.com/opengeospatial/geopackage/issues/102">https://github.com/opengeospatial/geopackage/issues/102</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2015-06-17</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jeff Yutzler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.2.7.1.2</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Add new Req 44b <a href="https://github.com/opengeospatial/geopackage/issues/102">https://github.com/opengeospatial/geopackage/issues/102</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2015-06-24</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jeff Yutzler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.1.2.1.2</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clarify Req 11 <a href="https://github.com/opengeospatial/geopackage/issues/110">https://github.com/opengeospatial/geopackage/issues/110</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2015-08-04</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jeff Yutzler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Figures 4, 5, 6</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Correcting multiplicity <a href="https://github.com/opengeospatial/geopackage/issues/117">https://github.com/opengeospatial/geopackage/issues/117</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2015-08-25</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jeff Yutzler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whole document</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Removing revision markup <a href="https://github.com/opengeospatial/geopackage/issues/135">https://github.com/opengeospatial/geopackage/issues/135</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2015-08-25</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jeff Yutzler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Annex B, B.6</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Removing old changes <a href="https://github.com/opengeospatial/geopackage/issues/133">https://github.com/opengeospatial/geopackage/issues/133</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2015-08-26</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jeff Yutzler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Annex B, B.6</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Fix casing of minIsInclusive and maxIsInclusive <a href="https://github.com/opengeospatial/geopackage/issues/130">https://github.com/opengeospatial/geopackage/issues/130</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2015-08-25</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jeff Yutzler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Annex B, B.6</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Case sensitivity for views, triggers, constraints <a href="https://github.com/opengeospatial/geopackage/issues/131">https://github.com/opengeospatial/geopackage/issues/131</a></p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
<div class="sect2">
<h3 id="_changes_to_the_ogc_abstract_specification">B.7. Changes to the OGC® Abstract Specification</h3>
<div class="paragraph">
<p>The OGC® Abstract Specification does not require changes to accommodate this OGC® standard.</p>
</div>
</div>
<div class="sect2">
<h3 id="_changes_to_ogc_implementation_standards">B.8. Changes to OGC® Implementation Standards</h3>
<div class="paragraph">
<p>None at present.</p>
</div>
</div>
<div class="sect2">
<h3 id="_potential_future_work_informative">B.9. Potential Future Work (Informative)</h3>
<div class="paragraph">
<p>Future versions of this standard MAY do the following:
* investigate GeoPackage implementation on SQLite version 4 <a href="#B25">[B25]</a>.
* include requirements for elevation data and routes.
* Future enhancements to this standard, a future GeoPackage Web Service specification and modifications to existing OGC Web Service (OWS) specifications to use GeoPackages as exchange formats MAY allow OWS to support provisioning of GeoPackages throughout an enterprise.
* include additional raster / image formats, including fewer restrictions on the image/tiff format.
* include additional SQL API routines for interrogation and conversion of raster / image BLOBs.
* add infrastructure to the metadata tables such as a <code>temporal_columns</code> table that refers to the time properties of data records.
* specify a streaming synchronization protocol for GeoPackage as part of a future GeoPackage Web Service specification, and/or a future version of the GeoPackage and/or Web Synchronization Service specification(s).
* address symbology and styling information.
* include geographic / geodesic geometry types.
* create a GeoPackage Abstract Object Model to support data encodings other than SQL.
* add <a href="https://github.com/mapbox/utfgrid-spec">UTFGrid</a> support.</p>
</div>
<div class="paragraph">
<p>Future versions of this standard and/or one for a GeoPackage Web Service MAY do the following:
* address utilities for importing and exporting vector, raster and tile data in various formats.
* address encryption of GeoPackages and/or individual tables or column values.</p>
</div>
</div>
<div class="sect2">
<h3 id="_uml_notation">B.10. UML Notation</h3>
<div class="paragraph">
<p>The diagrams that appear in this standard are presented using the Unified Modeling Language (UML) <a href="#B14">[B14]</a> static structure diagrams.
The UML notations used in this standard for RDBMS tables in a GeoPackage are described in <a href="#uml_notation_rdbms">UML Notation for RDBMS Tables</a> below.</p>
</div>
<div id="uml_notation_rdbms" class="imageblock">
<div class="content">
<img src="umlnotationforrdbmstables.png" alt="umlnotationforrdbmstables">
</div>
<div class="title">Figure 3. UML Notation for RDBMS Tables</div>
</div>
<div class="paragraph">
<p>In this standard, the following two stereotypes of UML classes are used to represent RDBMS tables:</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>&lt;&lt;table&gt;&gt; An instantiation of a UML class as an RDMBS table.</p>
</li>
<li>
<p>&lt;&lt;column&gt;&gt; An instantiation of a UML attribute as an RDBMS table column.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In this standard, the following standard data types are used for RDBMS
columns:</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>NULL – The value is a NULL value.</p>
</li>
<li>
<p>INTEGER – A signed integer, stored in 1, 2, 3, 4, 6, or 8 bytes depending on the magnitude of the value</p>
</li>
<li>
<p>REAL – The value is a floating point value, stored as an 8-byte IEEE floating point number.</p>
</li>
<li>
<p>TEXT – A sequence of characters, stored using the database encoding (UTF-8, UTF-16BE or UTF-16LE).</p>
</li>
<li>
<p>BLOB – The value is a blob of data, stored exactly as it was input.</p>
</li>
<li>
<p>NONE – The value is a Date / Time Timestamp</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_geopackage_tables_detailed_diagram">B.11. GeoPackage Tables Detailed Diagram</h3>
<div class="imageblock">
<div class="content">
<img src="geopackage-uml.png" alt="geopackage uml">
</div>
<div class="title">Figure 4. GeoPackage Tables Details</div>
</div>
</div>
<div class="sect2">
<h3 id="_geopackage_minimal_tables_for_features_diagram">B.12. GeoPackage Minimal Tables for Features Diagram</h3>
<div class="imageblock">
<div class="content">
<img src="geopackage-features.png" alt="geopackage features">
</div>
<div class="title">Figure 5. GeoPackage Minimal Tables for Features</div>
</div>
</div>
<div class="sect2">
<h3 id="_geopackage_minimal_tables_for_tiles_diagram">B.13. GeoPackage Minimal Tables for Tiles Diagram</h3>
<div class="imageblock">
<div class="content">
<img src="geopackage-tiles.png" alt="geopackage tiles">
</div>
<div class="title">Figure 6. GeoPackage Minimal Tables for Tiles</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="table_definition_sql"> Annex C: Table Definition SQL (Normative)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_gpkg_spatial_ref_sys">C.1. gpkg_spatial_ref_sys</h3>
<table id="gpkg_spatial_ref_sys_sql" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 21. gpkg_spatial_ref_sys Table Definition SQL</caption>
<colgroup>
<col style="width:%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TABLE</span> gpkg_spatial_ref_sys (
  srs_name <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  srs_id <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">PRIMARY</span> <span class="type">KEY</span>,
  organization <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  organization_coordsys_id <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  definition  <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  description <span class="predefined-type">TEXT</span>
);</code></pre>
</div>
</div>
<table id="sqlmm_gpkg_spatial_ref_sys_sql" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 22. SQL/MM View of gpkg_spatial_ref_sys Definition SQL (Informative)</caption>
<colgroup>
<col style="width:%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">VIEW</span> st_spatial_ref_sys <span class="keyword">AS</span>
  <span class="class">SELECT</span>
    srs_name,
    srs_id,
    organization,
    organization_coordsys_id,
    definition,
    description
  <span class="keyword">FROM</span> gpkg_spatial_ref_sys;</code></pre>
</div>
</div>
<table id="sfsql_gpkg_spatial_ref_sys_sql" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 23. SF/SQL View of gpkg_spatial_ref_sys Definition SQL (Informative)</caption>
<colgroup>
<col style="width:%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">VIEW</span> spatial_ref_sys <span class="keyword">AS</span>
  <span class="class">SELECT</span>
    srs_id <span class="keyword">AS</span> srid,
    organization <span class="keyword">AS</span> auth_name,
    organization_coordsys_id <span class="keyword">AS</span> auth_srid,
    definition <span class="keyword">AS</span> srtext
  <span class="keyword">FROM</span> gpkg_spatial_ref_sys;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gpkg_contents">C.2. gpkg_contents</h3>
<table id="gpkg_contents_sql" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 24. gpkg_contents Table Definition SQL</caption>
<colgroup>
<col style="width:%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TABLE</span> gpkg_contents (
  table_name <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">PRIMARY</span> <span class="type">KEY</span>,
  data_type <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  identifier <span class="predefined-type">TEXT</span> <span class="directive">UNIQUE</span>,
  description <span class="predefined-type">TEXT</span> <span class="directive">DEFAULT</span> <span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>,
  last_change <span class="predefined-type">DATETIME</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">DEFAULT</span> (strftime(<span class="string"><span class="delimiter">'</span><span class="content">%Y-%m-%dT%H:%M:%fZ</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">now</span><span class="delimiter">'</span></span>)),
  min_x <span class="predefined-type">DOUBLE</span>,
  min_y <span class="predefined-type">DOUBLE</span>,
  max_x <span class="predefined-type">DOUBLE</span>,
  max_y <span class="predefined-type">DOUBLE</span>,
  srs_id <span class="predefined-type">INTEGER</span>,
  <span class="type">CONSTRAINT</span> fk_gc_r_srs_id <span class="directive">FOREIGN</span> <span class="type">KEY</span> (srs_id) <span class="keyword">REFERENCES</span> gpkg_spatial_ref_sys(srs_id)
);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gpkg_geometry_columns">C.3. gpkg_geometry_columns</h3>
<table id="gpkg_geometry_columns_sql" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 25. gpkg_geometry_columns Table Definition SQL</caption>
<colgroup>
<col style="width:%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TABLE</span> gpkg_geometry_columns (
  table_name <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  column_name <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  geometry_type_name <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  srs_id <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  z <span class="predefined-type">TINYINT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  m <span class="predefined-type">TINYINT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  <span class="type">CONSTRAINT</span> pk_geom_cols <span class="directive">PRIMARY</span> <span class="type">KEY</span> (table_name, column_name),
  <span class="type">CONSTRAINT</span> uk_gc_table_name <span class="directive">UNIQUE</span> (table_name),
  <span class="type">CONSTRAINT</span> fk_gc_tn <span class="directive">FOREIGN</span> <span class="type">KEY</span> (table_name) <span class="keyword">REFERENCES</span> gpkg_contents(table_name),
  <span class="type">CONSTRAINT</span> fk_gc_srs <span class="directive">FOREIGN</span> <span class="type">KEY</span> (srs_id) <span class="keyword">REFERENCES</span> gpkg_spatial_ref_sys (srs_id)
);</code></pre>
</div>
</div>
<table id="sqlmm_gpkg_geometry_columns_sql" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 26. SQL/MM View of gpkg_geometry_columns Definition SQL (Informative)</caption>
<colgroup>
<col style="width:%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">VIEW</span> st_geometry_columns <span class="keyword">AS</span>
  <span class="class">SELECT</span>
    table_name,
    column_name,
    <span class="string"><span class="delimiter">&quot;</span><span class="content">ST_</span><span class="delimiter">&quot;</span></span> || geometry_type_name,
    g.srs_id,
    srs_name
  <span class="keyword">FROM</span> gpkg_geometry_columns <span class="keyword">as</span> g <span class="keyword">JOIN</span> gpkg_spatial_ref_sys <span class="keyword">AS</span> s
  <span class="keyword">WHERE</span> g.srs_id = s.srs_id;</code></pre>
</div>
</div>
<table id="sfsql_gpkg_geometry_columns_sql" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 27. SF/SQL VIEW of gpkg_geometry_columns Definition SQL (Informative)</caption>
<colgroup>
<col style="width:%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">VIEW</span> geometry_columns <span class="keyword">AS</span>
  <span class="class">SELECT</span>
    table_name <span class="keyword">AS</span> f_table_name,
    column_name <span class="keyword">AS</span> f_geometry_column,
    code4name (geometry_type_name) <span class="keyword">AS</span> geometry_type,
    <span class="integer">2</span> + (<span class="keyword">CASE</span> z <span class="keyword">WHEN</span> <span class="integer">1</span> <span class="keyword">THEN</span> <span class="integer">1</span> <span class="keyword">WHEN</span> <span class="integer">2</span> <span class="keyword">THEN</span> <span class="integer">1</span> <span class="keyword">ELSE</span> <span class="integer">0</span> <span class="keyword">END</span>) + (<span class="keyword">CASE</span> m <span class="keyword">WHEN</span> <span class="integer">1</span> <span class="keyword">THEN</span> <span class="integer">1</span> <span class="keyword">WHEN</span> <span class="integer">2</span> <span class="keyword">THEN</span> <span class="integer">1</span> <span class="keyword">ELSE</span> <span class="integer">0</span> <span class="keyword">END</span>) <span class="keyword">AS</span> coord_dimension,
    srs_id <span class="keyword">AS</span> srid
  <span class="keyword">FROM</span> gpkg_geometry_columns;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
Implementer must provide code4name(geometry_type_name) SQL function
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_sample_feature_table_informative">C.4. sample_feature_table (Informative)</h3>
<table id="example_feature_table_sql" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 28. sample_feature_table Table Definition SQL (Informative)</caption>
<colgroup>
<col style="width:%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TABLE</span> sample_feature_table (
  id <span class="predefined-type">INTEGER</span> <span class="directive">PRIMARY</span> <span class="type">KEY</span> AUTOINCREMENT,
  geometry GEOMETRY,
  text_attribute <span class="predefined-type">TEXT</span>,
  real_attribute REAL,
  boolean_attribute <span class="predefined-type">BOOLEAN</span>,
  raster_or_photo <span class="predefined-type">BLOB</span>
);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gpkg_tile_matrix_set">C.5. gpkg_tile_matrix_set</h3>
<table id="gpkg_tile_matrix_set_sql" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 29. gpkg_tile_matrix_set Table Creation SQL</caption>
<colgroup>
<col style="width:%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TABLE</span> gpkg_tile_matrix_set (
  table_name <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">PRIMARY</span> <span class="type">KEY</span>,
  srs_id <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  min_x <span class="predefined-type">DOUBLE</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  min_y <span class="predefined-type">DOUBLE</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  max_x <span class="predefined-type">DOUBLE</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  max_y <span class="predefined-type">DOUBLE</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  <span class="type">CONSTRAINT</span> fk_gtms_table_name <span class="directive">FOREIGN</span> <span class="type">KEY</span> (table_name) <span class="keyword">REFERENCES</span> gpkg_contents(table_name),
  <span class="type">CONSTRAINT</span> fk_gtms_srs <span class="directive">FOREIGN</span> <span class="type">KEY</span> (srs_id) <span class="keyword">REFERENCES</span> gpkg_spatial_ref_sys (srs_id)
);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gpkg_tile_matrix">C.6. gpkg_tile_matrix</h3>
<table id="gpkg_tile_matrix_sql" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 30. gpkg_tile_matrix Table Creation SQL</caption>
<colgroup>
<col style="width:%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TABLE</span> gpkg_tile_matrix (
  table_name <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  zoom_level <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  matrix_width <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  matrix_height <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  tile_width <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  tile_height <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  pixel_x_size <span class="predefined-type">DOUBLE</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  pixel_y_size <span class="predefined-type">DOUBLE</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  <span class="type">CONSTRAINT</span> pk_ttm <span class="directive">PRIMARY</span> <span class="type">KEY</span> (table_name, zoom_level),
  <span class="type">CONSTRAINT</span> fk_tmm_table_name <span class="directive">FOREIGN</span> <span class="type">KEY</span> (table_name) <span class="keyword">REFERENCES</span> gpkg_contents(table_name)
);</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 31. EXAMPLE: gpkg_tile_matrix Insert Statement (Informative)</caption>
<colgroup>
<col style="width:%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">INSERT</span> <span class="class">INTO</span> gpkg_tile_matrix <span class="keyword">VALUES</span> (
  <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_tile_pyramid</span><span class="delimiter">&quot;</span></span>,
  <span class="integer">0</span>,
  <span class="integer">1</span>,
  <span class="integer">1</span>,
  <span class="integer">512</span>,
  <span class="integer">512</span>,
  <span class="float">2.0</span>,
  <span class="float">2.0</span>
);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_sample_tile_pyramid_informative">C.7. sample_tile_pyramid (Informative)</h3>
<table id="example_tiles_table_sql" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 32. EXAMPLE: tiles table Create Table SQL (Informative)</caption>
<colgroup>
<col style="width:%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TABLE</span> sample_tile_pyramid (
  id <span class="predefined-type">INTEGER</span> <span class="directive">PRIMARY</span> <span class="type">KEY</span> AUTOINCREMENT,
  zoom_level <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  tile_column <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  tile_row <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  tile_data <span class="predefined-type">BLOB</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  <span class="directive">UNIQUE</span> (zoom_level, tile_column, tile_row)
)</code></pre>
</div>
</div>
<table id="example_tiles_table_insert_sql" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 33. EXAMPLE: tiles table Insert Statement (Informative)</caption>
<colgroup>
<col style="width:%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">INSERT</span> <span class="class">INTO</span> sample_matrix_pyramid <span class="keyword">VALUES</span> (
  <span class="integer">1</span>,
  <span class="integer">1</span>,
  <span class="integer">1</span>,
  <span class="integer">1</span>,
  <span class="string"><span class="delimiter">&quot;</span><span class="content">BLOB VALUE</span><span class="delimiter">&quot;</span></span>
)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gpkg_data_columns">C.8. gpkg_data_columns</h3>
<table id="gpkg_data_columns_sql" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 34. gpkg_data_columns Table Definition SQL</caption>
<colgroup>
<col style="width:%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TABLE</span> gpkg_data_columns (
  table_name <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  column_name <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  name <span class="predefined-type">TEXT</span>,
  title <span class="predefined-type">TEXT</span>,
  description <span class="predefined-type">TEXT</span>,
  mime_type <span class="predefined-type">TEXT</span>,
  constraint_name <span class="predefined-type">TEXT</span>,
  <span class="type">CONSTRAINT</span> pk_gdc <span class="directive">PRIMARY</span> <span class="type">KEY</span> (table_name, column_name),
  <span class="type">CONSTRAINT</span> fk_gdc_tn <span class="directive">FOREIGN</span> <span class="type">KEY</span> (table_name) <span class="keyword">REFERENCES</span> gpkg_contents(table_name)
);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gpkg_data_column_constraints">C.9. gpkg_data_column_constraints</h3>
<table id="gpkg_data_column_constraints_sql" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 35. gpkg_data_columns Table Definition SQL</caption>
<colgroup>
<col style="width:%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TABLE</span> gpkg_data_column_constraints (
  constraint_name <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  constraint_type <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>, // <span class="string"><span class="delimiter">'</span><span class="content">range</span><span class="delimiter">'</span></span> | <span class="string"><span class="delimiter">'</span><span class="content">enum</span><span class="delimiter">'</span></span> | <span class="string"><span class="delimiter">'</span><span class="content">glob</span><span class="delimiter">'</span></span>
  value <span class="predefined-type">TEXT</span>,
  <span class="predefined">min</span> NUMERIC,
  min_is_inclusive <span class="predefined-type">BOOLEAN</span>, // <span class="integer">0</span> = <span class="predefined-constant">false</span>, <span class="integer">1</span> = <span class="predefined-constant">true</span>
  <span class="predefined">max</span> NUMERIC,
  max_is_inclusive <span class="predefined-type">BOOLEAN</span>, // <span class="integer">0</span> = <span class="predefined-constant">false</span>, <span class="integer">1</span> = <span class="predefined-constant">true</span>
  description <span class="predefined-type">TEXT</span>,
  <span class="type">CONSTRAINT</span> gdcc_ntv <span class="directive">UNIQUE</span> (constraint_name, constraint_type, value)
)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gpkg_metadata">C.10. gpkg_metadata</h3>
<table id="gpkg_metadata_sql" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 36. gpkg_metadata Table Definition SQL</caption>
<colgroup>
<col style="width:%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TABLE</span> gpkg_metadata (
  id <span class="predefined-type">INTEGER</span> <span class="type">CONSTRAINT</span> m_pk <span class="directive">PRIMARY</span> <span class="type">KEY</span> <span class="directive">ASC</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  md_scope <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">DEFAULT</span> <span class="string"><span class="delimiter">'</span><span class="content">dataset</span><span class="delimiter">'</span></span>,
  md_standard_uri <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  mime_type <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">DEFAULT</span> <span class="string"><span class="delimiter">'</span><span class="content">text/xml</span><span class="delimiter">'</span></span>,
  metadata <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>
);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gpkg_metadata_reference">C.11. gpkg_metadata_reference</h3>
<table id="gpkg_metadata_reference_sql" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 37. gpkg_metadata_reference Table Definition SQL</caption>
<colgroup>
<col style="width:%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TABLE</span> gpkg_metadata_reference (
  reference_scope <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  table_name <span class="predefined-type">TEXT</span>,
  column_name <span class="predefined-type">TEXT</span>,
  row_id_value <span class="predefined-type">INTEGER</span>,
  <span class="predefined-type">timestamp</span> <span class="predefined-type">DATETIME</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">DEFAULT</span> (strftime(<span class="string"><span class="delimiter">'</span><span class="content">%Y-%m-%dT%H:%M:%fZ</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">now</span><span class="delimiter">'</span></span>)),
  md_file_id <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  md_parent_id <span class="predefined-type">INTEGER</span>,
  <span class="type">CONSTRAINT</span> crmr_mfi_fk <span class="directive">FOREIGN</span> <span class="type">KEY</span> (md_file_id) <span class="keyword">REFERENCES</span> gpkg_metadata(id),
  <span class="type">CONSTRAINT</span> crmr_mpi_fk <span class="directive">FOREIGN</span> <span class="type">KEY</span> (md_parent_id) <span class="keyword">REFERENCES</span> gpkg_metadata(id)
);</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 38. Example: gpkg_metadata_reference SQL insert statement (Informative)</caption>
<colgroup>
<col style="width:%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">INSERT</span> <span class="class">INTO</span> gpkg_metadata_reference <span class="keyword">VALUES</span> (
  <span class="string"><span class="delimiter">'</span><span class="content">table</span><span class="delimiter">'</span></span>,
  <span class="string"><span class="delimiter">'</span><span class="content">sample_rasters</span><span class="delimiter">'</span></span>,
  <span class="predefined-constant">NULL</span>,
  <span class="predefined-constant">NULL</span>,
  <span class="string"><span class="delimiter">'</span><span class="content">2012-08-17T14:49:32.932Z</span><span class="delimiter">'</span></span>,
  <span class="integer">98</span>,
  <span class="integer">99</span>
)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gpkg_extensions">C.12. gpkg_extensions</h3>
<table id="gpkg_extensions_sql" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 39. gpkg_extensions Table Definition SQL</caption>
<colgroup>
<col style="width:%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TABLE</span> gpkg_extensions (
  table_name <span class="predefined-type">TEXT</span>,
  column_name <span class="predefined-type">TEXT</span>,
  extension_name <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  definition <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  scope <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  <span class="type">CONSTRAINT</span> ge_tce <span class="directive">UNIQUE</span> (table_name, column_name, extension_name)
);</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_trigger_definition_sql_informative"> Annex D: Trigger Definition SQL (Informative)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_gpkg_tile_matrix_2">D.1. gpkg_tile_matrix</h3>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 40. gpkg_tile_matrix Trigger Definition SQL</caption>
<colgroup>
<col style="width:%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix_zoom_level_insert</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table ''gpkg_tile_matrix'' violates constraint: zoom_level cannot be less than 0</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> (NEW.zoom_level &lt; <span class="integer">0</span>);
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix_zoom_level_update</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">of</span> zoom_level <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table ''gpkg_tile_matrix'' violates constraint: zoom_level cannot be less than 0</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> (NEW.zoom_level &lt; <span class="integer">0</span>);
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix_matrix_width_insert</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table ''gpkg_tile_matrix'' violates constraint: matrix_width cannot be less than 1</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> (NEW.matrix_width &lt; <span class="integer">1</span>);
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix_matrix_width_update</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> matrix_width <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table ''gpkg_tile_matrix'' violates constraint: matrix_width cannot be less than 1</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> (NEW.matrix_width &lt; <span class="integer">1</span>);
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix_matrix_height_insert</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table ''gpkg_tile_matrix'' violates constraint: matrix_height cannot be less than 1</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> (NEW.matrix_height &lt; <span class="integer">1</span>);
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix_matrix_height_update</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> matrix_height <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table ''gpkg_tile_matrix'' violates constraint: matrix_height cannot be less than 1</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> (NEW.matrix_height &lt; <span class="integer">1</span>);
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix_pixel_x_size_insert</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table ''gpkg_tile_matrix'' violates constraint: pixel_x_size must be greater than 0</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> (NEW.pixel_x_size &gt; <span class="integer">0</span>);
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix_pixel_x_size_update</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> pixel_x_size <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table ''gpkg_tile_matrix'' violates constraint: pixel_x_size must be greater than 0</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> (NEW.pixel_x_size &gt; <span class="integer">0</span>);
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix_pixel_y_size_insert</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table ''gpkg_tile_matrix'' violates constraint: pixel_y_size must be greater than 0</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> (NEW.pixel_y_size &gt; <span class="integer">0</span>);
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix_pixel_y_size_update</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> pixel_y_size <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table ''gpkg_tile_matrix'' violates constraint: pixel_y_size must be greater than 0</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> (NEW.pixel_y_size &gt; <span class="integer">0</span>);
<span class="keyword">END</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_metadata_3">D.2. metadata</h3>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 41. metadata Trigger Definition SQL</caption>
<colgroup>
<col style="width:%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_md_scope_insert</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table gpkg_metadata violates
constraint: md_scope must be one of undefined | fieldSession |
collectionSession | series | dataset | featureType | feature |
attributeType | attribute | tile | model | catalog | schema |
taxonomy software | service | collectionHardware |
nonGeographicDataset | dimensionGroup</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span>(NEW.md_scope <span class="keyword">IN</span>
(<span class="string"><span class="delimiter">'</span><span class="content">undefined</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">fieldSession</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">collectionSession</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">series</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">dataset</span><span class="delimiter">'</span></span>,
<span class="string"><span class="delimiter">'</span><span class="content">featureType</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">feature</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">attributeType</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">attribute</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">tile</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">model</span><span class="delimiter">'</span></span>,
<span class="string"><span class="delimiter">'</span><span class="content">catalog</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">schema</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">taxonomy</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">software</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">service</span><span class="delimiter">'</span></span>,
<span class="string"><span class="delimiter">'</span><span class="content">collectionHardware</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">nonGeographicDataset</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">dimensionGroup</span><span class="delimiter">'</span></span>));
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_md_scope_update</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> <span class="string"><span class="delimiter">'</span><span class="content">md_scope</span><span class="delimiter">'</span></span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table gpkg_metadata violates
constraint: md_scope must be one of undefined | fieldSession |
collectionSession | series | dataset | featureType | feature |
attributeType | attribute | tile | model | catalog | schema |
taxonomy software | service | collectionHardware |
nonGeographicDataset | dimensionGroup</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span>(NEW.md_scope <span class="keyword">IN</span>
(<span class="string"><span class="delimiter">'</span><span class="content">undefined</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">fieldSession</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">collectionSession</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">series</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">dataset</span><span class="delimiter">'</span></span>,
<span class="string"><span class="delimiter">'</span><span class="content">featureType</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">feature</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">attributeType</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">attribute</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">tile</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">model</span><span class="delimiter">'</span></span>,
<span class="string"><span class="delimiter">'</span><span class="content">catalog</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">schema</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">taxonomy</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">software</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">service</span><span class="delimiter">'</span></span>,
<span class="string"><span class="delimiter">'</span><span class="content">collectionHardware</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">nonGeographicDataset</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">dimensionGroup</span><span class="delimiter">'</span></span>));
<span class="keyword">END</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_metadata_reference">D.3. metadata_reference</h3>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 42. gpkg_metadata_reference Trigger Definition SQL</caption>
<colgroup>
<col style="width:%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference_reference_scope_insert</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table gpkg_metadata_reference
violates constraint: reference_scope must be one of &quot;geopackage&quot;,
table&quot;, &quot;column&quot;, &quot;row&quot;, &quot;row/col&quot;</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> NEW.reference_scope <span class="keyword">IN</span>
(<span class="string"><span class="delimiter">'</span><span class="content">geopackage</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">table</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">column</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">row</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">row/col</span><span class="delimiter">'</span></span>);
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference_reference_scope_update</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> <span class="string"><span class="delimiter">'</span><span class="content">reference_scope</span><span class="delimiter">'</span></span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table gpkg_metadata_reference
violates constraint: referrence_scope must be one of &quot;geopackage&quot;,
&quot;table&quot;, &quot;column&quot;, &quot;row&quot;, &quot;row/col&quot;</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> NEW.reference_scope <span class="keyword">IN</span>
(<span class="string"><span class="delimiter">'</span><span class="content">geopackage</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">table</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">column</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">row</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">row/col</span><span class="delimiter">'</span></span>);
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference_column_name_insert</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table gpkg_metadata_reference
violates constraint: column name must be NULL when reference_scope
is &quot;geopackage&quot;, &quot;table&quot; or &quot;row&quot;</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> (NEW.reference_scope <span class="keyword">IN</span> (<span class="string"><span class="delimiter">'</span><span class="content">geopackage</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">table</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">row</span><span class="delimiter">'</span></span>)
<span class="keyword">AND</span> NEW.column_name <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>);
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table gpkg_metadata_reference
violates constraint: column name must be defined for the specified
table when reference_scope is &quot;column&quot; or &quot;row/col&quot;</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> (NEW.reference_scope <span class="keyword">IN</span> (<span class="string"><span class="delimiter">'</span><span class="content">column</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">row/col</span><span class="delimiter">'</span></span>)
<span class="keyword">AND</span> <span class="keyword">NOT</span> NEW.table_name <span class="keyword">IN</span> (
<span class="class">SELECT</span> name <span class="keyword">FROM</span> SQLITE_MASTER <span class="keyword">WHERE</span> type = <span class="string"><span class="delimiter">'</span><span class="content">table</span><span class="delimiter">'</span></span>
<span class="keyword">AND</span> name = NEW.table_name
<span class="keyword">AND</span> sql <span class="keyword">LIKE</span> (<span class="string"><span class="delimiter">'</span><span class="content">%</span><span class="delimiter">'</span></span> || NEW.column_name || <span class="string"><span class="delimiter">'</span><span class="content">%</span><span class="delimiter">'</span></span>)));
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference_column_name_update</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> column_name <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table gpkg_metadata_reference
violates constraint: column name must be NULL when reference_scope
is &quot;geopackage&quot;, &quot;table&quot; or &quot;row&quot;</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> (NEW.reference_scope <span class="keyword">IN</span> (<span class="string"><span class="delimiter">'</span><span class="content">geopackage</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">table</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">row</span><span class="delimiter">'</span></span>)
<span class="keyword">AND</span> NEW.column_nameIS <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>);
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table gpkg_metadata_reference
violates constraint: column name must be defined for the specified
table when reference_scope is &quot;column&quot; or &quot;row/col&quot;</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> (NEW.reference_scope <span class="keyword">IN</span> (<span class="string"><span class="delimiter">'</span><span class="content">column</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">row/col</span><span class="delimiter">'</span></span>)
<span class="keyword">AND</span> <span class="keyword">NOT</span> NEW.table_name <span class="keyword">IN</span> (
<span class="class">SELECT</span> name <span class="keyword">FROM</span> SQLITE_MASTER <span class="keyword">WHERE</span> type = <span class="string"><span class="delimiter">'</span><span class="content">table</span><span class="delimiter">'</span></span>
<span class="keyword">AND</span> name = NEW.table_name
<span class="keyword">AND</span> sql <span class="keyword">LIKE</span> (<span class="string"><span class="delimiter">'</span><span class="content">%</span><span class="delimiter">'</span></span> || NEW.column_name || <span class="string"><span class="delimiter">'</span><span class="content">%</span><span class="delimiter">'</span></span>)));
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference_row_id_value_insert</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table gpkg_metadata_reference
violates constraint: row_id_value must be NULL when reference_scope
is &quot;geopackage&quot;, &quot;table&quot; or &quot;column&quot;</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> NEW.reference_scope <span class="keyword">IN</span> (<span class="string"><span class="delimiter">'</span><span class="content">geopackage</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">table</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">column</span><span class="delimiter">'</span></span>)
<span class="keyword">AND</span> NEW.row_id_value <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>;
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table gpkg_metadata_reference
violates constraint: row_id_value must exist in specified table when
reference_scope is &quot;row&quot; or &quot;row/col&quot;</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> NEW.reference_scope <span class="keyword">IN</span> (<span class="string"><span class="delimiter">'</span><span class="content">row</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">row/col</span><span class="delimiter">'</span></span>)
<span class="keyword">AND</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> (<span class="class">SELECT</span> rowid
<span class="keyword">FROM</span> (<span class="class">SELECT</span> NEW.table_name <span class="keyword">AS</span> table_name) <span class="keyword">WHERE</span> rowid =
NEW.row_id_value);
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference_row_id_value_update</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> <span class="string"><span class="delimiter">'</span><span class="content">row_id_value</span><span class="delimiter">'</span></span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table gpkg_metadata_reference
violates constraint: row_id_value must be NULL when reference_scope
is &quot;geopackage&quot;, &quot;table&quot; or &quot;column&quot;</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> NEW.reference_scope <span class="keyword">IN</span> (<span class="string"><span class="delimiter">'</span><span class="content">geopackage</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">table</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">column</span><span class="delimiter">'</span></span>)
<span class="keyword">AND</span> NEW.row_id_value <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>;
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table gpkg_metadata_reference
violates constraint: row_id_value must exist in specified table when
reference_scope is &quot;row&quot; or &quot;row/col&quot;</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> NEW.reference_scope <span class="keyword">IN</span> (<span class="string"><span class="delimiter">'</span><span class="content">row</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">row/col</span><span class="delimiter">'</span></span>)
<span class="keyword">AND</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> (<span class="class">SELECT</span> rowid
<span class="keyword">FROM</span> (<span class="class">SELECT</span> NEW.table_name <span class="keyword">AS</span> table_name) <span class="keyword">WHERE</span> rowid =
NEW.row_id_value);
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference_timestamp_insert</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table gpkg_metadata_reference
violates constraint: timestamp must be a valid time in ISO 8601
&quot;yyyy-mm-ddThh:mm:ss.cccZ&quot; form</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> (NEW.timestamp GLOB
<span class="string"><span class="delimiter">'</span><span class="content">[1-2][0-9][0-9][0-9]-[0-1][0-9]-[0-3][0-9]T[0-2][0-9]:[0-5][0-
9]:[0-5][0-9].[0-9][0-9][0-9]Z</span><span class="delimiter">'</span></span>
<span class="keyword">AND</span> strftime(<span class="string"><span class="delimiter">'</span><span class="content">%s</span><span class="delimiter">'</span></span>,NEW.timestamp) <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>);
<span class="keyword">END</span>
<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference_timestamp_update</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> <span class="string"><span class="delimiter">'</span><span class="content">timestamp</span><span class="delimiter">'</span></span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table gpkg_metadata_reference
violates constraint: timestamp must be a valid time in ISO 8601
&quot;yyyy-mm-ddThh:mm:ss.cccZ&quot; form</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> (NEW.timestamp GLOB
<span class="string"><span class="delimiter">'</span><span class="content">[1-2][0-9][0-9][0-9]-[0-1][0-9]-[0-3][0-9]T[0-2][0-9]:[0-5][0-
9]:[0-5][0-9].[0-9][0-9][0-9]Z</span><span class="delimiter">'</span></span>
<span class="keyword">AND</span> strftime(<span class="string"><span class="delimiter">'</span><span class="content">%s</span><span class="delimiter">'</span></span>,NEW.timestamp) <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>);
<span class="keyword">END</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_sample_feature_table">D.4. sample_feature_table</h3>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 43. EXAMPLE: features table Trigger Definition SQL</caption>
<colgroup>
<col style="width:%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_feature_table_real_insert</span><span class="delimiter">&quot;</span></span>
<span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_feature_table</span><span class="delimiter">&quot;</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table ''sample_feature_table''
violates constraint: real_attribute must be greater than 0</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> (NEW.real_attribute &gt; <span class="integer">0</span>);
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_feature_table_real_update</span><span class="delimiter">&quot;</span></span>
<span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">real_attribute</span><span class="delimiter">&quot;</span></span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_feature_table</span><span class="delimiter">&quot;</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE (ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update of ''real_attribute'' on table
''sample_feature_table'' violates constraint: real_attribute value
must be &gt; 0</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> (NEW.real_attribute &gt; <span class="integer">0</span>);
<span class="keyword">END</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>where &lt;t&gt; and &lt;c&gt; are replaced with the names of the feature table and geometry column being inserted or updated.</p>
</div>
</div>
<div class="sect2">
<h3 id="_sample_tile_pyramid">D.5. sample_tile_pyramid</h3>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 44. tiles table Trigger Definition SQL</caption>
<colgroup>
<col style="width:%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_tile_pyramid_zoom_insert</span><span class="delimiter">&quot;</span></span>
<span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_tile_pyramid</span><span class="delimiter">&quot;</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table ''sample_tile_pyramid'' violates constraint: zoom_level not specified for table in gpkg_tile_matrix</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> (NEW.zoom_level <span class="keyword">IN</span> (<span class="class">SELECT</span> zoom_level <span class="keyword">FROM</span> gpkg_tile_matrix <span class="keyword">WHERE</span> table_name = <span class="string"><span class="delimiter">'</span><span class="content">sample_tile_pyramid</span><span class="delimiter">'</span></span>)) ;
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_tile_pyramid_zoom_update</span><span class="delimiter">&quot;</span></span>
<span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> zoom_level <span class="keyword">ON</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_tile_pyramid</span><span class="delimiter">&quot;</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table ''sample_tile_pyramid'' violates constraint: zoom_level not specified for table in gpkg_tile_matrix</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> (NEW.zoom_level <span class="keyword">IN</span> (<span class="class">SELECT</span> zoom_level <span class="keyword">FROM</span> gpkg_tile_matrix <span class="keyword">WHERE</span> table_name = <span class="string"><span class="delimiter">'</span><span class="content">sample_tile_pyramid</span><span class="delimiter">'</span></span>)) ;
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_tile_pyramid_tile_column_insert</span><span class="delimiter">&quot;</span></span>
<span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_tile_pyramid</span><span class="delimiter">&quot;</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table ''sample_tile_pyramid'' violates constraint: tile_column cannot be &lt; 0</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> (NEW.tile_column &lt; <span class="integer">0</span>) ;
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table ''sample_tile_pyramid'' violates constraint: tile_column must by &lt; matrix_width specified for table and zoom level in gpkg_tile_matrix</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> (NEW.tile_column &lt; (<span class="class">SELECT</span> matrix_width <span class="keyword">FROM</span> gpkg_tile_matrix <span class="keyword">WHERE</span> table_name = <span class="string"><span class="delimiter">'</span><span class="content">sample_tile_pyramid</span><span class="delimiter">'</span></span> <span class="keyword">AND</span> zoom_level = NEW.zoom_level));
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_tile_pyramid_tile_column_update</span><span class="delimiter">&quot;</span></span>
<span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> tile_column <span class="keyword">ON</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_tile_pyramid</span><span class="delimiter">&quot;</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table ''sample_tile_pyramid'' violates constraint: tile_column cannot be &lt; 0</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> (NEW.tile_column &lt; <span class="integer">0</span>) ;
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table ''sample_tile_pyramid'' violates constraint: tile_column must by &lt; matrix_width specified for table and zoom level in gpkg_tile_matrix</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> (NEW.tile_column &lt; (<span class="class">SELECT</span> matrix_width <span class="keyword">FROM</span> gpkg_tile_matrix <span class="keyword">WHERE</span> table_name = <span class="string"><span class="delimiter">'</span><span class="content">sample_tile_pyramid</span><span class="delimiter">'</span></span> <span class="keyword">AND</span> zoom_level = NEW.zoom_level));
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_tile_pyramid_tile_row_insert</span><span class="delimiter">&quot;</span></span>
<span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_tile_pyramid</span><span class="delimiter">&quot;</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table ''sample_tile_pyramid'' violates constraint: tile_row cannot be &lt; 0</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> (NEW.tile_row &lt; <span class="integer">0</span>) ;
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table ''sample_tile_pyramid'' violates constraint: tile_row must by &lt; matrix_height specified for table and zoom level in gpkg_tile_matrix</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> (NEW.tile_row &lt; (<span class="class">SELECT</span> matrix_height <span class="keyword">FROM</span> gpkg_tile_matrix <span class="keyword">WHERE</span> table_name = <span class="string"><span class="delimiter">'</span><span class="content">sample_tile_pyramid</span><span class="delimiter">'</span></span> <span class="keyword">AND</span> zoom_level = NEW.zoom_level));
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_tile_pyramid_tile_row_update</span><span class="delimiter">&quot;</span></span>
<span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> tile_row <span class="keyword">ON</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_tile_pyramid</span><span class="delimiter">&quot;</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table ''sample_tile_pyramid'' violates constraint: tile_row cannot be &lt; 0</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> (NEW.tile_row &lt; <span class="integer">0</span>) ;
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table ''sample_tile_pyramid'' violates constraint: tile_row must by &lt; matrix_height specified for table and zoom level in gpkg_tile_matrix</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> (NEW.tile_row &lt; (<span class="class">SELECT</span> matrix_height <span class="keyword">FROM</span> gpkg_tile_matrix <span class="keyword">WHERE</span> table_name = <span class="string"><span class="delimiter">'</span><span class="content">sample_tile_pyramid</span><span class="delimiter">'</span></span> <span class="keyword">AND</span> zoom_level = NEW.zoom_level));
<span class="keyword">END</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="geometry_types"> Annex E: Geometry Types (Normative)</h2>
<div class="sectionbody">
<table id="geometry_types_core" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 45. Geometry Type Codes (Core)</caption>
<colgroup>
<col style="width:25%;">
<col style="width:75%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Code</th>
<th class="tableblock halign-left valign-top">Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GEOMETRY</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">POINT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LINESTRING</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">POLYGON</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MULTIPOINT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MULTILINESTRING</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MULTIPOLYGON</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GEOMETRYCOLLECTION</p></td>
</tr>
</tbody>
</table>

<table id="geometry_types_extension" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 46. Geometry Type Codes (Extension)</caption>
<colgroup>
<col style="width:25%;">
<col style="width:75%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Code</th>
<th class="tableblock halign-left valign-top">Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CIRCULARSTRING</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">COMPOUNDCURVE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CURVEPOLYGON</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MULTICURVE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MULTISURFACE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">13</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CURVE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">14</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SURFACE</p></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>GEOMETRY subtypes are POINT, CURVE, SURFACE and GEOMCOLLECTION.</p>
</div>
<div class="paragraph">
<p>CURVE subtypes are LINESTRING, CIRCULARSTRING and COMPOUNDCURVE.</p>
</div>
<div class="paragraph">
<p>SURFACE subtype is CURVEPOLYGON.</p>
</div>
<div class="paragraph">
<p>CURVEPOLYGON subtype is POLYGON.</p>
</div>
<div class="paragraph">
<p>GEOMETRYCOLLECTION subtypes are MULTIPOINT, MULTICURVE and MULTISURFACE.</p>
</div>
<div class="paragraph">
<p>MULTICURVE subtype is MULTILINESTRING.</p>
</div>
<div class="paragraph">
<p>MULTISURFACE subtype is MULTIPOLYGON.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="tiles_factor2_example_appendix"> Annex F: Tiles Zoom Times Two Example (Informative)</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 47. Zoom Times Two Example</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">table_name</th>
<th class="tableblock halign-left valign-top">zoom_level</th>
<th class="tableblock halign-left valign-top">matrix_width</th>
<th class="tableblock halign-left valign-top">matrix_height</th>
<th class="tableblock halign-left valign-top">tile_width</th>
<th class="tableblock halign-left valign-top">tile_height</th>
<th class="tableblock halign-left valign-top">pixel_x_size</th>
<th class="tableblock halign-left valign-top">pixel_y_size</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MyTiles</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">69237.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">68412.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MyTiles</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">34618.6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">34206.0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MyTiles</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">17309.3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">17103.0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MyTiles</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8654.64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8654.64</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MyTiles</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">128</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">128</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4327.32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4275.75</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MyTiles</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">256</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">256</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2163.66</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2137.87</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MyTiles</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1081.83</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1068.93</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MyTiles</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1024</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1024</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">540.915</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">543.469</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MyTiles</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2048</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2048</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">270.457</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">267.234</p></td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="sect1">
<h2 id="metadata_example_appendix"> Annex G: Hierarchical Metadata Example (Informative)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The first example use case is from ISO19115 H.2.
Suppose we have this metadata:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TABLE</span> gpkg_metadata (
  id <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">PRIMARY</span> <span class="type">KEY</span>,
  md_scope <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">DEFAULT</span> <span class="string"><span class="delimiter">'</span><span class="content">undefined</span><span class="delimiter">'</span></span>,
  md_standard_uri <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  metadata <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>
)</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">id</th>
<th class="tableblock halign-left valign-top">md_scope</th>
<th class="tableblock halign-left valign-top">md_standard_uri</th>
<th class="tableblock halign-left valign-top">metadata</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">undefined</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">series</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">dataset</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">featureType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">feature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">attributeType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">attribute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>and this reference table definition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TABLE</span> gpkg_metadata_reference (
  reference_scope <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  table_name <span class="predefined-type">TEXT</span>,
  column_name <span class="predefined-type">TEXT</span>,
  row_id_value <span class="predefined-type">INTEGER</span>,
  <span class="predefined-type">timestamp</span> <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">DEFAULT</span> (strftime(<span class="string"><span class="delimiter">'</span><span class="content">%Y-%m-%dT%H:%M:%fZ</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">now</span><span class="delimiter">'</span></span>)),
  md_file_id <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  md_parent_id <span class="predefined-type">INTEGER</span>,
  <span class="type">CONSTRAINT</span> crmr_mfi_fk <span class="directive">FOREIGN</span> <span class="type">KEY</span> (md_file_id) <span class="keyword">REFERENCES</span> gpkg_metadata(id),
  <span class="type">CONSTRAINT</span> crmr_mpi_fk <span class="directive">FOREIGN</span> <span class="type">KEY</span> (md_parent_id) <span class="keyword">REFERENCES</span> gpkg_metadata(id)
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>H.2   1) Consider a geographic data provider generating vector mapping data for three Administrative areas(A, B and C).  &#8230; The metadata could be carried exclusively at Dataset Series level.</p>
</div>
<div class="paragraph">
<p>Then we need a record for each layer table for the three admin areas, like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">INSERT</span> <span class="class">INTO</span> gpkg_metadata_reference <span class="keyword">VALUES</span> (
<span class="string"><span class="delimiter">'</span><span class="content">table</span><span class="delimiter">'</span></span>, <span class="comment">/* reference type */</span>
<span class="string"><span class="delimiter">'</span><span class="content">roads</span><span class="delimiter">'</span></span>, <span class="comment">/* table name */</span>
<span class="string"><span class="delimiter">'</span><span class="content">undefined</span><span class="delimiter">'</span></span>, <span class="comment">/* column_name */</span>
<span class="integer">-1</span>, <span class="comment">/* row_id_value  */</span>
(<span class="predefined-type">datetime</span>(<span class="string"><span class="delimiter">'</span><span class="content">now</span><span class="delimiter">'</span></span>)),
<span class="integer">3</span>,  <span class="comment">/* md_file_id  */</span>
<span class="integer">0</span>  <span class="comment">/* md_parent_id  */</span>
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>H.2 2) After some time alternate vector mapping of Administrative area A becomes available. The metadata would then be extended for Administrative area A, to describe the new quality date values. These values would supersede those given for the Dataset series, but only for Administrative area A. The metadata for B and C would remain unchanged. This new metadata would be recorded at Dataset
level.</p>
</div>
<div class="paragraph">
<p>Then we need a record for each layer table in "A" like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">INSERT</span> <span class="class">INTO</span> gpkg_metadata_reference <span class="keyword">VALUES</span> (
<span class="string"><span class="delimiter">'</span><span class="content">table</span><span class="delimiter">'</span></span>, <span class="comment">/* reference type */</span>
<span class="string"><span class="delimiter">'</span><span class="content">roads</span><span class="delimiter">'</span></span>, <span class="comment">/* table name */</span>
<span class="string"><span class="delimiter">'</span><span class="content">undefined</span><span class="delimiter">'</span></span>, <span class="comment">/* column_name */</span>
<span class="integer">-1</span>, <span class="comment">/* row_id_value  */</span>
(<span class="predefined-type">datetime</span>(<span class="string"><span class="delimiter">'</span><span class="content">now</span><span class="delimiter">'</span></span>)),
 <span class="integer">4</span>,  <span class="comment">/* md_file_id  */</span>
<span class="integer">3</span>  <span class="comment">/* md_parent_id  */</span>
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>H.2 3) Eventually further data becomes available for Administrative area A, with a complete re-survey of the road network. Again this implies new metadata for the affected feature types. This metadata would be carried at Feature type level for Administrative area A. All other metadata relating to other feature types remains unaffected. Only the metadata for roads in Administrative area A is modified. This road metadata is recorded at Feature type level.</p>
</div>
<div class="paragraph">
<p>Then we need a record for each layer table for the roads network, like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">INSERT</span> <span class="class">INTO</span> gpkg_metadata_reference <span class="keyword">VALUES</span> (
<span class="string"><span class="delimiter">'</span><span class="content">table</span><span class="delimiter">'</span></span>, <span class="comment">/* reference type */</span>
<span class="string"><span class="delimiter">'</span><span class="content">roads</span><span class="delimiter">'</span></span>, <span class="comment">/* table name */</span>
<span class="string"><span class="delimiter">'</span><span class="content">undefined</span><span class="delimiter">'</span></span>, <span class="comment">/* column_name */</span>
<span class="integer">-1</span>, <span class="comment">/* row_id_value  */</span>
(<span class="predefined-type">datetime</span>(<span class="string"><span class="delimiter">'</span><span class="content">now</span><span class="delimiter">'</span></span>)),
<span class="integer">5</span>,  <span class="comment">/* md_file_id  */</span>
<span class="integer">4</span>  <span class="comment">/* md_parent_id  */</span>
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>H.2 4) An anomaly in the road survey is identified, in that all Overhead clearances for the Administrative area A have been surveyed to the nearest metre. These are re-surveyed to the nearest decimetre.  This re-survey implies new metadata for the affected attribute type ‘Overhead Clearance’. All other metadata for Administrative area A remains unaffected. This ‘Overhead Clearance’ metadata is recorded at Attribute Type level.</p>
</div>
<div class="paragraph">
<p>Then we need a record for each layer table in the roads network with attribute type <em>Overhead Clearance</em>, like this;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">INSERT</span> <span class="class">INTO</span> gpkg_metadata_reference <span class="keyword">VALUES</span> (
<span class="string"><span class="delimiter">'</span><span class="content">column</span><span class="delimiter">'</span></span>, <span class="comment">/* reference type */</span>
<span class="string"><span class="delimiter">'</span><span class="content">roads</span><span class="delimiter">'</span></span>, <span class="comment">/* table name */</span>
<span class="string"><span class="delimiter">'</span><span class="content">overhead_clearance</span><span class="delimiter">'</span></span>, <span class="comment">/* column_name */</span>
<span class="integer">-1</span>, <span class="comment">/* row_id_value  */</span>
(<span class="predefined-type">datetime</span>(<span class="string"><span class="delimiter">'</span><span class="content">now</span><span class="delimiter">'</span></span>)),
<span class="integer">7</span>,  <span class="comment">/* md_file_id  */</span>
<span class="integer">4</span>  <span class="comment">/* md_parent_id  */</span>
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>H.2 5) A new bridge is constructed in Administrative area A. This new data is reflected in the geographic data for Administrative area A, and new metadata is required to record this new feature. All other metadata for Administrative area A remains unaffected. This new feature metadata is recorded at Feature instance level.</p>
</div>
<div class="paragraph">
<p>Then we need a record for the bridge layer table row for the new bridge, like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">INSERT</span> <span class="class">INTO</span> gpkg_metadata_reference <span class="keyword">VALUES</span> (
<span class="string"><span class="delimiter">'</span><span class="content">row</span><span class="delimiter">'</span></span>, <span class="comment">/* reference type */</span>
<span class="string"><span class="delimiter">'</span><span class="content">bridge</span><span class="delimiter">'</span></span>, <span class="comment">/* table name */</span>
<span class="string"><span class="delimiter">'</span><span class="content">undefined</span><span class="delimiter">'</span></span>, <span class="comment">/* column_name */</span>
<span class="integer">987</span>, <span class="comment">/* row_id_value  */</span>
(<span class="predefined-type">datetime</span>(<span class="string"><span class="delimiter">'</span><span class="content">now</span><span class="delimiter">'</span></span>)),
<span class="integer">6</span>,  <span class="comment">/* md_file_id  */</span>
<span class="integer">4</span>  <span class="comment">/* md_parent_id  */</span>
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>H.2  6) The overhead clearance attribute of the new bridge was wrongly recorded, and is modified. Again this new attribute requires new metadata to describe the modification. All other metadata for Administrative area A remains unaffected. This new attribute metadata is recorded at Attribute instance level.</p>
</div>
<div class="paragraph">
<p>Then we need a record for the clearance attribute value, like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">INSERT</span> <span class="class">INTO</span> gpkg_metadata_reference <span class="keyword">VALUES</span> (
<span class="string"><span class="delimiter">'</span><span class="content">row/col</span><span class="delimiter">'</span></span>, <span class="comment">/* reference type */</span>
<span class="string"><span class="delimiter">'</span><span class="content">bridge</span><span class="delimiter">'</span></span>, <span class="comment">/* table name */</span>
<span class="string"><span class="delimiter">'</span><span class="content">overhead_clearance</span><span class="delimiter">'</span></span>, <span class="comment">/* column_name */</span>
<span class="integer">987</span>, <span class="comment">/* row_id_value  */</span>
(<span class="predefined-type">datetime</span>(<span class="string"><span class="delimiter">'</span><span class="content">now</span><span class="delimiter">'</span></span>)),
<span class="integer">8</span>,  <span class="comment">/* md_file_id  */</span>
<span class="integer">4</span>  <span class="comment">/* md_parent_id  */</span>
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The second example use case is for a field data collection session.  This use case demonstrates a mechanism to indicate which data in a GeoPackage that was originally loaded with data from one or more services has been collected or updated since the initial load, and therefore MAY need to be uploaded to update the original services (e.g. WFS, WCS, WMTS).</p>
</div>
<div class="paragraph">
<p>Suppose a user with a mobile handheld device goes out in the field and collects observations of a new "Point of Interest" (POI) feature type, and associated metadata about the field session, the new feature type, some POI instances and some of their attributes (e.g. spatial accuracy, attribute accuracy) that results in the following additional metadata:</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">id</th>
<th class="tableblock halign-left valign-top">md_scope</th>
<th class="tableblock halign-left valign-top">md_standard_uri</th>
<th class="tableblock halign-left valign-top">metadata</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">fieldSession</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://schemas.opengis.net/iso/19139/">http://schemas.opengis.net/iso/19139/</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">featureType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://schemas.opengis.net/iso/19139/">http://schemas.opengis.net/iso/19139/</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">feature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://schemas.opengis.net/iso/19139/">http://schemas.opengis.net/iso/19139/</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">attribute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://schemas.opengis.net/iso/19139/">http://schemas.opengis.net/iso/19139/</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">13</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">attribute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://schemas.opengis.net/iso/19139/">http://schemas.opengis.net/iso/19139/</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">14</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">feature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://schemas.opengis.net/iso/19139/">http://schemas.opengis.net/iso/19139/</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">attribute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://schemas.opengis.net/iso/19139/">http://schemas.opengis.net/iso/19139/</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">attribute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://schemas.opengis.net/iso/19139/">http://schemas.opengis.net/iso/19139/</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">17</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">feature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://schemas.opengis.net/iso/19139/">http://schemas.opengis.net/iso/19139/</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">18</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">attribute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://schemas.opengis.net/iso/19139/">http://schemas.opengis.net/iso/19139/</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">19</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">attribute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://schemas.opengis.net/iso/19139/">http://schemas.opengis.net/iso/19139/</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>(This example assumes that the field session data is still considered "raw" and won&#8217;t be considered a data set or part of a data series until it has been verified and cleaned, but if that is wrong then additional series and data set metadata could be added.)</p>
</div>
<div class="paragraph">
<p>Then we need a gpkg_metadata_reference record for the field session for the new POI table, whose md_parent_id is undefined:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">INSERT</span> <span class="class">INTO</span> gpkg_metadata_reference <span class="keyword">VALUES</span> (
<span class="string"><span class="delimiter">'</span><span class="content">table</span><span class="delimiter">'</span></span>, <span class="comment">/* reference type */</span>
<span class="string"><span class="delimiter">'</span><span class="content">poi</span><span class="delimiter">'</span></span>, <span class="comment">/* table name */</span>
<span class="string"><span class="delimiter">'</span><span class="content">undefined</span><span class="delimiter">'</span></span>, <span class="comment">/* column_name */</span>
<span class="integer">-1</span>, <span class="comment">/* row_id_value  */</span>
(strftime(<span class="error">‘</span>%Y-%m-%dT%H:%M:%fZ<span class="error">’</span>,<span class="error">’</span><span class="predefined">now</span><span class="error">’</span>)),
<span class="integer">1</span>,  <span class="comment">/* md_file_id  */</span>
<span class="integer">0</span>  <span class="comment">/* md_parent_id  */</span>
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then we need a gpkg_metadata_reference record for the feature type for the new POI table, whose md_parent_id is that of the field session:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">INSERT</span> <span class="class">INTO</span> gpkg_metadata_reference <span class="keyword">VALUES</span> (
<span class="string"><span class="delimiter">'</span><span class="content">table</span><span class="delimiter">'</span></span>, <span class="comment">/* reference type */</span>
<span class="string"><span class="delimiter">'</span><span class="content">poi</span><span class="delimiter">'</span></span>, <span class="comment">/* table name */</span>
<span class="string"><span class="delimiter">'</span><span class="content">undefined</span><span class="delimiter">'</span></span>, <span class="comment">/* column_name */</span>
<span class="integer">-1</span>, <span class="comment">/* row_id_value  */</span>
(strftime(<span class="error">‘</span>%Y-%m-%dT%H:%M:%fZ<span class="error">’</span>,<span class="error">’</span><span class="predefined">now</span><span class="error">’</span>)),
<span class="integer">10</span>,  <span class="comment">/* md_file_id  */</span>
<span class="integer">1</span>  <span class="comment">/* md_parent_id  */</span>
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then we need gpkg_metadata_reference records for the poi feature instance rows, whose md_parent_id is that of the field session:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">INSERT</span> <span class="class">INTO</span> gpkg_metadata_reference <span class="keyword">VALUES</span> (
<span class="string"><span class="delimiter">'</span><span class="content">row</span><span class="delimiter">'</span></span>, <span class="comment">/* reference type */</span>
<span class="string"><span class="delimiter">'</span><span class="content">poi</span><span class="delimiter">'</span></span>, <span class="comment">/* table name */</span>
<span class="string"><span class="delimiter">'</span><span class="content">undefined</span><span class="delimiter">'</span></span>, <span class="comment">/* column_name */</span>
<span class="integer">1</span>, <span class="comment">/* row_id_value  */</span>
(strftime(<span class="error">‘</span>%Y-%m-%dT%H:%M:%fZ<span class="error">’</span>,<span class="error">’</span><span class="predefined">now</span><span class="error">’</span>)),
<span class="integer">11</span>,  <span class="comment">/* md_file_id  */</span>
<span class="integer">1</span>  <span class="comment">/* md_parent_id  */</span>
)

<span class="class">INSERT</span> <span class="class">INTO</span> gpkg_metadata_reference <span class="keyword">VALUES</span> (
<span class="string"><span class="delimiter">'</span><span class="content">row</span><span class="delimiter">'</span></span>, <span class="comment">/* reference type */</span>
<span class="string"><span class="delimiter">'</span><span class="content">poi</span><span class="delimiter">'</span></span>, <span class="comment">/* table name */</span>
<span class="string"><span class="delimiter">'</span><span class="content">undefined</span><span class="delimiter">'</span></span>, <span class="comment">/* column_name */</span>
<span class="integer">2</span>, <span class="comment">/* row_id_value  */</span>
<span class="integer">14</span>,  <span class="comment">/* md_file_id  */</span>
<span class="integer">1</span>  <span class="comment">/* md_parent_id  */</span>
)

<span class="class">INSERT</span> <span class="class">INTO</span> gpkg_metadata_reference <span class="keyword">VALUES</span> (
<span class="string"><span class="delimiter">'</span><span class="content">row</span><span class="delimiter">'</span></span>, <span class="comment">/* reference type */</span>
<span class="string"><span class="delimiter">'</span><span class="content">poi</span><span class="delimiter">'</span></span>, <span class="comment">/* table name */</span>
<span class="string"><span class="delimiter">'</span><span class="content">undefined</span><span class="delimiter">'</span></span>, <span class="comment">/* column_name */</span>
<span class="integer">3</span>, <span class="comment">/* row_id_value  */</span>
(strftime(<span class="error">‘</span>%Y-%m-%dT%H:%M:%fZ<span class="error">’</span>,<span class="error">’</span><span class="predefined">now</span><span class="error">’</span>)),
<span class="integer">17</span>,  <span class="comment">/* md_file_id  */</span>
<span class="integer">1</span>  <span class="comment">/* md_parent_id  */</span>
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>And finally we need gpkg_metadata_reference records for the poi attribute instance metadata , whose md_parent_id is that of the field session:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">INSERT</span> <span class="class">INTO</span> gpkg_metadata_reference <span class="keyword">VALUES</span> (
<span class="string"><span class="delimiter">'</span><span class="content">row/col</span><span class="delimiter">'</span></span>, <span class="comment">/* reference type */</span>
<span class="string"><span class="delimiter">'</span><span class="content">poi</span><span class="delimiter">'</span></span>, <span class="comment">/* table name */</span>
<span class="string"><span class="delimiter">'</span><span class="content">point</span><span class="delimiter">'</span></span>, <span class="comment">/* column_name */</span>
<span class="integer">1</span>, <span class="comment">/* row_id_value  */</span>
(strftime(<span class="error">‘</span>%Y-%m-%dT%H:%M:%fZ<span class="error">’</span>,<span class="error">’</span><span class="predefined">now</span><span class="error">’</span>)),
<span class="integer">12</span>,  <span class="comment">/* md_file_id  */</span>
<span class="integer">1</span>  <span class="comment">/* md_parent_id  */</span>
)

<span class="class">INSERT</span> <span class="class">INTO</span> gpkg_metadata_reference <span class="keyword">VALUES</span> (
<span class="string"><span class="delimiter">'</span><span class="content">row/col</span><span class="delimiter">'</span></span>, <span class="comment">/* reference type */</span>
<span class="string"><span class="delimiter">'</span><span class="content">poi</span><span class="delimiter">'</span></span>, <span class="comment">/* table name */</span>
<span class="string"><span class="delimiter">'</span><span class="content">point</span><span class="delimiter">'</span></span>, <span class="comment">/* column_name */</span>
<span class="integer">2</span>, <span class="comment">/* row_id_value  */</span>
(strftime(<span class="error">‘</span>%Y-%m-%dT%H:%M:%fZ<span class="error">’</span>,<span class="error">’</span><span class="predefined">now</span><span class="error">’</span>)),
<span class="integer">15</span>,  <span class="comment">/* md_file_id  */</span>
<span class="integer">1</span>  <span class="comment">/* md_parent_id  */</span>
)

<span class="class">INSERT</span> <span class="class">INTO</span> gpkg_metadata_reference <span class="keyword">VALUES</span> (
<span class="string"><span class="delimiter">'</span><span class="content">row/col</span><span class="delimiter">'</span></span>, <span class="comment">/* reference type */</span>
<span class="string"><span class="delimiter">'</span><span class="content">poi</span><span class="delimiter">'</span></span>, <span class="comment">/* table name */</span>
<span class="string"><span class="delimiter">'</span><span class="content">point</span><span class="delimiter">'</span></span>, <span class="comment">/* column_name */</span>
<span class="integer">3</span>, <span class="comment">/* row_id_value  */</span>
(strftime(<span class="error">‘</span>%Y-%m-%dT%H:%M:%fZ<span class="error">’</span>,<span class="error">’</span><span class="predefined">now</span><span class="error">’</span>)),
<span class="integer">18</span>,  <span class="comment">/* md_file_id  */</span>
<span class="integer">1</span>  <span class="comment">/* md_parent_id  */</span>
)

<span class="class">INSERT</span> <span class="class">INTO</span> gpkg_metadata_reference <span class="keyword">VALUES</span> (
<span class="string"><span class="delimiter">'</span><span class="content">row/col</span><span class="delimiter">'</span></span>, <span class="comment">/* reference type */</span>
<span class="string"><span class="delimiter">'</span><span class="content">poi</span><span class="delimiter">'</span></span>, <span class="comment">/* table name */</span>
<span class="string"><span class="delimiter">'</span><span class="content">category</span><span class="delimiter">'</span></span>, <span class="comment">/* column_name */</span>
<span class="integer">1</span>, <span class="comment">/* row_id_value  */</span>
(strftime(<span class="error">‘</span>%Y-%m-%dT%H:%M:%fZ<span class="error">’</span>,<span class="error">’</span><span class="predefined">now</span><span class="error">’</span>)),
<span class="integer">13</span>,  <span class="comment">/* md_file_id  */</span>
<span class="integer">1</span>  <span class="comment">/* md_parent_id  */</span>
)

<span class="class">INSERT</span> <span class="class">INTO</span> gpkg_metadata_reference <span class="keyword">VALUES</span> (
<span class="string"><span class="delimiter">'</span><span class="content">row/col</span><span class="delimiter">'</span></span>, <span class="comment">/* reference type */</span>
<span class="string"><span class="delimiter">'</span><span class="content">poi</span><span class="delimiter">'</span></span>, <span class="comment">/* table name */</span>
<span class="string"><span class="delimiter">'</span><span class="content">category</span><span class="delimiter">'</span></span>, <span class="comment">/* column_name */</span>
<span class="integer">2</span>, <span class="comment">/* row_id_value  */</span>
(strftime(<span class="error">‘</span>%Y-%m-%dT%H:%M:%fZ<span class="error">’</span>,<span class="error">’</span><span class="predefined">now</span><span class="error">’</span>)),
<span class="integer">16</span>,  <span class="comment">/* md_file_id  */</span>
<span class="integer">1</span>  <span class="comment">/* md_parent_id  */</span>
)

<span class="class">INSERT</span> <span class="class">INTO</span> gpkg_metadata_reference <span class="keyword">VALUES</span> (
<span class="string"><span class="delimiter">'</span><span class="content">row/col</span><span class="delimiter">'</span></span>, <span class="comment">/* reference type */</span>
<span class="string"><span class="delimiter">'</span><span class="content">poi</span><span class="delimiter">'</span></span>, <span class="comment">/* table name */</span>
<span class="string"><span class="delimiter">'</span><span class="content">category</span><span class="delimiter">'</span></span>, <span class="comment">/* column_name */</span>
<span class="integer">3</span>, <span class="comment">/* row_id_value  */</span>
(strftime(<span class="error">‘</span>%Y-%m-%dT%H:%M:%fZ<span class="error">’</span>,<span class="error">’</span><span class="predefined">now</span><span class="error">’</span>)),
<span class="integer">19</span>,  <span class="comment">/* md_file_id  */</span>
<span class="integer">1</span>  <span class="comment">/* md_parent_id  */</span>
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>As long as all metadata collected in the field session either directly (as above) or indirectly (suppose there were a data set level metadata_reference record intermediary) refers to the field session metadata via md_parent_id values, then this chain of metadata references identifies the newly collected information, as Joan requested, in addition to the metadata.</p>
</div>
<div class="paragraph">
<p>So here is the data after both examples:</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 48. xml_metadata</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">id</th>
<th class="tableblock halign-left valign-top">md_scope</th>
<th class="tableblock halign-left valign-top">md_standard_uri</th>
<th class="tableblock halign-left valign-top">metadata</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">undefined</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">fieldSession</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">collectionSession</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">series</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">dataset</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">featureType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">feature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">attributeType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">attribute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">featureType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">feature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">attribute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">13</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">attribute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">14</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">feature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">attribute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">attribute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">17</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">feature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">18</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">attribute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">19</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">attribute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 49. gpkg_metadata_reference</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">reference_type</th>
<th class="tableblock halign-left valign-top">table_name</th>
<th class="tableblock halign-left valign-top">column_name</th>
<th class="tableblock halign-left valign-top">row_id_value</th>
<th class="tableblock halign-left valign-top">timestamp</th>
<th class="tableblock halign-left valign-top">md_file_id</th>
<th class="tableblock halign-left valign-top">md_parent_id</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">table</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">roads</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">undefined</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">table</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">roads</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">undefined</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">table</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">roads</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">undefined</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">column</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">roads</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">overhead_clearance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">row</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bridge</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">undefined</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">987</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">row/col</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bridge</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">overhead_clearance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">987</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">table</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">poi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">undefined</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">row</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">poi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">undefined</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">row</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">poi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">undefined</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">row</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">poi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">undefined</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">14</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">row/col</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">poi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">undefined</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">17</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">row/col</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">poi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">point</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">row/col</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">poi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">point</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">row/col</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">poi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">point</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">18</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">row/col</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">poi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">category</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">13</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">row/col</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">poi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">category</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">row/col</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">poi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">category</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">19</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="sect1">
<h2 id="raster_or_tile_metadata_example_appendix"> Annex H: Raster or Tile Metadata Example (Informative)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A number of raster image processing problems MAY require the support of more metadata that is contained in the image itself.
Applications MAY use the <code>gpkg_metadata</code> and <code>gpkg_metadata_reference</code> tables defined in clause <a href="#_metadata">Metadata</a> to store raster image metadata defined according to standard authoritative or application or vendor specific metadata models.
An example of the data items in such a model is shown in the following table.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Rational Polynomial Coefficient</p>
</li>
<li>
<p>Photometric Interpretation</p>
</li>
<li>
<p>No Data Value</p>
</li>
<li>
<p>Compression Quality Factor</p>
</li>
<li>
<p>Georectification</p>
</li>
<li>
<p>NIIRS</p>
</li>
<li>
<p>Min X</p>
</li>
<li>
<p>Min Y</p>
</li>
<li>
<p>Max X</p>
</li>
<li>
<p>Max Y</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="extension_template"> Annex I: GeoPackage Extension Template (Normative)</h2>
<div class="sectionbody">
<h3 id="_extension_title" class="float">Extension Title</h3>
<div class="paragraph">
<p>Title of the Extension</p>
</div>
<h3 id="_introduction_4" class="float">Introduction</h3>
<div class="paragraph">
<p>Description of extension</p>
</div>
<h3 id="_extension_author" class="float">Extension Author</h3>
<div class="paragraph">
<p>Author of extension, author_name.</p>
</div>
<h3 id="_extension_name_or_template" class="float">Extension Name or Template</h3>
<div class="paragraph">
<p>Name of the extension or definition of the template to create the name of extensions that should be used in gpkg_extensions</p>
</div>
<h3 id="_extension_type" class="float">Extension Type</h3>
<div class="paragraph">
<p>"Extension of Existing Requirement in Clause(s) XXX" or "New Requirement Dependent on Clause(s) YYY"</p>
</div>
<h3 id="_applicability" class="float">Applicability</h3>
<div class="paragraph">
<p>Tables and/or columns on which this extension may be applied</p>
</div>
<h3 id="_scope" class="float">Scope</h3>
<div class="paragraph">
<p>Read-write or write-only with clarification if necessary</p>
</div>
<h3 id="_requirements" class="float">Requirements</h3>
<div class="paragraph">
<p>Definition of extension and interdependencies with other extensions if any.</p>
</div>
<h4 id="_geopackage" class="float">GeoPackage</h4>
<div class="paragraph">
<p>Definition of extension data or MIME type(s)</p>
</div>
<div class="paragraph">
<p>Definition of extension tables or table templates</p>
</div>
<div class="paragraph">
<p>Definition of triggers or trigger templates</p>
</div>
<h4 id="_geopackage_sqlite_configuration" class="float">GeoPackage SQLite Configuration</h4>
<div class="paragraph">
<p>Definition of SQLite configuration settings</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting compile or runtime</th>
<th class="tableblock halign-left valign-top">Option</th>
<th class="tableblock halign-left valign-top">Shall / Not (Value)</th>
<th class="tableblock halign-left valign-top">Discussion</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<h4 id="_geopackage_sqlite_extension" class="float">GeoPackage SQLite Extension</h4>
<div class="paragraph">
<p>Definition of SQL functions</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">SQL Function</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">foo(bar, baz) : datatype</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns r when w</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="sect1">
<h2 id="registered_extensions"> Annex J: Registered Extensions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This clause specifies requirements for GeoPackage extensions.
Definitions of those extensions are in the form specified by the template in <a href="#extension_template">GeoPackage Extension Template (Normative)</a>.</p>
</div>
<div class="sect2">
<h3 id="_features_3">J.1. Features</h3>
<div class="paragraph">
<p>The extensions defined in the following sub clauses MAY be implemented in a GeoPackage that implements features per clause <a href="#features">Features</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="gpkg_geometry_types_extension">J.2. GeoPackage Geometry Types Extension</h3>
<div class="sect3">
<h4 id="_data_48">J.2.1. Data</h4>
<div class="paragraph">
<p>This extension of clause <a href="#sql_geometry_types">SQL Geometry Types</a> partially described in <a href="#extension_geometry_types">GeoPackage Geometry Types Extension Template (Normative)</a> defines additional geometry types.</p>
</div>
<div class="sect4">
<h5 id="_extension_types">J.2.1.1. Extension Types</h5>
<div id="_requirement-87" class="quoteblock">
<div class="title">Requirement 87</div>
<blockquote>
A GeoPackage MAY store feature table geometries with the extended non-linear geometry types (CircularString, CompoundCurve, CurvePolygon, MultiCurve, MultiSurface, Curve, Surface) in <a href="#geometry_types">Geometry Types (Normative)</a>.
If it does so, they SHALL be encoded in the GeoPackageBinary geometry format.
</blockquote>
</div>
</div>
<div class="sect4">
<h5 id="_extensions_types_extensions_name">J.2.1.2. Extensions Types - Extensions Name</h5>
<div id="_requirement-88" class="quoteblock">
<div class="title">Requirement 88</div>
<blockquote>
An extension name to specify a feature geometry extension type SHALL be defined for the “gpkg” author name using the “gpkg_geom_&lt;gname&gt;” template where &lt;gname&gt; is the uppercase name of the extension geometry type from <a href="#geometry_types">Geometry Types (Normative)</a> used in a GeoPackage.
</blockquote>
</div>
</div>
<div class="sect4">
<h5 id="_extensions_types_extensions_row">J.2.1.3. Extensions Types - Extensions Row</h5>
<div id="_requirement-89" class="quoteblock">
<div class="title">Requirement 89</div>
<blockquote>
A GeoPackage that contains a gpkg_geometry_columns table or updateable view with row records that specify extension geometry_type_name column values SHALL contain a gpkg_extensions table that contains row records with table_name and column_name values from the gpkg_geometry_columns row records that identify extension type uses, and extension_name column values for each of those geometry types constructed per clause 3.1.1.1.2.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="extension_geometry_types">J.3. GeoPackage Geometry Types Extension Template (Normative)</h3>
<h4 id="_extension_title_2" class="float">Extension Title</h4>
<div class="paragraph">
<p>GeoPackage Non-Linear Geometry Types</p>
</div>
<h4 id="_introduction_5" class="float">Introduction</h4>
<div class="paragraph">
<p>Clause 2.1.4 of the GeoPackage Version 1 Encoding Standard specifies support for the Geometry, Point, LineString, Polygon, MultiPoint, MultiLineString, MultiPolygon, and GeomCollection geometry types in the GeoPackageBinary geometry encoding format specified in clause 2.1.3.
This extension specifies support for the additional CircularString, CompoundCurve, CurvePolygon, MultiCurve, MultiSurface, Curve, and Surface geometry types in the GeoPackage Binary geometry encoding format using the codes listed in Annex D.</p>
</div>
<h4 id="_extension_author_2" class="float">Extension Author</h4>
<div class="paragraph">
<p>GeoPackage SWG, author_name <code>gpkg</code></p>
</div>
<h4 id="_extension_name_or_template_2" class="float">Extension Name or Template</h4>
<div class="paragraph">
<p>Extension names are constructed from the gpkg_geom_&lt;gname&gt; template where &lt;gname&gt; is the uppercase name of the extension geometry type in Annex D Table 52?</p>
</div>
<h4 id="_extension_type_2" class="float">Extension Type</h4>
<div class="paragraph">
<p>Extension of Existing Requirement in clause <a href="#sql_geometry_types">SQL Geometry Types</a></p>
</div>
<h4 id="_applicability_2" class="float">Applicability</h4>
<div class="paragraph">
<p>This extension applies to any column specified in the <code>gpkg_geometry_columns</code> table.</p>
</div>
<h4 id="_scope_2" class="float">Scope</h4>
<div class="paragraph">
<p>Read-write</p>
</div>
<h4 id="_requirements_2" class="float">Requirements</h4>
<h5 id="_geopackage_2" class="float">GeoPackage</h5>
<div class="paragraph">
<p>The GeoPackageBinary geometry encoding format specified in clause <a href="#gpb_format">Geometry Encoding</a> SHALL be used to encode non-linear geometry types using the type codes in <a href="#geometry_types">Geometry Types (Normative)</a> table <a href="#geometry_types_extension">Geometry Type Codes (Extension)</a>.</p>
</div>
<h5 id="_geopackage_sqlite_configuration_2" class="float">GeoPackage SQLite Configuration</h5>
<div class="paragraph">
<p>None</p>
</div>
<h5 id="_geopackage_sqlite_extension_2" class="float">GeoPackage SQLite Extension</h5>
<div class="paragraph">
<p>SQL functions that operate on GeoPackageBinary geometries as specified in other extensions SHALL operate correctly on the non-linear geometries specified in this extension.</p>
</div>
</div>
<div class="sect2">
<h3 id="gpkg_user_geometry_types_extension">J.4. User-Defined Geometry Types Extension</h3>
<div class="sect3">
<h4 id="_data_49">J.4.1. Data</h4>
<div class="paragraph">
<p>This extension of clauses <a href="#gpb_format">Geometry Encoding</a>, <a href="#sql_geometry_types">SQL Geometry Types</a> and <a href="#gpkg_geometry_types_extension">GeoPackage Geometry Types Extension</a> partially described in <a href="#extension_geometry_encoding">User-Defined Geometry Types Encoding Extension Template (Normative)</a> enables encoding of additional user-defined geometry types in ExtendedGeoPackageBinary format in an Extended GeoPackage.</p>
</div>
<div class="sect4">
<h5 id="_extensions_encoding">J.4.1.1. Extensions Encoding</h5>
<div id="_requirement-90" class="quoteblock">
<div class="title">Requirement 90</div>
<blockquote>
The ExtendedGeoPackageBinary format defined in <a href="#extension_geometry_encoding">User-Defined Geometry Types Encoding Extension Template (Normative)</a> SHALL be used to encode geometry types other than those specified in clauses <a href="#sql_geometry_types">SQL Geometry Types</a> and <a href="#gpkg_geometry_types_extension">GeoPackage Geometry Types Extension</a> and listed in <a href="#geometry_types">Geometry Types (Normative)</a>.
</blockquote>
</div>
</div>
<div class="sect4">
<h5 id="_extensions_encoding_extensions_name">J.4.1.2. Extensions Encoding - Extensions Name</h5>
<div id="user_defined_geometry_ext_name_req" class="quoteblock">
<div class="title">Requirement 91</div>
<blockquote>
An extension name to specify a feature geometry extension type encoded in the ExtendedGeoPackageBinary format SHALL be defined for an author name that is NOT “gpkg” using the “&lt;author_name&gt;_geom_&lt;gname&gt; template where &lt;gname&gt; is the uppercase name of an extension geometry type NOT listed in <a href="#geometry_types">Geometry Types (Normative)</a> used in a GeoPackage.
</blockquote>
</div>
</div>
<div class="sect4">
<h5 id="_extensions_encoding_extensions_row">J.4.1.3. Extensions Encoding - Extensions Row</h5>
<div id="_requirement-92" class="quoteblock">
<div class="title">Requirement 92</div>
<blockquote>
An Extended GeoPackage that contains a gpkg_geometry_columns table or updateable view with row records that specify extension geometry_type_name column values other than those specified in clauses <a href="#sql_geometry_types">SQL Geometry Types</a> and 3.1.1 and listed in <a href="#geometry_types">Geometry Types (Normative)</a> SHALL contain a gpkg_extensions table that contains row records with table_name and column_name values from the gpkg_geometry_columns row records that identify extension type uses, and extension_name column values for each of those geometry type constructed per clause 3.1.2.1.2.
</blockquote>
</div>
</div>
<div class="sect4">
<h5 id="_geometry_columns_geometry_type_name">J.4.1.4. Geometry Columns Geometry Type Name</h5>
<div id="_requirement-93" class="quoteblock">
<div class="title">Requirement 93</div>
<blockquote>
The <code>geometry_type_name</code> value in a <code>gpkg_geometry_columns</code> row SHALL be the <a href="#user_defined_geometry_ext_name_req">Requirement 91</a> extension name in uppercase.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="extension_geometry_encoding">J.5. User-Defined Geometry Types Encoding Extension Template (Normative)</h3>
<h4 id="_extension_title_3" class="float">Extension Title</h4>
<div class="paragraph">
<p>User Defined Geometry Types Extension of GeoPackageBinary Geometry Encoding</p>
</div>
<h4 id="_introduction_6" class="float">Introduction</h4>
<div class="paragraph">
<p>This extension specifies a standard way to implement user defined extensions of the GeoPackageBinary geometry encoding format to encode geometry types not specified in clauses <a href="#sql_geometry_types">SQL Geometry Types</a> and 3.1.1 and listed in <a href="#geometry_types">Geometry Types (Normative)</a>.
It is intended to be a bridge to enable use of geometry types like EllipiticalCurve in Extended GeoPackages until standard encodings of such types are developed and published for the Well Known Binary (WKB) format.</p>
</div>
<h4 id="_extension_author_3" class="float">Extension Author</h4>
<div class="paragraph">
<p>Name of implementer, author_name NOT <code>gpkg</code>.</p>
</div>
<h4 id="_extension_name_or_template_3" class="float">Extension Name or Template</h4>
<div class="paragraph">
<p>Extension names are constructed from the &lt;author_name&gt;_geom_&lt;gname&gt; template where &lt;gname&gt; is the uppercase name of an extension geometry type NOT in <a href="#geometry_types">Geometry Types (Normative)</a>.</p>
</div>
<h4 id="_extension_type_3" class="float">Extension Type</h4>
<div class="paragraph">
<p>Extension of Existing Requirement in clauses <a href="#gpb_format">Geometry Encoding</a>, <a href="#sql_geometry_types">SQL Geometry Types</a> and 3.1.1.</p>
</div>
<h4 id="_applicability_3" class="float">Applicability</h4>
<div class="paragraph">
<p>This extension applies to any column specified in the gpkg_geometry_columns table.</p>
</div>
<h4 id="_scope_3" class="float">Scope</h4>
<div class="paragraph">
<p>Read-write</p>
</div>
<h4 id="_requirements_3" class="float">Requirements</h4>
<div class="paragraph">
<p>This extension specifies use of an ExtendedGeoPackageBinary encoding format for geometry types not listed in <a href="#geometry_types">Geometry Types (Normative)</a>, and use of the extension name in uppercase for the <code>geometry_type_name</code> column value in the <code>gpkg_geometry_columns</code> table.</p>
</div>
<h5 id="_geopackage_3" class="float">GeoPackage</h5>
<div class="paragraph">
<p>One of the reserved bits in the GeoPackageBinary header is used to indicate the presence of the ExtendedGeopackageBinary encoding format.
In the extension case a four byte sequence follows the GPB header to disambiguate various extensions.
This extension_code SHOULD identify the implementer of the extension and/or the particular geometry type extension, and SHOULD be unique.
The actual extension geometry body is not specified, but SHALL be described in the extension document.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>ExtendedGeoPackageBinary {
  GeoPackageBinaryHeader header; <i class="conum" data-value="1"></i><b>(1)</b>
  byte[4] extension_code;        <i class="conum" data-value="2"></i><b>(2)</b>
  byte[] extension_specific;     <i class="conum" data-value="3"></i><b>(3)</b>
}</pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The X bit in the header flags field must be set to 1.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>To indicate different extensions or vendors. 0x47504B47 (GPKG in ASCII) is reserved.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Extension specific contents</td>
</tr>
</table>
</div>
<h5 id="_geopackage_sqlite_configuration_3" class="float">GeoPackage SQLite Configuration</h5>
<div class="paragraph">
<p>None</p>
</div>
<h5 id="_geopackage_sqlite_extension_3" class="float">GeoPackage SQLite Extension</h5>
<div class="paragraph">
<p>SQL functions that operate on GeoPackageBinary geometries as specified in other extensions SHALL operate correctly on user-defined geometry types encoded in the ExtendedGeopackageBinary format as specified in this extension.</p>
</div>
</div>
<div class="sect2">
<h3 id="_rtree_spatial_indexes">J.6. RTree Spatial Indexes</h3>
<div class="sect3">
<h4 id="_data_50">J.6.1. Data</h4>
<div class="paragraph">
<p>This extension described in <a href="#extension_rtree">RTree Spatial Index Extension (Normative)</a> adds a new capability for spatially indexing columns with geometries encoded per clause <a href="#gpb_format">Geometry Encoding</a> and <a href="#gpkg_user_geometry_types_extension">User-Defined Geometry Types Extension</a>.</p>
</div>
<div class="sect4">
<h5 id="_spatial_indexes_implementation">J.6.1.1. Spatial Indexes Implementation</h5>
<div class="paragraph">
<p>Spatial indexes provide a significant performance advantage for searches with basic envelope spatial criteria that return subsets of the rows in a feature table with a non-trivial number (thousands or more) of rows.<span class="footnote">[<a id="_footnoteref_37" class="footnote" href="#_footnote_37" title="View footnote.">37</a>]</span></p>
</div>
<div id="_requirement-94" class="quoteblock">
<div class="title">Requirement 94</div>
<blockquote>
A GeoPackage SHALL implement spatial indexes on feature table geometry columns as specified in clause 3.1.3.1.1 using the SQLite Virtual Table RTrees and triggers specified in <a href="#extension_rtree">RTree Spatial Index Extension (Normative)</a>.
</blockquote>
</div>
</div>
<div class="sect4">
<h5 id="_spatial_indexes_extensions_name">J.6.1.2. Spatial Indexes - Extensions Name</h5>
<div id="_requirement-95" class="quoteblock">
<div class="title">Requirement 95</div>
<blockquote>
The “gpkg_rtree_index” extension name SHALL be used as a gpkg_extensions table extension name column value to specify implementation of spatial indexes on a geometry column.
</blockquote>
</div>
</div>
<div class="sect4">
<h5 id="_spatial_indexes_extensions_row">J.6.1.3. Spatial Indexes - Extensions Row</h5>
<div id="_requirement-96" class="quoteblock">
<div class="title">Requirement 96</div>
<blockquote>
A GeoPackage that implements spatial indexes SHALL have a gpkg_extensions table that contains a row for each spatially indexed column with extension_name “gpkg_rtree_index”, the table_name of the table with a spatially indexed column, and the column_name of the spatially indexed column.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="extension_rtree">J.7. RTree Spatial Index Extension (Normative)</h3>
<h4 id="_extension_title_4" class="float">Extension Title</h4>
<div class="paragraph">
<p>Rtree Spatial Indexes</p>
</div>
<h4 id="_introduction_7" class="float">Introduction</h4>
<div class="paragraph">
<p>The rtree index extension provides a means to encode an rtree index for geometry values in a GeoPackage. An RTree index provides a significant performance advantage for searches with basic envelope spatial criteria that return subsets of the rows in a feature table with a non-trivial number (thousands or more) of rows.</p>
</div>
<h4 id="_extension_author_4" class="float">Extension Author</h4>
<div class="paragraph">
<p>GeoPackage SWG, author_name <code>gpkg</code>.</p>
</div>
<h4 id="_extension_name_or_template_4" class="float">Extension Name or Template</h4>
<div class="paragraph">
<p><code>gpkg_rtree_index</code></p>
</div>
<h4 id="_extension_type_4" class="float">Extension Type</h4>
<div class="paragraph">
<p>New Requirement dependent on clauses <a href="#gpb_format">Geometry Encoding</a> and 3.1.2.</p>
</div>
<h4 id="_applicability_4" class="float">Applicability</h4>
<div class="paragraph">
<p>This extension applies to any column specified in the <code>gpkg_geometry_columns</code> table.</p>
</div>
<h4 id="_scope_4" class="float">Scope</h4>
<div class="paragraph">
<p>Write-only, because it does not change the result of reads, although it may improve their performance.</p>
</div>
<h4 id="_requirements_4" class="float">Requirements</h4>
<div class="paragraph">
<p>This extension uses the rtree implementation provided by the SQLite R*Tree Module extension documented at <a href="http://www.sqlite.org/rtree.html">http://www.sqlite.org/rtree.html</a>.</p>
</div>
<h5 id="_geopackage_4" class="float">GeoPackage</h5>
<div class="paragraph">
<p>The tables below contain SQL templates with variables.
Replace the following template variables with the specified values to create the required SQL statements:<br>
&lt;t&gt;: The name of the feature table containing the geometry column<br>
&lt;c&gt;: The name of the geometry column in &lt;t&gt; that is being indexed<br>
&lt;i&gt;: The name of the integer primary key column in &lt;t&gt; as specified in <a href="#requirement_feature_integer_pk">Requirement 29</a></p>
</div>
<h6 id="_create_virtual_table" class="float">Create Virtual Table</h6>
<div class="paragraph">
<p>RTree spatial indexes on geometry columns SHALL be created using the SQLite Virtual Table RTree extension.
An application that creates a spatial index SHALL create it using the following SQL statement template:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> VIRTUAL <span class="type">TABLE</span> rtree_&lt;t&gt;_&lt;c&gt; <span class="keyword">USING</span> rtree(id, minx, maxx, miny, maxy)</code></pre>
</div>
</div>
<div class="paragraph">
<p>where &lt;t&gt; and &lt;c&gt; are replaced with the names of the feature table and geometry column being indexed.
The rtree function id parameter becomes the virtual table 64-bit signed integer primary key id column, and the min/max x/y parameters are min- and max-value pairs (stored as 32-bit floating point numbers) for each dimension that become the virtual table data columns that are populated to create the spatial rtree index.</p>
</div>
<h6 id="_load_spatial_index_values" class="float">Load Spatial Index Values</h6>
<div class="paragraph">
<p>The indexes provided by the SQLite Virtual Table RTree extension are not automatic indices.
This means the index data structure needs to be manually populated, updated and queried.
Each newly created spatial index SHALL be populated using the following SQL statement</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">INSERT</span> <span class="keyword">OR</span> <span class="class">REPLACE</span> <span class="class">INTO</span> rtree_&lt;t&gt;_&lt;c&gt;
  <span class="class">SELECT</span> &lt;i&gt;, st_minx(&lt;c&gt;), st_maxx(&lt;c&gt;), st_miny(&lt;c&gt;), st_maxy(&lt;c&gt;) <span class="keyword">FROM</span> &lt;t&gt;;</code></pre>
</div>
</div>
<div class="paragraph">
<p>where &lt;t&gt; and &lt;c&gt; are replaced with the names of the feature table and geometry column being indexed and &lt;i&gt; is replaced with the name of the feature table integer primary key column.</p>
</div>
<h6 id="_define_triggers_to_maintain_spatial_index_values" class="float">Define Triggers to Maintain Spatial Index Values</h6>
<div class="paragraph">
<p>For each spatial index in a GeoPackage, corresponding insert, update and delete triggers that update the spatial index SHALL be present on the indexed geometry column.
These spatial index triggers SHALL be defined as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="comment">/* Conditions: Insertion of non-empty geometry
   Actions   : Insert record into rtree */</span>
<span class="class">CREATE</span> <span class="type">TRIGGER</span> rtree_&lt;t&gt;_&lt;c&gt;_insert <span class="directive">AFTER</span> <span class="class">INSERT</span> <span class="keyword">ON</span> &lt;t&gt;
  <span class="keyword">WHEN</span> (new.&lt;c&gt; <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="keyword">AND</span> <span class="keyword">NOT</span> ST_IsEmpty(NEW.&lt;c&gt;))
<span class="class">BEGIN</span>
  <span class="class">INSERT</span> <span class="keyword">OR</span> <span class="class">REPLACE</span> <span class="class">INTO</span> rtree_&lt;t&gt;_&lt;c&gt; <span class="keyword">VALUES</span> (
    NEW.&lt;i&gt;,
    ST_MinX(NEW.&lt;c&gt;), ST_MaxX(NEW.&lt;c&gt;),
    ST_MinY(NEW.&lt;c&gt;), ST_MaxY(NEW.&lt;c&gt;)
  );
<span class="keyword">END</span>;

<span class="comment">/* Conditions: Update of geometry column to non-empty geometry
               No row ID change
   Actions   : Update record in rtree */</span>
<span class="class">CREATE</span> <span class="type">TRIGGER</span> rtree_&lt;t&gt;_&lt;c&gt;_update1 <span class="directive">AFTER</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> &lt;c&gt; <span class="keyword">ON</span> &lt;t&gt;
  <span class="keyword">WHEN</span> OLD.&lt;i&gt; = NEW.&lt;i&gt; <span class="keyword">AND</span>
       (NEW.&lt;c&gt; NOTNULL <span class="keyword">AND</span> <span class="keyword">NOT</span> ST_IsEmpty(NEW.&lt;c&gt;))
<span class="class">BEGIN</span>
  <span class="class">INSERT</span> <span class="keyword">OR</span> <span class="class">REPLACE</span> <span class="class">INTO</span> rtree_&lt;t&gt;_&lt;c&gt; <span class="keyword">VALUES</span> (
    NEW.&lt;i&gt;,
    ST_MinX(NEW.&lt;c&gt;), ST_MaxX(NEW.&lt;c&gt;),
    ST_MinY(NEW.&lt;c&gt;), ST_MaxY(NEW.&lt;c&gt;)
  );
<span class="keyword">END</span>;

<span class="comment">/* Conditions: Update of geometry column to empty geometry
               No row ID change
   Actions   : Remove record from rtree */</span>
<span class="class">CREATE</span> <span class="type">TRIGGER</span> rtree_&lt;t&gt;_&lt;c&gt;_update2 <span class="directive">AFTER</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> &lt;c&gt; <span class="keyword">ON</span> &lt;t&gt;
  <span class="keyword">WHEN</span> OLD.&lt;i&gt; = NEW.&lt;i&gt; <span class="keyword">AND</span>
       (NEW.&lt;c&gt; ISNULL <span class="keyword">OR</span> ST_IsEmpty(NEW.&lt;c&gt;))
<span class="class">BEGIN</span>
  <span class="class">DELETE</span> <span class="keyword">FROM</span> rtree_&lt;t&gt;_&lt;c&gt; <span class="keyword">WHERE</span> id = OLD.&lt;i&gt;;
<span class="keyword">END</span>;

<span class="comment">/* Conditions: Update of any column
               Row ID change
               Non-empty geometry
   Actions   : Remove record from rtree for old &lt;i&gt;
               Insert record into rtree for new &lt;i&gt; */</span>
<span class="class">CREATE</span> <span class="type">TRIGGER</span> rtree_&lt;t&gt;_&lt;c&gt;_update3 <span class="directive">AFTER</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> &lt;c&gt; <span class="keyword">ON</span> &lt;t&gt;
  <span class="keyword">WHEN</span> OLD.&lt;i&gt; != NEW.&lt;i&gt; <span class="keyword">AND</span>
       (NEW.&lt;c&gt; NOTNULL <span class="keyword">AND</span> <span class="keyword">NOT</span> ST_IsEmpty(NEW.&lt;c&gt;))
<span class="class">BEGIN</span>
  <span class="class">DELETE</span> <span class="keyword">FROM</span> rtree_&lt;t&gt;_&lt;c&gt; <span class="keyword">WHERE</span> id = OLD.&lt;i&gt;;
  <span class="class">INSERT</span> <span class="keyword">OR</span> <span class="class">REPLACE</span> <span class="class">INTO</span> rtree_&lt;t&gt;_&lt;c&gt; <span class="keyword">VALUES</span> (
    NEW.&lt;i&gt;,
    ST_MinX(NEW.&lt;c&gt;), ST_MaxX(NEW.&lt;c&gt;),
    ST_MinY(NEW.&lt;c&gt;), ST_MaxY(NEW.&lt;c&gt;)
  );
<span class="keyword">END</span>;

<span class="comment">/* Conditions: Update of any column
               Row ID change
               Empty geometry
   Actions   : Remove record from rtree for old and new &lt;i&gt; */</span>
<span class="class">CREATE</span> <span class="type">TRIGGER</span> rtree_&lt;t&gt;_&lt;c&gt;_update4 <span class="directive">AFTER</span> <span class="class">UPDATE</span> <span class="keyword">ON</span> &lt;t&gt;
  <span class="keyword">WHEN</span> OLD.&lt;i&gt; != NEW.&lt;i&gt; <span class="keyword">AND</span>
       (NEW.&lt;c&gt; ISNULL <span class="keyword">OR</span> ST_IsEmpty(NEW.&lt;c&gt;))
<span class="class">BEGIN</span>
  <span class="class">DELETE</span> <span class="keyword">FROM</span> rtree_&lt;t&gt;_&lt;c&gt; <span class="keyword">WHERE</span> id <span class="keyword">IN</span> (OLD.&lt;i&gt;, NEW.&lt;i&gt;);
<span class="keyword">END</span>;

<span class="comment">/* Conditions: Row deleted
   Actions   : Remove record from rtree for old &lt;i&gt; */</span>
<span class="class">CREATE</span> <span class="type">TRIGGER</span> rtree_&lt;t&gt;_&lt;c&gt;_delete <span class="directive">AFTER</span> <span class="class">DELETE</span> <span class="keyword">ON</span> &lt;t&gt;
  <span class="keyword">WHEN</span> old.&lt;c&gt; <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>
<span class="class">BEGIN</span>
  <span class="class">DELETE</span> <span class="keyword">FROM</span> rtree_&lt;t&gt;_&lt;c&gt; <span class="keyword">WHERE</span> id = OLD.&lt;i&gt;;
<span class="keyword">END</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>where &lt;t&gt; and &lt;c&gt; are replaced with the names of the feature table and geometry column being indexed and &lt;i&gt; is replaced with the name of the feature table integer primary key column.</p>
</div>
<h5 id="_geopackage_sqlite_configuration_4" class="float">GeoPackage SQLite Configuration</h5>
<div class="paragraph">
<p>Definition of SQLite configuration settings</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting compile or runtime</th>
<th class="tableblock halign-left valign-top">Option</th>
<th class="tableblock halign-left valign-top">Shall / Not (Value)</th>
<th class="tableblock halign-left valign-top">Discussion</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">compile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQLITE_ENABLE_RTREE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Shall</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RTrees ares used for GeoPackage Spatial Indexes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">compile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQLITE_RTREE_INT_ONLY</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RTrees with floating point values are used for GeoPackage spatial indexes</p></td>
</tr>
</tbody>
</table>

<h5 id="_geopackage_sqlite_extension_4" class="float">GeoPackage SQLite Extension</h5>
<div class="paragraph">
<p>Definition of SQL functions</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">SQL Function</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST_IsEmpty(geom Geometry): integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns 1 if geometry value is empty, 0 if not empty, NULL if geometry value is NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test if a geometry value corresponds to the empty set</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST_MinX(geom Geometry): real</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the minimum X value of the bounding envelope of a geometry</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update the spatial index on a geometry column in a feature table</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST_MaxX(geom Geometry): real</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the maximum Y value of the bounding envelope of a geometry</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update the spatial index on a geometry column in a feature table</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST_MinY(geom Geometry): real</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the minimum X value of the bounding envelope of a geometry</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update the spatial index on a geometry column in a feature table</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST_MaxY(geom Geometry): real</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the maximum Y value of the bounding envelope of a geometry</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update the spatial index on a geometry column in a feature table</p></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>The SQL functions on geometries in this SQLite Extension SHALL operate correctly on extended geometry types specified by <a href="#extension_geometry_encoding">User-Defined Geometry Types Encoding Extension Template (Normative)</a> and/or <a href="#extension_geometry_types">GeoPackage Geometry Types Extension Template (Normative)</a> when those extensions are also implemented.</p>
</div>
</div>
<div class="sect2">
<h3 id="_geometry_type_triggers_2">J.8. Geometry Type Triggers</h3>
<div class="sect3">
<h4 id="_data_51">J.8.1. Data</h4>
<div class="paragraph">
<p>This extension described in <a href="#extension_geometry_type_triggers">Geometry Type Triggers Extension (Normative)</a> adds a new geometry type triggers capability for columns with geometries encoded per clause <a href="#gpb_format">Geometry Encoding</a> and <a href="#gpkg_user_geometry_types_extension">User-Defined Geometry Types Extension</a>.</p>
</div>
<div class="sect4">
<h5 id="_geometry_type_triggers_implementation">J.8.1.1. Geometry Type Triggers – Implementation</h5>
<div id="_requirement-97" class="quoteblock">
<div class="title">Requirement 97</div>
<blockquote>
A GeoPackage SHALL include the SQL insert and update triggers specified in <a href="#extension_geometry_type_triggers">Geometry Type Triggers Extension (Normative)</a> on every geometry column to enforce the geometry type values specified for those columns in the gpkg_geometry_columns table.
</blockquote>
</div>
</div>
<div class="sect4">
<h5 id="_geometry_type_triggers_extensions_name">J.8.1.2. Geometry Type Triggers – Extensions Name</h5>
<div id="_requirement-98" class="quoteblock">
<div class="title">Requirement 98</div>
<blockquote>
The “gpkg_geometry_type_trigger” extension name SHALL be used as a gpkg_extensions table extension name column value to specify implementation of geometry type triggers.
</blockquote>
</div>
</div>
<div class="sect4">
<h5 id="_geometry_type_triggers_extensions_row">J.8.1.3. Geometry Type Triggers – Extensions Row</h5>
<div id="_requirement-99" class="quoteblock">
<div class="title">Requirement 99</div>
<blockquote>
A GeoPackage that implements geometry type triggers on geometry columns SHALL contain a gpkg_extensions table that contains a row for each such geometry column with extension_name “gpkg_geometry_type_trigger”, table_name of the feature table with a geometry column, and column_name of the geometry column.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="extension_geometry_type_triggers">J.9. Geometry Type Triggers Extension (Normative)</h3>
<h4 id="_extension_title_5" class="float">Extension Title</h4>
<div class="paragraph">
<p>Geometry Type Triggers</p>
</div>
<h4 id="_introduction_8" class="float">Introduction</h4>
<div class="paragraph">
<p>Geometry type triggers prevent the storage of geometries of types that are not assignable from the geometry types specified in the gpkg_geometry_columns table in the geometry columns of the specified tables.</p>
</div>
<h4 id="_extension_author_5" class="float">Extension Author</h4>
<div class="paragraph">
<p>GeoPackage SWG, author_name <code>gpkg</code>.</p>
</div>
<h4 id="_extension_name_or_template_5" class="float">Extension Name or Template</h4>
<div class="paragraph">
<p><code>gpkg_geometry_type_trigger</code></p>
</div>
<h4 id="_extension_type_5" class="float">Extension Type</h4>
<div class="paragraph">
<p>New Requirement dependent on clauses <a href="#gpb_format">Geometry Encoding</a> and 3.1.2.</p>
</div>
<h4 id="_applicability_5" class="float">Applicability</h4>
<div class="paragraph">
<p>This extension applies to any column specified in the gpkg_geometry_columns table.</p>
</div>
<h4 id="_scope_5" class="float">Scope</h4>
<div class="paragraph">
<p>Write-only</p>
</div>
<h4 id="_requirements_5" class="float">Requirements</h4>
<div class="paragraph">
<p>The &lt;t&gt; and &lt;c&gt; template parameters in the geometry type trigger definition SQL template in the table below are to be replaced with the names of the feature table and geometry column being inserted or updated.</p>
</div>
<h5 id="_geopackage_5" class="float">GeoPackage</h5>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TRIGGER</span> fgti_&lt;t&gt;_&lt;c&gt; <span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">&lt;t&gt;</span><span class="delimiter">'</span></span> <span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span>
<span class="class">BEGIN</span>
  <span class="class">SELECT</span> RAISE (ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on &lt;t&gt; violates constraint: ST_GeometryType(&lt;c&gt;) is not assignable from gpkg_geometry_columns.geometry_type_name value</span><span class="delimiter">'</span></span>)
  <span class="keyword">WHERE</span> (<span class="class">SELECT</span> geometry_type_name <span class="keyword">FROM</span> gpkg_geometry_columns
         <span class="keyword">WHERE</span> Lower(table_name) = Lower(<span class="string"><span class="delimiter">'</span><span class="content">&lt;t&gt;</span><span class="delimiter">'</span></span>)
                 <span class="keyword">AND</span> Lower(column_name) = Lower(<span class="string"><span class="delimiter">'</span><span class="content">&lt;c&gt;</span><span class="delimiter">'</span></span>)
                 <span class="keyword">AND</span> gpkg_IsAssignable(geometry_type_name, ST_GeometryType(NEW.&lt;c&gt;)) = <span class="integer">0</span>);
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> fgtu_&lt;t&gt;_&lt;c&gt; <span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> <span class="string"><span class="delimiter">'</span><span class="content">&lt;c&gt;</span><span class="delimiter">'</span></span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">&lt;t&gt;</span><span class="delimiter">'</span></span> <span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span>
<span class="class">BEGIN</span>
  <span class="class">SELECT</span> RAISE (ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update of &lt;c&gt; on &lt;t&gt; violates constraint: ST_GeometryType(&lt;c&gt;) is not assignable from gpkg_geometry_columns.geometry_type_name value</span><span class="delimiter">'</span></span>)
  <span class="keyword">WHERE</span> (<span class="class">SELECT</span> geometry_type_name <span class="keyword">FROM</span> gpkg_geometry_columns
         <span class="keyword">WHERE</span> Lower(table_name) = Lower(<span class="string"><span class="delimiter">'</span><span class="content">&lt;t&gt;</span><span class="delimiter">'</span></span>)
                 <span class="keyword">AND</span> Lower(column_name) = Lower(<span class="string"><span class="delimiter">'</span><span class="content">&lt;c&gt;</span><span class="delimiter">'</span></span>)
                 <span class="keyword">AND</span> gpkg_IsAssignable(geometry_type_name, ST_GeometryType(NEW.&lt;c&gt;)) = <span class="integer">0</span>);
<span class="keyword">END</span></code></pre>
</div>
</div>
<h5 id="_geopackage_sqlite_configuration_5" class="float">GeoPackage SQLite Configuration</h5>
<div class="paragraph">
<p>None</p>
</div>
<h5 id="_geopackage_sqlite_extension_5" class="float">GeoPackage SQLite Extension</h5>
<div class="paragraph">
<p>Definition of SQL functions</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">SQL Function</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST_GeometryType(geom. Geometry) : TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the WKB geometry type name of a Geometry</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the geometry type matches what’s specified in gpkg_geometry_columns.geometry_type_name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GPKG_IsAssignable(expected_type_name TEXT, actual_type_name TEXT): INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns 1 if a value of type expected_type_name is the same or a super type of type actual_type_name. Returns 0 otherwise.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Determine if the expected geometry type is the same as or a super type of the actual geometry type.</p></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>The SQL functions on geometries in this SQLite Extension SHALL operate correctly on extended geometry types specified by <a href="#extension_geometry_encoding">User-Defined Geometry Types Encoding Extension Template (Normative)</a> and/or <a href="#extension_geometry_types">GeoPackage Geometry Types Extension Template (Normative)</a> when those extensions are also implemented.</p>
</div>
</div>
<div class="sect2">
<h3 id="_srs_id_triggers_2">J.10. SRS_ID Triggers</h3>
<div class="sect3">
<h4 id="_data_52">J.10.1. Data</h4>
<div class="paragraph">
<p>This extension described in <a href="#extension_geometry_srsid_triggers">Geometry SRS ID Triggers Extension (Normative)</a> adds a new srs_id triggers capability for columns with geometries encoded per clause <a href="#gpb_format">Geometry Encoding</a> and <a href="#gpkg_user_geometry_types_extension">User-Defined Geometry Types Extension</a>.</p>
</div>
<div class="sect4">
<h5 id="_srs_id_triggers_implementation">J.10.1.1. SRS_ID Triggers – Implementation</h5>
<div id="_requirement-100" class="quoteblock">
<div class="title">Requirement 100</div>
<blockquote>
A GeoPackage SHALL include the SQL insert and update triggers specified in <a href="#extension_geometry_srsid_triggers">Geometry SRS ID Triggers Extension (Normative)</a> on every geometry column to enforce the srs_id values specified for those columns in the <code>gpkg_geometry_columns</code> table.
</blockquote>
</div>
</div>
<div class="sect4">
<h5 id="_srs_id_triggers_extensions_name">J.10.1.2. SRS_ID Triggers – Extensions Name</h5>
<div id="_requirement-101" class="quoteblock">
<div class="title">Requirement 101</div>
<blockquote>
The “gpkg_srs_id_trigger” extension name SHALL be used as a gpkg_extensions table extension name column value to specify implementation of SRS_ID triggers specified in <a href="#extension_geometry_srsid_triggers">Geometry SRS ID Triggers Extension (Normative)</a>.
</blockquote>
</div>
</div>
<div class="sect4">
<h5 id="_srs_id_triggers_extensions_row">J.10.1.3. SRS_ID Triggers – Extensions Row</h5>
<div id="_requirement-102" class="quoteblock">
<div class="title">Requirement 102</div>
<blockquote>
A GeoPackage that implements srs_id triggers on feature table geometry columns SHALL contain a gpkg_extensions table that contains a row for each geometry column with extension_name “gpkg_srs_id_trigger”, table_name of the feature table with a geometry column, and column_name of the geometry column.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="extension_geometry_srsid_triggers">J.11. Geometry SRS ID Triggers Extension (Normative)</h3>
<h4 id="_extension_title_6" class="float">Extension Title</h4>
<div class="paragraph">
<p>Geometry SRS_ID Triggers</p>
</div>
<h4 id="_introduction_9" class="float">Introduction</h4>
<div class="paragraph">
<p>Geometry SRS_ID triggers prevent the storage of geometries with spatial reference system identifiers that are not specified in the <code>gpkg_geometry_columns</code> table in the geometry columns of the specified tables.</p>
</div>
<h4 id="_extension_author_6" class="float">Extension Author</h4>
<div class="paragraph">
<p>GeoPackage SWG, author_name <code>gpkg</code>.</p>
</div>
<h4 id="_extension_name_or_template_6" class="float">Extension Name or Template</h4>
<div class="paragraph">
<p><code>gpkg_srs_id_trigger</code></p>
</div>
<h4 id="_extension_type_6" class="float">Extension Type</h4>
<div class="paragraph">
<p>New Requirement dependent on clauses <a href="#gpb_format">Geometry Encoding</a> and 3.1.2.</p>
</div>
<h4 id="_applicability_6" class="float">Applicability</h4>
<div class="paragraph">
<p>This extension applies to any column specified in the gpkg_geometry_columns table.</p>
</div>
<h4 id="_scope_6" class="float">Scope</h4>
<div class="paragraph">
<p>Write-only</p>
</div>
<h4 id="_requirements_6" class="float">Requirements</h4>
<div class="paragraph">
<p>The &lt;t&gt; and &lt;c&gt; template parameters in the SRS_ID trigger definition SQL template in the table below are to be replaced with the names of the feature table and geometry column being inserted or updated</p>
</div>
<h5 id="_geopackage_6" class="float">GeoPackage</h5>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TRIGGER</span> fgsi_&lt;t&gt; _&lt;c&gt; <span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">&lt;t&gt;</span><span class="delimiter">'</span></span> <span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span>
<span class="class">BEGIN</span>
  <span class="class">SELECT</span> RAISE (ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on &lt;t&gt;violates constraint: ST_SRID(&lt;c&gt;) does not match gpkg_geometry_columns.srs_id value</span><span class="delimiter">'</span></span>)
  <span class="keyword">WHERE</span> (<span class="class">SELECT</span> srs_id <span class="keyword">FROM</span> gpkg_geometry_columns
         <span class="keyword">WHERE</span> Lower(table_name) = Lower(<span class="string"><span class="delimiter">'</span><span class="content">&lt;t&gt;</span><span class="delimiter">'</span></span>)
               <span class="keyword">AND</span>   Lower(column_name) = Lower(<span class="string"><span class="delimiter">'</span><span class="content">&lt;c&gt;</span><span class="delimiter">'</span></span>)
               <span class="keyword">AND</span>   ST_SRID(NEW.<span class="string"><span class="delimiter">'</span><span class="content">&lt;c&gt;</span><span class="delimiter">'</span></span>) &lt;&gt; srs_id) ;
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> fgsu_&lt;t&gt;_&lt;c&gt; <span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> <span class="string"><span class="delimiter">'</span><span class="content">&lt;c&gt;</span><span class="delimiter">'</span></span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">&lt;t&gt;</span><span class="delimiter">'</span></span> <span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span>
<span class="class">BEGIN</span>
  <span class="class">SELECT</span> RAISE (ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update of &lt;c&gt; on &lt;t&gt; violates constraint: ST_SRID(&lt;c&gt;) does not match gpkg_geometry_columns.srs_id value</span><span class="delimiter">'</span></span>)
  <span class="keyword">WHERE</span> (<span class="class">SELECT</span> srs_id <span class="keyword">FROM</span> gpkg_geometry_columns
         <span class="keyword">WHERE</span> Lower(table_name) = Lower(<span class="string"><span class="delimiter">'</span><span class="content">&lt;t&gt;</span><span class="delimiter">'</span></span>)
               <span class="keyword">AND</span>   Lower(column_name) = Lower(<span class="string"><span class="delimiter">'</span><span class="content">&lt;c&gt;</span><span class="delimiter">'</span></span>)
               <span class="keyword">AND</span>   ST_SRID(NEW.<span class="string"><span class="delimiter">'</span><span class="content">&lt;c&gt;</span><span class="delimiter">'</span></span>) &lt;&gt; srs_id);
<span class="keyword">END</span></code></pre>
</div>
</div>
<h5 id="_geopackage_sqlite_configuration_6" class="float">GeoPackage SQLite Configuration</h5>
<div class="paragraph">
<p>None</p>
</div>
<h5 id="_geopackage_sqlite_extension_6" class="float">GeoPackage SQLite Extension</h5>
<div class="paragraph">
<p>Definition of SQL functions</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">SQL Function</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST_SRID(geom. Geometry) : INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the spatial reference system id of a Geometry</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that geometry srid matches what&#8217;s specified in <code>gpkg_geometry_columns.srid</code></p></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>The SQL function on geometries in this SQLite Extension SHALL operate correctly on extended geometry types specified by Annex J and/or Annex K when those extensions are also implemented.</p>
</div>
</div>
<div class="sect2">
<h3 id="_tiles_3">J.12. Tiles</h3>
<div class="paragraph">
<p>The extensions defined in the following sub clauses MAY be implemented in a GeoPackage that implements tiles per clause <a href="#tiles">Tiles</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_zoom_levels_3">J.13. Zoom Levels</h3>
<div class="sect3">
<h4 id="_data_53">J.13.1. Data</h4>
<div class="paragraph">
<p>This extension of clause <a href="#zoom_levels">Zoom Levels</a> described in <a href="#extension_zoom_other_intervals">Zoom Other Intervals Extension (Normative)</a> allows zoom level intervals other than a factor of two.</p>
</div>
<div class="sect4">
<h5 id="_zoom_other_intervals">J.13.1.1. Zoom Other Intervals</h5>
<div class="paragraph">
<p>Tile pyramid user data tables MAY have pixel sizes that vary by irregular intervals or by regular intervals other than a factor of two (the default) between adjacent zoom levels.</p>
</div>
</div>
<div class="sect4">
<h5 id="_zoom_other_extensions_name">J.13.1.2. Zoom Other – Extensions Name</h5>
<div id="_requirement-103" class="quoteblock">
<div class="title">Requirement 103</div>
<blockquote>
The “gpkg_zoom_other” extension name SHALL be used as a gpkg_extensions table extension name column value to specify implementation of other zoom intervals on a tile pyramid user data table as specified in <a href="#extension_zoom_other_intervals">Zoom Other Intervals Extension (Normative)</a>.
</blockquote>
</div>
</div>
<div class="sect4">
<h5 id="_zoom_other_extensions_row">J.13.1.3. Zoom Other – Extensions Row</h5>
<div id="_requirement-104" class="quoteblock">
<div class="title">Requirement 104</div>
<blockquote>
A GeoPackage that implements other zoom intervals SHALL have a gpkg_extensions table that contains a row for each tile pyramid user data table with other zoom intervals with extension_name “gpkg_zoom_other”, the table_name of the table with other zoom intervals, and the “tile_data” column_name.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="extension_zoom_other_intervals">J.14. Zoom Other Intervals Extension (Normative)</h3>
<h4 id="_extension_title_7" class="float">Extension Title</h4>
<div class="paragraph">
<p>Zoom Other Intervals</p>
</div>
<h4 id="_introduction_10" class="float">Introduction</h4>
<div class="paragraph">
<p>In a GeoPackage, zoom levels are integers in sequence from 0 to n that identify tile matrix layers in a tile matrix set that contain tiles of decreasing spatial extent and finer spatial resolution.
Adjacent zoom levels immediately precede or follow each other and differ by a value of 1.
Pixel sizes are real numbers in the terrain units of the spatial reference system of a tile image specifying the dimensions of the real world area represented by one pixel.
Pixel sizes MAY vary by a constant factor or by different factors or intervals between some or all adjacent zoom levels in a tile matrix set.
In the commonly used "zoom times two" convention, pixel sizes vary by a factor of 2 between all adjacent zoom levels, as shown in the example in <a href="#tiles_factor2_example_appendix">Tiles Zoom Times Two Example (Informative)</a>.</p>
</div>
<div class="paragraph">
<p>This extension enables use of "zoom other intervals" conventions with different factors or irregular intervals with pixel sizes chosen for intuitive cartographic representation of raster data, or to coincide with the original pixel size of commonly used global image products.
See WMTS <a href="#16">[16]</a> Annex E for additional examples of both conventions.</p>
</div>
<h4 id="_extension_author_7" class="float">Extension Author</h4>
<div class="paragraph">
<p>GeoPackage SWG, author_name <code>gpkg</code></p>
</div>
<h4 id="_extension_name_or_template_7" class="float">Extension Name or Template</h4>
<div class="paragraph">
<p><code>gpkg_zoom_other</code></p>
</div>
<h4 id="_extension_type_7" class="float">Extension Type</h4>
<div class="paragraph">
<p>Extension of Existing Requirement in clause 2.2.3.</p>
</div>
<h4 id="_applicability_7" class="float">Applicability</h4>
<div class="paragraph">
<p>This extension applies to any table listed in the <code>gpkg_contents</code> table with a data_type of <code>tiles</code>.</p>
</div>
<h4 id="_scope_7" class="float">Scope</h4>
<div class="paragraph">
<p>Read-write</p>
</div>
<h4 id="_requirements_7" class="float">Requirements</h4>
<h5 id="_geopackage_7" class="float">GeoPackage</h5>
<div class="paragraph">
<p>The <code>pixel_x_size</code> and / or <code>pixel_y_size</code> column values in the <code>gpkg_tile_matrix</code> table vary by irregular intervals or by regular intervals other than a factor of two (the default) between adjacent zoom levels for a particular tile matrix set pyramid table.</p>
</div>
<h5 id="_geopackage_sqlite_configuration_7" class="float">GeoPackage SQLite Configuration</h5>
<div class="paragraph">
<p>None</p>
</div>
<h5 id="_geopackage_sqlite_extension_7" class="float">GeoPackage SQLite Extension</h5>
<div class="paragraph">
<p>None</p>
</div>
</div>
<div class="sect2">
<h3 id="tile_enc_webp">J.15. Tile Encoding WEBP</h3>
<div class="sect3">
<h4 id="_data_54">J.15.1. Data</h4>
<div class="paragraph">
<p>This extension of clauses <a href="#tile_enc_png">Tile Encoding PNG</a> and <a href="#tile_enc_jpeg">Tile Encoding JPEG</a> described in <a href="#extension_tiles_webp">Tiles Encoding WebP Extension (Normative)</a> allows encoding of tile images in WebP format.</p>
</div>
</div>
<div class="sect3">
<h4 id="_webp_mime_type">J.15.2. WEBP MIME Type</h4>
<div class="paragraph">
<p>A GeoPackage that contains a tile pyramid user data table that contains tile data MAY store tile_data in MIME type image/x-webp <a href="#22">[22]</a>.</p>
</div>
<div class="sect4">
<h5 id="_webp_extensions_name">J.15.2.1. WEBP&#8201;&#8212;&#8201;Extensions Name</h5>
<div id="_requirement-105" class="quoteblock">
<div class="title">Requirement 105</div>
<blockquote>
The "gpkg_webp" extension name SHALL be used as a gpkg_extensions table extension name column value to specify storage of tile pyramid images in WEBP format as specified in <a href="#extension_tiles_webp">Tiles Encoding WebP Extension (Normative)</a>.
</blockquote>
</div>
</div>
<div class="sect4">
<h5 id="_webp_extensions_row">J.15.2.2. WEBP&#8201;&#8212;&#8201;Extensions Row</h5>
<div id="_requirement-106" class="quoteblock">
<div class="title">Requirement 106</div>
<blockquote>
A GeoPackage that contains tile pyramid user data tables with tile_data columns that contain images in WEBP format SHALL contain a gpkg_extensions table that contains row records with table_name values for each such table, “tile_data” column_name values and extension_name column values of “gpkg_webp”.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="extension_tiles_webp">J.16. Tiles Encoding WebP Extension (Normative)</h3>
<h4 id="_extension_title_8" class="float">Extension Title</h4>
<div class="paragraph">
<p>Tile Encoding WebP</p>
</div>
<h4 id="_introduction_11" class="float">Introduction</h4>
<div class="paragraph">
<p>PNG and JPEG are the default MIME types for encoding images in tile pyramid user data tables.
This extension allows the use of <code>image/x-webp</code> as an additional encoding type.</p>
</div>
<h4 id="_extension_author_8" class="float">Extension Author</h4>
<div class="paragraph">
<p>GeoPackage SWG, author_name <code>gpkg</code>.</p>
</div>
<h4 id="_extension_name_or_template_8" class="float">Extension Name or Template</h4>
<div class="paragraph">
<p><code>gpkg_webp</code></p>
</div>
<h4 id="_extension_type_8" class="float">Extension Type</h4>
<div class="paragraph">
<p>Extension of Existing Requirement in clauses <a href="#tile_enc_png">Tile Encoding PNG</a> and <a href="#tile_enc_jpeg">Tile Encoding JPEG</a>.</p>
</div>
<h4 id="_applicability_8" class="float">Applicability</h4>
<div class="paragraph">
<p>This extension applies to any table listed in the <code>gpkg_contents</code> table with a data_type of <code>tiles</code>.</p>
</div>
<h4 id="_scope_8" class="float">Scope</h4>
<div class="paragraph">
<p>Read-write</p>
</div>
<h4 id="_requirements_8" class="float">Requirements</h4>
<h5 id="_geopackage_8" class="float">GeoPackage</h5>
<div class="paragraph">
<p>The MIME type of values of the <code>tile_data</code> column in tile pyramid user data tables SHALL be <code>image/x-webp</code>.</p>
</div>
<h5 id="_geopackage_sqlite_configuration_8" class="float">GeoPackage SQLite Configuration</h5>
<div class="paragraph">
<p>None</p>
</div>
<h5 id="_geopackage_sqlite_extension_8" class="float">GeoPackage SQLite Extension</h5>
<div class="paragraph">
<p>None</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_normative_references_normative"> Annex K: Normative References (Normative)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following normative documents contain provisions which, through reference in this text, constitute provisions of OGC 12-128.
For dated references, subsequent amendments to, or revisions of, any of these publications do not apply.
However, parties to agreements based on this part of OGC 12-128 are encouraged to investigate the possibility of applying the most recent editions of the normative documents indicated below.
For undated references, the latest edition of the normative document referred to applies.</p>
</div>
<div class="ulist bibliography">
<ul class="bibliography">
<li>
<p><a id="1"></a>[1] ISO/IEC 9075:1992 Information Technology - Database Language SQL (SQL92)</p>
</li>
<li>
<p><a id="2"></a>[2] ISO/IEC 9075-1:2011 Information Technology - Database Language SQL - Part 1: Framework</p>
</li>
<li>
<p><a id="3"></a>[3] ISO/IEC 9075-2:2011 Information Technology - Database Language SQL - Part 2: Foundation</p>
</li>
<li>
<p><a id="4"></a>[4] ISO/IEC 9075-3:2008 Information Technology - Database Language SQL - Part 3: Call- Level Interface (SQL/CLI)</p>
</li>
<li>
<p><a id="5"></a>[5] SQLite (all parts) <a href="http://www.sqlite.org/">http://www.sqlite.org/</a> (online) <a href="http://www.sqlite.org/sqlite-doc-3071300.zip">http://www.sqlite.org/sqlite-doc-3071300.zip</a> (offline)</p>
</li>
<li>
<p><a id="6"></a>[6] <a href="http://sqlite.org/fileformat2.html">http://sqlite.org/fileformat2.html</a></p>
</li>
<li>
<p><a id="7"></a>[7] <a href="http://www.sqlite.org/formatchng.html">http://www.sqlite.org/formatchng.html</a></p>
</li>
<li>
<p><a id="8"></a>[8] <a href="http://www.sqlite.org/download.html">http://www.sqlite.org/download.html</a></p>
</li>
<li>
<p><a id="9"></a>[9] OGC 06-103r4 OpenGIS® Implementation Standard for Geographic information - Simple feature access - Part 1: Common architecture Version: 1.2.1 2011-05-28 <a href="http://portal.opengeospatial.org/files/?artifact_id=25355">http://portal.opengeospatial.org/files/?artifact_id=25355</a> (also ISO/TC211 19125 Part 1)</p>
</li>
<li>
<p><a id="10"></a>[10] OGC 06-104r4 OpenGIS® Implementation Standard for Geographic information - Simple feature access - Part 2: SQL option Version: 1.2.1 2010-08-04 <a href="http://portal.opengeospatial.org/files/?artifact_id=25354">http://portal.opengeospatial.org/files/?artifact_id=25354</a> (also ISO/TC211 19125 Part 2)</p>
</li>
<li>
<p><a id="11"></a>[11] OGC 99-049 OpenGIS® Simple Features Specification for SQL Revision 1.1 5, 1999, Clause 2.3.8 <a href="http://portal.opengeospatial.org/files/?artifact_id=829">http://portal.opengeospatial.org/files/?artifact_id=829</a> May</p>
</li>
<li>
<p><a id="12"></a>[12] ISO/IEC 13249-3:2011 Information technology — SQL Multimedia and Application Packages - Part 3: Spatial (SQL/MM)</p>
</li>
<li>
<p><a id="13"></a>[13] <a href="http://www.epsg.org/Geodetic.html">http://www.epsg.org/Geodetic.html</a></p>
</li>
<li>
<p><a id="14"></a>[14] <a href="http://www.epsg-registry.org/">http://www.epsg-registry.org/</a></p>
</li>
<li>
<p><a id="15"></a>[15] MIL_STD_2401 DoD World Geodetic System 84 (WGS84), 11 January 1994</p>
</li>
<li>
<p><a id="16"></a>[16] OGC 07-057r7 OpenGIS® Web Map Tile Service Implementation Standard ersion 1.0.0 2010-04-06 (WMTS) <a href="http://portal.opengeospatial.org/files/?artifact_id=35326">http://portal.opengeospatial.org/files/?artifact_id=35326</a></p>
</li>
<li>
<p><a id="17"></a>[17] ITU-T Recommendation T.81 (09/92) with Corrigendum (JPEG)</p>
</li>
<li>
<p><a id="18"></a>[18] T.871 : Information technology - Digital compression and coding of continuous-tone still images: JPEG File Interchange Format (JFIF), September 11, 2012 <a href="http://www.itu.int/rec/T-REC-T.871-201105-I/en">http://www.itu.int/rec/T-REC-T.871-201105-I/en</a></p>
</li>
<li>
<p><a id="19"></a>[19] IETF RFC 2046 Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types <a href="http://www.ietf.org/rfc/rfc2046.txt">http://www.ietf.org/rfc/rfc2046.txt</a></p>
</li>
<li>
<p><a id="20"></a>[20] Portable Network Graphics <a href="http://libpng.org/pub/png/">http://libpng.org/pub/png/</a></p>
</li>
<li>
<p><a id="21"></a>[21] MIME Media Types <a href="http://www.iana.org/assignments/media-types/index.html">http://www.iana.org/assignments/media-types/index.html</a></p>
</li>
<li>
<p><a id="22"></a>[22] WebP <a href="https://developers.google.com/speed/webp/">https://developers.google.com/speed/webp/</a></p>
</li>
<li>
<p><a id="23"></a>[23] IETF RFC 3986 Uniform Resource Identifier (URI): Generic Syntax <a href="http://www.ietf.org/rfc/rfc3986.txt">http://www.ietf.org/rfc/rfc3986.txt</a></p>
</li>
<li>
<p><a id="24"></a>[24] W3C Recommendation 26 November 2008 Extensible Markup Language (XML) 1.0 (Fifth Edition) <a href="http://www.w3.org/TR/xml/">http://www.w3.org/TR/xml/</a></p>
</li>
<li>
<p><a id="25"></a>[25] W3C Recommendation 28 October 2004 XML Schema Part 0: Primer Second Edition <a href="http://www.w3.org/TR/xmlschema-0/">http://www.w3.org/TR/xmlschema-0/</a></p>
</li>
<li>
<p><a id="26"></a>[26] W3C Recommendation 28 October 2004 XML Schema Part 1: Structures Second Edition <a href="http://www.w3.org/TR/xmlschema-1/">http://www.w3.org/TR/xmlschema-1/</a></p>
</li>
<li>
<p>[<a id="27"></a> W3C Recommendation 28 October 2004 XML Schema Part 2: Datatypes Second Edition <a href="http://www.w3.org/TR/xmlschema-2/">http://www.w3.org/TR/xmlschema-2/</a></p>
</li>
<li>
<p><a id="28"></a>[28] ISO 19115 Geographic information&#8201;&#8212;&#8201;Metadata, 8 May 2003, with Technical Corrigendum 1, 5 July 2006</p>
</li>
<li>
<p><a id="29"></a>[29] ISO 8601 Representation of dates and times <a href="http://www.iso.org/iso/catalogue_detail?csnumber=40874">http://www.iso.org/iso/catalogue_detail?csnumber=40874</a></p>
</li>
<li>
<p><a id="30"></a>[30] OGC® 10-100r3 Geography Markup Language (GML) simple features profile (with technical note) <a href="http://portal.opengeospatial.org/files/?artifact_id=42729">http://portal.opengeospatial.org/files/?artifact_id=42729</a></p>
</li>
<li>
<p><a id="31"></a>[31] SQLite R*Tree Module <a href="http://www.sqlite.org/rtree.html">http://www.sqlite.org/rtree.html</a></p>
</li>
<li>
<p><a id="32"></a>[32] OpenGIS® 01-009 Implementation Specification: Coordinate Transformation Services Revision 1.0  <a href="http://portal.opengeospatial.org/files/?artifact_id=999">http://portal.opengeospatial.org/files/?artifact_id=999</a></p>
</li>
<li>
<p><a id="33"></a>[33] SQLite GLOB operator <a href="https://www.sqlite.org/lang_expr.html#glob">https://www.sqlite.org/lang_expr.html#glob</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_bibliography_informative"> Annex L: Bibliography (Informative)</h2>
<div class="sectionbody">
<div class="ulist bibliography">
<ul class="bibliography">
<li>
<p><a id="B1"></a>[B1] <a href="http://developer.android.com/guide/topics/data/data-storage.html#db">http://developer.android.com/guide/topics/data/data-storage.html#db</a></p>
</li>
<li>
<p><a id="B2"></a>[B2] <a href="https://developer.apple.com/technologies/ios/data-management.html">https://developer.apple.com/technologies/ios/data-management.html</a></p>
</li>
<li>
<p><a id="B3"></a>[B3] <a href="http://www.epsg.org/guides/docs/G7-1.pdf">http://www.epsg.org/guides/docs/G7-1.pdf</a></p>
</li>
<li>
<p><a id="B4"></a>[B4] <a href="http://en.wikipedia.org/wiki/ASCII">http://en.wikipedia.org/wiki/ASCII</a></p>
</li>
<li>
<p><a id="B5"></a>[B5] <a href="http://www.sqlite.org/lang_createtable.html#rowid">http://www.sqlite.org/lang_createtable.html#rowid</a></p>
</li>
<li>
<p><a id="B6"></a>[B6] ISO 19115-2 Geographic information - - Metadata - Part 2: Metadata for imagery and gridded data</p>
</li>
<li>
<p><a id="B7"></a>[B7] ISO 19139: Geographic information&#8201;&#8212;&#8201;Metadata&#8201;&#8212;&#8201;XML schema implementation</p>
</li>
<li>
<p><a id="B8"></a>[B8] Dublin Core Metadata Initiative <a href="http://dublincore.org/">http://dublincore.org/</a>  IETF RFC 5013</p>
</li>
<li>
<p><a id="B9"></a>[B9] ISO 15836:2009  <a href="http://www.iso.org/iso/home/store/catalogue_tc/catalogue_detail.htm?csnumber=52142">http://www.iso.org/iso/home/store/catalogue_tc/catalogue_detail.htm?csnumber=52142</a></p>
</li>
<li>
<p><a id="B10"></a>[B10] Content Standard for Digital Geospatial Metadata (CSDGM)</p>
</li>
<li>
<p><a id="B11"></a>[B11] <a href="http://www.fgdc.gov/standards/projects/FGDC-standards-projects/metadata/base-metadata/index_html">http://www.fgdc.gov/standards/projects/FGDC-standards-projects/metadata/base-metadata/index_html</a></p>
</li>
<li>
<p><a id="B12"></a>[B12] Department of Defense Discovery Metadata Specification (DDMS) <a href="http://metadata.ces.mil/mdr/irs/DDMS/">http://metadata.ces.mil/mdr/irs/DDMS/</a></p>
</li>
<li>
<p><a id="B13"></a>[B13] NMF NGA.STND.0012_2.0 /  NMIS NGA.STND.0018_1.0</p>
</li>
<li>
<p><a id="B14"></a>[B14] Unified Modeling Language (UML) <a href="http://www.uml.org/">http://www.uml.org/</a></p>
</li>
<li>
<p><a id="B15"></a>[B15] XML for Metadata Interchange (XMI) <a href="http://www.omg.org/spec/XMI/">http://www.omg.org/spec/XMI/</a></p>
</li>
<li>
<p><a id="B16"></a>[B16] IDEF1x Data Modeling Method <a href="http://www.idef.com/IDEF1x.htm">http://www.idef.com/IDEF1x.htm</a></p>
</li>
<li>
<p><a id="B17"></a>[B17] Geography Markup Language (GML) ISO 19136:2007</p>
</li>
<li>
<p><a id="B18"></a>[B18] ISO 19110 Geographic information – Methodology for feature cataloguing</p>
</li>
<li>
<p><a id="B19"></a>[B19] RDF Vocabulary Description Language 1.0: RDF Schema  <a href="http://www.w3.org/TR/rdf-schema/">http://www.w3.org/TR/rdf-schema/</a></p>
</li>
<li>
<p><a id="B20"></a>[B20] Web Ontology Language (OWL) <a href="http://www.w3.org/TR/2009/REC-owl2-xml-serialization-20091027/">http://www.w3.org/TR/2009/REC-owl2-xml-serialization-20091027/</a></p>
</li>
<li>
<p><a id="B21"></a>[B21] Simple Knowledge Organization System (SKOS) <a href="http://www.w3.org/TR/skos-reference/">http://www.w3.org/TR/skos-reference/</a></p>
</li>
<li>
<p><a id="B22"></a>[B22] STANAG 7074 Digital Geographic Information Exchange Standard (DIGEST) - AGeoP-3A, edition 1, 19 October 1994 <a href="http://www.dgiwg.org/dgiwg/htm/documents/historical_documents.htm">http://www.dgiwg.org/dgiwg/htm/documents/historical_documents.htm</a></p>
</li>
<li>
<p><a id="B23"></a>[B23] ISO 19109 Geographic information - Rules for application schema</p>
</li>
<li>
<p><a id="B24"></a>[B24] <a href="http://www.sqlite.org/changes.html">http://www.sqlite.org/changes.html</a></p>
</li>
<li>
<p><a id="B25"></a>[B25] <a href="http://sqlite.org/src4/doc/trunk/www/design.wiki">http://sqlite.org/src4/doc/trunk/www/design.wiki</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnote_1">
<a href="#_footnoteref_1">1</a>. SQLite version 4 (reference B25), which will be an alternative to version 3, not a replacement thereof, was not available when this standard was written. See Future Work clause in Annex B.
</div>
<div class="footnote" id="_footnote_2">
<a href="#_footnoteref_2">2</a>. SQLite is in the public domain (see <a href="http://www.sqlite.org/copyright.html)">http://www.sqlite.org/copyright.html)</a>
</div>
<div class="footnote" id="_footnote_3">
<a href="#_footnoteref_3">3</a>. With SQLite versions 3.7.17 and later this value MAY be set with the "PRAGMA application_id=1196437808;" SQL statement, where 1196437808 is the 32-bit integer value of 0x47503130. With earlier versions of SQLite the application id can be set by writing the byte sequence 0x47, 0x50, 0x31, 0x30 at offset 68 in the SQLite database file (see <a href="http://www.sqlite.org/fileformat2.html#database_header">http://www.sqlite.org/fileformat2.html#database_header</a> for details).
</div>
<div class="footnote" id="_footnote_4">
<a href="#_footnoteref_4">4</a>. The SQLite PRAGMA integrity_check SQL command does a full database scan that can take a long time to complete on a large GeoPackage file.
</div>
<div class="footnote" id="_footnote_5">
<a href="#_footnoteref_5">5</a>. New applications should use the latest available SQLite version software <<8>>
</div>
<div class="footnote" id="_footnote_6">
<a href="#_footnoteref_6">6</a>. The following statement selects an ISO 8601timestamp value using the SQLite strftime function: SELECT (strftime('%Y-%m-%dT%H:%M:%fZ','now')).
</div>
<div class="footnote" id="_footnote_7">
<a href="#_footnoteref_7">7</a>. GeometryCollection is a generic term for the ST_GeomCollection type defined in [12\], which uses it for the definition of Well Known Text (WKT) and Well Known Binary (WKB) encodings. The SQL type name GEOMCOLLECTION defined in [10\] and used in Clause 1.1.2.1.1 and Annex E below refers to the SQL BLOB encoding of a GeometryCollection.
</div>
<div class="footnote" id="_footnote_8">
<a href="#_footnoteref_8">8</a>. OGC WKB simple feature geometry types specified in <<9>> are a subset of the ISO WKB geometry types specified in <<12>>
</div>
<div class="footnote" id="_footnote_9">
<a href="#_footnoteref_9">9</a>. WKB geometry types are are restricted to 0, 1 and 2-dimensional geometric objects that exist in 2, 3 or 4-dimensional coordinate space; they are not geographic or geodesic geometry types.
</div>
<div class="footnote" id="_footnote_10">
<a href="#_footnoteref_10">10</a>. The axis order in WKB is always (x,y{,z}{,m}) where x is easting or longitude, y is northing or latitude, z is optional elevation and m is optional measure.
</div>
<div class="footnote" id="_footnote_11">
<a href="#_footnoteref_11">11</a>. A GeoPackage is not required to contain any feature data tables. Feature data tables in a GeoPackage MAY be empty.
</div>
<div class="footnote" id="_footnote_12">
<a href="#_footnoteref_12">12</a>. GeoPackage applications MAY use SQL triggers or tests in application code to meet this requirement
</div>
<div class="footnote" id="_footnote_13">
<a href="#_footnoteref_13">13</a>. Images of multiple MIME types MAY be stored in given table. For example, in a tiles table, image/png format tiles COULD be used for transparency where there is no data on the tile edges, and image/jpeg format tiles COULD be used for storage efficiency where there is image data for all pixels. Images of multiple bit depths of the same MIME type MAY also be stored in a given table, for example image/png tiles in both 8 and 24 bit depths.
</div>
<div class="footnote" id="_footnote_14">
<a href="#_footnoteref_14">14</a>. See clause 3.2.1.1.1 for use of other zoom levels as a registered extensions.
</div>
<div class="footnote" id="_footnote_15">
<a href="#_footnoteref_15">15</a>. See Clause 3.2.2 regarding use of the WebP alternative tile MIME type as a registered extension.
</div>
<div class="footnote" id="_footnote_16">
<a href="#_footnoteref_16">16</a>. See Clause 3.2.2 regarding use of the WebP alternative tile MIME type as a registered extension.
</div>
<div class="footnote" id="_footnote_17">
<a href="#_footnoteref_17">17</a>. GeoPackage applications MAY query the gpkg_tile_matrix table or the tile pyramid user data table to determine the minimum and maximum zoom levels for a given tile pyramid table.
</div>
<div class="footnote" id="_footnote_18">
<a href="#_footnoteref_18">18</a>. GeoPackage applications MAY query a tile pyramid user data table to determine which tiles are available at each zoom level.
</div>
<div class="footnote" id="_footnote_19">
<a href="#_footnoteref_19">19</a>. GeoPackage applications that insert, update, or delete tile pyramid user data table tiles row records are responsible for maintaining the corresponding descriptive contents of the gpkg_tile_matrix_metadata table.
</div>
<div class="footnote" id="_footnote_20">
<a href="#_footnoteref_20">20</a>. The `gpkg_tile_matrix_set` table contains coordinates that define a bounding box as the exact stated spatial extent for all tiles in a tile (matrix set) table. If the geographic extent of the image data contained in tiles at a particular zoom level is within but not equal to this bounding box, then the non-image area of matrix edge tiles must be padded with no-data values, preferably transparent ones.
</div>
<div class="footnote" id="_footnote_21">
<a href="#_footnoteref_21">21</a>. A GeoPackage is not required to contain any tile pyramid user data tables. Tile pyramid user data tables in a GeoPackage MAY be empty.
</div>
<div class="footnote" id="_footnote_22">
<a href="#_footnoteref_22">22</a>. The zoom_level / tile_column / tile_row unique key is automatically indexed, and allows tiles to be selected and accessed by "z, x, y", a common convention used by some implementations.  This table / view definition MAY also allow tiles to be selected based on a spatially indexed bounding box in a separate metadata table.
</div>
<div class="footnote" id="_footnote_23">
<a href="#_footnoteref_23">23</a>. A GeoPackage is not required to contain a gpkg_data_columns table. The gpkg_data_columns table in a GeoPackage MAY be empty.
</div>
<div class="footnote" id="_footnote_24">
<a href="#_footnoteref_24">24</a>. GeoPackages MAY contain MIME types other than the raster image types specified in clauses 2.2.4, 2.2.5, and 3.2.2 as feature attributes, but they are not required to do so.
</div>
<div class="footnote" id="_footnote_25">
<a href="#_footnoteref_25">25</a>. Informative examples of hierarchical metadata are provided in &lt;&lt;metadata_example_appendix&gt;&gt;
</div>
<div class="footnote" id="_footnote_26">
<a href="#_footnoteref_26">26</a>. An informative example of raster image metadata is provided in &lt;&lt;tiles_example_appendix&gt;&gt;
</div>
<div class="footnote" id="_footnote_27">
<a href="#_footnoteref_27">27</a>. For example, for ISO 19139 metadata the URI value should be the metadata schema namespace <a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a>
</div>
<div class="footnote" id="_footnote_28">
<a href="#_footnoteref_28">28</a>. The scope codes in &lt;&lt;metadata_scopes&gt;&gt; include a very wide set of descriptive information types as “metadata” to describe data.
</div>
<div class="footnote" id="_footnote_29">
<a href="#_footnoteref_29">29</a>. ISO 19139 format metadata (B32) is recommended for general-purpose description of geospatial data at the series and dataset metadata scopes.
</div>
<div class="footnote" id="_footnote_30">
<a href="#_footnoteref_30">30</a>. The “catalog” md_scope MAY be used for Feature Catalog (B40) information stored as XML metadata that is linked to features stored in a GeoPackage.
</div>
<div class="footnote" id="_footnote_31">
<a href="#_footnoteref_31">31</a>. The “schema” md_scope MAY be used for Application Schema (B37)(B38)(B39)(B44) information stored as XML metadata that is linked to features stored in a GeoPackage.
</div>
<div class="footnote" id="_footnote_32">
<a href="#_footnoteref_32">32</a>. The “taxonomy” md_scope MAY be used for taxonomy or knowledge system (B41)(B42) “linked data” information stored as XML metadata that is linked to features stored in a GeoPackage.
</div>
<div class="footnote" id="_footnote_33">
<a href="#_footnoteref_33">33</a>. In SQLite, the rowid value is always equal to the value of a single-column primary key on an integer column [B30\] and is not changed by a database reorganization performed by the VACUUM SQL command.
</div>
<div class="footnote" id="_footnote_34">
<a href="#_footnoteref_34">34</a>. Such a metadata hierarchy MAY have only one level of defined metadata
</div>
<div class="footnote" id="_footnote_35">
<a href="#_footnoteref_35">35</a>. The following statement selects an ISO 8601timestamp value using the SQLite strftime function: SELECT (strftime('%Y-%m-%dT%H:%M:%fZ','now')).
</div>
<div class="footnote" id="_footnote_36">
<a href="#_footnoteref_36">36</a>. See Requirement 82.
</div>
<div class="footnote" id="_footnote_37">
<a href="#_footnoteref_37">37</a>. If an application process will make many updates, it is often faster to drop the indexes, do the updates, and then recreate the indexes.
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2015-11-26 14:29:08 UTC
</div>
</div>
</body>
</html>