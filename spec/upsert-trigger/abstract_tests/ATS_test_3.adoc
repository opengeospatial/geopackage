[[ats_req_156]]
[abstract_test]
====
[%metadata]
identifier:: /conf/ucte/req-156
target:: /req/ucte/req-156
test-purpose:: Confirm that the required triggers are present.

[.component,class=test method]
=====
[.component,class=step]
--
SELECT table_name FROM gpkg_extensions WHERE extension_name = 'gpkg_upsert_compatible_triggers';
--

[.component,class=step]
--
For every table_name,

SELECT COUNT(*) FROM sqlite_master WHERE type = 'trigger' AND name = 'rtree_{table_name}_update1_old_geom_notnull';

and fail if count = 0.
--

[.component,class=step]
--
For every table_name,

SELECT COUNT(*) FROM sqlite_master WHERE type = 'trigger' AND name = 'rtree_{table_name}_update1_old_geom_null';

and fail if count = 0.
--
=====
====
