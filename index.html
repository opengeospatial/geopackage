<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="Asciidoctor 0.1.4">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OGC® GeoPackage Encoding Standard (OGC 12-128r8)</title>
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }
audio, canvas, video { display: inline-block; }
audio:not([controls]) { display: none; height: 0; }
[hidden] { display: none; }
html { background: #fff; color: #000; font-family: sans-serif; -ms-text-size-adjust: 100%; -webkit-text-size-adjust: 100%; }
body { margin: 0; }
a:focus { outline: thin dotted; }
a:active, a:hover { outline: 0; }
h1 { font-size: 2em; margin: 0.67em 0; }
abbr[title] { border-bottom: 1px dotted; }
b, strong { font-weight: bold; }
dfn { font-style: italic; }
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }
mark { background: #ff0; color: #000; }
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }
pre { white-space: pre-wrap; }
q { quotes: "\201C" "\201D" "\2018" "\2019"; }
small { font-size: 80%; }
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }
sup { top: -0.5em; }
sub { bottom: -0.25em; }
img { border: 0; }
svg:not(:root) { overflow: hidden; }
figure { margin: 0; }
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }
legend { border: 0; padding: 0; }
button, input, select, textarea { font-family: inherit; font-size: 100%; margin: 0; }
button, input { line-height: normal; }
button, select { text-transform: none; }
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; cursor: pointer; }
button[disabled], html input[disabled] { cursor: default; }
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; padding: 0; }
input[type="search"] { -webkit-appearance: textfield; -moz-box-sizing: content-box; -webkit-box-sizing: content-box; box-sizing: content-box; }
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }
textarea { overflow: auto; vertical-align: top; }
table { border-collapse: collapse; border-spacing: 0; }
*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }
html, body { font-size: 100%; }
body { background: white; color: #222222; padding: 0; margin: 0; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }
a:hover { cursor: pointer; }
a:focus { outline: none; }
img, object, embed { max-width: 100%; height: auto; }
object, embed { height: 100%; }
img { -ms-interpolation-mode: bicubic; }
#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }
.left { float: left !important; }
.right { float: right !important; }
.text-left { text-align: left !important; }
.text-right { text-align: right !important; }
.text-center { text-align: center !important; }
.text-justify { text-align: justify !important; }
.hide { display: none; }
.antialiased, body { -webkit-font-smoothing: antialiased; }
img { display: inline-block; vertical-align: middle; }
textarea { height: auto; min-height: 50px; }
select { width: 100%; }
p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }
.subheader, #content #toctitle, .admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .videoblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title, .tableblock > caption { line-height: 1.4; color: #7a2518; font-weight: 300; margin-top: 0.2em; margin-bottom: 0.5em; }
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }
a { color: #005498; text-decoration: underline; line-height: inherit; }
a:hover, a:focus { color: #00467f; }
a img { border: none; }
p { font-family: inherit; font-weight: normal; font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: Georgia, "URW Bookman L", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; color: #ba3925; text-rendering: optimizeLegibility; margin-top: 1em; margin-bottom: 0.5em; line-height: 1.2125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #e99b8f; line-height: 0; }
h1 { font-size: 2.125em; }
h2 { font-size: 1.6875em; }
h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }
h4 { font-size: 1.125em; }
h5 { font-size: 1.125em; }
h6 { font-size: 1em; }
hr { border: solid #dddddd; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }
em, i { font-style: italic; line-height: inherit; }
strong, b { font-weight: bold; line-height: inherit; }
small { font-size: 60%; line-height: inherit; }
code { font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: normal; color: #6d180b; }
ul, ol, dl { font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; list-style-position: outside; font-family: inherit; }
ul, ol { margin-left: 1.5em; }
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }
dl dt { margin-bottom: 0.3125em; font-weight: bold; }
dl dd { margin-bottom: 1.25em; }
abbr, acronym { text-transform: uppercase; font-size: 90%; color: #222222; border-bottom: 1px dotted #dddddd; cursor: help; }
abbr { text-transform: none; }
blockquote { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
blockquote cite { display: block; font-size: inherit; color: #555555; }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: #555555; }
blockquote, blockquote p { line-height: 1.6; color: #6f6f6f; }
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #dddddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }
.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }
@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
.print-only { display: none !important; }
@media print { * { background: transparent !important; color: #000 !important; box-shadow: none !important; text-shadow: none !important; }
  a, a:visited { text-decoration: underline; }
  a[href]:after { content: " (" attr(href) ")"; }
  abbr[title]:after { content: " (" attr(title) ")"; }
  .ir a:after, a[href^="javascript:"]:after, a[href^="#"]:after { content: ""; }
  pre, blockquote { border: 1px solid #999; page-break-inside: avoid; }
  thead { display: table-header-group; }
  tr, img { page-break-inside: avoid; }
  img { max-width: 100% !important; }
  @page { margin: 0.5cm; }
  p, h2, h3, #toctitle, .sidebarblock > .content > .title { orphans: 3; widows: 3; }
  h2, h3, #toctitle, .sidebarblock > .content > .title { page-break-after: avoid; }
  .hide-on-print { display: none !important; }
  .print-only { display: block !important; }
  .hide-for-print { display: none !important; }
  .show-for-print { display: inherit !important; } }
table { background: white; margin-bottom: 1.25em; border: solid 1px #dddddd; }
table thead, table tfoot { background: whitesmoke; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: inherit; color: #222222; text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: inherit; color: #222222; }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #f9f9f9; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.6; }
.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }
*:not(pre) > code { font-size: 0.9375em; padding: 1px 3px 0; white-space: nowrap; background-color: #f2f2f2; border: 1px solid #cccccc; -webkit-border-radius: 4px; border-radius: 4px; text-shadow: none; }
pre, pre > code { line-height: 1.4; color: inherit; font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: normal; }
kbd.keyseq { color: #555555; }
kbd:not(.keyseq) { display: inline-block; color: #222222; font-size: 0.75em; line-height: 1.4; background-color: #F7F7F7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; margin: -0.15em 0.15em 0 0.15em; padding: 0.2em 0.6em 0.2em 0.5em; vertical-align: middle; white-space: nowrap; }
kbd kbd:first-child { margin-left: 0; }
kbd kbd:last-child { margin-right: 0; }
.menuseq, .menu { color: #090909; }
p a > code:hover { color: #561309; }
#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 0.9375em; padding-right: 0.9375em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }
#header { margin-bottom: 2.5em; }
#header > h1 { color: black; font-weight: normal; border-bottom: 1px solid #dddddd; margin-bottom: -28px; padding-bottom: 32px; }
#header span { color: #6f6f6f; }
#header #revnumber { text-transform: capitalize; }
#header br { display: none; }
#header br + span { padding-left: 3px; }
#header br + span:before { content: "\2013 \0020"; }
#header br + span.author { padding-left: 0; }
#header br + span.author:before { content: ", "; }
#toc { border-bottom: 3px double #ebebeb; padding-bottom: 1.25em; }
#toc > ul { margin-left: 0.25em; }
#toc ul.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1 { margin-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
#toc ul { list-style-type: none; }
#toctitle { color: #7a2518; }
@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; }
  #toc.toc2 { position: fixed; width: 20em; left: 0; top: 0; border-right: 1px solid #ebebeb; border-bottom: 0; z-index: 1000; padding: 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; }
  #toc.toc2 > ul { font-size: .95em; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1.25em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; }
  body.toc2.toc-right #toc.toc2 { border-right: 0; border-left: 1px solid #ebebeb; left: auto; right: 0; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; border-width: 0; -webkit-border-radius: 4px; border-radius: 4px; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }
#content #toc a { text-decoration: none; }
#content #toctitle { font-weight: bold; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-size: 1em; padding-left: 0.125em; }
#footer { max-width: 100%; background-color: #222222; padding: 1.25em; }
#footer-text { color: #dddddd; line-height: 1.44; }
.sect1 { padding-bottom: 1.25em; }
.sect1 + .sect1 { border-top: 3px double #ebebeb; }
#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; width: 1em; margin-left: -1em; display: block; text-decoration: none; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: '\00A7'; font-size: .85em; vertical-align: text-top; display: block; margin-top: 0.05em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #ba3925; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #a53221; }
.imageblock, .literalblock, .listingblock, .verseblock, .videoblock { margin-bottom: 1.25em; }
.admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .videoblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-align: left; font-weight: bold; }
.tableblock > caption { text-align: left; font-weight: bold; white-space: nowrap; overflow: visible; max-width: 0; }
table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }
.admonitionblock > table { border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: none; }
.admonitionblock > table td.icon .title { font-weight: bold; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #dddddd; color: #6f6f6f; }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }
.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 4px; border-radius: 4px; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6, .exampleblock > .content p { color: #333333; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6 { line-height: 1; margin-bottom: 0.625em; }
.exampleblock > .content h1.subheader, .exampleblock > .content h2.subheader, .exampleblock > .content h3.subheader, .exampleblock > .content .subheader#toctitle, .sidebarblock.exampleblock > .content > .subheader.title, .exampleblock > .content h4.subheader, .exampleblock > .content h5.subheader, .exampleblock > .content h6.subheader { line-height: 1.4; }
.exampleblock.result > .content { -webkit-box-shadow: 0 1px 8px #d9d9d9; box-shadow: 0 1px 8px #d9d9d9; }
.sidebarblock { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; -webkit-border-radius: 4px; border-radius: 4px; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6, .sidebarblock p { color: #333333; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6 { line-height: 1; margin-bottom: 0.625em; }
.sidebarblock h1.subheader, .sidebarblock h2.subheader, .sidebarblock h3.subheader, .sidebarblock .subheader#toctitle, .sidebarblock > .content > .subheader.title, .sidebarblock h4.subheader, .sidebarblock h5.subheader, .sidebarblock h6.subheader { line-height: 1.4; }
.sidebarblock > .content > .title { color: #7a2518; margin-top: 0; line-height: 1.6; }
.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }
.literalblock > .content pre, .listingblock > .content pre { background: none; border-width: 1px 0; border-style: dotted; border-color: #bfbfbf; -webkit-border-radius: 4px; border-radius: 4px; padding: 0.75em 0.75em 0.5em 0.75em; word-wrap: break-word; }
.literalblock > .content pre.nowrap, .listingblock > .content pre.nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
.literalblock > .content pre > code, .listingblock > .content pre > code { display: block; }
@media only screen { .literalblock > .content pre, .listingblock > .content pre { font-size: 0.8em; } }
@media only screen and (min-width: 768px) { .literalblock > .content pre, .listingblock > .content pre { font-size: 0.9em; } }
@media only screen and (min-width: 1280px) { .literalblock > .content pre, .listingblock > .content pre { font-size: 1em; } }
.listingblock > .content { position: relative; }
.listingblock:hover code[class*=" language-"]:before { text-transform: uppercase; font-size: 0.9em; color: #999; position: absolute; top: 0.375em; right: 0.375em; }
.listingblock:hover code.asciidoc:before { content: "asciidoc"; }
.listingblock:hover code.clojure:before { content: "clojure"; }
.listingblock:hover code.css:before { content: "css"; }
.listingblock:hover code.groovy:before { content: "groovy"; }
.listingblock:hover code.html:before { content: "html"; }
.listingblock:hover code.java:before { content: "java"; }
.listingblock:hover code.javascript:before { content: "javascript"; }
.listingblock:hover code.python:before { content: "python"; }
.listingblock:hover code.ruby:before { content: "ruby"; }
.listingblock:hover code.scss:before { content: "scss"; }
.listingblock:hover code.xml:before { content: "xml"; }
.listingblock:hover code.yaml:before { content: "yaml"; }
.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: #999; }
.listingblock.terminal pre .command:not([data-prompt]):before { content: '$'; }
table.pyhltable { border: 0; margin-bottom: 0; }
table.pyhltable td { vertical-align: top; padding-top: 0; padding-bottom: 0; }
table.pyhltable td.code { padding-left: .75em; padding-right: 0; }
.highlight.pygments .lineno, table.pyhltable td:not(.code) { color: #999; padding-left: 0; padding-right: .5em; border-right: 1px solid #dddddd; }
.highlight.pygments .lineno { display: inline-block; margin-right: .25em; }
table.pyhltable .linenodiv { background-color: transparent !important; padding-right: 0 !important; }
.quoteblock { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
.quoteblock blockquote { margin: 0 0 1.25em 0; padding: 0 0 0.5625em 0; border: 0; }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: -.25em; padding-bottom: 0.5625em; font-size: inherit; color: #555555; }
.quoteblock .attribution br { display: none; }
.quoteblock .attribution cite { display: block; margin-bottom: 0.625em; }
table thead th, table tfoot th { font-weight: bold; }
table.tableblock.grid-all { border-collapse: separate; border-spacing: 1px; -webkit-border-radius: 4px; border-radius: 4px; border-top: 1px solid #dddddd; border-bottom: 1px solid #dddddd; }
table.tableblock.frame-topbot, table.tableblock.frame-none { border-left: 0; border-right: 0; }
table.tableblock.frame-sides, table.tableblock.frame-none { border-top: 0; border-bottom: 0; }
table.tableblock td .paragraph:last-child p, table.tableblock td > p:last-child { margin-bottom: 0; }
th.tableblock.halign-left, td.tableblock.halign-left { text-align: left; }
th.tableblock.halign-right, td.tableblock.halign-right { text-align: right; }
th.tableblock.halign-center, td.tableblock.halign-center { text-align: center; }
th.tableblock.valign-top, td.tableblock.valign-top { vertical-align: top; }
th.tableblock.valign-bottom, td.tableblock.valign-bottom { vertical-align: bottom; }
th.tableblock.valign-middle, td.tableblock.valign-middle { vertical-align: middle; }
p.tableblock.header { color: #222222; font-weight: bold; }
td > div.verse { white-space: pre; }
ol { margin-left: 1.75em; }
ul li ol { margin-left: 1.5em; }
dl dd { margin-left: 1.125em; }
dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }
ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.625em; }
ul.unstyled, ol.unnumbered, ul.checklist, ul.none { list-style-type: none; }
ul.unstyled, ol.unnumbered, ul.checklist { margin-left: 0.625em; }
ul.checklist li > p:first-child > i[class^="icon-check"]:first-child, ul.checklist li > p:first-child > input[type="checkbox"]:first-child { margin-right: 0.25em; }
ul.checklist li > p:first-child > input[type="checkbox"]:first-child { position: relative; top: 1px; }
ul.inline { margin: 0 auto 0.625em auto; margin-left: -1.375em; margin-right: 0; padding: 0; list-style: none; overflow: hidden; }
ul.inline > li { list-style: none; float: left; margin-left: 1.375em; display: block; }
ul.inline > li > * { display: block; }
.unstyled dl dt { font-weight: normal; font-style: normal; }
ol.arabic { list-style-type: decimal; }
ol.decimal { list-style-type: decimal-leading-zero; }
ol.loweralpha { list-style-type: lower-alpha; }
ol.upperalpha { list-style-type: upper-alpha; }
ol.lowerroman { list-style-type: lower-roman; }
ol.upperroman { list-style-type: upper-roman; }
ol.lowergreek { list-style-type: lower-greek; }
.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }
td.hdlist1 { padding-right: .8em; font-weight: bold; }
td.hdlist1, td.hdlist2 { vertical-align: top; }
.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }
.colist > table tr > td:first-of-type { padding: 0 .8em; line-height: 1; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }
.qanda > ol > li > p > em:only-child { color: #00467f; }
.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: 0 0 0 1px #dddddd; box-shadow: 0 0 0 1px #dddddd; }
.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }
.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }
a.image { text-decoration: none; }
span.footnote, span.footnoteref { vertical-align: super; font-size: 0.875em; }
span.footnote a, span.footnoteref a { text-decoration: none; }
#footnotes { padding-top: 0.75em; padding-bottom: 0.75em; margin-bottom: 0.625em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -.25em 0 .75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em; line-height: 1.3; font-size: 0.875em; margin-left: 1.2em; text-indent: -1.2em; margin-bottom: .2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }
#content #footnotes { margin-top: -0.625em; margin-bottom: 0; padding: 0.75em 0; }
.gist .file-data > table { border: none; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }
div.unbreakable { page-break-inside: avoid; }
.big { font-size: larger; }
.small { font-size: smaller; }
.underline { text-decoration: underline; }
.overline { text-decoration: overline; }
.line-through { text-decoration: line-through; }
.aqua { color: #00bfbf; }
.aqua-background { background-color: #00fafa; }
.black { color: black; }
.black-background { background-color: black; }
.blue { color: #0000bf; }
.blue-background { background-color: #0000fa; }
.fuchsia { color: #bf00bf; }
.fuchsia-background { background-color: #fa00fa; }
.gray { color: #606060; }
.gray-background { background-color: #7d7d7d; }
.green { color: #006000; }
.green-background { background-color: #007d00; }
.lime { color: #00bf00; }
.lime-background { background-color: #00fa00; }
.maroon { color: #600000; }
.maroon-background { background-color: #7d0000; }
.navy { color: #000060; }
.navy-background { background-color: #00007d; }
.olive { color: #606000; }
.olive-background { background-color: #7d7d00; }
.purple { color: #600060; }
.purple-background { background-color: #7d007d; }
.red { color: #bf0000; }
.red-background { background-color: #fa0000; }
.silver { color: #909090; }
.silver-background { background-color: #bcbcbc; }
.teal { color: #006060; }
.teal-background { background-color: #007d7d; }
.white { color: #bfbfbf; }
.white-background { background-color: #fafafa; }
.yellow { color: #bfbf00; }
.yellow-background { background-color: #fafa00; }
span.icon > [class^="icon-"], span.icon > [class*=" icon-"] { cursor: default; }
.admonitionblock td.icon [class^="icon-"]:before { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #005498; color: #003f72; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }
.conum { display: inline-block; color: white !important; background-color: #222222; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; width: 20px; height: 20px; font-size: 12px; font-weight: bold; line-height: 20px; font-family: Arial, sans-serif; font-style: normal; position: relative; top: -2px; letter-spacing: -1px; }
.conum * { color: white !important; }
.conum + b { display: none; }
.conum:after { content: attr(data-value); }
.conum:not([data-value]):empty { display: none; }
.literalblock > .content > pre, .listingblock > .content > pre { -webkit-border-radius: 0; border-radius: 0; }

</style>
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.1/css/font-awesome.min.css">
<style>
/* Foundation stylesheet for CodeRay (to match GitHub theme) | MIT License | http://foundation.zurb.com */
table.CodeRay { border-collapse: collapse; padding: 2px; margin-bottom: 0; border: 0; background: transparent; }
table.CodeRay td { padding: 0 .5em; vertical-align: top; }
table.CodeRay td.line-numbers { text-align: right; color: #999; border-right: 1px solid #e5e5e5; padding-left: 0; }
span.line-numbers { border-right: 1px solid #E5E5E5; color: #999; display: inline-block; margin-right: 0.5em; padding-right: 0.5em; }
.CodeRay td.line-numbers strong, .CodeRay span.line-numbers strong { font-weight: normal; }
.CodeRay .debug { color: white !important; background: blue !important; }
.CodeRay .annotation { color: #007; }
.CodeRay .attribute-name { color: #f08; }
.CodeRay .attribute-value { color: #700; }
.CodeRay .binary { color: #509; }
.CodeRay .comment  { color: #999; font-style: italic; }
.CodeRay .char { color: #04D; }
.CodeRay .char .content { color: #04D; }
.CodeRay .char .delimiter { color: #039; }
.CodeRay .class { color: #458; }
.CodeRay .complex { color: #A08; }
.CodeRay .constant { color: teal; }
.CodeRay .color { color: #0A0; }
.CodeRay .class-variable { color: #369; }
.CodeRay .decorator { color: #B0B; }
.CodeRay .definition { color: #099; }
.CodeRay .directive { color: #088; }
.CodeRay .delimiter { color: black; }
.CodeRay .doc { color: #970; }
.CodeRay .doctype { color: #34b; }
.CodeRay .doc-string { color: #D42; }
.CodeRay .escape  { color: #666; }
.CodeRay .entity { color: #800; }
.CodeRay .error { color: #808; }
.CodeRay .exception { color: #C00; }
.CodeRay .filename { color: #099; }
.CodeRay .function { color: #900; }
.CodeRay .global-variable { color: teal; }
.CodeRay .hex { color: #058; }
.CodeRay .integer  { color: #099; }
.CodeRay .include { color: #B44; }
.CodeRay .inline { color: black; }
.CodeRay .inline .inline { background: #ccc; }
.CodeRay .inline .inline .inline { background: #bbb; }
.CodeRay .inline .inline-delimiter { color: #D14; }
.CodeRay .inline-delimiter { color: #D14; }
.CodeRay .important { color: #f00; }
.CodeRay .interpreted { color: #B2B; }
.CodeRay .instance-variable { color: teal; }
.CodeRay .label { color: #970; }
.CodeRay .local-variable { color: #963; }
.CodeRay .octal { color: #40E; }
.CodeRay .predefined { color: #369; }
.CodeRay .preprocessor { color: #579; }
.CodeRay .pseudo-class { color: #00C; }
.CodeRay .predefined-type { color: #074; }
.CodeRay .reserved, .keyword  { color: #000; }
.CodeRay .key { color: #808; }
.CodeRay .key .delimiter { color: #606; }
.CodeRay .key .char { color: #80f; }
.CodeRay .value { color: #088; }
.CodeRay .regexp { background-color: #fff0ff; }
.CodeRay .regexp .content { color: #808; }
.CodeRay .regexp .delimiter { color: #404; }
.CodeRay .regexp .modifier { color: #C2C; }
.CodeRay .regexp .function  { color: #404; font-weight: bold; }
.CodeRay .string { color: #D20; }
.CodeRay .string .string { }
.CodeRay .string .string .string { background-color: #ffd0d0; }
.CodeRay .string .content { color: #D14; }
.CodeRay .string .char { color: #D14; }
.CodeRay .string .delimiter { color: #D14; }
.CodeRay .shell { color: #D14; }
.CodeRay .shell .content { }
.CodeRay .shell .delimiter { color: #D14; }
.CodeRay .symbol { color: #990073; }
.CodeRay .symbol .content { color: #A60; }
.CodeRay .symbol .delimiter { color: #630; }
.CodeRay .tag, .CodeRay .attribute-name { color: #070; }
.CodeRay .tag-special { color: #D70; }
.CodeRay .type { color: #339; }
.CodeRay .variable  { color: #036; }
.CodeRay .insert { background: #afa; }
.CodeRay .delete { background: #faa; }
.CodeRay .change { color: #aaf; background: #007; }
.CodeRay .head { color: #f8f; background: #505; }
.CodeRay .insert .insert { color: #080; }
.CodeRay .delete .delete { color: #800; }
.CodeRay .change .change { color: #66f; }
.CodeRay .head .head { color: #f4f; }

</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>OGC® GeoPackage Encoding Standard (OGC 12-128r8)</h1>
<span id="author" class="author">Paul Daisey et al.</span><br>
<span id="revnumber">version 0.9.1,</span>
<span id="revdate">2013</span>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_front_matter">Front Matter</a></li>
<li><a href="#_introduction">Introduction</a></li>
<li><a href="#_base">1. Base</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_core">1.1. Core</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_sqlite_container">1.1.1. SQLite Container</a></li>
<li><a href="#spatial_ref_sys">1.1.2. Spatial Reference Systems</a></li>
<li><a href="#_contents">1.1.3. Contents</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_options">2. Options</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_features">2.1. Features</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#sfsql_intro">2.1.1. Simple Features SQL Introduction</a></li>
<li><a href="#_contents_2">2.1.2. Contents</a></li>
<li><a href="#_geometry_encoding">2.1.3. Geometry Encoding</a></li>
<li><a href="#_geometry_types">2.1.4. Geometry Types</a></li>
<li><a href="#_geometry_columns">2.1.5. Geometry Columns</a></li>
<li><a href="#feature_user_data_tables">2.1.6. Vector Feature User Data Tables</a></li>
</ul>
</li>
<li><a href="#_tiles">2.2. Tiles</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_tile_matrix_introduction">2.2.1. Tile Matrix Introduction</a></li>
<li><a href="#_contents_3">2.2.2. Contents</a></li>
<li><a href="#_zoom_levels">2.2.3. Zoom Levels</a></li>
<li><a href="#_tile_encoding_png">2.2.4. Tile Encoding PNG</a></li>
<li><a href="#_tile_encoding_jpeg">2.2.5. Tile Encoding JPEG</a></li>
<li><a href="#_tile_matrix_set">2.2.6. Tile Matrix Set</a></li>
<li><a href="#tile_matrix">2.2.7. Tile Matrix</a></li>
<li><a href="#_tile_pyramid_user_data_tables">2.2.8. Tile Pyramid User Data Tables</a></li>
</ul>
</li>
<li><a href="#_schema">2.3. Schema</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_data_columns">2.3.1. Data Columns</a></li>
<li><a href="#_data_column_constraints">2.3.2. Data Column Constraints</a></li>
</ul>
</li>
<li><a href="#_metadata">2.4. Metadata</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_introduction_2">2.4.1. Introduction</a></li>
<li><a href="#_metadata_table">2.4.2. Metadata Table</a></li>
<li><a href="#_metadata_reference_table">2.4.3. Metadata Reference Table</a></li>
</ul>
</li>
<li><a href="#_other_data_tables">2.5. Other Data Tables</a></li>
<li><a href="#_extension_mechanism">2.6. Extension Mechanism</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_extensions">2.6.1. Extensions</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_registered_extensions">3. Registered Extensions</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_features_2">3.1. Features</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_geometry_types_2">3.1.1. Geometry Types</a></li>
<li><a href="#_spatial_indexes">3.1.2. Spatial Indexes</a></li>
<li><a href="#_geometry_type_triggers">3.1.3. Geometry Type Triggers</a></li>
<li><a href="#_srs_id_triggers">3.1.4. SRS_ID Triggers</a></li>
</ul>
</li>
<li><a href="#_tiles_2">3.2. Tiles</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_zoom_levels_2">3.2.1. Zoom Levels</a></li>
<li><a href="#ext_webp_tiles">3.2.2. Tile Encoding WEBP</a></li>
<li><a href="#ext_tiff_tiles">3.2.3. Tiles Encoding TIFF</a></li>
<li><a href="#ext_nitf_tiles">3.2.4. Tile Encoding NITF</a></li>
</ul>
</li>
<li><a href="#_other_tables">3.3. Other Tables</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_other_geometry_encoding">3.3.1. Other Geometry Encoding</a></li>
<li><a href="#ext_other_tiles">3.3.2. Other Tile Encoding</a></li>
<li><a href="#_other_trigger">3.3.3. Other Trigger</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_security_considerations">4. Security Considerations</a></li>
<li><a href="#abstract_test_suite"> Annex A: Conformance / Abstract Test Suite (Normative)</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_base_2">A.1. Base</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_core_2">A.1.1. Core</a></li>
</ul>
</li>
<li><a href="#_options_2">A.2. Options</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_features_3">A.2.1. Features</a></li>
<li><a href="#_tiles_3">A.2.2. Tiles</a></li>
<li><a href="#_schema_2">A.2.3. Schema</a></li>
<li><a href="#_metadata_2">A.2.4. Metadata</a></li>
<li><a href="#_extension_mechanism_2">A.2.5. Extension Mechanism</a></li>
</ul>
</li>
<li><a href="#_registered_extensions_2">A.3. Registered Extensions</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_features_4">A.3.1. Features</a></li>
<li><a href="#_tiles_4">A.3.2. Tiles</a></li>
<li><a href="#_any_tables">A.3.3. Any Tables</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#background_and_context"> Annex B: Background and Context (Informative)</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_preface">B.1. Preface</a></li>
<li><a href="#_submitting_organizations">B.2. Submitting Organizations</a></li>
<li><a href="#_revision_history">B.3. Revision History</a></li>
<li><a href="#_changes_to_the_ogc_abstract_specification">B.4. Changes to the OGC® Abstract Specification</a></li>
<li><a href="#_changes_to_ogc_implementation_standards">B.5. Changes to OGC® Implementation Standards</a></li>
<li><a href="#_potential_future_work">B.6. Potential Future Work</a></li>
<li><a href="#_contributors">B.7. Contributors</a></li>
<li><a href="#_terms_and_definitions">B.8. Terms and Definitions</a></li>
<li><a href="#_conventions">B.9. Conventions</a></li>
<li><a href="#_uml_notation">B.10. UML Notation</a></li>
</ul>
</li>
<li><a href="#table_definition_sql"> Annex C: Table Definition SQL (Normative)</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_gpkg_spatial_ref_sys">C.1. gpkg_spatial_ref_sys</a></li>
<li><a href="#_gpkg_contents">C.2. gpkg_contents</a></li>
<li><a href="#_gpkg_extension">C.3. gpkg_extension</a></li>
<li><a href="#_gpkg_geometry_columns">C.4. gpkg_geometry_columns</a></li>
<li><a href="#_sample_feature_table_informative">C.5. sample_feature_table (Informative)</a></li>
<li><a href="#_gpkg_tile_matrix_set">C.6. gpkg_tile_matrix_set</a></li>
<li><a href="#_gpkg_tile_matrix">C.7. gpkg_tile_matrix</a></li>
<li><a href="#_sample_tile_pyramid_informative">C.8. sample_tile_pyramid (Informative)</a></li>
<li><a href="#_gpkg_data_columns">C.9. gpkg_data_columns</a></li>
<li><a href="#_gpkg_data_column_constraints">C.10. gpkg_data_column_constraints</a></li>
<li><a href="#_gpkg_metadata">C.11. gpkg_metadata</a></li>
<li><a href="#_gpkg_metadata_reference">C.12. gpkg_metadata_reference</a></li>
</ul>
</li>
<li><a href="#minimal_runtime_sql_functions"> Annex D: Minimal Runtime SQL Functions (Normative)</a></li>
<li><a href="#spatial_index_sql"> Annex E: Spatial Index SQL (Normative)</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_create_virtual_table_sql_template">E.1. Create Virtual Table SQL Template</a></li>
<li><a href="#_load_spatial_index_values">E.2. Load Spatial Index Values</a></li>
<li><a href="#_define_triggers_to_maintain_spatial_index_values">E.3. Define Triggers to Maintain Spatial Index Values</a></li>
</ul>
</li>
<li><a href="#_trigger_definition_sql_informative"> Annex F: Trigger Definition SQL (Informative)</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_geometry_columns_3">F.1. geometry_columns</a></li>
<li><a href="#_gpkg_tile_matrix_2">F.2. gpkg_tile_matrix</a></li>
<li><a href="#_metadata_3">F.3. metadata</a></li>
<li><a href="#_metadata_reference">F.4. metadata_reference</a></li>
<li><a href="#_sample_feature_table">F.5. sample_feature_table</a></li>
<li><a href="#_sample_tile_pyramid">F.6. sample_tile_pyramid</a></li>
</ul>
</li>
<li><a href="#geometry_types"> Annex G: Geometry Types (Normative)</a></li>
<li><a href="#_other_sql_mm_functions_informative"> Annex H: Other SQL/MM Functions (Informative)</a></li>
<li><a href="#tiles_factor2_example_appendix"> Annex I: Tiles Zoom Times Two Example (Informative)</a></li>
<li><a href="#metadata_example_appendix"> Annex J: Hierarchical Metadata Example (Informative)</a></li>
<li><a href="#raster_or_tile_metadata_example_appendix"> Annex K: Raster or Tile Metadata Example (Informative)</a></li>
<li><a href="#_normative_references_normative"> Annex L: Normative References (Normative)</a></li>
<li><a href="#_bibliography_informative"> Annex M: Bibliography (Informative)</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_front_matter">Front Matter</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Copyright © 2012 Envitia<br>
Copyright © 2012 Luciad<br>
Copyright © 2012 Sigma Bravo<br>
Copyright © 2012 The Carbon Project<br>
Copyright © 2012 U.S. Army Geospatial Center<br>
Copyright © 2012 U.S. National Geospatial Intelligence Agency<br></p>
</div>
<div class="paragraph">
<p>The companies listed above have granted the Open Geospatial Consortium, Inc. (OGC) a nonexclusive, royalty-free, paid up, worldwide license to copy and distribute this document and to modify this document and distribute copies of the modified version.
To obtain additional rights of use, visit <a href="http://www.opengeospatial.org/legal/">http://www.opengeospatial.org/legal/</a>.</p>
</div>
<div class="paragraph">
<p><strong>Warning</strong></p>
</div>
<div class="paragraph">
<p>This document is not an OGC Standard. It is distributed for review and comment.
It is subject to change without notice and MAY not be referred to as an OGC Standard.</p>
</div>
<div class="paragraph">
<p>Document type: OGC® Publicly Available Standard<br>
Document subtype: Encoding Standard<br>
Document stage: Draft<br>
Document language: English</p>
</div>
<div class="paragraph">
<p>Recipients of this document are invited to submit, with their comments, notification of any relevant patent rights of which they are aware and to provide supporting documentation.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Mobile device users who require map/geospatial application services and operate in disconnected or limited network connectivity environments are challenged by limited storage capacity and the lack of open format geospatial data to support these applications.
The current situation is that each map/geospatial application requires its own potentially proprietary geospatial data store.
These separate application-specific data stores may contain the same geospatial data, wasting the limited storage available, and requiring custom applications for data translation, replication, and synchronization to enable different map/geospatial applications to share the same world view.
In addition, many existing geospatial data stores are platform-specific, which means that users with different platforms must translate data to share it.</p>
</div>
<div class="paragraph">
<p>An open, standards-based, application-independent, platform-independent, portable, interoperable, self-describing, GeoPackage (GPKG) data container, API and manifest are needed to overcome these challenges and to effectively support multiple map/geospatial applications such as fixed product distribution, local data collection, and geospatially enabled analytics.
This standard is intended to facilitate widespread adoption and use of GeoPackages by both COTS and open-source software applications on enterprise production platforms as well as mobile hand-held devices, given that mobile hand held devices do not yet have the processing power or battery life to effectively tackle difficult geospatial product production and analysis tasks.
An application that accesses a GPKG will make use of the GPKG capabilities it requires; few if any such applications will make use of all GPKG capabilities.</p>
</div>
<div class="paragraph">
<p>This OGC® Encoding Standard defines GeoPackage files for exchange and GeoPackage SQLite Extensions for direct use of vector geospatial features and / or tile matrix sets of earth images and raster maps at various scales.
Direct use means the ability to access and update data in a “native” format without intermediate format translations in an environment (e.g. through an API) that guarantees data model and data set integrity and identical access and update results in response to identical requests from different client applications.</p>
</div>
<div class="paragraph">
<p>A <strong>GeoPackage file</strong> is a platform-independent SQLite database file that contains GeoPackage data and metadata tables shown in <a href="#geopackage_tables_figure">GeoPackage Tables</a>, with specified definitions, integrity assertions, format limitations and content constraints.</p>
</div>
<div id="geopackage_tables_figure" class="imageblock">
<div class="content">
<img src="geopackage-uml.png" alt="GeoPackage Tables">
</div>
<div class="title">Figure 1. GeoPackage Tables</div>
</div>
<div class="paragraph">
<p>A <strong>GeoPackage file</strong> MAY be “empty” (contain user data table(s) for vector features and/or tile matrix pyramids with no row record content) ) or contain one or many vector feature type records and /or one or many tile matrix pyramid tile images.
GeoPackage file metadata can describe GeoPackage data contents and identify external data synchronization sources and targets.
A GeoPackage file MAY contain spatial indexes on feature geometries and SQL triggers to maintain indexes and enforce content constraints.</p>
</div>
<div class="paragraph">
<p>A <strong>GeoPackage SQLite Extension</strong> that MAY provide a minimal set of SQL API runtime functions to support spatial indexes and SQL triggers linked to a SQLite library with specified configuration requirements to provide SQL API access to a GeoPackage file.
A <strong>GeoPackage</strong> is a <strong>GeoPackage file</strong> used with a <strong>GeoPackage SQLite Extension</strong>. A GeoPackage MAY have extensions that are registered in the gpkg_extensions table.</p>
</div>
<div class="paragraph">
<p>This specification does not address the issues listed in the <a href="#_potential_future_work">Potential Future Work</a> clause in <a href="#background_and_context">Background and Context (Informative)</a>, which MAY be addressed in a subsequent version of this specification or by other specifications.</p>
</div>
<div class="paragraph">
<p><em>Attention is drawn to the possibility that some of the elements of this document MAY be the subject of patent rights.
Open Geospatial Consortium Inc. SHALL not be held responsible for identifying any or all such patent rights. However, to date, no such rights have been claimed or identified.</em></p>
</div>
<div class="paragraph">
<p><em>Recipients of this document are requested to submit, with their comments, notification of any relevant patent claims or other intellectual property rights of which they MAY be aware that might be infringed by any implementation of the specification set forth in this document, and to provide supporting documentation.</em></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_base">1. Base</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The required capabilities specified in this clause serve as the base for optional options and registered extensions capabilities specified in clauses <a href="#_options">Options</a> and <a href="#_registered_extensions">Registered Extensions</a>.
All gpkg_* tables and views and all tiles user data tables specified in this standard SHALL have only the specified columns.
Any features user data tables MAY have columns in addition to those specified.
All specified table and column name values SHALL be lowercase.</p>
</div>
<div class="sect2">
<h3 id="_core">1.1. Core</h3>
<div class="paragraph">
<p>The mandatory core capabilities defined in sub clauses and requirement statements of this clause SHALL be implemented by every <strong>GeoPackage</strong>.</p>
</div>
<div class="sect3">
<h4 id="_sqlite_container">1.1.1. SQLite Container</h4>
<div class="paragraph">
<p>A self-contained, single-file, cross-platform, serverless, transactional, open source RDBMS container is desired to simplify production, distribution and use of GeoPackages and guarantee the integrity of the data they contain.
“Self-contained” means that container software requires very minimal support from external libraries or from the operating system.
“Single-file” means that a container not currently opened by any software application consists of a single file in a file system supported by a computing platform operating system.
“Cross-platform” means that a container file MAY be created and loaded with data on one computing platform, and used and updated on another, even if they use different operating systems, file systems, and byte order (endian) conventions.
“Serverless” means that the RDBMS container is implemented without any intermediary server process, and accessed directly by application software.
“Transactional” means that RDBMS transactions guarantee that all changes to data in the container are Atomic, Consistent, Isolated, and Durable (ACID) despite program crashes, operating system crashes, and power failures.</p>
</div>
<div class="sect4">
<h5 id="_data">Data</h5>
<div class="sect5">
<h6 id="_file_format">File Format</h6>
<div id="_requirement-1" class="quoteblock">
<div class="title">Requirement 1</div>
<blockquote>
The GeoPackage file format SHALL be a <a href="http://www.sqlite.org/">SQLite</a> database
<a href="http://sqlite.org/fileformat2.html">version 3 format file</a>, the first 16 bytes of which contain “SQLite format 3”
<span class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnote_1" title="View footnote.">1</a>]</span> in ASCII. <span class="footnote">[<a id="_footnoteref_2" class="footnote" href="#_footnote_2" title="View footnote.">2</a>]</span>
</blockquote>
</div>
<div class="paragraph">
<p>It is RECOMMENDED that data providers whose data is intended for use in multiple applications put the value “GPKG” in the SQLite database header application id field.
However, applications that put application-specific data in a GeoPackage MAY put their own application acronym in the application id field, so this is NOT a GeoPackage requirement.</p>
</div>
<div class="paragraph">
<p>The maximum size of a GeoPackage file is about 140TB.
In practice a lower size limit MAY be imposed by the filesystem to which the file is written.
Many mobile devices require external memory cards to be formatted using the FAT32 file system which imposes a maximum size limit of 4GB.</p>
</div>
</div>
<div class="sect5">
<h6 id="_file_extension_name">File Extension Name</h6>
<div id="_requirement-2" class="quoteblock">
<div class="title">Requirement 2</div>
<blockquote>
GeoPackage files SHALL have the file extension name “.gpkg”.
</blockquote>
</div>
</div>
<div class="sect5">
<h6 id="_integrity_check">Integrity Check</h6>
<div id="_requirement-3" class="quoteblock">
<div class="title">Requirement 3</div>
<blockquote>
The SQLite PRAGMA integrity_check SQL command SHALL return “ok” for a GeoPackage file.
</blockquote>
</div>
<div id="_requirement-4" class="quoteblock">
<div class="title">Requirement 4</div>
<blockquote>
The SQLite PRAGMA foreign_key_check() SQL with no parameter value SHALL return an empty result set indicating no invalid foreign key values for a GeoPackage file.
</blockquote>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_api">API</h5>
<div class="sect5">
<h6 id="_structured_query_language_sql">Structured Query Language (SQL)</h6>
<div id="_requirement-5" class="quoteblock">
<div class="title">Requirement 5</div>
<blockquote>
A GeoPackage SQLite Extension SHALL provide SQL access to GeoPackage file contents via <a href="http://www.sqlite.org/download.html">SQLite sqlite3</a> <a href="#12">[12]</a> software APIs. <span class="footnote">[<a id="_footnoteref_3" class="footnote" href="#_footnote_3" title="View footnote.">3</a>]</span>
</blockquote>
</div>
</div>
<div class="sect5">
<h6 id="_every_gpkg_sqlite_configuration">Every GPKG SQLite Configuration</h6>
<div class="paragraph">
<p>The <a href="http://www.sqlite.org/download.html">SQLite</a> library has many <a href="http://www.sqlite.org/compile.html">compile time</a> and <a href="http://www.sqlite.org/pragma.html">run time</a> options that MAY be used to configure SQLite for different uses.
A GeoPackage application can use the <a href="http://www.sqlite.org/pragma.html#pragma_compile_options">compile options</a> and other SQLite pragmas to get the effective compile and run time option settings and compare them to those required for a particular GeoPackage.</p>
</div>
<div id="_requirement-6" class="quoteblock">
<div class="title">Requirement 6</div>
<blockquote>
Every GeoPackage SQLite Extension SHALL have the SQLite library compile and run time options specified in table <a href="#every_gpkg_sqlite_config_table">Every GeoPackage SQLite Configuration</a>.
</blockquote>
</div>
<table id="every_gpkg_sqlite_config_table" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 1. Every GeoPackage SQLite Configuration</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Option</th>
<th class="tableblock halign-left valign-top">Shall / Not</th>
<th class="tableblock halign-left valign-top">Discussion</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">compile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQLITE_OMIT_AUTOINCREMENT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A number of tables in GeoPackage are specified to have autoincrement columns.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">compile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQLITE_OMIT_DATETIME_FUNCS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>gpkg_contents</code> table <code>last_change</code> column requires timestamps</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">compile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQLITE_OMIT_DEPRECATED</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Shall</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Omit <a href="http://www.sqlite.org/pragma.html#syntax">PRAGMA</a>s marked “Do not use this pragma!” in SQLite documentation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">compile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQLITE_OMIT_FLOATING_POINT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">min/max x/y columns in <code>gpkg_contents</code> table are type REAL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">compile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQLITE_OMIT_PRAGMA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GeoPackage configuration checks will require use of the <a href="http://www.sqlite.org/pragma.html#pragma_compile_options">compile_options</a> pragma.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">compile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQLITE_OMIT_FLAG_PRAGMAS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GeoPackage conformance validation will require use of the <a href="http://www.sqlite.org/pragma.html#pragma_integrity_check">integrity_check</a> pragma</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">compile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQLITE_OMIT_VIEW</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User data tables and some GeoPackage tables MAY be implemented as updateable views.</p></td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="sect3">
<h4 id="spatial_ref_sys">1.1.2. Spatial Reference Systems</h4>
<div class="sect4">
<h5 id="_data_2">Data</h5>
<div class="sect5">
<h6 id="_table_definition">Table Definition</h6>
<div id="_requirement-7" class="quoteblock">
<div class="title">Requirement 7</div>
<blockquote>
A GeoPackage file SHALL include a <code>gpkg_spatial_ref_sys</code> table per table <a href="#gpkg_spatial_ref_sys_cols">Spatial Ref Sys Table or View Definition</a> and table <a href="#gpkg_spatial_ref_sys_sql">gpkg_spatial_ref_sys Table Definition SQL</a>.
</blockquote>
</div>
<div class="paragraph">
<p>A table named <code>gpkg_spatial_ref_sys</code> is the first component of the standard SQL schema for simple features described in clause <a href="#sfsql_intro">Simple Features SQL Introduction</a> below.
The coordinate reference system definitions it contains are referenced by the GeoPackage <code>gpkg_contents</code> and <code>gpkg_geometry_columns</code> tables to relate the vector and tile data in user tables to locations on the earth.</p>
</div>
<div class="paragraph">
<p>The <code>gpkg_spatial_ref_sys</code> table includes at a minimum the columns specified in SQL/MM (ISO 13249-3) <a href="#16">[16]</a> and shown in <a href="#gpkg_spatial_ref_sys_cols">Spatial Ref Sys Table or View Definition</a> below containing data that defines spatial reference systems.
Views of this table MAY be used to provide compatibility with the <a href="http://www.iso.org/iso/home/store/catalogue_ics/catalogue_detail_ics.htm?csnumber=53698">SQL/MM</a> (see <a href="#sqlmm_gpkg_spatial_ref_sys_sql">SQL/MM View of gpkg_spatial_ref_sys Definition SQL</a>) and OGC <a href="http://portal.opengeospatial.org/files/?artifact_id=25354">Simple Features SQL</a> <a href="#3">[3]</a><a href="#14">[14]</a><a href="#15">[15]</a> (Table 21) specifications.</p>
</div>
<table id="gpkg_spatial_ref_sys_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 2. Spatial Ref Sys Table or View Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Column Type</th>
<th class="tableblock halign-left valign-top">Column Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>srs_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Human readable name of this SRS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>srs_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique identifier for each Spatial Reference System within a GeoPackage file</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>organization</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Case-insensitive name of the defining organization e.g. EPSG or epsg</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>organization_coordsys_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Numeric ID of the Spatial Reference System assigned by the organization</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>definition</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Well-known Text Representation of the Spatial Reference System</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>text</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Human readable description of this SRS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>See <a href="#gpkg_spatial_ref_sys_sql">gpkg_spatial_ref_sys Table Definition SQL</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_table_data_values">Table Data Values</h6>
<div id="_requirement-8" class="quoteblock">
<div class="title">Requirement 8</div>
<blockquote>
The <code>gpkg_spatial_ref_sys</code> table in a GeoPackage SHALL contain a record for
organization <a href="http://www.epsg.org/Geodetic.html">EPSG</a> or epsg and <code>organization_coordsys_id</code> <a href="http://www.epsg-registry.org/report.htm?type=selection&amp;entity=urn:ogc:def:crs:EPSG::4326&amp;reportDetail=long&amp;title=WGS%2084&amp;style=urn:uuid:report-style:default-with-code&amp;style_name=OGP%20Default%20With%20Code">4326</a> for <a href="http://www.google.com/search?as_q=WGS-84">WGS-84</a>, a record with an <code>srs_id</code> of -1, an organization of “NONE”, an <code>organization_coordsys_id</code> of -1, and definition “undefined” for undefined Cartesian coordinate reference systems, and a record with an <code>srs_id</code> of 0, an organization of “NONE”, an <code>organization_coordsys_id</code> of 0, and definition “undefined” for undefined geographic coordinate reference systems.
</blockquote>
</div>
<div id="_requirement-9" class="quoteblock">
<div class="title">Requirement 9</div>
<blockquote>
The <code>gpkg_spatial_ref_sys</code> table in a GeoPackage file SHALL contain records to define all spatial reference systems used by features and tiles in a GeoPackage.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_contents">1.1.3. Contents</h4>
<div class="sect4">
<h5 id="_data_3">Data</h5>
<div class="sect5">
<h6 id="_table_definition_2">Table Definition</h6>
<div id="_requirement-10" class="quoteblock">
<div class="title">Requirement 10</div>
<blockquote>
A GeoPackage file SHALL include a <code>gpkg_contents</code> table per table <a href="#gpkg_contents_cols">Contents Table or View Definition</a> and <a href="#gpkg_contents_sql">gpkg_contents Table Definition SQL</a>.
</blockquote>
</div>
<div class="paragraph">
<p>The purpose of the <code>gpkg_contents</code> table is to provide identifying and descriptive information that an application can display to a user in a menu of geospatial data that is available for access and/or update.</p>
</div>
<table id="gpkg_contents_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 3. Contents Table or View Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>table_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the tiles, or feature table</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>data_type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type of data stored in the table:. “features” per clause <a href="#_features">Features</a>, “tiles” per clause <a href="#_tiles">Tiles</a>, or an implementer-defined value for other data tables per clause <a href="#_other_data_tables">Other Data Tables</a>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>identifier</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A human-readable identifier (e.g. short name) for the table_name content</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A human-readable description for the table_name content</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">“”</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>last_change</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">timestamp value in ISO 8601 format as defined by the strftime function <em>%Y-%m-%dT%H:%M:%fZ</em> format string applied to the current time</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>strftime('%Y-%m-%dT%H:%M:%fZ', CURRENT_TIMESTAMP)</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>min_x</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bounding box for all content in table_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>min_y</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bounding box for all content in table_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>max_x</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bounding box for all content in table_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>max_y</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bounding box for all content in table_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>srs_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spatial Reference System ID: <code>gpkg_spatial_ref_sys.srs_id</code>; when <code>data_type</code> is features, SHALL also match <code>gpkg_geometry_columns.srs_id</code>; When data_type is tiles, SHALL also match gpkg_tile_matrix_set.srs.id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FK</p></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>The <code>gpkg_contents</code> table is intended to provide a list of all geospatial contents in the GeoPackage.
The <code>data_type</code> specifies the type of content.
The bounding box (<code>min_x</code>, <code>min_y</code>, <code>max_x</code>, <code>max_y</code>) provides an informative bounding box (not necessarily minimum bounding box) of the content.
If the <code>srs_id</code> column value references a geographic coordinate reference system (CRS), then the min/max x/y values are in decimal degrees; otherwise, the srs_id references a projected CRS and the min/max x/y values are in the units specified by that CRS.</p>
</div>
<div class="paragraph">
<p>See <a href="#gpkg_contents_sql">gpkg_contents Table Definition SQL</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_table_data_values_2">Table Data Values</h6>
<div id="_requirement-11" class="quoteblock">
<div class="title">Requirement 11</div>
<blockquote>
The <code>table_name</code> column value in a <code>gpkg_contents</code> table row SHALL contain the name of a SQLite table or view.
</blockquote>
</div>
<div id="_requirement-12" class="quoteblock">
<div class="title">Requirement 12</div>
<blockquote>
Values of the <code>gpkg_contents</code> table <code>last_change</code> column SHALL be in <a href="http://www.iso.org/iso/catalogue_detail?csnumber=40874">ISO 8601</a> format containing a complete date plus UTC hours, minutes, seconds and a decimal fraction of a second, with a ‘Z’ (‘zulu’) suffix indicating UTC. <span class="footnote">[<a id="_footnoteref_4" class="footnote" href="#_footnote_4" title="View footnote.">4</a>]</span>
</blockquote>
</div>
<div id="_requirement-13" class="quoteblock">
<div class="title">Requirement 13</div>
<blockquote>
Values of the <code>gpkg_contents</code> table <code>srs_id</code> column SHALL reference values in the <code>gpkg_spatial_ref_sys</code> table <code>srs_id</code> column.
</blockquote>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_options">2. Options</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The optional capabilities specified in this clause depend on the required capabilities specified in clause <a href="#_base">Base</a> above.</p>
</div>
<div id="_requirement-14" class="quoteblock">
<div class="title">Requirement 14</div>
<blockquote>
A Valid GeoPackage SHALL contain features per clause <a href="#_features">Features</a> and/or tiles per clause <a href="#_tiles">Tiles</a> and row(s) in the <code>gpkg_contents</code> table with lowercase <code>data_type</code> column values of “features” and/or “tiles” describing the user data tables.
</blockquote>
</div>
<div class="sect2">
<h3 id="_features">2.1. Features</h3>
<div class="paragraph">
<p>The optional capabilities defined in sub clauses and requirement statements of this clause MAY be implemented by any GeoPackage file.</p>
</div>
<div class="sect3">
<h4 id="sfsql_intro">2.1.1. Simple Features SQL Introduction</h4>
<div class="paragraph">
<p>Vector feature data represents geolocated entities including conceptual ones such as districts, real world objects such as roads and rivers, and observations thereof.
International specifications <a href="#13">[13]</a><a href="#14">[14]</a><a href="#15">[15]</a><a href="#16">[16]</a> have standardized practices for the storage, access and use of vector geospatial features and geometries via SQL in relational databases.
The first component of the SQL schema for vector features in a GeoPackage is the <code>gpkg_spatial_ref_sys</code> table defined in clause <a href="#spatial_ref_sys">Spatial Reference Systems</a> above.
Other components are defined below.</p>
</div>
<div class="paragraph">
<p>In a GeoPackage file, “simple” features are geolocated using a linear geometry subset of the SQL/MM (ISO 13249-3) <a href="#16">[16]</a> geometry model shown in <a href="#core_geometry_model_figure">Core Geometry Model</a> below.</p>
</div>
<div id="core_geometry_model_figure" class="imageblock">
<div class="content">
<img src="core-geometry-model.png" alt="Core geometry model">
</div>
<div class="title">Figure 2. Core Geometry Model</div>
</div>
<div class="paragraph">
<p>The instantiable (not abstract) geometry types defined in this Standard are restricted to 0, 1 and 2-dimensional geometric objects that exist in 2, 3 or 4-dimensional coordinate space (R2, R3 or R4).
Geometry values in R2 have points with coordinate values for x and y.
Geometry values in R3 have points with coordinate values for x, y and z or for x, y and m.
Geometry values in R4 have points with coordinate values for x, y, z and m.
The interpretation of the coordinates is subject to the coordinate reference systems associated to the point.
All coordinates within a geometry object should be in the same coordinate reference systems.</p>
</div>
<div class="paragraph">
<p>Geometries MAY include z coordinate values.
The z coordinate value traditionally represents the third dimension (i.e. 3D).
In a Geographic Information System (GIS) this may be height above or below sea level.
For example: A map might have a point identifying the position of a mountain peak by its location on the earth, with the x and y coordinate values, and the height of the mountain, with the z coordinate value.</p>
</div>
<div class="paragraph">
<p>Geometries MAY include m coordinate values.
The m coordinate value allows the application environment to associate some measure with the point values.
For example: A stream network may be modeled as multilinestring value with the m coordinate values measuring the distance from the mouth of stream.</p>
</div>
<div class="paragraph">
<p>All geometry types described in this standard are defined so that instances of Geometry are topologically closed, i.e. all represented geometries include their boundary as point sets.
This does not affect their representation, and open version of the same classes MAY be used in other circumstances, such as topological representations.</p>
</div>
<div class="paragraph">
<p>A brief description of each geometry type is provided below.
A more detailed description can be found in ISO 13249-3 <a href="#16">[16]</a>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Geometry: the root of the geometry type hierarchy.</p>
</li>
<li>
<p>Point: a single location in space.
Each point has an X and Y coordinate.
A point MAY optionally also have a Z and/or an M value.</p>
</li>
<li>
<p>Curve: the base type for all 1-dimensional geometry types.
A 1-dimensional geometry is a geometry that has a length, but no area.
A curve is considered simple if it does not intersect itself (except at the start and end point).
A curve is considered closed its start and end point are coincident.
A simple, closed curve is called a ring.</p>
</li>
<li>
<p>LineString: A Curve that connects two or more points in space.</p>
</li>
<li>
<p>Surface: the base type for all 2-dimensional geometry types.
A 2-dimensional geometry is a geometry that has an area.</p>
</li>
<li>
<p>CurvePolygon: A planar surface defined by an exterior ring and zero or more interior ring.
Each ring is defined by a Curve instance.</p>
</li>
<li>
<p>Polygon: A restricted form of CurvePolygon where each ring is defined as a simple, closed LineString.</p>
</li>
<li>
<p>GeometryCollection: A collection of zero or more Geometry instances.</p>
</li>
<li>
<p>MultiSurface: A restricted form of GeometryCollection where each Geometry in the collection must be of type Surface.</p>
</li>
<li>
<p>MultiPolygon: A restricted form of MultiSurface where each Surface in the collection must be of type Polygon.</p>
</li>
<li>
<p>MultiCurve: A restricted form of GeometryCollection where each Geometry in the collection must be of type Curve.</p>
</li>
<li>
<p>MultiLineString: A restricted form of MultiCurve where each Curve in the collection must be of type LineString.</p>
</li>
<li>
<p>MultiPoint: A restricted form of GeometryCollection where each Geometry in the collection must be of type Point.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_contents_2">2.1.2. Contents</h4>
<div class="sect4">
<h5 id="_data_4">Data</h5>
<div class="sect5">
<h6 id="_contents_table_features_row">Contents Table – Features Row</h6>
<div id="_requirement-15" class="quoteblock">
<div class="title">Requirement 15</div>
<blockquote>
The <code>gpkg_contents</code> table SHALL contain a row with a lowercase <code>data_type</code> column value of “features” for each vector features user data table or view.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_geometry_encoding">2.1.3. Geometry Encoding</h4>
<div class="sect4">
<h5 id="_data_5">Data</h5>
<div class="sect5">
<h6 id="gpb_format">BLOB Format</h6>
<div id="_requirement-16" class="quoteblock">
<div class="title">Requirement 16</div>
<blockquote>
A GeoPackage file SHALL store feature table geometries with or without optional elevation (Z) and/or measure (M) values in SQL BLOBs using the GeoPackageBinary format specified in table <a href="#gpb_spec">GeoPackage SQL Geometry Binary Format</a> and clause <a href="#gpb_format">BLOB Format</a>.
</blockquote>
</div>
<div id="gpb_spec" class="listingblock">
<div class="title">GeoPackage SQL Geometry Binary Format</div>
<div class="content">
<pre>GeoPackageBinary {
  byte[2] magic = 0x4750; <i class="conum" data-value="1"></i><b>(1)</b>
  byte version;           <i class="conum" data-value="2"></i><b>(2)</b>
  byte flags;             <i class="conum" data-value="3"></i><b>(3)</b>
  int32 srs_id;
  double[] envelope;      <i class="conum" data-value="4"></i><b>(4)</b>
  WKBGeometry geometry;   <i class="conum" data-value="5"></i><b>(5)</b>
}</pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><em>GP</em> in ASCII</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>8-bit unsigned integer, 0 = version 1</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>flags layout:</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>see flags envelope contents indicator code below</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>per  ISO 13249-3 <a href="#16">[16]</a> clause 5.1.46 <span class="footnote">[<a id="_footnoteref_5" class="footnote" href="#_footnote_5" title="View footnote.">5</a>]</span></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Well-Known Binary as defined in ISO 13249-3 <a href="#16">[16]</a> does not provide a standardized encoding for an empty point set (i.e., <em>Point Empty</em> in Well-Known Text).
In GeoPackage files these points SHALL be encoded as a Point where each coordinate value is set to an IEEE-754 quiet NaN value.
GeoPackage files SHALL use big endian 0x7ff8000000000000 or little endian 0x000000000000f87f as the binary encoding of the NaN values.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_api_2">API</h5>
<div class="sect5">
<h6 id="_minimal_runtime_sql_functions">Minimal Runtime SQL Functions</h6>
<div class="paragraph">
<p>In contrast to functions in application code or a runtime library, triggers are part of the SQLite database file.
When an application writes to a GeoPackage file that it did not create itself then there is the possibility that it will invoke a trigger that calls a function that the application’s runtime library does not provide.
To avoid this interoperability problem, a small set of functions on the GeoPackageBinary geometry specified in clause <a href="#gpb_format">BLOB Format</a> are defined in <a href="#minimal_runtime_sql_functions">Minimal Runtime SQL Functions (Normative)</a>.
Every implementation can be sure that triggers that only use these functions in addition to those provided by SQLite will work as intended across implementations.
<span class="footnote">[<a id="_footnoteref_6" class="footnote" href="#_footnote_6" title="View footnote.">6</a>]</span>
<span class="footnote">[<a id="_footnoteref_7" class="footnote" href="#_footnote_7" title="View footnote.">7</a>]</span></p>
</div>
<div id="_requirement-17" class="quoteblock">
<div class="title">Requirement 17</div>
<blockquote>
A GeoPackage SQLite Extension MAY provide SQL function support for triggers in GeoPackage file.
One that does so SHALL provide the minimal runtime SQL functions listed in <a href="#minimal_runtime_sql_functions">Minimal Runtime SQL Functions (Normative)</a> table <a href="#minimal_runtime_sql_functions_table">Minimal Runtime SQL Functions</a>.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_geometry_types">2.1.4. Geometry Types</h4>
<div class="sect4">
<h5 id="_data_6">Data</h5>
<div class="sect5">
<h6 id="_core_types">Core Types</h6>
<div id="_requirement-18" class="quoteblock">
<div class="title">Requirement 18</div>
<blockquote>
A GeoPackage file SHALL store feature table geometries with the basic simple feature geometry types (Geometry, Point, LineString, Polygon, MultiPoint, MultiLineString, MultiPolygon, GeomCollection) in <a href="#geometry_types">Geometry Types (Normative)</a> <a href="#geometry_types_core">Geometry Type Codes (Core)</a> in the GeoPackageBinary geometry encoding format.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_geometry_columns">2.1.5. Geometry Columns</h4>
<div class="sect4">
<h5 id="_data_7">Data</h5>
<div class="sect5">
<h6 id="_table_definition_3">Table Definition</h6>
<div id="_requirement-19" class="quoteblock">
<div class="title">Requirement 19</div>
<blockquote>
A GeoPackage file with a <code>gpkg_contents</code> table row with a “features” <code>data_type</code> SHALL contain a <code>gpkg_geometry_columns</code> table or updateable view per <a href="#gpkg_geometry_columns_cols">Geometry Columns Table or View Definition</a> and <a href="#gpkg_geometry_columns_sql">gpkg_geometry_columns Table Definition SQL</a>.
</blockquote>
</div>
<div class="paragraph">
<p>The second component of the SQL schema for vector features in a GeoPackage is a <code>gpkg_geometry_columns</code> table that
identifies the geometry columns in tables that contain user data representing features.</p>
</div>
<table id="gpkg_geometry_columns_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 4. Geometry Columns Table or View Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>table_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the table containing the geometry column</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK, FK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>column_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of a column in the feature table that is a Geometry Column</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>geometry_type_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name from <a href="#geometry_types_core">Geometry Type Codes (Core)</a> or <a href="#geometry_types_extension">Geometry Type Codes (Extension)</a> in <a href="#geometry_types">Geometry Types (Normative)</a></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>srs_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spatial Reference System ID: <code>gpkg_spatial_ref_sys.srs_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>z</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0: z values prohibited; 1: z values mandatory; 2: z values optional</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>m</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0: m values prohibited; 1: m values mandatory; 2: m values optional</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>The FK on <code>gpkg_geometry_columns.srs_id</code> references the PK on <code>gpkg_spatial_ref_sys.srs_id</code> to ensure that geometry columns are only defined in feature tables for defined spatial reference systems.</p>
</div>
<div class="paragraph">
<p>Views of this table or view MAY be used to provide compatibility with the SQL/MM <a href="#16">[16]</a> <a href="#sqlmm_gpkg_geometry_columns_sql">SQL/MM View of gpkg_geometry_columns Definition SQL</a> and OGC Simple Features SQL <a href="#13">[13]</a><a href="#14">[14]</a><a href="#15">[15]</a> <a href="#sfsql_gpkg_geometry_columns_sql">SF/SQL VIEW of gpkg_geometry_columns Definition SQL</a> specifications.</p>
</div>
<div class="paragraph">
<p>See <a href="#gpkg_geometry_columns_sql">gpkg_geometry_columns Table Definition SQL</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_table_data_values_3">Table Data Values</h6>
<div id="_requirement-20" class="quoteblock">
<div class="title">Requirement 20</div>
<blockquote>
The <code>gpkg_geometry_columns</code> table or updateable view SHALL contain one row record for each geometry column in each vector feature data table (clause <a href="#feature_user_data_tables">Vector Feature User Data Tables</a>) in a GeoPackage.
</blockquote>
</div>
<div id="_requirement-21" class="quoteblock">
<div class="title">Requirement 21</div>
<blockquote>
Values of the <code>gpkg_geometry_columns</code> <code>table_name</code> column SHALL reference values in the <code>gpkg_contents</code> <code>table_name</code> column for rows with a <code>data_type</code> of <em>features</em> or <em>tiles</em>.
</blockquote>
</div>
<div id="_requirement-22" class="quoteblock">
<div class="title">Requirement 22</div>
<blockquote>
The <code>column_name</code> column value in a <code>gpkg_geometry_columns</code> row SHALL be the name of a column in the table or view specified by the <code>table_name</code> column value for that row.
</blockquote>
</div>
<div id="_requirement-23" class="quoteblock">
<div class="title">Requirement 23</div>
<blockquote>
The <code>geometry_type_name</code> value in a <code>gpkg_geometry_columns</code> row SHALL be one of the uppercase geometry type names specified in <a href="#geometry_types">Geometry Types (Normative)</a>.
</blockquote>
</div>
<div id="_requirement-24" class="quoteblock">
<div class="title">Requirement 24</div>
<blockquote>
The <code>srs_id</code> value in a <code>gpkg_geometry_columns</code> table row SHALL be an <code>srs_id</code> column value from the <code>gpkg_spatial_ref_sys</code> table.
</blockquote>
</div>
<div id="_requirement-25" class="quoteblock">
<div class="title">Requirement 25</div>
<blockquote>
The z value in a <code>gpkg_geometry_columns</code> table row SHALL be one of 0, 1, or 2.
</blockquote>
</div>
<div id="_requirement-26" class="quoteblock">
<div class="title">Requirement 26</div>
<blockquote>
The m value in a <code>gpkg_geometry_columns</code> table row SHALL be one of 0, 1, or 2.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="feature_user_data_tables">2.1.6. Vector Feature User Data Tables</h4>
<div class="sect4">
<h5 id="_data_8">Data</h5>
<div class="sect5">
<h6 id="_table_definition_4">Table Definition</h6>
<div class="paragraph">
<p>The third component of the SQL schema for vector features in a GeoPackage described in clause <a href="#sfsql_intro">Simple Features SQL Introduction</a> above are tables that contain user data representing features.
Feature attributes are columns in a feature table, including geometries.
Features are rows in a feature table.
<span class="footnote">[<a id="_footnoteref_8" class="footnote" href="#_footnote_8" title="View footnote.">8</a>]</span></p>
</div>
<div id="_requirement-27" class="quoteblock">
<div class="title">Requirement 27</div>
<blockquote>
A GeoPackage file MAY contain tables or updateable views containing vector features.
Every such feature table or view in a GeoPackage file SHALL have a primary key defined on one integer column per <a href="#example_feature_table_cols">EXAMPLE : Sample Feature Table or View Definition</a> and <a id="example_feature_table_sql"></a>.
</blockquote>
</div>
<div class="paragraph">
<p>The integer primary key of a feature table allows features to be linked to row level metadata records in the <code>gpkg_metadata</code> table by rowid values in the <code>gpkg_metadata_reference</code> table as described in clause <a href="#_metadata_reference_table">Metadata Reference Table</a> below.</p>
</div>
<div id="_requirement-28" class="quoteblock">
<div class="title">Requirement 28</div>
<blockquote>
A feature table SHALL have only one geometry column.
</blockquote>
</div>
<div class="paragraph">
<p>Feature data models from non-GeoPackage implementations that have multiple geometry columns per feature table MAY be transformed into GeoPackage implementations with a separate feature table for each geometry type whose rows have matching integer primary key values that allow them to be joined in a view with the same column definitions as the non-GeoPackage feature data model with multiple geometry columns.</p>
</div>
<div id="_requirement-29" class="quoteblock">
<div class="title">Requirement 29</div>
<blockquote>
The columns of a vector feature user data table SHALL only be declared using one of the data types specified in table <a href="#vector_feature_data_types">Vector Feature Data Types</a>.
</blockquote>
</div>
<table id="vector_feature_data_types" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 5. Vector Feature Data Types</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Data Type</th>
<th class="tableblock halign-left valign-top">Size and Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BOOLEAN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A boolean value representing true or false. Stored as SQLite INTEGER with value 0 for false or 1 for true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TINYINT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8-bit signed two&#8217;s complement integer. Stored as SQLite INTEGER with values in the range [-128, 127]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMALLINT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16-bit signed two&#8217;s complement integer. Stored as SQLite INTEGER with values in the range [-32768, 32767]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MEDIUMINT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32-bit signed two&#8217;s complement integer. Stored as SQLite INTEGER with values in the range [-2147483648, 2147483647]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">INT, INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64-bit signed two&#8217;s complement integer. Stored as SQLite INTEGER with values in the range [-9223372036854775808, 9223372036854775807]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">FLOAT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32-bit IEEE floating point number Stored as SQLite REAL limited to values that can be represented as a 4-byte IEEE floating point number</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOUBLE, REAL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64-bit IEEE floating point number Stored as SQLite REAL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Variable length string encoded in either UTF-8 or UTF-16, determined by PRAGMA encoding; see <a href="http://www.sqlite.org/pragma.html#pragma_encoding">http://www.sqlite.org/pragma.html#pragma_encoding</a> Stored as SQLite TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BLOB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Variable length binary data Stored as SQLite BLOB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;geometry_type_name&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Geometry encoded as per clause <a href="#_geometry_encoding">Geometry Encoding</a>. &lt;geometry type_name&gt; is one of the geometry types listed in <a href="#geometry_types">Geometry Types (Normative)</a>. XY, XYZ, XYM and XYZM geometries use the same data type. Stored as SQLite BLOB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DATE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO-8601 date string encoded in either UTF-8 or UTF-16. See TEXT. Stored as SQLite TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DATETIME</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO-8601 date/time string encoded in either UTF-8 or UTF-16. See TEXT. Stored as SQLite TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DECIMAL_TEXT(m,d)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Decimal value with maximum digits (precision) (m) from 1 to 65 and digits to the right of the decimal point (scale) (d) from 0 to 30 1</p></td>
</tr>
</tbody>
</table>

<table id="example_feature_table_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 6. EXAMPLE : Sample Feature Table or View Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Autoincrement primary key</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>geometry</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GEOMETRY</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GeoPackage Geometry</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>text_attribute</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Text attribute of feature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real_attribute</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REAL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Real attribute of feature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean_attribute</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BOOLEAN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean attribute of feature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>raster_or_photo</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BLOB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Photograph of the area</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>See <a href="#example_feature_table_sql">sample_feature_table Table Definition SQL</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_table_data_values_4">Table Data Values</h6>
<div class="paragraph">
<p>A feature geometry is stored in a geometry column specified by the lowercase <code>geometry_column</code> value for the feature table in the <code>gpkg_geometry_columns</code> table defined in clause <a href="#_geometry_columns">Geometry Columns</a> above.</p>
</div>
<div class="paragraph">
<p>The geometry type of a feature geometry column specified in the <code>gpkg_geometry_columns</code> table <code>geometry_type_name</code> column is a name from <a href="#geometry_types">Geometry Types (Normative)</a>.</p>
</div>
<div id="_requirement-30" class="quoteblock">
<div class="title">Requirement 30</div>
<blockquote>
Feature table geometry columns SHALL contain geometries of the type or assignable for the type specified for the column by the <code>gpkg_geometry_columns</code> table <code>geometry_type_name</code> column value <span class="footnote">[<a id="_footnoteref_9" class="footnote" href="#_footnote_9" title="View footnote.">9</a>]</span>.
</blockquote>
</div>
<div class="paragraph">
<p>Geometry subtypes are assignable as defined in <a href="#geometry_types">Geometry Types (Normative)</a> and shown in part in <a href="#core_geometry_model_figure">Core Geometry Model</a>.
For example, if the <code>geometry_type_name</code> value in the <code>gpkg_geometry_columns</code> table is for a geometry type like POINT that has no subtypes, then the feature table geometry column MAY only contain geometries of that type.
If the geometry <code>type_name</code> value in the <code>gpkg_geometry_columns</code> table is for a geometry type like GEOMCOLLECTION that has subtypes, then the feature table geometry column MAY only contain geometries of that type or any of its direct or indirect subtypes.
If the geometry <code>type_name</code> is GEOMETRY (the root of the geometry type hierarchy) then the feature table geometry column MAY contain geometries of any geometry type.
The presence or absence of optional elevation (Z) and/or measure (M) values in a geometry does not change its type or assignability.</p>
</div>
<div class="paragraph">
<p>The spatial reference system type of a feature geometry column specified by a <code>gpkg_geometry_columns</code> table <code>srs_id</code> column value is a code from the <code>gpkg_spatial_ref_sys</code> table <code>srs_id</code> column.</p>
</div>
<div id="_requirement-31" class="quoteblock">
<div class="title">Requirement 31</div>
<blockquote>
Feature table geometry columns SHALL contain geometries with the <code>srs_id</code> specified for the column by the <code>gpkg_geometry_columns</code> table <code>srs_id</code> column value.
</blockquote>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_tiles">2.2. Tiles</h3>
<div class="paragraph">
<p>The optional capabilities defined in sub-clauses and requirement statements of this clause MAY be implemented by an GeoPackage file.</p>
</div>
<div class="sect3">
<h4 id="_tile_matrix_introduction">2.2.1. Tile Matrix Introduction</h4>
<div class="paragraph">
<p>There are a wide variety of commercial and open source conventions for storing, indexing, accessing and describing tile in tile pyramids. Unfortunately, no applicable existing consensus, national or international specifications hav standardized practices in this domain. In addition, various image file formats have different representationa capabilities, and include different self-descriptive metadata. The tile store data / metadata model and convention described below support direct use of tiles in a GeoPackage in two ways.
First, they specify how existing application MAY create SQL Views of the data /metadata model on top of existing application tables that that follow differen interface conventions.
Second, they include and expose enough metadata information at both the dataset and record level to allow applications that use GeoPackage data to discover its characteristics without having to parse all of the store images.
Applications that store GeoPackage tile data, which are presumed to have this information available, SHALL stor sufficient metadata to enable its intended use.</p>
</div>
<div class="paragraph">
<p>The GeoPackage tile store data model MAY be implemented directly as SQL tables in a SQLite database for maximu performance, or as SQL views on top of tables in an existing SQLite tile store for maximum adaptability and loos coupling to enable widespread implementation.</p>
</div>
<div class="paragraph">
<p>A GeoPackage CAN store multiple raster and tile pyramid data sets in different tables or views in the same container.
<span class="footnote">[<a id="_footnoteref_10" class="footnote" href="#_footnote_10" title="View footnote.">10</a>]</span> “Tile pyramid” refers to the concept of pyramid structure of tiles of different spatial extent an resolution at different zoom levels, and the tile data itself.
“Tile matrix” refers to rows and columns of tiles tha all have the same spatial extent and resolution at a particular zoom level.
“Tile matrix set” refers to the definitio of a tile pyramid’s tiling structure.</p>
</div>
<div class="paragraph">
<p>The tables or views that implement the GeoPackage tile store data / metadata model are described and discusse individually in the following subsections.</p>
</div>
</div>
<div class="sect3">
<h4 id="_contents_3">2.2.2. Contents</h4>
<div class="sect4">
<h5 id="_data_9">Data</h5>
<div class="sect5">
<h6 id="_contents_table_tiles_row">Contents Table – Tiles Row</h6>
<div id="_requirement-32" class="quoteblock">
<div class="title">Requirement 32</div>
<blockquote>
The <code>gpkg_contents</code> table SHALL contain a row with a <code>data_type</code> column value of “tiles” for eac tile pyramid user data table or view.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_zoom_levels">2.2.3. Zoom Levels</h4>
<div class="paragraph">
<p>In a GeoPackage, zoom levels are integers in sequence from 0 to n that identify tile matrix layers in a tile matrix se that contain tiles of decreasing spatial extent and finer spatial resolution.
Adjacent zoom levels immediately preced or follow each other and differ by a value of 1.
Pixel sizes are real numbers in the terrain units of the spatia reference system of a tile image specifying the dimensions of the real world area represented by one pixel.
Pixel size MAY vary by a constant factor or by different factors or intervals between some or all adjacent zoom levels in a til matrix set.
In the commonly used "zoom times two" convention, pixel sizes vary by a factor of 2 between all adjacent zoom levels, as shown in the example in <a href="#tiles_factor2_example_appendix">Tiles Zoom Times Two Example (Informative)</a>.
Other "zoom other intervals" conventions use different factors o irregular intervals with pixel sizes chosen for intuitive cartographic representation of raster data, or to coincid with the original pixel size of commonly used global image products.
See WMTS Annex E for additional examples of both conventions.</p>
</div>
<div class="sect4">
<h5 id="_data_10">Data</h5>
<div class="sect5">
<h6 id="_zoom_times_two">Zoom Times Two</h6>
<div id="_requirement-33" class="quoteblock">
<div class="title">Requirement 33</div>
<blockquote>
In a GeoPackage file that contains a tile matrix user data table that contains tile data, b default <span class="footnote">[<a id="_footnoteref_11" class="footnote" href="#_footnote_11" title="View footnote.">11</a>]</span>, zoom level pixel sizes for that table SHALL vary by a factor of 2 between adjacent zoo levels in the tile matrix metadata table.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_tile_encoding_png">2.2.4. Tile Encoding PNG</h4>
<div class="sect4">
<h5 id="_data_11">Data</h5>
<div class="sect5">
<h6 id="_mime_type_png">MIME Type PNG</h6>
<div id="_requirement-34" class="quoteblock">
<div class="title">Requirement 34</div>
<blockquote>
In a GeoPackage file that contains a tile matrix user data table that contains tile data that is no <a href="http://www.ietf.org/rfc/rfc2046.txt">MIME type</a> <a href="http://www.jpeg.org/public/jfif.pdf">image/jpeg</a>, by default SHALL store that tile data in <a href="http://www.iana.org/assignments/media-types/index.html">MIME type http://libpng.org/pub/png/[image/png</a>. <span class="footnote">[<a id="_footnoteref_12" class="footnote" href="#_footnote_12" title="View footnote.">12</a>]</span>
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_tile_encoding_jpeg">2.2.5. Tile Encoding JPEG</h4>
<div class="sect4">
<h5 id="_data_12">Data</h5>
<div class="sect5">
<h6 id="_mime_type_jpeg">MIME Type JPEG</h6>
<div id="_requirement-35" class="quoteblock">
<div class="title">Requirement 35</div>
<blockquote>
In a GeoPackage file that contains a tile matrix user data table that contains tile data that is no <a href="http://www.iana.org/assignments/media-types/index.html">MIME type</a> <a href="http://libpng.org/pub/png/">image/png</a>, by defaul SHALL store that tile data in <a href="http://www.ietf.org/rfc/rfc2046.txt">MIME type http://www.jpeg.org/public/jfif.pdf[image/jpeg</a>. <span class="footnote">[<a id="_footnoteref_13" class="footnote" href="#_footnote_13" title="View footnote.">13</a>]</span>
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_tile_matrix_set">2.2.6. Tile Matrix Set</h4>
<div class="sect4">
<h5 id="_data_13">Data</h5>
<div class="sect5">
<h6 id="_table_definition_5">Table Definition</h6>
<div id="_requirement-36" class="quoteblock">
<div class="title">Requirement 36</div>
<blockquote>
A GeoPackage that contains a tile pyramid user data table SHALL contain  <code>gpkg_tile_matrix_set</code> table per <a href="#gpkg_tile_matrix_set_cols">Tile Matrix Set Table or View Definition</a> and <a href="#gpkg_tile_matrix_set_sql">gpkg_tile_matrix_set Table Creation SQL</a>.
</blockquote>
</div>
<table id="gpkg_tile_matrix_set_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 7. Tile Matrix Set Table or View Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Column Type</th>
<th class="tableblock halign-left valign-top">Column Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>table_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tile Pyramid User Data Table Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK, FK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>srs_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spatial Reference System ID: gpkg_spatial_ref_sys.srs_id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>min_x</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum bounding box for all content in table_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>min_y</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum bounding box for all content in table_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>max_x</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum bounding box for all content in table_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">256</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>max_y</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum bounding box for all content in table_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">256</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>The gpkg_tile_matrix_set table or updateable view defines the minimum bounding box (min_x, min_y, max_x, max_y) an spatial reference system (srs_id) for all content in a tile pyramid user data table.
This bounding box SHALL be exact so that the bounding box coordinates for individual tiles in a tile pyramid MAY be calculated based on the column value for the user data table in the gpkg_tile_matrix table or view defined in clause <a href="#tile_matrix">Tile Matrix</a> below.</p>
</div>
</div>
<div class="sect5">
<h6 id="_table_data_values_5">Table Data Values</h6>
<div id="_requirement-37" class="quoteblock">
<div class="title">Requirement 37</div>
<blockquote>
Values of the <code>gpkg_tile_matrix_set</code> <code>table_name</code> column SHALL reference values in th gpkg_contents table_name column for rows with a data type of "tiles".
</blockquote>
</div>
<div id="_requirement-38" class="quoteblock">
<div class="title">Requirement 38</div>
<blockquote>
The gpkg_tile_matrix_set table or view SHALL contain one row record for each tile pyramid user data table.
</blockquote>
</div>
<div id="_requirement-39" class="quoteblock">
<div class="title">Requirement 39</div>
<blockquote>
Values of the <code>gpkg_tile_matrix_set</code> <code>srs_id</code> column SHALL reference values in the <code>gpkg_spatial_ref_sys</code> <code>srs_id</code> column.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="tile_matrix">2.2.7. Tile Matrix</h4>
<div class="sect4">
<h5 id="_data_14">Data</h5>
<div class="sect5">
<h6 id="_table_definition_6">Table Definition</h6>
<div id="_requirement-40" class="quoteblock">
<div class="title">Requirement 40</div>
<blockquote>
A GeoPackage taht contains a tile pyramid user data table SHALL contain a <code>gpkg_tile_matrx</code> table or view per <a href="#gpkg_tile_matrix_cols">Tile Matrix Metadata Table or View Definition</a> and <a href="#gpkg_tile_matrix_sql">gpkg_tile_matrix Table Creation SQL</a>
</blockquote>
</div>
<table id="gpkg_tile_matrix_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 8. Tile Matrix Metadata Table or View Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Column Type</th>
<th class="tableblock halign-left valign-top">Column Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>table_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tile Pyramid User Data Table Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK, FK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>zoom_level</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0 &#8656; <code>zoom_level</code> &#8656; max_level for <code>table_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>matrix_width</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of columns (&gt;= 1) in tile matrix at this zoom level</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>matrix_height</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of rows (&gt;= 1) in tile matrix at this zoom level</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tile_width</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tile width in pixels (&gt;= 1)for this zoom level</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">256</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tile_height</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tile height in pixels (&gt;= 1) for this zoom level</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">256</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pixel_x_size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In <code>t_table_name</code> srid units or default meters for srid 0 (&gt;0)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pixel_y_size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In <code>t_table_name</code> srid units or default meters for srid 0 (&gt;0)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>The <code>gpkg_tile_matrix</code> table or updateable view documents the structure of the tile matrix at each zoom level in each tiles table.
It allows GeoPackages to contain rectangular as well as square tiles (e.g. for better representation of polar regions).
It allows tile pyramids with zoom levels that differ in resolution by factors of 2, irregular intervals, or regular intervals other than factors of 2.</p>
</div>
<div class="paragraph">
<p>See <a href="#gpkg_tile_matrix_metadata_sql">[gpkg_tile_matrix_metadata_sql]</a></p>
</div>
</div>
<div class="sect5">
<h6 id="_table_data_values_6">Table Data Values</h6>
<div id="_requirement-41" class="quoteblock">
<div class="title">Requirement 41</div>
<blockquote>
Values of the <code>gpkg_tile_matrix</code> <code>table_name</code> column SHALL reference values in the <code>gpkg_contents</code> <code>table_name</code> column for rows with a <code>data_type</code> of “tiles”.
</blockquote>
</div>
<div id="_requirement-42" class="quoteblock">
<div class="title">Requirement 42</div>
<blockquote>
The <code>gpkg_tile_matrix</code> table or view SHALL contain one row record for each zoom level that contains one or more tiles in each tile pyramid user data table or view.
</blockquote>
</div>
<div class="paragraph">
<p>The <code>gpkg_tile_matrix</code> table or view MAY contain row records for zoom levels in a tile pyramid user data table that do not contain tiles.</p>
</div>
<div class="paragraph">
<p>GeoPackages follow the most frequently used conventions of a tile origin at the upper left and a zoom-out-level of 0 for the smallest map scale “whole world” zoom level view <span class="footnote">[<a id="_footnoteref_14" class="footnote" href="#_footnote_14" title="View footnote.">14</a>]</span>, as specified by <a href="http://portal.opengeospatial.org/files/?artifact_id=35326">WMTS</a>.
The tile coordinate (0,0) always refers to the tile in the upper left corner of the tile matrix at any zoom level, regardless of the actual availability of that tile.</p>
</div>
<div id="_requirement-43" class="quoteblock">
<div class="title">Requirement 43</div>
<blockquote>
The <code>zoom_level</code> column value in a <code>gpkg_tile_matrix</code> table row SHALL not be negative.
</blockquote>
</div>
<div id="_requirement-44" class="quoteblock">
<div class="title">Requirement 44</div>
<blockquote>
The <code>matrix_width</code> column value in a <code>gpkg_tile_matrix</code> table row SHALL be greater than 0.
</blockquote>
</div>
<div id="_requirement-45" class="quoteblock">
<div class="title">Requirement 45</div>
<blockquote>
The <code>matrix_height</code> column value in a <code>gpkg_tile_matrix</code> table row SHALL be greater than 0.
</blockquote>
</div>
<div id="_requirement-46" class="quoteblock">
<div class="title">Requirement 46</div>
<blockquote>
The <code>tile_width</code> column value in a <code>gpkg_tile_matrix</code> table row SHALL be greater than 0.
</blockquote>
</div>
<div id="_requirement-47" class="quoteblock">
<div class="title">Requirement 47</div>
<blockquote>
The <code>tile_height</code> column value in a <code>gpkg_tile_matrix</code> table row SHALL be greater than 0.
</blockquote>
</div>
<div id="_requirement-48" class="quoteblock">
<div class="title">Requirement 48</div>
<blockquote>
The <code>pixel_x_size</code> column value in a <code>gpkg_tile_matrix</code> table row SHALL be greater than 0.
</blockquote>
</div>
<div id="_requirement-49" class="quoteblock">
<div class="title">Requirement 49</div>
<blockquote>
The <code>pixel_y_size</code> column value in a <code>gpkg_tile_matrix</code> table row SHALL be greater than 0.
</blockquote>
</div>
<div id="_requirement-50" class="quoteblock">
<div class="title">Requirement 50</div>
<blockquote>
The <code>pixel_x_size</code> and <code>pixel_y_size</code> column values for <code>zoom_level</code> column values in a <code>gpkg_tile_matrix</code> table sorted in ascending order SHALL be sorted in descending order.
</blockquote>
</div>
<div class="paragraph">
<p>If the geographic extent of the image data contained in these tiles is within but not equal to this bounding box, then the non-image area of matrix edge tiles must be padded with no-data values, preferably transparent ones.]</p>
</div>
<div class="paragraph">
<p>Tiles MAY or MAY NOT be provided for level 0 or any other particular zoom level. <span class="footnote">[<a id="_footnoteref_15" class="footnote" href="#_footnote_15" title="View footnote.">15</a>]</span>
This means that a tile matrix set can be sparse, i.e. not contain a tile for any particular position at a certain tile zoom level.
<span class="footnote">[<a id="_footnoteref_16" class="footnote" href="#_footnote_16" title="View footnote.">16</a>]</span> This does not affect the spatial extent stated by the min/max x/y columns values in the <code>gpkg_contents</code> record for the same <code>table_name</code>, or the tile matrix width and height at that level. footnote:[The gpkg_contents table contains coordinates that define a bounding box as the stated spatial extent for all tiles in a tile (matrix set) table.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_tile_pyramid_user_data_tables">2.2.8. Tile Pyramid User Data Tables</h4>
<div class="sect4">
<h5 id="_data_15">Data</h5>
<div class="sect5">
<h6 id="_table_definition_7">Table Definition</h6>
<div id="_requirement-51" class="quoteblock">
<div class="title">Requirement 51</div>
<blockquote>
Each tile matrix set in a GeoPackage file SHALL be stored in a different tile pyramid user data table or updateable view with a unique name per <a href="#example_tiles_table_cols">Tiles Table or View Definition</a> and <a href="#example_tiles_table_sql">EXAMPLE: tiles table Create Table SQL</a>.
</blockquote>
</div>
<table id="example_tiles_table_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 9. Tiles Table or View Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Column Type</th>
<th class="tableblock halign-left valign-top">Column Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Autoincrement primary key</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>zoom_level</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">min(zoom_level) &#8656; <code>zoom_level</code> &#8656; max(zoom_level) for <code>t_table_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tile_column</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0 to <code>tile_matrix</code> <code>matrix_width</code> – 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tile_row</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0 to <code>tile_matrix</code> <code>matrix_height</code> - 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tile_data</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BLOB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Of an image MIME type specified in clause 10.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>See <a href="#example_tiles_table_sql">EXAMPLE: tiles table Create Table SQL</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_table_data_values_7">Table Data Values</h6>
<div class="paragraph">
<p>Each tile pyramid user data table or view <span class="footnote">[<a id="_footnoteref_17" class="footnote" href="#_footnote_17" title="View footnote.">17</a>]</span> MAY contain tile matrices at zero or more zoom levels of different spatial resolution (map scale).</p>
</div>
<div id="_requirement-52" class="quoteblock">
<div class="title">Requirement 52</div>
<blockquote>
For each distinct <code>table_name</code> from the <code>gpkg_tile_matrix</code> (tm) table, the tile pyramid (tp) user data table <code>zoom_level</code> column value in a GeoPackage file SHALL be in the range min(tm.zoom_level) &#8656; tp.zoom_level &#8656; max(tm.zoom_level).
</blockquote>
</div>
<div id="_requirement-53" class="quoteblock">
<div class="title">Requirement 53</div>
<blockquote>
For each distinct <code>table_name</code> from the <code>gpkg_tile_matrix</code> (tm) table, the tile pyramid (tp) user data table <code>tile_column</code> column value in a GeoPackage file SHALL be in the range 0 &#8656; tp.tile_column &#8656; tm.matrix_width – 1 where the tm and tp <code>zoom_level</code> column values are equal.
</blockquote>
</div>
<div id="_requirement-54" class="quoteblock">
<div class="title">Requirement 54</div>
<blockquote>
For each distinct <code>table_name</code> from the <code>gpkg_tile_matrix</code> (tm) table, the tile pyramid (tp) user data table <code>tile_row</code> column value in a GeoPackage file SHALL be in the range 0 &#8656; tp.tile_row &#8656; tm.matrix_height – 1 where the tm and tp <code>zoom_level</code> column values are equal.
</blockquote>
</div>
<div class="paragraph">
<p>All tiles at a particular zoom level have the same <code>pixel_x_size</code> and <code>pixel_y_size</code> values specified in the <code>gpkg_tile_matrix</code> row record for that tiles table and zoom level. {tile_data_foot1_ref}</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_schema">2.3. Schema</h3>
<div class="paragraph">
<p>The optional capabilities defined in sub clauses and requirement statements of this clause MAY be implemented by any GeoPackage file.</p>
</div>
<div class="sect3">
<h4 id="_data_columns">2.3.1. Data Columns</h4>
<div class="sect4">
<h5 id="_data_16">Data</h5>
<div class="sect5">
<h6 id="_table_definition_8">Table Definition</h6>
<div id="_requirement-55" class="quoteblock">
<div class="title">Requirement 55</div>
<blockquote>
A GeoPackage file MAY contain a table or updateable view named <code>gpkg_data_columns</code>.
If present it SHALL be defined per <a href="#gpkg_data_columns_cols">Data Columns Table or View Definition</a> and <a href="#gpkg_data_columns_sql">gpkg_data_columns Table Definition SQL</a>.
</blockquote>
</div>
<table id="gpkg_data_columns_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 10. Data Columns Table or View Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Column Type</th>
<th class="tableblock halign-left valign-top">Column Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>table_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the tiles or feature table</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>column_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the table column</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A human-readable identifier (e.g. short name) for the column_name content</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>title</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A human-readable formal title for the column_name content</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A human-readable description for the table_name content</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mime_type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.iana.org/assignments/media-types/index.html">MIME</a> type of column_name if BLOB type, or NULL for other types</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>constraint_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Case sensitive column value constraint name specified by reference to  gpkg_data_column_constraints.constraint name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>constraint_type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lowercase column value constraint type  specified by reference to gpkg_data_column_constraints.constraint_type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>GeoPackage applications MAY <span class="footnote">[<a id="_footnoteref_18" class="footnote" href="#_footnote_18" title="View footnote.">18</a>]</span> use the <code>gpkg_data_columns</code> table to store minimal application schema identifying, descriptive and <a href="http://www.iana.org/assignments/media-types/index.html">MIME</a> type <span class="footnote">[<a id="_footnoteref_19" class="footnote" href="#_footnote_19" title="View footnote.">19</a>]</span> information about columns in user vector feature and tile matrix data tables that supplements the data available from the SQLite <code>sqlite_master</code> table and pragma <code>table_info(table_name)</code> SQL function.
The <code>gpkg_data_columns</code> data CAN be used to provide more specific column data types and value ranges and application specific structural and semantic information to enable more informative user menu displays and more effective user decisions on the suitability of GeoPackage contents for specific purposes.</p>
</div>
<div class="paragraph">
<p>See <a href="#gpkg_data_columns_sql">gpkg_data_columns Table Definition SQL</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_table_data_values_8">Table Data Values</h6>
<div id="_requirement-56" class="quoteblock">
<div class="title">Requirement 56</div>
<blockquote>
Values of the <code>gpkg_data_columns</code> table <code>table_name</code> column value SHALL reference values in the <code>gpkg_contents</code> <code>table_name</code> column.
</blockquote>
</div>
<div id="_requirement-57" class="quoteblock">
<div class="title">Requirement 57</div>
<blockquote>
The <code>column_name</code> column value in a <code>gpkg_data_columns</code> table row SHALL contain the name of a column in the SQLite table or view identified by the <code>table_name</code> column value.
</blockquote>
</div>
<div id="_requirement-58" class="quoteblock">
<div class="title">Requirement 58</div>
<blockquote>
The constraint_name column value in a gpkg_data_columns table MAY be NULL.
If it is not NULL, it SHALL contain a case sensitive constraint_name column value from the gpkg_data_column_constraints table.
</blockquote>
</div>
<div id="_requirement-59" class="quoteblock">
<div class="title">Requirement 59</div>
<blockquote>
The constraint_type column value in a gpkg_data_columns table MAY be NULL if the constraint_name column value is NULL.
If the constraint_name column value is not NULL, then the constraint_type column value SHALL contain a lowercase constraint_type column value from the gpkg_data_column_constraints table for a row with a matching constraint_name value.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_data_column_constraints">2.3.2. Data Column Constraints</h4>
<div class="sect4">
<h5 id="_data_17">Data</h5>
<div class="sect5">
<h6 id="_table_definition_9">Table Definition</h6>
<div id="_requirement-60" class="quoteblock">
<div class="title">Requirement 60</div>
<blockquote>
A GeoPackage file MAY contain a table or updateable view named gpkg_data_column_constraints.
If present it SHALL be defined per <a href="#gpkg_data_column_constraints_cols">Data Column Constraints Table or View Definition</a> and <a href="#gpkg_data_column_constraints_sql">gpkg_data_columns Table Definition SQL</a>.
</blockquote>
</div>
<div class="paragraph">
<p>The gpkg_data_column_constraints table contains data to specify restrictions on basic data type column values.
The constraint_name and constraint_type columns are referenced by columns with the same names in the gpkg_data_columns table defined in clause 2.3.1.1.1.</p>
</div>
<table id="gpkg_data_column_constraints_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 11. Data Column Constraints Table or View Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Column Type</th>
<th class="tableblock halign-left valign-top">Column Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>constraint_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Case sensitive name of constraint</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>constraint_type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lowercase type name of constraint: <em>range</em> | <em>enum</em> | <em>glob</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>value</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specified case sensitive value for <em>enum</em> or <em>glob</em> or NULL for <em>range</em> constraint_type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>min</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NUMERIC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum value for ‘range’ or NULL for ‘enum’ or ‘glob’ constraint_type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>minIsInclusive</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0 (false) if min value is exclusive, or 1 (true) if min value is inclusive</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>max</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NUMERIC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum value for ‘range’ or NULL for ‘enum’ or ‘glob’ constraint_type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>maxIsInclusive</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0 (false) if max value is exclusive, or 1 (true) if max value is inclusive</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

</div>
<div class="sect5">
<h6 id="_table_data_values_9">Table Data Values</h6>
<div class="paragraph">
<p>The case sensitive gpkg_data_column_constraints constraint_name column value SHOULD indicate the table name, column name, and constraint type that is being specified, e.g. "roads_lanes_range".
The lowercase gpkg_data_column_constraints constraint_type column value specifies the type of constraint: "range", "enum", or "glob" (text pattern match).
The case sensitive value column contains an enumerated legal value for constraint_type "enum", a pattern match string for constraint_type "glob", or NULL for constraint_type "range".
The min and max column values specify the minim and maximum valid values for constraint_type "range", or are NULL for constraint_type "enum" or "glob".
The minIsInclusive and maxIsInclusive column values contain 1 if the min and max values are inclusive, 0 if they are exclusive, or are NULL for constraint_type "enum" or "glob".
These restrictions MAY be enforced by SQL triggers or by code in applications that update GeoPackage data values.</p>
</div>
<div id="_requirement-61" class="quoteblock">
<div class="title">Requirement 61</div>
<blockquote>
The <code>gpkg_data_column_constraints</code> table MAY be empty.
If it contains data, the lowercase <code>constraint_type</code> column values SHALL be one of "range", "enum", or "glob".
</blockquote>
</div>
<div id="_requirement-62" class="quoteblock">
<div class="title">Requirement 62</div>
<blockquote>
The <code>gpkg_data_column_constraints</code> table MAY be empty.
If it contains rows with constraint_type column values of "range", the <code>value</code> column values for those rows SHALL be NULL.
</blockquote>
</div>
<div id="_requirement-63" class="quoteblock">
<div class="title">Requirement 63</div>
<blockquote>
The <code>gpkg_data_column_constraints</code> table MAY be empty.
If it contains rows with <code>constraint_type</code> column values of "range", the <code>min</code> column values for those rows SHALL be NOT NULL and less than the <code>max</code> column value which shall be NOT NULL.
</blockquote>
</div>
<div id="_requirement-64" class="quoteblock">
<div class="title">Requirement 64</div>
<blockquote>
The <code>gpkg_data_column_constraints</code> table MAY be empty.
If it contains rows with <code>constraint_type</code> column values of "range", the <code>minIsInclusive</code> and <code>maxIsInclusive</code> column values for those rows SHALL be 0 or 1.
</blockquote>
</div>
<div id="_requirement-65" class="quoteblock">
<div class="title">Requirement 65</div>
<blockquote>
The <code>gpkg_data_column_constraints</code> table MAY be empty.
If it contains rows with <code>constraint_type</code> column values of "enum" or "glob", the <code>min</code>, <code>max</code>, <code>minIsInclusive</code> and <code>maxIsInclusive</code> column values for those rows SHALL be NULL.
</blockquote>
</div>
<div id="_requirement-66" class="quoteblock">
<div class="title">Requirement 66</div>
<blockquote>
The <code>gpkg_data_column_constraints</code> table MAY be empty.
If it contains rows with <code>constraint_type</code> column values of "enum" or "glob", the <code>value</code> column SHALL NOT be NULL.
</blockquote>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_metadata">2.4. Metadata</h3>
<div class="paragraph">
<p>The optional capabilities defined in sub clauses and requirement statements of this clause MAY be implemented by any <strong>GeoPackage file</strong>.</p>
</div>
<div class="sect3">
<h4 id="_introduction_2">2.4.1. Introduction</h4>
<div class="paragraph">
<p>Two tables in a GeoPackage file provide a means of storing metadata in MIME <a href="#25">[25]</a> encodings that are defined in accordance with any authoritative metadata specifications, and relating it to the features, rasters, and tiles data in a GeoPackage.
These tables are intended to provide the support necessary to implement the hierarchical metadata model defined in ISO 19115 <a href="#40">[40]</a>, Annex B B.5.25 MD_ScopeCode, <a href="#metadata_example_appendix">Hierarchical Metadata Example (Informative)</a> and <a href="#raster_or_tile_metadata_example_appendix">Raster or Tile Metadata Example (Informative)</a>, so that as GeoPackage data is captured and updated, the most local and specific detailed metadata changes associated with the new or modified data MAY be captured separately, and referenced to existing global and general metadata.</p>
</div>
<div class="paragraph">
<p>The <code>gpkg_metadata</code> table that contains metadata is described in clause <a href="#_metadata_table">Metadata Table</a>, and the <code>gpkg_metadata_reference</code> table that relates <code>gpkg_metadata</code> to GeoPackage data is described in clause <a href="#_metadata_reference_table">Metadata Reference Table</a>.
There is no GeoPackage requirement that such metadata be provided or that defined metadata be structured in a hierarchical fashion <span class="footnote">[<a id="_footnoteref_20" class="footnote" href="#_footnote_20" title="View footnote.">20</a>]</span> with more than one level, only that if it is, these tables SHALL be used.
Such metadata <span class="footnote">[<a id="_footnoteref_21" class="footnote" href="#_footnote_21" title="View footnote.">21</a>]</span> and data that relates it to GeoPackage contents SHALL NOT be stored in other tables as defined in clause <a href="#_other_data_tables">Other Data Tables</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_metadata_table">2.4.2. Metadata Table</h4>
<div class="sect4">
<h5 id="_data_18">Data</h5>
<div class="sect5">
<h6 id="_table_definition_10">Table Definition</h6>
<div class="paragraph">
<p><em>Req 50:</em> A GeoPackage file MAY contain a table named gpkg_metadata. If present it SHALL be defined
per <a href="#gpkg_metadata_cols">Metadata Table Definition</a> and <a href="#gpkg_metadata_sql">gpkg_metadata Table Definition SQL</a>.</p>
</div>
<div class="paragraph">
<p>The first component of GeoPackage metadata is the <code>gpkg_metadata</code> table that MAY contain metadata in MIME <a href="#25">[25]</a> encodings structured in accordance with any authoritative metadata specification, such as ISO 19115 <a href="#40">[40]</a>, ISO 19115-2 <a href="#B31">[B31]</a>, ISO 19139 <a href="#B32">[B32]</a>, Dublin Core <a href="#B33">[B33]</a>, CSDGM <a href="#B34">[B34]</a>, DDMS <a href="#B35">[B35]</a>, NMF/NMIS <a href="#B36">[B36]</a>, etc.
The GeoPackage interpretation of what constitutes “metadata” is a broad one that includes UML models <a href="#B37">[B37]</a> encoded in XMI <a href="#B38">[B38]</a>, GML Application Schemas <a href="#B39">[B39]</a>, ISO 19110 feature catalogues <a href="#B40">[B40]</a>, OWL <a href="#B41">[B41]</a> and SKOS <a href="#B42">[B42]</a> taxonomies, etc.</p>
</div>
<table id="gpkg_metadata_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 12. Metadata Table Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Column Type</th>
<th class="tableblock halign-left valign-top">Column Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Metadata primary key</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>md_scope</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Case sensitive name of the data scope to which this metadata applies; see table 11 below</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">‘dataset’</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>md_standard_uri</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URI reference to the metadata structure definition authority</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mime_type</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MIME [25] encoding of metadata</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text/xml</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>metadata</code></p></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>The md_standard_uri data value provides an identifier for the metadata structure (schema) specified by its definition authority.
The structure (schema) information could be in whatever encoding is used by the definition authority, e.g. UML, or IDF, or XML/Schema, or RDF/S.</p>
</div>
<div class="paragraph">
<p>See <a href="#gpkg_metadata_sql">gpkg_metadata Table Definition SQL</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_table_data_values_10">Table Data Values</h6>
<div class="paragraph">
<p>The <code>md_scope</code> column in the <code>gpkg_metadata</code> table is the name of the applicable scope for the contents of the metadata column for a given row.
The list of valid scope names and their definitions is provided in Table 11 below.
The initial contents of this table were obtained from the ISO 19115 [40], Annex B B.5.25 MD_ScopeCode code list, which was extended [^3] for use in the GeoPackage specification by addition of entries with “NA” as the scope code column in Table 10.</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 13. Metadata Scopes</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name (md_scope)</th>
<th class="tableblock halign-left valign-top">Scope Code</th>
<th class="tableblock halign-left valign-top">Definition</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">undefined</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Metadata information scope is undefined</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">fieldSession</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">012</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to the field session</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">collectionSession</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">004</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to the collection session</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">series</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">006</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to the (dataset) series4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dataset</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">005</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to the (geographic feature) dataset</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">featureType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">010</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to a feature type (class)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">feature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">009</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to a feature (instance)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">attributeType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">002</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to the attribute class</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">attribute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">001</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to the characteristic of a feature (instance)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">016</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to a tile, a spatial subset of geographic data</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">model</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">015</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to a copy or imitation of an existing or hypothetical object</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">catalog</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Metadata applies to a feature catalog [^5]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">schema</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Metadata applies to an application schema [^6]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">taxonomy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Metadata applies to a taxonomy or knowledge system [^7]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">software</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">013</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to a computer program or routine</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">014</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to a capability which a service provider entity makes available to a service user entity through a set of interfaces that define a behaviour, such as a use case</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">collectionHardware</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">003</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to the collection hardware class</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nonGeographicDataset</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">007</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to non-geographic data</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dimensionGroup</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">008</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to a dimension group</p></td>
</tr>
</tbody>
</table>

<div id="_requirement-67" class="quoteblock">
<div class="title">Requirement 67</div>
<blockquote>
Each <code>md_scope</code> column value in a <code>gpkg_metadata</code> table or updateable view SHALL be one of the name column values from 11 in clause 2.4.2.1.2.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_metadata_reference_table">2.4.3. Metadata Reference Table</h4>
<div class="sect4">
<h5 id="_data_19">Data</h5>
<div class="sect5">
<h6 id="_table_definition_11">Table Definition</h6>
<div id="_requirement-68" class="quoteblock">
<div class="title">Requirement 68</div>
<blockquote>
A GeoPackage file that contains a gpkg_metadata table SHALL contain a gpkg_metadata_reference table per clause 2.4.3.1.1, Table 12 and Table 34.
</blockquote>
</div>
<div class="paragraph">
<p>The second component of GeoPackage metadata is the <code>gpkg_metadata_reference</code> table that links metadata in the <code>gpkg_metadata</code> table to data in the feature, and tiles tables defined in clauses 2.1.6 and 2.2.7.
The <code>gpkg_metadata_reference</code> table is not required to contain any rows.</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 14. Metadata Reference Table or View Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Col Type</th>
<th class="tableblock halign-left valign-top">Column Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>reference_scope</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lowercase metadata reference scope; one of ‘geopackage’, ‘table’,‘column’, ’row’, ’row/col’</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>table_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the table to which this metadata reference applies, or NULL for reference_scope of ‘geopackage’.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>column_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the column to which this metadata reference applies; NULL for <code>reference_scope</code> of ‘geopackage’,‘table’ or ‘row’, or the name of a column in the <code>table_name</code> table for <code>reference_scope</code> of ‘column’ or ‘row/col’</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>row_id_value</code>[^8]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL for <code>reference_scope</code> of ‘geopackage’, ‘table’ or ‘column’, or the rowed of a row record in the <code>table_name</code> table for <code>reference_scope</code> of ‘row’ or ‘row/col’</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>timestamp</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">timestamp value in ISO 8601 format as defined by the strftime function <em>%Y-%m-%dT%H:%M:%fZ</em> format string applied to the current time</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">strftime(<em>%Y-%m-%dT%H:%M:%fZ</em>, CURRENT_TIMESTAMP)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>md_file_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>gpkg_metadata</code> table id column value for the metadata to which this <code>gpkg_metadata_reference</code> applies</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>md_parent_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>gpkg_metadata</code> table id column value for the hierarchical parent <code>gpkg_metadata</code> for the <code>gpkg_metadata</code> to which this <code>gpkg_metadata_reference</code> applies, or NULL if <code>md_file_id</code> forms the root of a metadata hierarchy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FK</p></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>Every row in <code>gpkg_metadata_reference</code> that has null value as <code>md_parent_id</code> forms the root of a metadata hierarchy [^9].</p>
</div>
<div class="paragraph">
<p>See <a href="#table_definition_sql">Table Definition SQL (Normative)</a> clause <a href="#gpkg_metadata_reference_sql">gpkg_metadata_reference Table Definition SQL</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_table_data_values_11">Table Data Values</h6>
<div id="_requirement-69" class="quoteblock">
<div class="title">Requirement 69</div>
<blockquote>
Every <code>gpkg_metadata_reference</code> table reference scope column value SHALL be one of ‘geopackage’, ‘table’, ‘column’, ’row’, ’row/col’ in lowercase.
</blockquote>
</div>
<div id="_requirement-70" class="quoteblock">
<div class="title">Requirement 70</div>
<blockquote>
Every <code>gpkg_metadata_reference</code> table row with a <code>reference_scope</code> column value of ‘geopackage’ SHALL have a <code>table_name</code> column value that is NULL.
Every other <code>gpkg_metadata_reference</code> table row SHALL have a <code>table_name</code> column value that references a value in the <code>gpkg_contents</code> <code>table_name</code> column.
</blockquote>
</div>
<div id="_requirement-71" class="quoteblock">
<div class="title">Requirement 71</div>
<blockquote>
Every <code>gpkg_metadata_reference</code> table row with a <code>reference_scope</code> column value of ‘geopackage’,‘table’ or ‘row’ SHALL have a <code>column_name</code> column value that is NULL.
Every other <code>gpkg_metadata_reference</code> table row SHALL have a <code>column_name</code> column value that contains the name of a column in the SQLite table or view identified by the <code>table_name</code> column value.
</blockquote>
</div>
<div id="_requirement-72" class="quoteblock">
<div class="title">Requirement 72</div>
<blockquote>
Every <code>gpkg_metadata_reference</code> table row with a <code>reference_scope</code> column value of ‘geopackage’, ‘table’ or ‘column’ SHALL have a <code>row_id_value</code> column value that is NULL.
Every other <code>gpkg_metadata_reference</code> table row SHALL have a <code>row_id_value</code> column value that contains the ROWID of a row in the SQLite table or view identified by the <code>table_name</code> column value.
</blockquote>
</div>
<div id="_requirement-73" class="quoteblock">
<div class="title">Requirement 73</div>
<blockquote>
Every <code>gpkg_metadata_reference</code> table row timestamp column value SHALL be in ISO 8601 [41]format containing a complete date plus UTC hours, minutes, seconds and a decimal fraction of a second, with a ‘Z’ (‘zulu’) suffix indicating UTC.[^10]
</blockquote>
</div>
<div id="_requirement-74" class="quoteblock">
<div class="title">Requirement 74</div>
<blockquote>
Every <code>gpkg_metadata_reference</code> table row <code>md_file_id</code> column value SHALL be an id column value from the <code>gpkg_metadata</code> table.
</blockquote>
</div>
<div id="_requirement-75" class="quoteblock">
<div class="title">Requirement 75</div>
<blockquote>
Every <code>gpkg_metadata_reference</code> table row <code>md_parent_id</code> column value that is NOT NULL SHALL be an id column value from the <code>gpkg_metadata</code> table that is not equal to the <code>md_file_id</code> column value for that row.
</blockquote>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_other_data_tables">2.5. Other Data Tables</h3>
<div class="paragraph">
<p>Application-specific or vendor-specific data tables that do not conform to the table definitions or other requirements for storing feature data, raster or tile data, or metadata as defined in other sections of this document MAY be defined and used to store supplemental information in a GeoPackage database.
Such other data tables MAY be described by rows in the <code>gpkg_spatial_ref_sys</code>, <code>gpkg_contents</code>, <code>gpkg_extensions</code>, <code>gpkg_data_columns</code>, <code>gpkg_metadata</code> and <code>gpkg_metadata_reference</code> tables. GeoPackage applications MAY ignore such descriptive rows and other data tables they do not recognize. Such other data tables SHALL NOT be described by rows in the <code>gpkg_geometry_columns</code> or <code>gpkg_tile_matrix</code> tables.</p>
</div>
</div>
<div class="sect2">
<h3 id="_extension_mechanism">2.6. Extension Mechanism</h3>
<div class="paragraph">
<p>The GeoPackage extension mechanism is an optional capability that is a required dependency for the optional registered extension capabilities defined in clause 3.</p>
</div>
<div class="sect3">
<h4 id="_extensions">2.6.1. Extensions</h4>
<div class="sect4">
<h5 id="_data_20">Data</h5>
<div class="paragraph">
<p>The optional capabilities defined in sub clauses and requirement statements of this clause MAY be implemented by any GeoPackage file.</p>
</div>
<div class="sect5">
<h6 id="extensions_table_definition">Table Definition</h6>
<div id="_requirement-76" class="quoteblock">
<div class="title">Requirement 76</div>
<blockquote>
A GeoPackage file MAY contain a table or updateable view named gpkg_extensions.
If present this table SHALL be defined per clause 2.6.1.1.1, Table 13 and Table 23.
</blockquote>
</div>
<div class="paragraph">
<p>The <code>gpkg_extensions</code> table or updateable view in a GeoPackage file registers extension capabilities required to make direct use of its contents.
An application that access a GeoPackage file can query the <code>gpkg_extensions</code> table instead of the contents of all the user data tables to determine if it has the required capabilitiesto read or write to tables with extensions, and to “fail fast” and return an error message if it does not.</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 15. GeoPackage Extensions Table or View Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Col Type</th>
<th class="tableblock halign-left valign-top">Column Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>table_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the table that requires the extension. When NULL, the extension is required for the entire GeoPackage. SHALL NOT be NULL when the column_name is not NULL.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>column_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the column that requires the extension. When NULL, the extension is required for the entire table.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>extension_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The case sensitive name of the extension that is required, in the form &lt;author&gt;_&lt;extension_name&gt;.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scope</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates scope of extension effects on readers / writers: <em>read-write</em> or <em>write-only</em> in lowercase.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>See Annex C: Table Definition SQL clause C.3 gpkg_extensions.</p>
</div>
</div>
<div class="sect5">
<h6 id="_table_data_values_12">Table Data Values</h6>
<div id="_requirement-77" class="quoteblock">
<div class="title">Requirement 77</div>
<blockquote>
Values of the <code>gpkg_extensions</code> <code>table_name</code> column SHALL reference values in the <code>gpkg_contents</code> <code>table_name</code> column or be NULL.
They SHALL NOT be NULL for rows where the <code>column_name</code> value is not NULL.
</blockquote>
</div>
<div id="_requirement-78" class="quoteblock">
<div class="title">Requirement 78</div>
<blockquote>
The <code>column_name</code> column value in a <code>gpkg_extensions</code> row SHALL be the name of a column in the table specified by the <code>table_name</code> column value for that row, or be NULL.
</blockquote>
</div>
<div id="_requirement-79" class="quoteblock">
<div class="title">Requirement 79</div>
<blockquote>
Each <code>extension_name</code> column value in a <code>gpkg_extensions</code> row SHALL be a unique case sensitive value of the form &lt;author&gt;_&lt;extension_name&gt; where &lt;author&gt; indicates the person or organization that developed and
maintains the extension. The valid character set for &lt;author&gt; SHALL be [a-zA-Z0-9].
The valid character set for &lt;extension_name&gt; SHALL be [a-zA-Z0-9_]. An <code>extension_name</code> for the “gpkg” author name SHALL be one of those listed in <a href="#gpkg_reserved_extensions">Reserved GeoPackage Extensions</a>.
</blockquote>
</div>
<div id="_requirement-80" class="quoteblock">
<div class="title">Requirement 80</div>
<blockquote>
The scope column value in a <code>gpkg_extensions</code> row SHALL be lowercase "read-write" for an extension that affects both readers and writers, or "write-only" for an extension that affects only writers.
</blockquote>
</div>
<div class="paragraph">
<p>The author value “gpkg” is reserved for GeoPackage extensions that are developed and maintained by OGC.
Requirements for extension names for the “gpkg” author name are defined in the clauses listed in 14 below.
GeoPackage implementers use their own author names to register other extensions.</p>
</div>
<table id="gpkg_reserved_extensions" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 16. Reserved GeoPackage Extensions</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Extension Name</th>
<th class="tableblock halign-left valign-top">Defined in Clause</th>
<th class="tableblock halign-left valign-top">Scope</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gpkg_geom_&lt;gname&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.1.2.1.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read-write</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;gname&gt; is the uppercase name of specific extension geometry type from Annex G 47</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gpkg_zoom_other</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.2.1.1.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read-write</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tile matrix set user data table with zoom intervals other than factors of two between adjacent layers</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gpkg_webp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.2.2.2.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read-write</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Raster images in image/webp format</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gpkg_tiff</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.2.3.1.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read-write</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Raster images in image/tiff format</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gpkg_nitf</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.2.4.1.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read-write</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Raster images in application/vnd.NITF</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gpkg_rtree_index</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.1.3.1.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">write-only</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rtree spatial index implemented via SQLite Virtual Table and maintained via triggers that use all minimal runtime SQL functions except ST_SRID.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gpkg_gtype_trigger</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.1.4.1.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">write-only</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Trigger to restrict GeoPackage feature table geometry column geometries to geometry types equal to or substitutable for the geometry type specified for the column in the <code>gpkg_geometry_columns</code> table <code>geometry_type_name</code> column.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gpkg_srs_id_trigger</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.1.5.1.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">write-only</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Trigger to restrict GeoPackage feature table geometry column geometries to the <code>srs_id</code> specified for the geometry column in the <code>gpkg_geometry_columns</code> table using the ST_SRID SQL function.</p></td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="sect4">
<h5 id="_api_3">API</h5>
<div class="paragraph">
<p>The optional capabilities defined in sub clauses and requirement statements of this clause MAY be implemented by any GeoPackage SQLite Extension.</p>
</div>
<div class="sect5">
<h6 id="_api_geopackage_sqlite_config">API GeoPackage SQLite Config</h6>
<div id="_requirement-81" class="quoteblock">
<div class="title">Requirement 81</div>
<blockquote>
A GeoPackage SQLite Extension MAY provide SQL runtime functions or rtree support for a GeoPackage file.
One that does so SHALL have the SQLite library compile and run time options specified in clause 2.6.1.2.1 Table 15.
</blockquote>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 17. API GeoPackage SQLite Configuration</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Option</th>
<th class="tableblock halign-left valign-top">Shall / Not (Value)</th>
<th class="tableblock halign-left valign-top">Discussion</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">compile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQLITE_OMIT_LOAD_EXTENSION</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The load_extension() function is required to implement the MinimalRuntimeSQLFunctions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">compile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQLITE_OMIT_VIRTUALTABLE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Virtual tables are required to implement RTrees</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">compile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQLITE_ENABLE_RTREE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Shall</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rtrees are used for GeoPackage Spatial Indexes. See SpatialIndexRequirements</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">compile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQLITE_RTREE_INT_ONLY</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rtrees with floating point values are used for GeoPackage Spatial Indexes.</p></td>
</tr>
</tbody>
</table>

</div>
<div class="sect5">
<h6 id="_safe_geopackage_sqlite_config">Safe GeoPackage SQLite Config</h6>
<div id="_requirement-82" class="quoteblock">
<div class="title">Requirement 82</div>
<blockquote>
A GeoPackage SQLite Extension MAY provide primary/foreign key and trigger support for a GeoPackage file.
One that does so SHALL have the SQLite library compile and run time options specified in clause 2.6.1.2.2 Table 16.
</blockquote>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 18. Safe GeoPackage SQLite Configuration</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Option</th>
<th class="tableblock halign-left valign-top">Shall / Not (Value)</th>
<th class="tableblock halign-left valign-top">Discussion</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">compile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQLITE_DEFAULT_FOREIGN_KEYS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Shall (1)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreign key constraints are used to maintain GeoPackage relational integrity.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">compile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQLITE_OMIT_FOREIGN_KEY</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreign key constraints are used to maintain GeoPackage relational integrity.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">run</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PRAGMA foreign_keys</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not (OFF)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreign key constraints are used to maintain GeoPackage relational integrity.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">compile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQLITE_OMIT_INTEGRITY_CHECK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This option omits support for the integrity_check pragma, which does an integrity check of the entire database.
This pragma should be part of GeoPackage conformance validation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">compile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQLITE_OMIT_SUBQUERY</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This option omits support for sub-selects and the IN() operator, both of which are used in GeoPackage triggers.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">compile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQLITE_OMIT_TRIGGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defining this option omits support for TRIGGER objects. Neither the CREATE TRIGGER or DROP TRIGGER commands are available in this case, and attempting to execute either will result in a parse error.
This option also disables enforcement of foreign key constraints, since the code that implements triggers and which is omitted by this option is also used to implement foreign key actions. Foreign keys and triggers are used by Safe GeoPackages.
Triggers are used to maintain spatial indexes.</p></td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_registered_extensions">3. Registered Extensions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The optional registered extension capabilities specified in this clause depend on required capabilities specified in
clause 1 and optional capabilities specified in clause 2. Any optional capability in this class that is implemented
SHALL be registered using the Extension Mechanism defined in clause 2.6, as specified by the sub clauses below for
extension name and extension row for the optional capability.</p>
</div>
<div id="_requirement-83" class="quoteblock">
<div class="title">Requirement 83</div>
<blockquote>
A GeoPackage file with any extension described in the following sub clauses SHALL contain a
gpkg_extensions table per clause <a href="#extensions_table_definition">Table Definition</a>.  A GeoPackage file without any extension described in
the following sub clauses MAY contain an empty <code>gpkg_extensions</code> table, or MAY NOT contain a <code>gpkg_extensions</code> table.
</blockquote>
</div>
<div id="_requirement-84" class="quoteblock">
<div class="title">Requirement 84</div>
<blockquote>
Any table in a GeoPackage file subject to a registered extension with an <code>author_name</code> other than
“gpkg” SHALL NOT be described by a <code>gpkg_contents</code> table row with a <code>data_type</code> value of “feature” or “tiles”.
</blockquote>
</div>
<div class="paragraph">
<p>Such tables do not count[^1] in the determination of GeoPackage file validity per clause 2 Req 13: but otherwise MAY
differ from “features” and “tiles” tables only with respect to non-gpkg registered extensions that enable implementers
to meet requirements not addressed in the current version of this specification, and MAY be included in a valid
GeoPackage.</p>
</div>
<div class="sect2">
<h3 id="_features_2">3.1. Features</h3>
<div class="sect3">
<h4 id="_geometry_types_2">3.1.1. Geometry Types</h4>
<div class="sect4">
<h5 id="_data_21">Data</h5>
<div class="paragraph">
<p>The optional extension capabilities defined in sub clauses and requirement statements of this clause MAY be implemented
by any GeoPackage file that implements the requirements of clause 2.1 and clause 2.6.1.1 on which they depend, as
specified in <a href="#abstract_test_suite">Conformance / Abstract Test Suite (Normative)</a>.</p>
</div>
<div class="sect5">
<h6 id="_extension_types">Extension Types</h6>
<div id="_requirement-85" class="quoteblock">
<div class="title">Requirement 85</div>
<blockquote>
A GeoPackage file MAY store feature table geometries with the extended non-linear geometry types
(CircularString, CompoundCurve, CurvePolygon, MultiCurve, MultiSurface, Curve, Surface) in <a href="#geometry_types">Geometry Types (Normative)</a>. If it does so, they
SHALL be encoded in the GeoPackageBinary geometry format.
</blockquote>
</div>
</div>
<div class="sect5">
<h6 id="_extensions_types_extensions_name">Extensions Types - Extensions Name</h6>
<div id="_requirement-86" class="quoteblock">
<div class="title">Requirement 86</div>
<blockquote>
An extension name to specify a feature geometry extension type SHALL be defined for the “gpkg” author name using the “gpkg_geom_&lt;gname&gt;” template where &lt;gname&gt; is the uppercase name of the extension geometry type from <a href="#geometry_types">Geometry Types (Normative)</a> used in a GeoPackage file.
</blockquote>
</div>
</div>
<div class="sect5">
<h6 id="_extensions_types_extensions_row">Extensions Types - Extensions Row</h6>
<div id="_requirement-87" class="quoteblock">
<div class="title">Requirement 87</div>
<blockquote>
A GeoPackage file that contains a <code>gpkg_geometry_columns</code> table or updateable view with row records
that specify extension <code>geometry_type_name</code> column values SHALL contain a <code>gpkg_extensions</code> table that contains row records with
<code>table_name</code> and <code>column_name</code> values from the <code>gpkg_geometry_columns</code> row records that identify extension type uses, and
<code>extension_name</code> column values for each of those geometry types constructed per clause 3.1.2.1.2.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_spatial_indexes">3.1.2. Spatial Indexes</h4>
<div class="sect4">
<h5 id="_data_22">Data</h5>
<div class="paragraph">
<p>The optional registered extension capabilities defined in sub clauses and requirement statements of this clause MAY be
implemented by any GeoPackage file that implements requirements of clause 2.1 and clause 2.6 on which they depend.</p>
</div>
<div class="sect5">
<h6 id="_spatial_indexes_implementation">Spatial Indexes Implementation</h6>
<div class="paragraph">
<p>Spatial indexes provide a significant performance advantage for searches with basic envelope spatial criteria that
return subsets of the rows in a feature table with a non-trivial number (thousands or more) of rows.[^2]</p>
</div>
<div class="paragraph">
<p>Spatial indexes are an optional GeoPackage extension with the following runtime requirements</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The SQLite RTree extension SHALL be available and loaded per clause</p>
</li>
<li>
<p>SQLite trigger support SHALL be present per clause 2.6.1.2.2.<br></p>
</li>
<li>
<p>The ST_MinX, ST_MaxX, ST_MinY, ST_MaxY SQL functions specified in <a href="#minimal_runtime_sql_functions">Minimal Runtime SQL Functions (Normative)</a> SHALL be available.</p>
</li>
</ul>
</div>
<div id="_requirement-88" class="quoteblock">
<div class="title">Requirement 88</div>
<blockquote>
A GeoPackage file SHALL implement spatial indexes on feature table geometry columns as specified in clause
<a href="#_spatial_indexes_implementation">Spatial Indexes Implementation</a> using the SQLite Virtual Table RTrees and triggers specified in <a href="#spatial_index_sql">Spatial Index SQL (Normative)</a>.
</blockquote>
</div>
</div>
<div class="sect5">
<h6 id="_spatial_indexes_extensions_name">Spatial Indexes - Extensions Name</h6>
<div id="_requirement-89" class="quoteblock">
<div class="title">Requirement 89</div>
<blockquote>
The “gpkg_rtree_index” extension name SHALL be used as a <code>gpkg_extensions</code> table extension name
column value to specify implementation of spatial indexes on a geometry column.
</blockquote>
</div>
</div>
<div class="sect5">
<h6 id="_spatial_indexes_extensions_row">Spatial Indexes - Extensions Row</h6>
<div id="_requirement-90" class="quoteblock">
<div class="title">Requirement 90</div>
<blockquote>
A GeoPackage file that implements spatial indexes SHALL have a <code>gpkg_extensions</code> table that contains
a row for each spatially indexed column with <code>extension_name</code> “gpkg_rtree_index”, the <code>table_name</code> of the table with a
spatially indexed column, and the <code>column_name</code> of the spatially indexed column.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_geometry_type_triggers">3.1.3. Geometry Type Triggers</h4>
<div class="sect4">
<h5 id="_data_23">Data</h5>
<div class="paragraph">
<p>The optional extension capabilities defined in sub clauses and requirement statements of this clause MAY be implemented
by any GeoPackage file that implements requirements of clause 2.1 and clause 2.6 on which they depend.</p>
</div>
<div class="sect5">
<h6 id="_geometry_type_triggers_implementation">Geometry Type Triggers – Implementation</h6>
<div id="_requirement-91" class="quoteblock">
<div class="title">Requirement 91</div>
<blockquote>
A GeoPackage file SHALL include the SQL insert and update triggers specified in clause 3.1.4.1.1
and 17 on every feature table geometry column to enforce the geometry type values specified for those columns in the
<code>gpkg_geometry_columns</code> table.
</blockquote>
</div>
<div class="listingblock">
<div class="title">Geometry Type Trigger Definition SQL Template</div>
<div class="content">
<pre>CREATE TRIGGER fgti_&lt;t&gt;_&lt;c&gt; BEFORE INSERT ON '&lt;t&gt;'
FOR EACH ROW
BEGIN
  SELECT RAISE (ABORT, 'insert on &lt;t&gt; violates constraint: ST_GeometryType(&lt;c&gt;) is not assignable from gpkg_geometry_columns.geometry_type_name value')
  WHERE (SELECT geometry_type_name FROM gpkg_geometry_columns
         WHERE Lower(table_name) = Lower('&lt;t&gt;')
          AND   Lower(column_name) = Lower('&lt;c&gt;')
          AND   gpkg_IsAssignable(geometry_type_name,
                                  ST_GeometryType(NEW.&lt;c&gt;)) = 0;

END

CREATE TRIGGER fgtu_&lt;t&gt;_&lt;c&gt; BEFORE UPDATE OF '&lt;c&gt;' ON '&lt;t&gt;'
FOR EACH ROW
BEGIN
SELECT RAISE (ABORT,
'update of &lt;c&gt; on &lt;t&gt; violates constraint: ST_GeometryType(&lt;c&gt;) is not assignable from gpkg_geometry_columns.geometry_type_name value')
WHERE (SELECT geometry_type_name FROM gpkg_geometry_columns
       WHERE Lower(table_name) = Lower('&lt;t&gt;')
        AND   Lower(column_name) = Lower('&lt;c&gt;')
        AND   gpkg_IsAssignable(geometry_type_name,
                                ST_GeometryType(NEW.&lt;c&gt;)) = 0;
END</pre>
</div>
</div>
<div class="paragraph">
<p>where and are replaced with the names of the feature table and geometry column being inserted or updated. The triggers
to enforce <code>gpkg_geometry_columns</code> <code>geometry_type_name</code> constraints on feature table geometries use Minimal Runtime SQL
Functions specified in <a href="#minimal_runtime_sql_functions">Minimal Runtime SQL Functions (Normative)</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_geometry_type_triggers_extensions_name">Geometry Type Triggers – Extensions Name</h6>
<div id="_requirement-92" class="quoteblock">
<div class="title">Requirement 92</div>
<blockquote>
The “gpkg_geometry_type_trigger” extension name SHALL be used as a <code>gpkg_extensions</code> table
extension name column value to specify implementation of geometry type triggers.
</blockquote>
</div>
</div>
<div class="sect5">
<h6 id="_geometry_type_triggers_extensions_row">Geometry Type Triggers – Extensions Row</h6>
<div id="_requirement-93" class="quoteblock">
<div class="title">Requirement 93</div>
<blockquote>
A GeoPackage file that implements geometry type triggers on feature table geometry columns SHALL
contain a <code>gpkg_extensions</code> table that contains a row for each such geometry column with <code>extension_name</code>
“gpkg_geometry_type_trigger”, <code>table_name</code> of the feature table with a geometry column, and <code>column_name</code> of the
geometry column.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_srs_id_triggers">3.1.4. SRS_ID Triggers</h4>
<div class="sect4">
<h5 id="_data_24">Data</h5>
<div class="paragraph">
<p>The optional extension capabilities defined in sub clauses and requirement statements of this clause MAY be implemented
by any GeoPackage file that implements requirements of clause 2.1 and clause 2.6 on which they depend.</p>
</div>
<div class="sect5">
<h6 id="_srs_id_triggers_implementation">SRS_ID Triggers – Implementation</h6>
<div id="_requirement-94" class="quoteblock">
<div class="title">Requirement 94</div>
<blockquote>
A GeoPackage file SHALL include the SQL insert and update triggers specified in clause 3.1.5.1.1 and 18 on
every feature table geometry column to enforce the <code>srs_id</code> values specified for those columns in the
<code>gpkg_geometry_columns</code> table.
</blockquote>
</div>
<div class="listingblock">
<div class="title">Table SRS_ID Trigger Definition SQL Templates</div>
<div class="content">
<pre>code,SQL
CREATE TRIGGER fgsi_&lt;t&gt; _&lt;c&gt; BEFORE INSERT ON '&lt;t&gt;'
FOR EACH ROW
BEGIN
  SELECT RAISE (ABORT, 'insert on &lt;t&gt;violates constraint: ST_SRID(&lt;c&gt;) does not match gpkg_geometry_columns.srs_id value')
  WHERE (SELECT srs_id FROM gpkg_geometry_columns
       WHERE Lower(table_name) = Lower('&lt;t&gt;')
       AND   Lower(column_name) = Lower('&lt;c&gt;')
       AND   ST_SRID(NEW.'&lt;c&gt;') &lt;&gt; srs_id) ;
END

CREATE TRIGGER fgsu_&lt;t&gt;_&lt;c&gt; BEFORE UPDATE OF '&lt;c&gt;' ON '&lt;t&gt;'
FOR EACH ROW
BEGIN
SELECT RAISE (ABORT,
'update of &lt;c&gt; on &lt;t&gt; violates constraint: ST_SRID(&lt;c&gt;) does not match gpkg_geometry_columns.srs_id value')
WHERE (SELECT srs_id FROM gpkg_geometry_columns
       WHERE Lower(table_name) = Lower('&lt;t&gt;')
       AND   Lower(column_name) = Lower('&lt;c&gt;')
       AND   ST_SRID(NEW.'&lt;c&gt;') &lt;&gt; srs_id);
END</pre>
</div>
</div>
<div class="paragraph">
<p>where &lt;t&gt; and &lt;c&gt; are replaced with the names of the feature table and geometry column being inserted or updated.</p>
</div>
<div class="paragraph">
<p>The triggers to enforce <code>gpkg_geometry_columns</code> <code>srs_id</code> constraints on feature table geometries use Minimal Runtime SQL
Functions specified in [minimal_runtime_sql_functions].</p>
</div>
</div>
<div class="sect5">
<h6 id="_srs_id_triggers_extensions_name">SRS_ID Triggers – Extensions Name</h6>
<div id="_requirement-95" class="quoteblock">
<div class="title">Requirement 95</div>
<blockquote>
The “gpkg_srs_id_trigger” extension name SHALL be used as a <code>gpkg_extensions</code> table extension name
column value to specify implementation of <code>srs_id</code> triggers.
</blockquote>
</div>
</div>
<div class="sect5">
<h6 id="_srs_id_triggers_extensions_row">SRS_ID Triggers – Extensions Row</h6>
<div id="_requirement-96" class="quoteblock">
<div class="title">Requirement 96</div>
<blockquote>
A GeoPackage file that implements <code>srs_id</code> triggers on feature table geometry columns SHALL contain
a <code>gpkg_extensions</code> table that contains a row for each geometry column with <code>extension_name</code> “gpkg_srs_id_trigger”,
<code>table_name</code> of the feature table with a geometry column, and <code>column_name</code> of the geometry column.
</blockquote>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_tiles_2">3.2. Tiles</h3>
<div class="sect3">
<h4 id="_zoom_levels_2">3.2.1. Zoom Levels</h4>
<div class="sect4">
<h5 id="_data_25">Data</h5>
<div class="paragraph">
<p>The optional extension capabilities defined in sub clauses and requirement statements of this clause MAY be implemented
by any GeoPackage file that implements the requirements of clause 2.2 and clause 2.6.1.1 on which they depend.</p>
</div>
<div class="sect5">
<h6 id="_zoom_other_intervals">Zoom Other Intervals</h6>
<div class="paragraph">
<p>As a registered extension, a GeoPackage file MAY contain tile matrix set user data tables with pixel sizes that vary by
irregular intervals or by regular intervals other than a factor of two (the default) between adjacent zoom levels, as
described in the <code>gpkg_tile_matrix</code> table.</p>
</div>
</div>
<div class="sect5">
<h6 id="_zoom_other_extensions_name">Zoom Other – Extensions Name</h6>
<div id="_requirement-97" class="quoteblock">
<div class="title">Requirement 97</div>
<blockquote>
The “gpkg_zoom_other” extension name SHALL be used as a <code>gpkg_extensions</code> table extension name
column value to specify implementation of other zoom intervals on a tile matrix set user data table.
</blockquote>
</div>
</div>
<div class="sect5">
<h6 id="_zoom_other_extensions_row">Zoom Other – Extensions Row</h6>
<div id="_requirement-98" class="quoteblock">
<div class="title">Requirement 98</div>
<blockquote>
A GeoPackage file that implements other zoom intervals SHALL have a <code>gpkg_extensions</code> table that
contains a row for each tile matrix set user data table with other zoom intervals with <code>extension_name</code>
“gpkg_zoom_other”, the <code>table_name</code> of the table with other zoom intervals, and the “tile_data” <code>column_name</code>.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ext_webp_tiles">3.2.2. Tile Encoding WEBP</h4>
<div class="sect4">
<h5 id="_data_26">Data</h5>
<div class="paragraph">
<p>The optional extension capabilities defined in sub clauses and requirement statements of this clause MAY be implemented
by any GeoPackage file that implements the requirements of clause 2.2 and clause 2.6.1.1 on which they depend.</p>
</div>
</div>
<div class="sect4">
<h5 id="_webp_mime_type">WEBP MIME Type</h5>
<div class="paragraph">
<p>As a registered extension, a GeoPackage file that contains a tile matrix user data table that contains tile data MAY
store <code>tile_data</code> in MIME type image/x-webp[26].</p>
</div>
<div class="sect5">
<h6 id="_webp_extensions_name">WEBP&#8201;&#8212;&#8201;Extensions Name</h6>
<div id="_requirement-99" class="quoteblock">
<div class="title">Requirement 99</div>
<blockquote>
The “gpkg_webp” extension name SHALL be used as a <code>gpkg_extensions</code> table extension name
column value to specify storage of raster images in WEBP format.
</blockquote>
</div>
</div>
<div class="sect5">
<h6 id="_webp_extensions_row">WEBP&#8201;&#8212;&#8201;Extensions Row</h6>
<div id="_requirement-100" class="quoteblock">
<div class="title">Requirement 100</div>
<blockquote>
A GeoPackage file that contains tile matrix user data tables with <code>tile_data</code> columns that contain
raster images in WEBP format SHALL contain a <code>gpkg_extensions</code> table that contains row records with <code>table_name</code> values
for each such table, “tile_data” <code>column_name</code> values and <code>extension_name</code> column values of “gpkg_webp”.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ext_tiff_tiles">3.2.3. Tiles Encoding TIFF</h4>
<div class="sect4">
<h5 id="_data_27">Data</h5>
<div class="paragraph">
<p>The optional extension capabilities defined in sub clauses and requirement statements of this clause MAY be implemented
by any GeoPackage file that implements the requirements of clause 2.2 and clause 2.6.1.1 on which they depend.</p>
</div>
<div class="sect5">
<h6 id="_tiff_mime_type">TIFF MIME Type</h6>
<div class="paragraph">
<p>As a registered extension, a GeoPackage file that contains a tile matrix user data table that contains tile data MAY
store tile_data in MIME type image/tiff [27] for GeoTIFF images [28][29] that meet the requirements of the NGA
Implementation Profile [31] for coordinate transformation case 3 where the position and scale of the data is known
exactly, and no rotation of the image is required.</p>
</div>
</div>
<div class="sect5">
<h6 id="_tiff_extensions_name">TIFF&#8201;&#8212;&#8201;Extensions Name</h6>
<div id="_requirement-101" class="quoteblock">
<div class="title">Requirement 101</div>
<blockquote>
The “gpkg_tiff” extension name SHALL be used as a <code>gpkg_extensions</code> table extension name
column value to specify storage of raster images in TIFF format.
</blockquote>
</div>
</div>
<div class="sect5">
<h6 id="_extensions_row">Extensions Row</h6>
<div id="_requirement-102" class="quoteblock">
<div class="title">Requirement 102</div>
<blockquote>
A GeoPackage file that contains tile matrix user data tables with <code>tile_data</code> columns that contain
raster images in TIFF format per SHALL contain a <code>gpkg_extensions</code> table that contains row records with <code>table_name</code>
values for each such table, “tile_data” <code>column_name</code> values and <code>extension_name</code> column values of “gpkg_tiff”.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ext_nitf_tiles">3.2.4. Tile Encoding NITF</h4>
<div class="sect4">
<h5 id="_data_28">Data</h5>
<div class="paragraph">
<p>The optional extension capabilities defined in sub clauses and requirement statements of this clause MAY be implemented
by any GeoPackage file that implements the requirements of clause 2.2 and clause 2.6.1.1 on which they depend.</p>
</div>
<div class="sect5">
<h6 id="_nitf_mime_type">NITF MIME Type</h6>
<div class="paragraph">
<p>As a registered extension, a GeoPackage file that contains a tile matrix user data table that contains tile data MAY
store <code>tile_data</code> in MIME type application/vnd.NITF[46] for National Imagery Transmission Format images.</p>
</div>
</div>
<div class="sect5">
<h6 id="_nitf_extensions_name">NITF&#8201;&#8212;&#8201;Extensions Name</h6>
<div id="_requirement-103" class="quoteblock">
<div class="title">Requirement 103</div>
<blockquote>
The “gpkg_nitf” extension name SHALL be used as a <code>gpkg_extensions</code> table extension name column
value to specify storage of raster images in NITF format.
</blockquote>
</div>
</div>
<div class="sect5">
<h6 id="_nitf_extensions_row">NITF&#8201;&#8212;&#8201;Extensions Row</h6>
<div id="_requirement-104" class="quoteblock">
<div class="title">Requirement 104</div>
<blockquote>
A GeoPackage file that contains tile matrix user data tables with <code>tile_data</code> columns that contain
raster images in NITF format SHALL contain a <code>gpkg_extensions</code> table that contains row records with <code>table_name</code> values
for each such table, “tile_data” <code>column_name</code> values and <code>extension_name</code> column values of “gpkg_nitf”.
</blockquote>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_other_tables">3.3. Other Tables</h3>
<div class="sect3">
<h4 id="_other_geometry_encoding">3.3.1. Other Geometry Encoding</h4>
<div class="sect4">
<h5 id="_data_29">Data</h5>
<div class="paragraph">
<p>The optional registered extension capabilities defined in sub clauses and requirement statements of this clause MAY be
implemented by any GeoPackage file that implements the requirements of clause 2.6.1.1 on which they depend.</p>
</div>
<div class="sect5">
<h6 id="_blob_format">BLOB Format</h6>
<div class="paragraph">
<p>As a registered extension, a GeoPackage file CAN store geometries in other data tables specified in clause 2.5 using
BLOB formats other than the GeoPackageBinary format specified in clause 2.1.3.1.1. However, other data tables with
geometry column data encoded in such extension formats are not considered to be GeoPackage feature tables for purposes
of determining GeoPackage file validity.</p>
</div>
</div>
<div class="sect5">
<h6 id="_blob_format_extensions_name">BLOB format - Extensions Name</h6>
<div id="_requirement-105" class="quoteblock">
<div class="title">Requirement 105</div>
<blockquote>
An extension name in the form &lt;author_name&gt;_geometry encoding SHALL be defined for an author name
other than “gpkg” for each geometry BLOB format other than GeoPackageBinary used in a GeoPackage file.
</blockquote>
</div>
</div>
<div class="sect5">
<h6 id="_blob_format_extensions_row">BLOB format - Extensions Row</h6>
<div id="_requirement-106" class="quoteblock">
<div class="title">Requirement 106</div>
<blockquote>
A GeoPackage file that contains other data tables with geometry column BLOB values encoded in an
extension format SHALL contain a gpkg_extensions table that contains row records with table_name and column_name values
that identify extension format uses, and with extension_name column values constructed per clause 3.3.1.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ext_other_tiles">3.3.2. Other Tile Encoding</h4>
<div class="sect4">
<h5 id="_data_30">Data</h5>
<div class="paragraph">
<p>The optional extension capabilities defined in sub clauses and requirement statements of this clause MAY be implemented
by any GeoPackage file that implements the requirements of clause 2.6.1.1 on which they depend.</p>
</div>
<div class="sect5">
<h6 id="_other_mime_type">Other MIME Type</h6>
<div class="paragraph">
<p>As a registered extension, a GeoPackage file can store images in other data tables specified in clause 2.5 using MIME types other than those specified in clause 2.2.
However, other data tables with such data are not considered to be “tiles” tables for purposes of determining GeoPackage file validity.</p>
</div>
</div>
<div class="sect5">
<h6 id="_other_extensions_name">Other Extensions Name</h6>
<div id="_requirement-107" class="quoteblock">
<div class="title">Requirement 107</div>
<blockquote>
An extension name in the form &lt;author_name&gt;_&lt;other&gt;_mime_type SHALL be defined for an author name other than “gpkg” for each other MIME image format used for data columns in other data tables, where &lt;other&gt; is replaced by the other MIME type abbreviation in uppercase
</blockquote>
</div>
</div>
<div class="sect5">
<h6 id="_other_extensions_row">Other Extensions Row</h6>
<div id="_requirement-108" class="quoteblock">
<div class="title">Requirement 108</div>
<blockquote>
A GeoPackage file that contains other data tables with data columns that contain raster images in a MIME type format other than those defined in this specification SHALL contain a <code>gpkg_extensions</code> table that contains row records with <code>table_name</code> and <code>column_name</code> values that identify extension MIME type uses and <code>extension_name</code> column values of the other format extension name defined per clause 3.3.2.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_other_trigger">3.3.3. Other Trigger</h4>
<div class="sect4">
<h5 id="_data_31">Data</h5>
<div class="paragraph">
<p>The optional extension capabilities defined in sub clauses and requirement statements of this clause MAY be implemented
by any GeoPackage file that implements requirements of clause 2.1 and/or 2.2 and clause 2.6 on which they depend.</p>
</div>
<div class="sect5">
<h6 id="_other_trigger_implementation">Other Trigger Implementation</h6>
<div class="paragraph">
<p>As a registered extension, GeoPackage files MAY contain other triggers that require support from GeoPackage SQLite
Extension functions other than those provided by SQLite or the GeoPackage Minimal Runtime SQL Functions to enforce data
integrity or application business rule constraints. [^3]</p>
</div>
</div>
<div class="sect5">
<h6 id="_other_trigger_extensions_name">Other Trigger – Extensions Name</h6>
<div id="_requirement-109" class="quoteblock">
<div class="title">Requirement 109</div>
<blockquote>
An extension name in the form for an author name other than “gpkg” SHALL be defined as a
<code>gpkg_extensions</code> table extension name column value to specify triggers in a GeoPackage file that use SQL functions
other than those provided by SQLite or the GeoPackage Minimal Runtime SQL Functions.
</blockquote>
</div>
</div>
<div class="sect5">
<h6 id="_other_trigger_extensions_row">Other Trigger – Extensions Row</h6>
<div id="_requirement-110" class="quoteblock">
<div class="title">Requirement 110</div>
<blockquote>
A GeoPackage file that implements triggers that use SQL functions other than those provided by
SQLite or the GeoPackage Minimal Runtime SQL Functions SHALL have a <code>gpkg_extensions</code> table that contains row records
with <code>table_name</code> values for each such table, <code>column_name</code> values for each such column and <code>extension_name</code> column
values of the other trigger extension name defined per clause 3.3.1.1.2.
</blockquote>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_security_considerations">4. Security Considerations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Security considerations for implementations utilizing GeoPackages are in the domain of the implementing application, deployment platform, operating system and networking environment.
The GeoPackage specification does not place any constraints on application, platform, operating system level or network security.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="abstract_test_suite"> Annex A: Conformance / Abstract Test Suite (Normative)</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>WARNING: This section is not up to date. Please refer to the PDF or Word version of the specification.</strong></p>
</div>
<div class="sect2">
<h3 id="_base_2">A.1. Base</h3>
<div class="sect3">
<h4 id="_core_2">A.1.1. Core</h4>
<div class="sect4">
<h5 id="_sqlite_container_2">SQLite Container</h5>
<div class="sect5">
<h6 id="_data_32">Data</h6>
<div class="paragraph">
<p><strong>File Format</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /base/core/container/data/file_format</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the Geopackage file is an SQLite version_3 database</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>: Pass if the first 16 bytes of the file contain "SQLite format 3" in ASCII.</p>
</div>
<div class="paragraph">
<p><strong>Reference</strong>: Clause 1.1.1.1.1 Req 1:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>: Basic</p>
</div>
<div class="paragraph">
<p><strong>File Extension Name</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /base/core/container/data/file_extension_name</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the geopackage file extension is ".gpkg"</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>: Pass if the geopackage file extension is ".gpkg"</p>
</div>
<div class="paragraph">
<p><strong>Reference</strong>: Clause 1.1.1.1.2 Req 2:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>: Basic</p>
</div>
<div class="paragraph">
<p><strong>Integrity Check</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /base/core/container/data/file_integrity</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the geopackage file passes the SQLite integrity check.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>: Pass if PRAGMA integrity_check returns "ok"</p>
</div>
<div class="paragraph">
<p><strong>Reference</strong>: Clause 1.1.1.1.3 Req 3:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>: Capability</p>
</div>
</div>
<div class="sect5">
<h6 id="_api_4">API</h6>
<div class="paragraph">
<p><strong>Structured Query Language</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /base/core/container/api/sql</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Test that the GeoPackage SQLite Extension provides the SQLite SQL API
 interface.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT * FROM sqlite_master</p>
</li>
<li>
<p>Fail if returns an SQL error.</p>
</li>
<li>
<p>Pass otherwise</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 1.1.1.2.1 Req 4:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Capability</p>
</div>
<div class="paragraph">
<p><strong>Every GPKG SQLite Configuration</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /base/core/container/api/every_gpkg_sqlite_config</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that a GeoPackage SQLite Extension has the Every GeoPackage
 SQLite Configuration compile and run time options.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT sqlite_compileoption_used(<em>SQLITE_OMIT_AUTOINCREMENT</em>)</p>
</li>
<li>
<p>Fail if returns 1</p>
</li>
<li>
<p>SELECT sqlite_compileoption_used(<em>SQLITE_OMIT_DATETIME_FUNCS</em>)</p>
</li>
<li>
<p>Fail if returns 1</p>
</li>
<li>
<p>SELECT sqlite_compileoption_used('SQLITE_OMIT_ DEPRECATED ')</p>
</li>
<li>
<p>Fail if returns 0</p>
</li>
<li>
<p>SELECT sqlite_compileoption_used('SQLITE_OMIT_ FLOATING_POINT ')</p>
</li>
<li>
<p>Fail if returns 1</p>
</li>
<li>
<p>SELECT sqlite_compileoption_used(<em>SQLITE_OMIT_PRAGMA</em>)</p>
</li>
<li>
<p>Fail if returns 1</p>
</li>
<li>
<p>SELECT sqlite_compileoption_used(<em>SQLITE_OMIT_FLAG_PRAGMAS</em>)</p>
</li>
<li>
<p>Fail if returns 1</p>
</li>
<li>
<p>SELECT sqlite_compileoption_used(<em>SQLITE_OMIT_VIEW</em>)</p>
</li>
<li>
<p>Fail if returns 1</p>
</li>
<li>
<p>Pass otherwise</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 1.1.1.2.2 Req 5:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Basic</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_spatial_reference_systems">Spatial Reference Systems</h5>
<div class="sect5">
<h6 id="_data_33">Data</h6>
<div class="paragraph">
<p><strong>Table Definition</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /base/core/spatial_ref_sys/data/table_def</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the gpkg_spatial_ref_sys table exists and has the correct definition.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT sql FROM sqlite_master WHERE type = <em>table</em> AND tbl_name = <em>gpkg_spatial_ref_sys</em></p>
</li>
<li>
<p>Fail if returns an empty result set</p>
</li>
<li>
<p>Pass if column names and column definitions in the returned CREATE TABLE
statement in the sql column value, including data type, nullability, and
primary key constraints match all of those in the contents of C.1
Table 19. Column order, check constraint and trigger definitions, and other column
definitions in the returned sql are irrelevant.</p>
</li>
<li>
<p>Fail otherwise.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 1.1.2.1.1 Req 6:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Basic</p>
</div>
<div class="paragraph">
<p><strong>Table Data Values</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /base/core/spatial_ref_sys/data_values_default</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the spatial_ref_sys table contains the required default contents.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT srid, auth_name, auth_srid, srtext FROM spatial_ref_sys WHERE srid = -1
returns -1 "NONE" -1 "Undefined", AND</p>
</li>
<li>
<p>SELECT srid, auth_name, auth_srid, srtext FROM spatial_ref_sys WHERE srid = 0
returns 0 "NONE" 0 "Undefined", AND</p>
</li>
<li>
<p>SELECT srid, auth_name, auth_srid, srtext FROM spatial_ref_sys WHERE srid =
  4326 returns 4326 epsg 4326 GEOGCS["WGS 84", DATUM["WGS_1984",
SPHEROID["WGS 84",6378137,298.257223563, AUTHORITY["EPSG","7030"]],
AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","
8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],
AUTHORITY["EPSG","4326"]] (whitespace irrelevant)</p>
</li>
<li>
<p>Pass if tests 1-3 are met</p>
</li>
<li>
<p>Fail otherwise</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 1.1.2.1.2 Req 7:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Capability</p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /base/core/spatial_ref_sys/data_values_required</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the spatial_ref_sys table contains rows to define all srs_id values
 used by features and tiles in a GeoPackage.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT DISTINCT gc.srs_id AS gc_srid, srs.srs_name, srs.srs_id, srs.organization,
srs.organization_coordsys_id, srs.definition FROM gpkg_contents AS gc LEFT
OUTER JOIN gpkg_spatial_ref_sys AS srs ON srs.srs_id = gc.srs_id</p>
</li>
<li>
<p>Pass if no returned srs values are NULL.</p>
</li>
<li>
<p>Fail otherwise</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause Clause 1.1.2.1.2 Req 7:</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_test_type_capabilitycontents">Test Type: CapabilityContents</h5>
<div class="sect5">
<h6 id="_data_34">Data</h6>
<div class="paragraph">
<p><strong>Table Definition</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /base/core/contents/data/table_def</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the gpkg_contents table exists and has the correct definition.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT sql FROM sqlite_master WHERE type = <em>table</em> AND tbl_name = <em>gpkg_contents</em></p>
</li>
<li>
<p>Fail if returns an empty result set.</p>
</li>
<li>
<p>Pass if the column names and column definitions in the returned CREATE TABLE
statement, including data type, nullability, default values and primary, foreign and
unique key constraints match all of those in the contents of C.2 Table 20. Column
order, check constraint and trigger definitions, and other column definitions in the
returned sql are irrelevant.</p>
</li>
<li>
<p>Fail Otherwise</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 1.1.3.1.1 Req 9:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Basic</p>
</div>
<div class="paragraph">
<p><strong>Table Data Values</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /base/core/contents/data/data_values_table_name</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the table_name column values in the gpkg_contents table are
 valid.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT DISTINCT gc.table_name AS gc_table, sm.tbl_name
FROM gpkg_contents AS ge LEFT OUTER JOIN sqlite_master AS sm ON
gc.table_name = sm.tbl_name</p>
</li>
<li>
<p>Not testable if returns an empty result set.</p>
</li>
<li>
<p>Fail if any gpkg_contents.table_name value is NULL</p>
</li>
<li>
<p>Pass otherwise.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:    Clause 1.1.3.1.2 Req 10:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:    Capability</p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /base/core/contents/data/data_values_last_change</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the gpkg_contents table last_change column values are in ISO
 8601 [41]format containing a complete date plus UTC hours, minutes, seconds and a
 decimal fraction of a second, with a <em>Z</em> (<em>zulu</em>) suffix indicating UTC.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT last_change from gpkg_contents.</p>
</li>
<li>
<p>Not testable if returns an empty result set.</p>
</li>
<li>
<p>For each row from step 1</p>
<div class="ulist">
<ul>
<li>
<p>Fail if format of returned value does not match yyyy-mm-ddThh:mm:ss.hhhZ</p>
</li>
<li>
<p>Log pass otherwise</p>
</li>
</ul>
</div>
</li>
<li>
<p>Pass if logged pass and no fails.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:    Clause 1.1.3.1.2 Req 11:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:    Capability</p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /base/core/contents/data/data_values_srs_id</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the gpkg_contents table srs_id column values are defined in the
 gpkg_spatial_ref_sys table.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT srs_id FROM gpkg_contents</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT srs_id FROM gpkg_contents WHERE srs_id NOT IN (SELECT srs_id
FROM gpkg_spatial_ref_sys)</p>
</li>
<li>
<p>Fail if does not return an empty result set</p>
</li>
<li>
<p>SELECT srs_id FROM gpkg_contents gc WHERE data_type = <em>features</em> AND srs_id
NOT IN (SELECT srs_id FROM gpkg_geometry_columns WHERE table_name =
gc.table_name)</p>
</li>
<li>
<p>Fail if does not return an empty result set</p>
</li>
<li>
<p>Pass otherwise</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:    Clause Clause 1.1.3.1.2 Req 12:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:    Capability</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_options_2">A.2. Options</h3>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/valid_geopackage</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that a GeoPackage contains a features or tiles table and gpkg_contents
 table row describing it.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Execute test /opt/features/contents/data/features_row</p>
</li>
<li>
<p>Pass if test passed</p>
</li>
<li>
<p>Execute test /opt/tiles/contents/data/tiles_row</p>
</li>
<li>
<p>Pass if test passed</p>
</li>
<li>
<p>Fail otherwise</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 2 Req 13:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Capability</p>
</div>
<div class="sect3">
<h4 id="_features_3">A.2.1. Features</h4>
<div class="sect4">
<h5 id="_contents_4">Contents</h5>
<div class="sect5">
<h6 id="_data_35">Data</h6>
<div class="paragraph">
<p><strong>Contents Table Feature Row</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/features/contents/data/features_row</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the gpkg_contents table_name value table exists, and is
 apparently a feature table for every row with a data_type column value of "features"</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Execute test /opt/features/vector_features/data/feature_table_integer_primary_key</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 2.1.2.1.1 Req 14:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Capability</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_geometry_encoding_2">Geometry Encoding</h5>
<div class="sect5">
<h6 id="_data_36">Data</h6>
<div class="paragraph">
<p><strong>BLOB Format</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/features/geometry_encoding/data/blob</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that geometries stored in feature table geometry columns are encoded
 in the GeoPackageBinary format.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name AS tn, column_name AS cn FROM gpkg_geometry_columns
WHERE table_name IN (SELECT table_name FROM gpkg_contents WHERE
data_type = <em>features</em>)</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row from step 1</p>
<div class="ulist">
<ul>
<li>
<p>SELECT cn FROM tn</p>
</li>
<li>
<p>Not testable if none found</p>
</li>
<li>
<p>For each cn value from step a</p>
<div class="ulist">
<ul>
<li>
<p>Fail if the first three bytes of each gc are not "GPB"</p>
</li>
<li>
<p>Fail if gc.version_number is not 0</p>
</li>
<li>
<p>Fail if ST_IsEmpty(cn value) = 1 and gc.flags.envelope != 0 and envelope values are not NaN</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:    Clause 2.1.3.1.1 Req 15:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:    Capability</p>
</div>
</div>
<div class="sect5">
<h6 id="_api_5">API</h6>
<div class="paragraph">
<p><strong>Minimal Runtime SQL Functions</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/features/geometry_encoding/sql_func</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that a GeoPackage SQLite Extension provides the GeoPackage
 Minimal Runtime SQL functions.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open Geometry Test Data Set GeoPackage with GeoPackage SQLite Extension</p>
</li>
<li>
<p>For each Geometry Test Data Set &lt;gtype_test&gt; data table row for each assignable
(gtype, atype) and non-assignable (ntype, atype) combination of geometry type in
Annex G, for an assortment of srs_ids, for an assortment of coordinate values,
without and with z and / or m values, in both big and little endian encodings:</p>
<div class="ulist">
<ul>
<li>
<p>SELECT <em>Fail</em> FROM &lt;gtype_test&gt; WHERE ST_SRID(geom) != srs_id</p>
</li>
<li>
<p>SELECT <em>Fail</em> FROM &lt;gtype_test&gt; WHERE ST_GeometryType(geom) !=
atype</p>
</li>
<li>
<p>SELECT <em>Fail</em> FROM &lt;gtype_test&gt; WHERE GPKG_IsAssignable(gtype,
atype) = 0</p>
</li>
<li>
<p>SELECT <em>Fail</em> FROM &lt;gtype_test&gt; WHERE GPKG_IsAssignable(ntype,
atype) = 1</p>
</li>
<li>
<p>SELECT <em>Fail</em> FROM &lt;gtype_test&gt; WHERE ST_Is3D(geom) != is3d</p>
</li>
<li>
<p>SELECT <em>Fail</em> FROM &lt;gtype_test&gt; WHERE ST_IsMeasured(geom) != ism</p>
</li>
<li>
<p>SELECT <em>Fail</em> FROM &lt;gtype_test&gt; WHERE ST_MinX(geom) != minx</p>
</li>
<li>
<p>SELECT <em>Fail</em> FROM &lt;gtype_test&gt; WHERE ST_MaxX(geom) != maxx</p>
</li>
<li>
<p>SELECT <em>Fail</em> FROM &lt;gtype_test&gt; WHERE ST_MinY(geom) != miny</p>
</li>
<li>
<p>SELECT <em>Fail</em> FROM &lt;gtype_test&gt; WHERE ST_MaxY(geom) != maxy</p>
</li>
<li>
<p>SELECT <em>Fail</em> FROM &lt;gtype_test&gt; WHERE ST_MinZ(geom) != minz</p>
</li>
<li>
<p>SELECT <em>Fail</em> FROM &lt;gtype_test&gt; WHERE ST_MaxZ(geom) != maxz</p>
</li>
<li>
<p>SELECT <em>Fail</em> FROM &lt;gtype_test&gt; WHERE ST_MinM(geom) != minm</p>
</li>
<li>
<p>SELECT <em>Fail</em> FROM &lt;gtype_test&gt; WHERE ST_MaxM(geom) != maxm</p>
</li>
</ul>
</div>
</li>
<li>
<p>Pass if no <em>Fail</em> selected from step 2</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:    Clause 2.1.3.2.1 Req 16:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:    Capability</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_geometry_types_3">Geometry Types</h5>
<div class="sect5">
<h6 id="_data_37">Data</h6>
<div class="paragraph">
<p><strong>Core Types</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/features/geometry_encoding/data/core_types_existing_sparse_data</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that existing basic simple feature geometries are stored in valid GeoPackageBinary format encodings.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name FROM gpkg_geometry_columns</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT table_name AS tn, column_name AS cn FROM gpkg_geometry_columns
WHERE table_name IN (SELECT table_name FROM gpkg_contents WHERE
data_type = <em>features</em>),</p>
</li>
<li>
<p>Fail if returns an empty result set</p>
</li>
<li>
<p>For each row from step 3</p>
<div class="ulist">
<ul>
<li>
<p>SELECT cn FROM tn;</p>
</li>
<li>
<p>For each row from step a, if bytes 2-5 of cn.wkb as uint32 in endianness of
   gc.wkb byte 1of cn from #1 are a geometry type value from Annex G Table 46,
   then
+     Log cn.header values, wkb endianness and geometry type
+     If cn.wkb is not correctly encoded per ISO 13249-3 clause 5.1.46 then log
       fail
+      If cn.flags.E is 1 - 4 and some cn.wkbx is outside of cn.envelope.minx,maxx
       then log fail
+      If cn.flags.E is 1 - 4 and some gc.wkby is outside of cn.envelope.miny,maxy
       then log fail
+      If cn.flags.E is 2,4 and some gc.wkb.z is outside of cnenvelope.minz,maxz
       then log fail
+      If cn.flags.E is 3,4 and some gc.wkb.m is outside of cn.envelope.minm,maxm
       then log fail
+      If cn.flags.E is 5-7 then log fail
+      Otherwise log pass</p>
</li>
</ul>
</div>
</li>
<li>
<p>Pass if log contanins pass and no fails</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 2.1.4.1.1 Req 17:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Capability</p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/features/geometry_encoding/data/core_types_all_types_test_data</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that all basic simple feature geometry types and options are stored in valid GeoPackageBinary format encodings.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open GeoPackage that has feature geometry values of geometry type in Annex G, for
an assortment of srs_ids, for an assortment of coordinate values, without and with z
and / or m values, in both big and little endian encodings:</p>
</li>
<li>
<p>/opt/features/geometry_encoding/data/core_types_existing_sparse_data</p>
</li>
<li>
<p>Pass if log contains pass record for big and little endian GPB headers containing big
and little endian WKBs for 0-1 envelope contents indicator codes for every geometry
type value from Annex G Table 46 without and with z and/or m values.</p>
</li>
<li>
<p>Fail otherwise</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 2.1.4.1.1 Req 17:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Capability</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_geometry_columns_2">Geometry Columns</h5>
<div class="sect5">
<h6 id="_data_38">Data</h6>
<div class="paragraph">
<p><strong>Table Definition</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/features/geometry_columns/data/table_def</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the gpkg_geometry_columns table exists and has the correct
 definition.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT sql FROM sqlite_master WHERE type = <em>table</em> AND tbl_name =
<em>gpkg_geometry_columns</em></p>
</li>
<li>
<p>Fail if returns an empty result set.</p>
</li>
<li>
<p>Pass if the column names and column definitions in the returned Create TABLE
statement in the sql column value, including data type, nullability, default values and
primary, foreign and unique key constraints match all of those in the contents of C.4
Table 22. Column order, check constraint and trigger definitions, and other column
definitions in the returned sql are irrelevant.</p>
</li>
<li>
<p>Fail otherwise.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 2.1.5.1.1 Req 18:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Basic</p>
</div>
<div class="paragraph">
<p><strong>Table Data Values</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/features/geometry_columns/data/data_values_table_name</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the table_name column values in the gpkg_geometry_columns
 table are valid.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT DISTINCT table_name FROM gpkg_geometry_columns</p>
</li>
<li>
<p>Not testable if returns an empty result set.</p>
</li>
<li>
<p>For each row from setp 1</p>
<div class="ulist">
<ul>
<li>
<p>Fail if table_name value is NULL</p>
</li>
</ul>
</div>
</li>
<li>
<p>SELECT DISTINCT ggc.table_name AS ggc_table, gc.table_name
FROM gpkg_geometry_columns AS ggc LEFT OUTER JOIN geopackage_contents
AS gc ON ggc.table_name = gc.table_name</p>
</li>
<li>
<p>For each row from step 4</p>
<div class="ulist">
<ul>
<li>
<p>Fail if ggc.table_name != gc.table_name</p>
</li>
</ul>
</div>
</li>
<li>
<p>Pass if no fails.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 2.1.5.1.2 Req 19:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Capability</p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/features/geometry_columns/data/data_values_column_name</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the column_name column values in the gpkg_geometry_columns
table are valid.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name, column_name FROM gpkg_geometry_columns</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row from step 1</p>
<div class="ulist">
<ul>
<li>
<p>PRAGMA table_info(table_name)</p>
</li>
<li>
<p>Fail if gpkg_geometry_columns.column_name value does not equal a name
column value returned by PRAGMA table_info.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Pass if no fails.</p>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:   Clause 2.1.5.1.2 Req 20:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>: Capability</p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/features/geometry_columns/data/data_values_geometry_type_name</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verrify that the geometry_type_name column values in the
gpkg_geometry_columns table are valid.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT DISTINCT geometry_type_name from gpkg_geometry_columns</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row from step 1</p>
<div class="ulist">
<ul>
<li>
<p>Fail if a returned geometry_type value is not in Table 46 or Table 47 in Annex G</p>
</li>
</ul>
</div>
</li>
<li>
<p>Pass if no fails.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 2.1.5.1.2 Req 21:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Capability</p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/features/geometry_columns/data/data_values_srs_id</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the gpkg_geometry_columns table srs_id column values are
defined in the gpkg_spatial_ref_sys table.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT srs_id FROM gpkg_geometry_columns</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT srs_id FROM gpkg_geometry_columns WHERE srs_id NOT IN (SELECT
srs_id FROM gpkg_spatial_ref_sys)</p>
</li>
<li>
<p>Fail if does not return an empty result set</p>
</li>
<li>
<p>Pass otherwise.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 2.1.5.1.2 Req 22:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Capability</p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/features/geometry_columns/data/data_values_z</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the gpkg_geometry_columns table z column values are valid.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT z FROM gpkg_geometry_columns</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT z FROM gpkg_geometry_columns WHERE z NOT IN (1,2,3)</p>
</li>
<li>
<p>Fail if does not return an empty result set</p>
</li>
<li>
<p>Pass otherwise.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 2.1.5.1.2 Req 23:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Capability</p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/features/geometry_columns/data/data_values_m</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the gpkg_geometry_columns table m column values are valid.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT m FROM gpkg_geometry_columns</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT m FROM gpkg_geometry_columns WHERE m NOT IN (1,2,3)</p>
</li>
<li>
<p>Fail if does not return an empty result set</p>
</li>
<li>
<p>Pass otherwise.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 2.1.5.1.2 Req 24:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Capability</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_vector_features_user_data_tables">Vector Features User Data Tables</h5>
<div class="sect5">
<h6 id="_data_39">Data</h6>
<div class="paragraph">
<p><strong>Table Definition</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/features/vector_features/data/feature_table_integer_primary_key</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that every vector features user data table has an integer primary key.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name FROM gpkg_contents WERE data_type = <em>features</em></p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row from step 1</p>
<div class="ulist">
<ul>
<li>
<p>PRAGMA table_info(table_name)</p>
</li>
<li>
<p>Fail if returns an empty result set</p>
</li>
<li>
<p>Fail if result set does not contain one row where the pk column value is 1 and the not
null column value is 1 and the type column value is "INTEGER"</p>
</li>
</ul>
</div>
</li>
<li>
<p>Pass if no fails.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 2.1.6.1.1 Req 25:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Basic</p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/features/vector/features/data/feature_table_one_geometry_column</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that every vector features user data table has one geometry column.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name FROM gpkg_contents WERE data_type = <em>features</em></p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row table name from step 1</p>
<div class="ulist">
<ul>
<li>
<p>SELECT column_name from gpkg_geometry_columns where table_name = row
table name</p>
</li>
<li>
<p>Fail if returns more than one column name</p>
</li>
</ul>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>: Clause 2.1.6.1.1 Req 26:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>: Capability</p>
</div>
<div class="paragraph">
<p><strong>Table Data Values</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/features/vector_features/data/data_values_geometry_type</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the geometry type of feature geometries are of the type or are
 assignable for the geometry type specified by the gpkg_geometry columns table
 geometry_type_name column value.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name AS tn, column_name AS cn, geometry_type_name AS gt_name
FROM gpkg_geometry_columns WHERE table_name IN (SELECT table_name
FROM gpkg_contents WHERE data_type = <em>features</em>)</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row from step 1</p>
<div class="ulist">
<ul>
<li>
<p>SELECT DISTINCT ST_GeometryType(cn) FROM tn</p>
</li>
<li>
<p>For each row actual_type_name from step a
+    SELECT GPKG_IsAssignable(geometry_type_name, actual_type_name)
+    Fail if any returned 0</p>
</li>
</ul>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 2.1.6.1.2 Req 27:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Capability</p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/features/vector_features/data/tata_value_geometry_srs_id</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify the the srs_id of feature geometries are the srs_id specified for the
 gpkg_geometry_columns table srs_id column value.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name AS tn, column_name AS cn, srs_id AS gc_srs_id FROM
gpkg_geometry_columns WHERE table_name IN (SELECT table_name FROM
gpkg_contents where data_type = <em>features</em>)</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row from step 1</p>
<div class="ulist">
<ul>
<li>
<p>SELECT DISTINCT st_srid(cn) FROM tn</p>
</li>
<li>
<p>For each row from step a
+     Fail if returnvalue not equal to gc_srs_id</p>
</li>
</ul>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 2.1.6.1.2 Req 28:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Capability</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_tiles_3">A.2.2. Tiles</h4>
<div class="sect4">
<h5 id="_contents_5">Contents</h5>
<div class="sect5">
<h6 id="_data_40">Data</h6>
<div class="paragraph">
<p><strong>Contents Table - Tiles Row</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/tiles/contents/data/tiles_row</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the gpkg_contents table_name value table exists and is apparently
 a tiles table for every row with a data_type column value of "tiles".</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name FROM gpkg_contents WHERE data_type = "tiles"</p>
</li>
<li>
<p>Fail if returns empty result set</p>
</li>
<li>
<p>For each row from step 1</p>
<div class="ulist">
<ul>
<li>
<p>PRAGMA table_info(table_name)</p>
</li>
<li>
<p>Fail if returns an empty result set</p>
</li>
<li>
<p>Fail if result set does not contain one row where the pk column value is 1 and the
not null column value is 1 and the type column value is "INTEGER"and the
name column value is "id"</p>
</li>
<li>
<p>Fail if result set does not contain four other rows where the name column values
are "zoom_level","tile_column","tile_row", and "tile_data".</p>
</li>
</ul>
</div>
</li>
<li>
<p>Pass if no fails.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 2.2.2.1.1 Req 29:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Capability</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_zoom_levels_3">Zoom Levels</h5>
<div class="sect5">
<h6 id="_data_41">Data</h6>
<div class="paragraph">
<p><strong>Zoom Times Two</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/tiles/zoom_levels_data_zoom_times_two</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that by default zoom level pixel sizes for tile matrix user data tables
 vary by factors of 2 between adjacent zoom levels in the tile matrix metadata table.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT CASE
WHEN (SELECT tbl_name FROM sqlite_master WHERE tbl_name =
<em>gpkg_extensions</em>) = <em>gpkg_extensions</em> THEN
(SELECT table_name FROM geopackage_contents WHERE data_type = <em>tiles</em> AND
table_name NOT IN
  (SELECT table_name from gpkg_extensions WHERE extension_name =
<em>gpkg_zoom_other</em>))
ELSE (SELECT table_name FROM geopackage_contents WHERE data_type =
<em>tiles</em>)
END;</p>
</li>
<li>
<p>Not testable if returns empty result set</p>
</li>
<li>
<p>For each row table_name from step 1</p>
<div class="ulist">
<ul>
<li>
<p>SELECT zoom_level, pixel_x_size, pixel_y_size FROM tile_matrix_metadata
WHERE table_name = selected table name ORDER BY zoom_level ASC</p>
</li>
<li>
<p>Not testable if returns empty result set, or only one row</p>
</li>
<li>
<p>Not testable if there are not two rows with adjacent zoom levels</p>
</li>
<li>
<p>Fail if any pair of rows for adjacent zoom levels have pixel_x_size or
pixel_y_size values that differ by other than factors of two</p>
</li>
</ul>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:      Clause 2.2.3.1.1 Req 30:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:      Capability</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_tile_encoding_png_2">Tile Encoding PNG</h5>
<div class="sect5">
<h6 id="_data_42">Data</h6>
<div class="paragraph">
<p><strong>MIME Type PNG</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/tiles/tiles_encoding/data/mime_type_png</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that a tile matrix user data table that contains tile data that is not
 MIME type image/jpeg by default contains tile data in MIME type image/png.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT CASE
WHEN (SELECT tbl_name FROM sqlite_master WHERE tbl_name =
<em>gpkg_extensions</em>) = <em>gpkg_extensions</em> THEN
(SELECT table_name FROM geopackage_contents WHERE data_type = <em>tiles</em> AND
table_name NOT IN
(SELECT table_name from gpkg_extensions WHERE extension_name IN
(<em>gpkg_webp</em>,<em>gpkg_tiff</em>,<em>gpkg_nitf</em>)))
ELSE (SELECT table_name FROM geopackage_contents WHERE data_type =
<em>tiles</em>)
END;</p>
</li>
<li>
<p>Not testable if returns empty result set</p>
</li>
<li>
<p>For each row tbl_name from step 1</p>
<div class="ulist">
<ul>
<li>
<p>SELECT tile_data FROM tbl_name</p>
</li>
<li>
<p>For each row tile_data from step a
+ Pass if tile data in MIME type image/png</p>
</li>
</ul>
</div>
</li>
<li>
<p>Fail if no passes</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:      Clause 2.2.4.1.1 Req 31:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:      Capability</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_tile_encoding_jpeg_2">Tile Encoding JPEG</h5>
<div class="sect5">
<h6 id="_data_43">Data</h6>
<div class="paragraph">
<p><strong>MIME Type JPEG</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/tiles/tiles_encoding/data/mime_type_jpeg</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that a tile matrix user data table that contains tile data that is not
 MIME type image/png by default contains tile data in MIME type image/jpeg.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT CASE
WHEN (SELECT tbl_name FROM sqlite_master WHERE tbl_name =
<em>gpkg_extensions</em>) = <em>gpkg_extensions</em> THEN
(SELECT table_name FROM geopackage_contents WHERE data_type = <em>tiles</em> AND
table_name NOT IN
  (SELECT table_name from gpkg_extensions WHERE extension_name IN
(<em>gpkg_webp</em>,<em>gpkg_tiff</em>,<em>gpkg_nitf</em>)))
ELSE (SELECT table_name FROM geopackage_contents WHERE data_type =
<em>tiles</em>)
END;</p>
</li>
<li>
<p>Not testable if returns empty result set</p>
</li>
<li>
<p>For each row tbl_name from step 1</p>
<div class="ulist">
<ul>
<li>
<p>SELECT tile_data FROM tbl_name</p>
</li>
<li>
<p>For each row tile_data from step a
+   Pass if tile data in MIME type image/jpeg</p>
</li>
</ul>
</div>
</li>
<li>
<p>Fail if no passes</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:    Clause 2.2.5.1.1 Req 32:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:    Capability</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_tile_matrix_metadata">Tile Matrix Metadata</h5>
<div class="sect5">
<h6 id="_data_44">Data</h6>
<div class="paragraph">
<p><strong>Table Definition</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/tiles/tile_matrix_metadata/data/table_def</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the gpkg_tile_matrix_metadata table exists and has the correct
 definition.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT sql FROM sqlite_master WHERE type = <em>table</em> AND tbl_name =
<em>gpkg_tile_matrix_metadata</em></p>
</li>
<li>
<p>Fail if returns an empty result set.</p>
</li>
<li>
<p>Pass if the column names and column definitions in the returned CREATE TABLE
statement in the sql column value,, including data type, nullability, default values and
primary, foreign and unique key constraints match all of those in the contents of C.7
Table 25. Column order, check constraint and trigger definitions, and other column
definitions in the returned sql are irrelevant.</p>
</li>
<li>
<p>Fail otherwise.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:    Clause 2.2.6.1.1 Req 33:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:    Basic</p>
</div>
<div class="paragraph">
<p><strong>Table Data Values</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/tiles/tile_matrix_metadata/data_values_table_name</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that values of the gpkg_tile_matrix_metadata table_name column
 reference values in the gpkg_contents table_name column for rows with a data type of
 "tiles".</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name FROM gpkg_tile_matrix_metadata</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT table_name FROM gpkg_tile_matrix_metadata tmm WHERE table_name
NOT IN (SELECT table_name FROM gpkg_contents gc WHERE tmm.table_name =
gc.table_name)</p>
</li>
<li>
<p>Fail if result set contains any rows</p>
</li>
<li>
<p>Pass otherwise</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:    Clause 2.2.6.1.2 Req 34:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:    Capability</p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/tiles/tile_matrix_metadata/data/data_values_zoom_level_rows</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the gpkg_tile_matrix_metadata table contains a row record for
each zoom level that contains one or more tiles in each tile matrix user data table.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name AS &lt;user_data_tiles_table&gt; from gpkg_contents where
data_type = <em>tiles</em></p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row from step 1</p>
<div class="ulist">
<ul>
<li>
<p>SELECT DISTINCT gtmm.zoom_level AS gtmm_zoom, udt.zoom_level AS
udtt_zoom FROM tile_matrix_metadata AS gtmm
LEFT OUTER JOIN &lt;user_data_tiles_table&gt; AS udtt ON udtt.zoom_level =
gtmm.zoom_level AND gtmm.t_table_name = <em>&lt;user_data_tiles_table&gt;</em></p>
</li>
<li>
<p>Fail if any gtmm_zoom column value in the result set is NULL</p>
</li>
</ul>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:    Clause 2.2.6.1.2 Req 35:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:    Capability</p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/tiles/tile_matrix_metadata/data/data_values_zoom_level</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that zoom level column values in the gpkg_tile_matrix_metadata table
are not negative.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT zoom_level FROM gpkg_tile_matrix_metadata</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT min(zoom_level) FROM gpkg_tile_matrix_metadata.</p>
</li>
<li>
<p>Fail if less than 0.</p>
</li>
<li>
<p>Pass otherwise.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:    Clause 2.2.6.1.2 Req 36:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:    Capability</p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/tiles/tile_matrix_metadata/data/data_values_matrix_width</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the matrix_width values in the gpkg_tile_matrix_metadata table
are valid.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT matrix_width FROM gpkg_tile_matrix_metadata</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT min(matrix_width) FROM gpkg_tile_matrix_metadata.</p>
</li>
<li>
<p>Fail if less than 1.</p>
</li>
<li>
<p>Pass otherwise.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 2.2.6.1.2 Req 37:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Capabilty</p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/tiles/tile_matrix_metadata/data/data_values_matrix_height</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the matrix_height values in the gpkg_tile_matrix_metadata table
are valid.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT matrix_height FROM gpkg_tile_matrix_metadata</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT min(matrix_height) FROM gpkg_tile_matrix_metadata.</p>
</li>
<li>
<p>Fail if less than 1.</p>
</li>
<li>
<p>Pass otherwise.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 2.2.6.1.2 Req 38:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Capability</p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/tiles/tile_matrix_metadata/data/data_values_tile_width</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the tile_width values in the gpkg_tile_matrix_metadata table are
valid.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT tile_width FROM gpkg_tile_matrix_metadata</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT min(tile_width) FROM gpkg_tile_matrix_metadata.</p>
</li>
<li>
<p>Fail if less than 1.</p>
</li>
<li>
<p>Pass otherwise.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 2.2.6.1.2 Req 39:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Capability</p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/tiles/tile_matrix_metadata/data/data_values_tile_height</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the tile_height values in the gpkg_tile_matrix_metadata table are
valid.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT tile_height FROM gpkg_tile_matrix_metadata</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT min(tile_height) FROM gpkg_tile_matrix_metadata.</p>
</li>
<li>
<p>Fail if less than 1.</p>
</li>
<li>
<p>Pass otherwise.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:    Clause 2.2.6.1.2 Req 40:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:    Capability</p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/tiles/tile_matrix_metadata/data/data_values_pixel_x_size</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the pixel_x_size values in the gpkg_tile_matrix_metadata table
are valid.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT pixel_x_size FROM gpkg_tile_matrix_metadata</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT min(pixel_x_size) FROM gpkg_tile_matrix_metadata.</p>
</li>
<li>
<p>Fail if less than 0.</p>
</li>
<li>
<p>Pass otherwise.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:    Clause 2.2.6.1.2 Req 41:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:    Capability</p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/tiles/tile_matrix_metadata/data/data_values_pixel_y_size</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the pixel_y_size values in the gpkg_tile_matrix_metadata table
are valid.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT pixel_y_size FROM gpkg_tile_matrix_metadata</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT min(pixel_y_size) FROM gpkg_tile_matrix_metadata.</p>
</li>
<li>
<p>Fail if less than 0.</p>
</li>
<li>
<p>Pass otherwise.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:    Clause 2.2.6.1.2 Req 42:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:    Capability</p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/tiles/tile_matrix_metadata/data/data_values_pixel_size_sort</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the pixel_x_size and pixel_y_size column values for zoom level
column values in a gpkg_tile_matrix_metadata table sorted in ascending order are sorted in
descending order, showing that lower zoom levels are zoomed "out".</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name FROM gpkg_contents WHERE data_type = <em>tiles</em></p>
</li>
<li>
<p>Not testable if returns empty result set</p>
</li>
<li>
<p>For each row table_name from step 1</p>
<div class="ulist">
<ul>
<li>
<p>SELECT zoom_level, pixel_x_size, pixel_y_size from
gpkg_tile_matrix_metadata WHERE table_name = row table name ORDER BY
zoom_level ASC</p>
</li>
<li>
<p>Not testable if returns empty result set</p>
</li>
<li>
<p>Fail if pixel_x_sizes are not sorted in descending order</p>
</li>
<li>
<p>Fail if pixel_y_sizes are not sorted in descending order</p>
</li>
</ul>
</div>
</li>
<li>
<p>Pass if testable and no fails</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 2.2.6.1.2 Req 43:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Capability</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_tile_matrix_user_data">Tile Matrix User Data</h5>
<div class="sect5">
<h6 id="_data_45">Data</h6>
<div class="paragraph">
<p><strong>Table Definition</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/tiles/tile_matrix/data/table_def</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that multiple tile matrix sets are stored in different tiles tables with
 unique names containing the required columns.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT COUNT(table_name) FROM gpkg_contents WERE data_type = "tiles"</p>
</li>
<li>
<p>Fail if less than 2</p>
</li>
<li>
<p>SELECT table_name FROM gpkg_contents WHERE data_type = "tiles"</p>
</li>
<li>
<p>For each row from step 3</p>
<div class="ulist">
<ul>
<li>
<p>PRAGMA table_info(table_name)</p>
</li>
<li>
<p>Fail if returns an empty result set</p>
</li>
<li>
<p>Fail if result set does not contain one row where the pk column value is 1 and the
not null column value is 1 and the type column value is "INTEGER"and the
name column value is "id"</p>
</li>
<li>
<p>Fail if result set does not contain four other rows where the name column values
are "zoom_level","tile_column","tile_row", and "tile_data".</p>
</li>
</ul>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 2.2.7.1.1 Req 44:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Basic</p>
</div>
<div class="paragraph">
<p><strong>Table Data Values</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/tiles/tile_matrix/data/data_values_zoom_levels</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the zoom level column values in each tile matrix user data table
 are within the range of zoom levels defined by rows in the tile_matrix_metadata table.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT DISTINCT table_name AS &lt;user_data_tiles_table&gt; FROM
gpkg_tile_matrix_metadata</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row &lt;user_data_tiles_table&gt; from step 1</p>
<div class="ulist">
<ul>
<li>
<p>SELECT zoom_level FROM &lt;user_data_tiles_table&gt;</p>
</li>
<li>
<p>If result set not empty
+ SELECT MIN(gtmm.zoom_level) AS min_gtmm_zoom,
    MAX(gtmm.zoom_level) AS max_gtmm_zoom FROM
    gpkg_tile_matrix_metadata WHERE table_name =
    &lt;user_data_tiles_table&gt;
+ SELECT id FROM &lt;user_data_tiles_table&gt; WHERE zoom_level &lt;
    min_gtmm_zoom
+ Fail if result set not empty
+ SELECT id FROM &lt;user_data_tiles_table&gt; WHERE zoom_level &gt;
    max_gtmm_zoom
+ Fail if result set not empty
+ Log pass otherwise</p>
</li>
</ul>
</div>
</li>
<li>
<p>Pass if logged pas and no fails</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 2.2.7.1.2 Req 45:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Capability</p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/tiles/tile_matrix/data/data_values_tile_column</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the tile_column column values for each zoom level value in each
tile matrix user data table are within the range of columns defined by rows in the
tile_matrix_metadata table.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT DISTINCT table_name AS &lt;user_data_tiles_table&gt; FROM
gpkg_tile_matrix_metadata</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row &lt;user_data_tiles_table&gt; from step 1
+ SELECT DISTINCT gtmm.zoom_level AS gtmm_zoom, gtmm.matrix_width
  AS gtmm_width, udt.zoom_level AS udt_zoom, udt.tile_column AS
  udt_column FROM tile_matrix_metadata AS gtmm LEFT OUTER JOIN
  &lt;user_data_tiles_table&gt; AS udt ON udt.zoom_level = gtmm.zoom_level AND
  gtmm.t_table_name = <em>&lt;user_data_tiles_table&gt;</em> AND (udt_column &lt; 0 OR
  udt_column &gt; (gtmm_width - 1))
+ Fail if any udt_column value in the result set is not NULL
+ Log pass otherwise</p>
</li>
<li>
<p>Pass if logged pass and no fails</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 2.2.7.1.2 Req 46:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Capability</p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/tiles/tile_matrix_data/data_values_tile_row</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the tile_row column values for each zoom level value in each tile
matrix user data table are within the range of rows defined by rows in the
tile_matrix_metadata table.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT DISTINCT table_name AS &lt;user_data_tiles_table&gt; FROM
gpkg_tile_matrix_metadata</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row &lt;user_data_tiles_table&gt; from step 1
+ SELECT DISTINCT gtmm.zoom_level AS gtmm_zoom, gtmm.matrix_height
AS gtmm_height, udt.zoom_level AS udt_zoom, udt.tile_row AS udt_row
FROM tile_matrix_metadata AS gtmm LEFT OUTER JOIN
&lt;user_data_tiles_table&gt; AS udt ON udt.zoom_level = gtmm.zoom_level AND
gtmm.t_table_name = '&lt;user_data_tiles_table&gt; ' AND (udt_row &lt; 0 OR
udt_row &gt; (gtmm_height - 1))
+ Fail if any udt_row value in the result set is not NULL
+ Log pass otherwise</p>
</li>
<li>
<p>Pass if logged pass and no fails</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 2.2.7.1.2 Req 47:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Capability</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_schema_2">A.2.3. Schema</h4>
<div class="sect4">
<h5 id="_data_columns_2">Data Columns</h5>
<div class="sect5">
<h6 id="_data_46">Data</h6>
<div class="paragraph">
<p><strong>Table Definition</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/schema/data_columns/data_table_def</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the gpkg_data_columns table exists and has the correct definition.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT sql FROM sqlite_master WHERE type = <em>table</em> AND tbl_name = <em>gpkg_data_columns</em></p>
</li>
<li>
<p>Fail if returns an empty result set</p>
</li>
<li>
<p>Pass if column names and column definitions in the returned CREATE TABLE
statement in the sql column value, including data type, nullability, default values and
primary, foreign and unique key constraints match all of those in the contents of C.1
Table 32. Column order, check constraint and trigger definitions, and other column
definitions in the returned sql are irrelevant.</p>
</li>
<li>
<p>Fail otherwise.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 2.3.1.1.1 Req 48:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Basic</p>
</div>
<div class="paragraph">
<p><strong>Data Values</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/schema/data_columns/data/data_values_table_name</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that values of the gpkg_data_columns table_name column reference
 values in the gpkg_contents table_name column.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name FROM gpkg_data columns</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT table_name FROM gpkg_data_columns gdc WHERE table_name NOT IN
(SELECT table_name FROM gpkg_contents gc WHERE gdc.table_name =
gc.t_table_name)</p>
</li>
<li>
<p>Fail if result set contains any rows</p>
</li>
<li>
<p>Pass otherwise</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 2.3.1.1.2 Req 49:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Capability</p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/schema/data_columns/data/data_values_column_name</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that for each gpkg_data_columns row, the column_name value is the
 name of a column in the table_name table.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name, column_name FROM gpkg_data_columns</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row from step 1
+ PRAGMA table_info(table_name)
+ Fail if gpkg_data_columns.column_name value does not equal a name column
value returned by PRAGMA table_info.</p>
</li>
<li>
<p>Pass if no fails.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 2.3.1.1.2 Req 50:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Capability</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_metadata_2">A.2.4. Metadata</h4>
<div class="sect4">
<h5 id="_metadata_table_2">Metadata Table</h5>
<div class="sect5">
<h6 id="_data_47">Data</h6>
<div class="paragraph">
<p><strong>Table Definition</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/metadata/metadata/data/table_def</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the gpkg_metadata table exists and has the correct definition.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT sql FROM sqlite_master WHERE type = <em>table</em> AND tbl_name = <em>gpkg_metadata</em></p>
</li>
<li>
<p>Fail if returns an empty result set.</p>
</li>
<li>
<p>Pass if the column names and column definitions in the returned Create TABLE
statement in the sql column value, including data type, nullability, default values and
primary, foreign and unique key constraints match all of those in the contents of
Table 33. Column order, check constraint and trigger definitions, and other column
definitions in the returned sql are irrelevant.</p>
</li>
<li>
<p>Fail otherwise.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 2.4.2.1.1 Req 51:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Basic</p>
</div>
<div class="paragraph">
<p><strong>Table Data Values</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/metadata/metadata/data/data_values_md_scope</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that each of the md_scope column values in a gpkg_metadata table is
 one of the name column values from Table 11 in clause 2.4.2.1.2.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT md_scope FROM gpkg_metadata</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row returned from step 1</p>
<div class="ulist">
<ul>
<li>
<p>Fail if md_scope value not one of the name column values from Table 11 in clause 2.4.2.1.2</p>
</li>
</ul>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:    Clause 2.4.2.1.2 Req 52:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:    Capabilities</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_metadata_reference_table_2">Metadata Reference Table</h5>
<div class="sect5">
<h6 id="_data_48">Data</h6>
<div class="paragraph">
<p><strong>Table Definition</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/metadata/metadata_reference_data_table_def</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the gpkg_metadata_reference table exists and has the correct
 definition.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT sql FROM sqlite_master WHERE type = <em>table</em> AND tbl_name = <em>gpkg_metadata_reference</em></p>
</li>
<li>
<p>Fail if returns an empty result set.</p>
</li>
<li>
<p>Pass if the column names and column definitions in the returned Create TABLE
statement in the sql column value, including data type, nullability, default values and
primary, foreign and unique key constraints match all of those in the contents of
Table 34. Column order, check constraint and trigger definitions, and other column
definitions in the returned sql are irrelevant.</p>
</li>
<li>
<p>Fail otherwise.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:    Clause 2.4.3.1.1 Req 53:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:    Basic</p>
</div>
<div class="paragraph">
<p><strong>Data Values</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/metadata/metadata_reference/data/data_values_reference_scope</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that gpkg_metadata_reference table reference_scope column values
 are valid.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT reference_scope FROM gpkg_metadata_reference</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT reference_scope FROM gpkg_metadata_reference WHERE
reference_scope NOT IN (<em>geopackage</em>,<em>table</em>,<em>column</em>,<em>row</em>,<em>row/col</em>)</p>
</li>
<li>
<p>Fail if does not return an empty result set</p>
</li>
<li>
<p>Pass otherwise.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:    Clause 2.4.3.1.2 Req 54:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:    Capability</p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/metadata/metadata_reference/data/data_values_table_name</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that gpkg_metadata_reference table_name column values are NULL
for rows with reference_scope values of <em>geopackage</em>, and reference gpkg_contents
table_name values for all other reference_scope values.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name FROM gpkg_metadata_reference</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT table_name FROM gpkg_metadata_reference WHERE reference_scope = <em>geopackage</em></p>
</li>
<li>
<p>Fail if result set contains any non-NULL values</p>
</li>
<li>
<p>SELECT table_name FROM metadata_reference WHERE reference_scope != <em>geopackage</em> AND table_name NOT IN (SELECT table_name FROM gpkg_contents)</p>
</li>
<li>
<p>Fail if result set is not empty</p>
</li>
<li>
<p>Pass otherwise.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:    Clause 2.4.3.1.2 Req 55:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:    Capability</p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/metadata/metadata_reference/data/data_values_column_name</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that gpkg_metadata_reference column_name column values are
NULL for rows with reference scope values of <em>geopackage</em>, <em>table</em>, or <em>row</em>, and contain
the name of a column in table_name table for other reference scope values.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT column_name FROM gpkg_metadata_reference</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT column_name FROM gpkg_metadata_reference WHERE reference_scope
IN (<em>geopackage</em>, <em>table</em>, <em>row</em>)</p>
</li>
<li>
<p>Fail if result set contains any non-NULL values</p>
</li>
<li>
<p>SELECT &lt;table_name&gt;, &lt;column_name&gt; FROM metadata_reference WHERE
reference_scope NOT IN (<em>geopackage</em>, <em>table</em>, <em>row</em>)</p>
</li>
<li>
<p>For each row from step 5</p>
<div class="ulist">
<ul>
<li>
<p>SELECT sql FROM sqlite_master WHERE type = <em>table</em> AND tbl_name = <em>&lt;table_name&gt;</em></p>
</li>
<li>
<p>Fail if returns an empty result set.</p>
</li>
<li>
<p>Fail if the one of the column names in the returned sql Create TABLE statement
is not &lt;column_name&gt;</p>
</li>
<li>
<p>Log pass otherwise</p>
</li>
</ul>
</div>
</li>
<li>
<p>Pass if logged pass and no fails.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:    Clause 2.4.3.1.2 Req 56:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:    Capability</p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/metadata/metadata_reference/data/data_values_row_id_value</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that gpkg_metadata_reference row_id_value column values are NULL
for rows with reference scope values of <em>geopackage</em>, <em>table</em>, or <em>row</em>, and contain the
ROWID of a row in the table_name for other reference scope values.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT row_id_value FROM gpkg_metadata_reference</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT row_id_value FROM gpkg_metadata_reference WHERE reference_scope
IN (<em>geopackage</em>, <em>table</em>, <em>row</em>)</p>
</li>
<li>
<p>Fail if result set contains any non-NULL values</p>
</li>
<li>
<p>For each SELECT &lt;table_name&gt;, &lt;row_id_value&gt; FROM gpkg_metadata_reference
WHERE reference_scope NOT IN (<em>geopackage</em>, <em>table</em>, <em>row</em>)</p>
</li>
<li>
<p>For each row from step 5</p>
<div class="ulist">
<ul>
<li>
<p>SELECT * FROM &lt;table_name&gt; WHERE ROWID = &lt;row_id_value&gt;</p>
</li>
<li>
<p>Fail if result set is empty</p>
</li>
<li>
<p>Log pass otherwise</p>
</li>
</ul>
</div>
</li>
<li>
<p>Pass if logged pass and no fails.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:    Clause 2.4.3.1.2 Req 57:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:    Capability</p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/metadata/metadata_reference/data/data_values_timestamp</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that every gpkg_metadata_reference table row timestamp column
value is in ISO 8601 UTC format.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT timestamp from gpkg_metadata_reference.</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row from step 1</p>
<div class="ulist">
<ul>
<li>
<p>Fail if format of returned value does not match yyyy-mm-ddThh:mm:ss.hhhZ</p>
</li>
<li>
<p>Log pass otherwise</p>
</li>
</ul>
</div>
</li>
<li>
<p>Pass if logged pass and no fails.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:    Clause 2.4.3.1.2 Req 58:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:    Capability</p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/metadata/metadata_reference/data/data_values_md_file_id</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that every gpkg_metadata_reference table row md_file_id column
value is an id column value from the gpkg_metadata table.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT md_file_id FROM gpkg_metadata_reference</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT gmr.md_file_id, gm.id FROM gpkg_metadata_reference AS gmr</p>
</li>
<li>
<p>LEFT OUTER JOIN gpkg_metadata gm ON gmr.md_file_id = gm.id</p>
</li>
<li>
<p>Fail if result set is empty</p>
</li>
<li>
<p>Fail if any result set gm.id values are NULL</p>
</li>
<li>
<p>Pass otherwise</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 2.4.3.1.2 Req 59:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Capability</p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/metadata/metadata_reference/data/data_values_md_parent_id</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that every gpkg_metadata_reference table row md_parent_id column
 value that is not null is an id column value from the gpkg_metadata_table that is not equal to
 the md_file_id column value for that row.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT md_file_id FROM gpkg_metadata_reference</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT gmr.md_file_id, gmr.md_parent_id</p>
</li>
<li>
<p>FROM gpkg_metadata_reference AS gmr</p>
</li>
<li>
<p>WHERE gmr.md_file_id == gmr.md_parent_id</p>
</li>
<li>
<p>Fail if result set is not empty</p>
</li>
<li>
<p>SELECT gmr.md_file_id, gmr.md_parent_id, gm.id</p>
</li>
<li>
<p>FROM gpkg_metadata_reference AS gmr</p>
</li>
<li>
<p>LEFT OUTER JOIN gpkg_metadata gm ON gmr.md_parent_id =gm.id</p>
</li>
<li>
<p>Fail if any result set gm.id values are NULL</p>
</li>
<li>
<p>Pass otherwise</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 2.4.3.1.2 Req 60:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Capability</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_extension_mechanism_2">A.2.5. Extension Mechanism</h4>
<div class="sect4">
<h5 id="_extensions_2">Extensions</h5>
<div class="sect5">
<h6 id="_data_49">Data</h6>
<div class="paragraph">
<p><strong>Table Definition</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/extension_mechanism/extensions/data/table_def</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that a gpkg_extensions table exists and has the correct definition.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT sql FROM sqlite_master WHERE type = <em>table</em> AND tbl_name =
<em>gpkg_extensions</em></p>
</li>
<li>
<p>Fail if returns an empty result set.</p>
</li>
<li>
<p>Pass if the column names and column definitions in the returned Create TABLE
statement in the sql column value, including data type, nullability, default values and
primary, foreign and unique key constraints match all of those in the contents of
Table 23. Column order, check constraint and trigger definitions, and other column
definitions in the returned sql are irrelevant.</p>
</li>
<li>
<p>Fail otherwise.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 2.6.1.1.1 Req 61:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Basic</p>
</div>
<div class="paragraph">
<p><strong>Table Data Values</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/extension_metchanism/extensions/data/data_values_table_name</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the table_name column values in the gpkg_extensions table are
 valid.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name, column_name FROM gpkg_extensions</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row from step one</p>
<div class="ulist">
<ul>
<li>
<p>Fail if table_name value is NULL and column_name value is not NULL.</p>
</li>
<li>
<p>SELECT DISTINCT ge.table_name AS ge_table, sm.tbl_name
FROM gpkg_extensions AS ge LEFT OUTER JOIN sqlite_master AS sm ON
ge.table_name = sm.tbl_name</p>
</li>
<li>
<p>Log pass if every row ge.table_name = sm.tbl_name (MAY both be NULL).</p>
</li>
</ul>
</div>
</li>
<li>
<p>Pass if logged pass and no fails.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:    Clause 2.6.1.1.2 Req 63:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:    Capability</p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/extension_metchanism/extensions/data/data_values_column_name</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the column_name column values in the gpkg_extensions table are
 valid.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name, column_name FROM gpkg_extensions</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT table_name, column_name FROM gpkg_extensions WHERE table_name
IS NOT NULL AND column_name IS NOT NULL</p>
</li>
<li>
<p>Pass if returns an empty result set</p>
</li>
<li>
<p>For each row from step 3</p>
<div class="ulist">
<ul>
<li>
<p>PRAGMA table_info(table_name)</p>
</li>
<li>
<p>Fail if gpkg_extensions.column_name value does not equal a name column value
returned by PRAGMA table_info.</p>
</li>
<li>
<p>Log pass otherwise</p>
</li>
</ul>
</div>
</li>
<li>
<p>Pass if logged pass and no fails.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:    Clause 2.6.1.1.2 Req 63:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:    Capability</p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/extension_mechanism/extensions/data/data_values_extension_name</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the extension_name column values in the gpkg_extensions table
 are valid.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT extension_name FROM gpkg_extensions</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row returned from step 1</p>
<div class="ulist">
<ul>
<li>
<p>Log pass if extension_name is one of those listed in Table 14</p>
</li>
<li>
<p>Separate extension_name into &lt;author&gt; and &lt;extension&gt; at the first "_"</p>
</li>
<li>
<p>Fail if &lt;author&gt; is "gpkg"</p>
</li>
<li>
<p>Fail if &lt;author&gt; contains characters other than [a-zA-Z0-9]</p>
</li>
<li>
<p>Fail if &lt;extension&gt; contains characters other than [a-zA-Z0-9_]</p>
</li>
<li>
<p>Log pass otherwise</p>
</li>
</ul>
</div>
</li>
<li>
<p>Pass if logged pass and no fails.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:    Clause 2.6.1.1.2 Req 64:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:    Capability</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_api_6">API</h5>
<div class="sect5">
<h6 id="_api_geopackage_sqlite_config_2">API GeoPackage SQLite Config</h6>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/extension_mechanism/extensions/api/api_geopackage_sqlite_config</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that a GeoPackage SQLite Extension has the API GeoPackage SQLite
 Configuration compile and run time options.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT sqlite_compileoption_used(<em>SQLITE_OMIT_LOAD_EXTENSION</em>)</p>
</li>
<li>
<p>Fail if returns 1</p>
</li>
<li>
<p>SELECT sqlite_compileoption_used(<em>SQLITE_OMIT_VIRTUALTABLE</em>)</p>
</li>
<li>
<p>Fail if returns 1</p>
</li>
<li>
<p>SELECT sqlite_compileoption_used(<em>SQLITE_ENABLE_RTREE</em>)</p>
</li>
<li>
<p>Fail if returns 0</p>
</li>
<li>
<p>SELECT sqlite_compileoption_used(<em>SQLITE_RTREE_INT_ONLY</em>)</p>
</li>
<li>
<p>Fail if returns 1</p>
</li>
<li>
<p>Pass otherwise</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:    Clause 2.6.1.2.1 Req 65:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:    Basic</p>
</div>
<div class="paragraph">
<p><strong>Safe GeoPackage SQLite Config</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /opt/extension_mechanism/extensions/api/safe_geopackage_sqlite_config</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that a GeoPackage SQLite Extension has the Safe GeoPackage
 SQLite Configuration compile and run time options.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT sqlite_compileoption_used('SQLITE_DEFAULT_FOREIGN_KEYS ')</p>
</li>
<li>
<p>Fail if returns 0</p>
</li>
<li>
<p>SELECT sqlite_compileoption_used(<em>SQLITE_OMIT_FOREIGN_KEY</em>)</p>
</li>
<li>
<p>Fail if returns 1</p>
</li>
<li>
<p>PRAGMA foreign_keys</p>
</li>
<li>
<p>Fail if returns 0</p>
</li>
<li>
<p>SELECT sqlite_compileoption_used(<em>SQLITE_OMIT_INTEGRITY_CHECK</em>)</p>
</li>
<li>
<p>Fail if returns 1</p>
</li>
<li>
<p>SELECT sqlite_compileoption_used(<em>SQLITE_OMIT_SUBQUERY</em>)</p>
</li>
<li>
<p>Fail if returns 1</p>
</li>
<li>
<p>SELECT sqlite_compileoption_used(<em>SQLITE_OMIT_TRIGGER</em>)</p>
</li>
<li>
<p>Fail if returns 1</p>
</li>
<li>
<p>Pass otherwise</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 2.6.1.2.2 Req 66:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Basic</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_registered_extensions_2">A.3. Registered Extensions</h3>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /reg_ext/all/author_name/not_gpkg/not_features_or_tiles</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that any table in a GeoPackage file subject to a registered extension
 with an author_name other than "gpkg" is not described by a gpkg_contents table row with a
 data_type value of <em>features</em> or <em>tiles</em>.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>/opt/extension_mechanism/extensions/data/table_def</p>
</li>
<li>
<p>Not testable if failed</p>
</li>
<li>
<p>SELECT table_name FROM geopackage_contents
WHERE data_type IN (<em>features</em>,<em>tiles</em>) AND table_name IN
(SELECT table_name FROM gpkg_extensions WHERE
substr(lower(extension_name),1,4. != <em>gpkg</em>)</p>
</li>
<li>
<p>Fail if result set is not empty</p>
</li>
<li>
<p>Pass otherwise</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 3 Req 67:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Basic</p>
</div>
<div class="sect3">
<h4 id="_features_4">A.3.1. Features</h4>
<div class="sect4">
<h5 id="_geometry_encoding_3">Geometry Encoding</h5>
<div class="sect5">
<h6 id="_data_50">Data</h6>
<div class="paragraph">
<p><strong>BLOB Format - Extensions Name</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /reg_ext/features/geometry_encoding/data/ext_name</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that an extension name in the form
 &lt;author_name&gt;_geometry_encoding is defined for an author name other than "gpkg" for
 each geometry BLOB format other than GeoPackageBinary used in a GeoPackage file.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name, column_name FROM gpkg_geometry_columns WHERE
table_name IN (SELECT table_name FROM gpkg_contents WHERE data_type NOT
IN (<em>features</em>, <em>tiles</em>))</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row table_name, column_name from step 1</p>
<div class="ulist">
<ul>
<li>
<p>SELECT result_set_column_name FROM result_set_table_name</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each geometry column value from step a</p>
<div class="ulist">
<ul>
<li>
<p>If the first three bytes of geometry column value are not "GPB", then
+ /opt/extension_mechanism/extensions/data/table_def
+ Fail if failed
+ SELECT extension_name FROM gpkg_extensions WERE
table_name = result_set_table_name AND column_name =
result_set_column_name AND
substr(lower(extension_name),1,4. != <em>gpkg</em>)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Fail if returns an empty result set</p>
</li>
<li>
<p>Separate extension_name into &lt;author&gt; and
&lt;extension&gt; at the first "_"</p>
</li>
<li>
<p>Fail if &lt;extension&gt; is not <em>_geometry_encoding</em>.</p>
</li>
<li>
<p>Otherwise log pass</p>
</li>
</ul>
</div>
</li>
<li>
<p>Pass if logged pass and no fails</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 3.1.1.1.2 Req 68:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Basic</p>
</div>
<div class="paragraph">
<p><strong>BLOB Format - Extensions Row</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /reg_ext/features/geometry_encoding/data/ext_row</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the gpkg_extensions table contains a row with an extension_name
 in the form &lt;author_name&gt;_geometry_encoding is defined for an author name other than
 "gpkg" for each table_name and column_name that contain a geometry BLOB format other
 than GeoPackageBinary in a GeoPackage file.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="paragraph">
<p>Same as /reg_ext/features/geometry_encoding/data/ext_name</p>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 3.1.1.1.3 Req 69:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Capability</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_geometry_types_4">Geometry Types</h5>
<div class="sect5">
<h6 id="_data_51">Data</h6>
<div class="paragraph">
<p><strong>Extension Types</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /reg_ext/features/geometry_encoding/data/extension_types_existing_sparse_data</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that existing extended non-linear geometry types are stored in valid
 GeoPackageBinary format encodings.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name FROM gpkg_geometry_columns</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT table_name AS tn, column_name AS cn FROM gpkg_geometry_columns
WHERE table_name IN (SELECT table_name FROM gpkg_contents WHERE
data_type = <em>features</em>),</p>
</li>
<li>
<p>Fail if returns an empty result set</p>
</li>
<li>
<p>For each row from step 3
+ SELECT cn FROM tn;
+ For each row from step a, if bytes 2-5 of cn.wkb as uint32 in endianness of
gc.wkb byte 1of cn from #1 are a geometry type value from Annex G Table
46, then</p>
<div class="ulist">
<ul>
<li>
<p>Log cn.header values, wkb endianness and geometry type</p>
</li>
<li>
<p>If cn.wkb is not correctly encoded per ISO 13249-3 clause 5.1.46 then
log fail</p>
</li>
<li>
<p>If cn.flags.E is 1 - 4 and some cn.wkbx is outside of
cn.envelope.minx,maxx then log fail</p>
</li>
<li>
<p>If cn.flags.E is 1 - 4 and some gc.wkby is outside of
cn.envelope.miny,maxy then log fail</p>
</li>
<li>
<p>If cn.flags.E is 2,4 and some gc.wkb.z is outside of
cnenvelope.minz,maxz then log fail</p>
</li>
<li>
<p>If cn.flags.E is 3,4 and some gc.wkb.m is outside of
cn.envelope.minm,maxm then log fail</p>
</li>
<li>
<p>If cn.flags.E is 5-7 then log fail</p>
</li>
<li>
<p>Otherwise log pass</p>
</li>
</ul>
</div>
</li>
<li>
<p>Log pass if log contains pass and no fails</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 3.1.2.1.1 Req 70:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Capability</p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /reg_ext/features/geometry_encoding/data/extension_types_all_types_test_data</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that all extended non-linear geometry types and options are stored in
 valid GeoPackageBinary format encodings.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open GeoPackage that has feature geometry values of geometry type in Annex G, for
an assortment of srs_ids, for an assortment of coordinate values, without and with z
and/or m values, in both big and little endian encodings:</p>
</li>
<li>
<p>/reg_ext/features/geometry_encoding/data/extension_types_existing_sparse_data</p>
</li>
<li>
<p>Pass if log contains pass record for big and little endian GPB headers containing big
and little endian WKBs for 0-1 envelope contents indicator codes for every geometry
type value from Annex G Table 47 without and with z and/or m values.</p>
</li>
<li>
<p>Fail otherwise</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 3.1.2.1.1 Req 70:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Capability</p>
</div>
<div class="paragraph">
<p><strong>Geometry Types&#8201;&#8212;&#8201;Extensions Name</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /reg_ext/features/geometry_encoding/data/extension_name</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that an extension name in the form gpkg_geom_&lt;gname&gt; is defined
 for each &lt;gname&gt; extension geometry type from Annex G Table 47 used in a GeoPackage
 file.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name, column_name FROM gpkg_geometry_columns WHERE
table_name IN (SELECT table_name FROM gpkg_contents WHERE data_type ==
<em>features</em>))</p>
</li>
<li>
<p>Not testable if result set is empty</p>
</li>
<li>
<p>For each row result set table_name, column_name from step 3</p>
<div class="ulist">
<ul>
<li>
<p>SELECT result_set_column_name FROM result_set_table_name</p>
</li>
<li>
<p>For each geometry column value from step a
+ If the first three bytes of each geometry column value are "GPB", then</p>
<div class="ulist">
<ul>
<li>
<p>/opt/extension_mechanism/extensions/data/table_def</p>
</li>
<li>
<p>Fail if failed</p>
</li>
<li>
<p>SELECT ST_GeometryType(geometry column value) AS lt;gtype&gt;;</p>
</li>
<li>
<p>SELECT extension_name FROM gpkg_extensions WERE
table_name = result_set_table_name AND column_name =
result_set_column_name AND extension_name = <em>gpkg_geom_</em>
|| &lt;gtype&gt;</p>
</li>
</ul>
</div>
</li>
<li>
<p>Fail if result set is empty</p>
</li>
<li>
<p>Log pass otherwise</p>
</li>
</ul>
</div>
</li>
<li>
<p>Pass if logged pass and no fails</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 3.1.2.1.2 Req 71:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Basic</p>
</div>
<div class="paragraph">
<p><strong>Geometry Types&#8201;&#8212;&#8201;Extensions Row</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /reg_ext/features/geometry_encoding/data/extension_row</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the gpkg_extensions table contains a row with an extension_name
 in the form gpkg_geom_&lt;gname&gt; for each table_name and column_name in the
 gpkg_geometry_columns table with a &lt;gname&gt; geometry_type_name.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="paragraph">
<p>/reg_ext/features/geometry_encoding/data/extension_name</p>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 3.1.2.1.3 Req 72:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Capability</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_spatial_indexes_2">Spatial Indexes</h5>
<div class="sect5">
<h6 id="_data_52">Data</h6>
<div class="paragraph">
<p><strong>Spatial Indexes Implementation</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /reg_ext/features/spatial_indexes/implementation</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify the correct implementation of spatial indexes on feature table
 geometry columns.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name, column_name FROM gpkg_geometry_columns WHERE
table_name IN (SELECT table_name FROM gpkg_contents WHERE data_type ==
<em>features</em>))</p>
</li>
<li>
<p>Not testable if result set is empty</p>
</li>
<li>
<p>For each row table_name, column_name from step 1</p>
<div class="ulist">
<ul>
<li>
<p>SELECT sql FROM sqlite_master WHERE tbl_name = <em>rtree_</em> ||
result_set_table_name || <em>_</em> || result_set_column_name</p>
</li>
<li>
<p>Not testable if result set is empty</p>
</li>
<li>
<p>Fail if returned sql != <em>CREATE VIRTUAL TABLE rtree_</em> ' ||
result_set_table_name || <em>_</em> || result_set_column_name || USING rtree(id, minx,
maxx, miny, maxy)</p>
</li>
<li>
<p>SELECT sql FROM sqlite_master WHERE type = <em>trigger</em> AND tname =
<em>rtree_</em> || result_set_table_name || <em>_</em> || result_set_column_name || <em>_insert</em></p>
</li>
<li>
<p>Fail if returned sql != result of populating insert triggers template in Table 39
using result_set_table_name for &lt;t&gt; and result_set_column_name for &lt;c&gt;</p>
</li>
<li>
<p>SELECT sql FROM sqlite_master WHERE type = <em>trigger</em> AND name LIKE
<em>rtree_</em> || result_set_table_name || <em>_</em> || result_set_column_name || <em>_update%</em></p>
</li>
<li>
<p>Fail if returned sql != result of populating 4 update triggers templates in Table
39 using result_set_table_name for &lt;t&gt; and result_set_column_name for &lt;c&gt;</p>
</li>
<li>
<p>SELECT sql FROM sqlite_master WHERE type=<em>trigger</em> AND name =
<em>rtree_</em> || result_set_table_name || <em>_</em> || result_set_column_name || <em>_delete</em></p>
</li>
<li>
<p>Fail if returned sql != result of populating delete trigger template in Table 39
using result_set_table_name for &lt;t&gt; and result_set_column_name for &lt;c&gt;</p>
</li>
<li>
<p>Log pass otherwise</p>
</li>
</ul>
</div>
</li>
<li>
<p>Pass if logged pass and no fails</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 3.1.3.1.1 Req 73:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Capability</p>
</div>
<div class="paragraph">
<p><strong>Spatial Indexes - Extensions Name</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /reg_ext/features/spatial_indexes/extension_name</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the "gpkg_rtree_index" extension name is used to register spatial
 index extensions.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name, column_name FROM gpkg_geometry_columns WHERE
table_name IN (SELECT table_name FROM gpkg_contents WHERE data_type ==
<em>features</em>))</p>
</li>
<li>
<p>Not testable if result set is empty</p>
</li>
<li>
<p>For each row table_name, column_name from step 3</p>
<div class="ulist">
<ul>
<li>
<p>SELECT sql FROM sqlite_master WHERE tbl_name = <em>rtree_</em> ||
result_set_table_name || <em>_</em> || result_set_column_name</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>/opt/extension_mechanism/extensions/data/table_def</p>
</li>
<li>
<p>Fail if failed</p>
</li>
<li>
<p>SELECT extension_name from gpkg_extensions WHERE table_name =
result_set_table_name AND column_name = result_set_column_name</p>
</li>
<li>
<p>Log pass if result is "gpkg_rtree_index"</p>
</li>
<li>
<p>Fail otherwise</p>
</li>
</ul>
</div>
</li>
<li>
<p>Pass if logged pass and no fails</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 3.1.3.1.2 Req 74:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Basic</p>
</div>
<div class="paragraph">
<p><strong>Spatial Indexes - Extensions Row</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /reg_ext/features/spatial_indexes/extension_row</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that spatial index extensions are registered using the
 "gpkg_rtree_index" name in the gpkg_extensions table.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="paragraph">
<p>/reg_ext/features/spatial_indexes/extension_name</p>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 3.1.3.1.3 Req 75:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Capability</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_geometry_type_triggers_2">Geometry Type Triggers</h5>
<div class="sect5">
<h6 id="_data_53">Data</h6>
<div class="paragraph">
<p><strong>Geometry Type Triggers Implementation</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /reg_ext/features/geometry_type_triggers/implementation</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that user feature data table geometry type triggers are implemented
 correctly.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name, column_name FROM gpkg_geometry_columns WHERE
table_name IN (SELECT table_name FROM gpkg_contents WHERE data_type ==
<em>features</em>))</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row table_name, column_name from step 1</p>
<div class="ulist">
<ul>
<li>
<p>SELECT sql FROM sqlite_master WHERE type = <em>trigger</em> AND tbl_name =
<em>fgti_</em> || result_set_table_name || <em>_</em> || result_set_column_name</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>Fail if sql != result of populating the first trigger template in Table 17 with &lt;t&gt;
as result_set_table_name and &lt;c&gt; as result_set_column_name</p>
</li>
<li>
<p>SELECT sql FROM sqlite_master WHERE type = <em>trigger</em> AND tbl_name =
<em>fgtu_</em> || result_set_table_name || <em>_</em> || result_set_column_name</p>
</li>
<li>
<p>Fail if sql != result of populating the second trigger template in Table 17 with
&lt;t&gt; as result_set_table_name and &lt;c&gt; as result_set_column_name</p>
</li>
<li>
<p>Log pass otherwise</p>
</li>
</ul>
</div>
</li>
<li>
<p>Pass if logged pass and no fails</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 3.1.4.1.1 Req 76:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Capability</p>
</div>
<div class="paragraph">
<p><strong>Geometry Type Triggers - Extensions Name</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /reg_ext/features/geometry_type_triggers/extension_name</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the "gpkg_geometry_type_trigger" extension name is used to
 register geometry type triggers.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name, column_name FROM gpkg_geometry_columns WHERE
table_name IN (SELECT table_name FROM gpkg_contents WHERE data_type ==
<em>features</em>))</p>
</li>
<li>
<p>Not testable if result set is empty</p>
</li>
<li>
<p>For each row table_name, column_name from step 1</p>
<div class="ulist">
<ul>
<li>
<p>SELECT sql FROM sqlite_master WHERE type = <em>trigger</em> AND tbl_name =
<em>fgti_</em> || result_set_table_name || <em>_</em> || result_set_column_name</p>
</li>
<li>
<p>Not testable if result set is empty</p>
</li>
<li>
<p>/opt/extension_mechanism/extensions/data/table_def</p>
</li>
<li>
<p>Fail if failed</p>
</li>
<li>
<p>SELECT extension_name from gpkg_extensions WHERE table_name =
result_set_table_name AND column_name = result_set_column_name</p>
</li>
<li>
<p>Log pass if result is "gpkg_geometry_type_trigger"</p>
</li>
<li>
<p>Fail otherwise</p>
</li>
</ul>
</div>
</li>
<li>
<p>Pass if logged pass and no fails</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 3.1.4.1.2 Req 77:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Basic</p>
</div>
<div class="paragraph">
<p><strong>Geometry Type Triggers - Extensions Row</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /reg_ext/features/geometry_type_triggers/extension_row</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that geometry type triggers are registered using the
 "gpkg_geometry_type_trigger" extension name.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="paragraph">
<p>/reg_ext/features/geometry_type_triggers/extension_name</p>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 3.1.4.1.3 Req 78:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Capability</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_srs_id_triggers_2">SRS_ID Triggers</h5>
<div class="sect5">
<h6 id="_data_54">Data</h6>
<div class="paragraph">
<p><strong>SRS_ID Triggers - Implementation</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /reg_ext/features/srs_id_triggers/implementation</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that user feature data table srs_id triggers are implemented correctly.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name, column_name FROM gpkg_geometry_columns WHERE
table_name IN (SELECT table_name FROM gpkg_contents WHERE data_type ==
<em>features</em>))</p>
</li>
<li>
<p>Not testable if result set is empty</p>
</li>
<li>
<p>For each row table_name, column_name from step 1</p>
<div class="ulist">
<ul>
<li>
<p>SELECT sql FROM sqlite_master WHERE type = <em>trigger</em> AND tbl_name =
<em>fgsi_</em> || result_set_table_name || <em>_</em> || result_set_column_name</p>
</li>
<li>
<p>Not testable if result set is empty</p>
</li>
<li>
<p>Fail if sql != result of populating the first trigger template in Table 18 with &lt;t&gt;
as result_set_table_name and &lt;c&gt; as result_set_column_name</p>
</li>
<li>
<p>SELECT sql FROM sqlite_master WHERE type = <em>trigger</em> AND tbl_name =
<em>fgsu_</em> || result_set_table_name || <em>_</em> || result_set_column_name</p>
</li>
<li>
<p>Fail if sql != result of populating the second trigger template in Table 18 with
&lt;t&gt; as result_set_table_name and &lt;c&gt; as result_set_column_name</p>
</li>
<li>
<p>Log pass otherwise</p>
</li>
</ul>
</div>
</li>
<li>
<p>Pass if logged pass and no fails</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 3.1.5.1.1 Req 79:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Capability</p>
</div>
<div class="paragraph">
<p><strong>SRS_ID Triggers - Extensions Name</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /reg_ext/features/srs_id_triggers/extension_name</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the "gpkg_srs_id_trigger" extension name is used to register
 srs_id triggers.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name, column_name FROM gpkg_geometry_columns WHERE
table_name IN (SELECT table_name FROM gpkg_contents WHERE data_type ==
<em>features</em>))</p>
</li>
<li>
<p>Not testable if result set is empty</p>
</li>
<li>
<p>For each row table_name, column_name from step 1</p>
<div class="ulist">
<ul>
<li>
<p>SELECT sql FROM sqlite_master WHERE type = <em>trigger</em> AND tbl_name =
<em>fgsi_</em> || result_set_table_name || <em>_</em> || result_set_column_name</p>
</li>
<li>
<p>Not testable if result set is empty</p>
</li>
<li>
<p>/opt/extension_mechanism/extensions/data/table_def</p>
</li>
<li>
<p>Fail if failed</p>
</li>
<li>
<p>SELECT extension_name from gpkg_extensions WHERE table_name =
result_set_table_name AND column_name = result_set_column_name</p>
</li>
<li>
<p>Pass if result is "gpkg_srs_id_trigger"</p>
</li>
<li>
<p>Fail otherwise</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 3.1.5.1.2 Req 80:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Basic</p>
</div>
<div class="paragraph">
<p><strong>SRS_ID Triggers - Extensions Row</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /reg_ext/features/srs_id_triggers/extension_row</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that srs_id triggers are registered using the "gpkg_srs_id_trigger"
 extension name.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="paragraph">
<p>/reg_ext/features/srs_id_triggers/extension_name</p>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 3.1.5.1.3 Req 81:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Capability</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_tiles_4">A.3.2. Tiles</h4>
<div class="sect4">
<h5 id="_zoom_levels_4">Zoom Levels</h5>
<div class="sect5">
<h6 id="_data_55">Data</h6>
<div class="paragraph">
<p><strong>Zoom Other Intervals—Extensions Name</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /reg_ext/tiles/zoom_levels/data/zoom_other_ext_name</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the "gpkg_zoom_other" extension name is used to register tiles
 tables with other than factors of two zoom intervals.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name FROM geopackage_contents WHERE data_type = <em>tiles</em></p>
</li>
<li>
<p>Not testable if empty result set</p>
</li>
<li>
<p>For each row table_name from step 1</p>
<div class="ulist">
<ul>
<li>
<p>SELECT zoom_level, pixel_x_size, pixel_y_size FROM tile_matrix_metadata
WHERE table_name = selected table name ORDER BY zoom_level ASC</p>
</li>
<li>
<p>Not testable if returns empty result set</p>
</li>
<li>
<p>Not testable if there are not two rows with adjacent zoom levels</p>
</li>
<li>
<p>Not testable if no pair of rows for adjacent zoom levels have pixel_x_size or
pixel_y_size values that differ by other than factors of two</p>
</li>
<li>
<p>/opt/extension_mechanism/extensions/data/table_def</p>
</li>
<li>
<p>Fail if failed</p>
</li>
<li>
<p>SELECT * FROM gpkg_extensions WHERE table_name = selected table
name AND extension_name = <em>gpkg_zoom_other</em></p>
</li>
<li>
<p>Fail if returns an empty result set</p>
</li>
<li>
<p>Log pass otherwise</p>
</li>
</ul>
</div>
</li>
<li>
<p>Pass if logged pass and no fails</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 3.2.1.1.2 Req 82:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Basic</p>
</div>
<div class="paragraph">
<p><strong>Zoom Other Intervals - Extensions Row</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: / reg_ext/tiles/zoom_levels/data/zoom_other_ext_row</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that tiles tables with other than factors of two zoom intervals are
 registered using the "gpkg_zoom_other" extension name.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="paragraph">
<p>/reg_ext/tiles/zoom_levels/data/zoom_other_ext_name</p>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 3.2.1.1.3 Req 83:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Capabilty</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_tile_encoding_webp">Tile Encoding WEBP</h5>
<div class="sect5">
<h6 id="_data_56">Data</h6>
<div class="paragraph">
<p><strong>WEBP - Extensions Name</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /reg_ext/tiles/tile_encoding_webp/data/webp_ext_name</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the "gpkg_webp" extensions name is used to register WEBP tile
 encoding implementations.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name FROM geopackage_contents WHERE data_type = <em>tiles</em></p>
</li>
<li>
<p>Not testable if empty result set</p>
</li>
<li>
<p>For each row table_name from step 1</p>
<div class="ulist">
<ul>
<li>
<p>Select tile_data FROM row table_name</p>
</li>
<li>
<p>For each row tile_data from step a
+ Log webp if tile data in MIME type image/webp</p>
</li>
<li>
<p>Not testable if no logged webps</p>
</li>
<li>
<p>/opt/extension_mechanism/extensions/data/table_def</p>
</li>
<li>
<p>Fail if failed</p>
</li>
<li>
<p>SELECT * FROM gpkg_extensions WHERE table_name = selected table
name AND extension_name = <em>gpkg_webp</em></p>
</li>
<li>
<p>Fail if returns an empty result set</p>
</li>
<li>
<p>Log pass otherwise</p>
</li>
</ul>
</div>
</li>
<li>
<p>Pass if logged pass and no fails</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 3.2.2.2.1 Req 84:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Basic</p>
</div>
</div>
<div class="sect5">
<h6 id="_webp_extensions_row_2">WEBP - Extensions Row</h6>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /reg_ext/tiles/tile_encoding_webp/data/webp_ext_row</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that WEBP tile encodings are registered using the "gpkg_webp"
 extensions name.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="paragraph">
<p>/reg_ext/tiles/tile_encoding_webp/data/webp_ext_name</p>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 3.2.2.2.2 Req 85:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Capability</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_tile_encoding_tiff">Tile Encoding TIFF</h5>
<div class="sect5">
<h6 id="_data_57">Data</h6>
<div class="paragraph">
<p><strong>TIFF - Extensions Name</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /reg_ext/tiles/tile_encoding_tiff/data/tiff_ext_name</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the "gpkg_tiff" extensions name is used to register TIFF tile
 encoding implementations.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name FROM geopackage_contents WHERE data_type = <em>tiles</em></p>
</li>
<li>
<p>Not testable if empty result set</p>
</li>
<li>
<p>For each row table_name from step 3</p>
<div class="ulist">
<ul>
<li>
<p>Select tile_data FROM row table_name</p>
</li>
<li>
<p>For each row tile_data from step a
+ Log tiff if tile data in MIME type image/tiff</p>
</li>
<li>
<p>Not testable if no logged webps</p>
</li>
<li>
<p>/opt/extension_mechanism/extensions/data/table_def</p>
</li>
<li>
<p>Fail if failed</p>
</li>
<li>
<p>SELECT * FROM gpkg_extensions WHERE table_name = selected table
name AND extension_name = <em>gpkg_tiff</em></p>
</li>
<li>
<p>Fail if returns an empty result set</p>
</li>
<li>
<p>Log pass otherwise</p>
</li>
</ul>
</div>
</li>
<li>
<p>Pass if logged pass and no fails</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 3.2.3.1.2 Req 86:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Basic</p>
</div>
<div class="paragraph">
<p><strong>TIFF - Extensions Row</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /reg_ext/tiles/tile_encoding_tiff/data/tiff_ext_row</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that TIFF tile encodings are registered using the "gpkg_tiff"
 extensions name.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="paragraph">
<p>/reg_ext/tiles/tile_encoding_tiff/data/tiff_ext_name</p>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 3.2.3.1.3 Req 87:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Capability</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_tile_encoding_nitf">Tile Encoding NITF</h5>
<div class="sect5">
<h6 id="_data_58">Data</h6>
<div class="paragraph">
<p><strong>NITF - Extensions Name</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /reg_ext/tiles/tile_encoding_nitf/data/nitf_ext_name</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that the "gpkg_nitf" extensions name is used to register NITF tile
 encoding implementations.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name FROM geopackage_contents WHERE data_type = <em>tiles</em></p>
</li>
<li>
<p>Not testable if empty result set</p>
</li>
<li>
<p>For each row table_name from step 3</p>
<div class="ulist">
<ul>
<li>
<p>Select tile_data FROM row table_name</p>
</li>
<li>
<p>For each row tile_data from step a
+ Log nitf if tile data in MIME type application/vnd.NITF</p>
</li>
<li>
<p>Not testable if no logged webps</p>
</li>
<li>
<p>/opt/extension_mechanism/extensions/data/table_def</p>
</li>
<li>
<p>Fail if failed</p>
</li>
<li>
<p>SELECT * FROM gpkg_extensions WHERE table_name = selected table
name AND extension_name = <em>gpkg_nitf</em></p>
</li>
<li>
<p>Fail if returns an empty result set</p>
</li>
<li>
<p>Log pass otherwise</p>
</li>
</ul>
</div>
</li>
<li>
<p>Pass if logged pass and no fails</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 3.2.4.1.2 Req 88:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Basic</p>
</div>
<div class="paragraph">
<p><strong>NITF - Extensions Row</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /reg_ext/tiles/tile_encoding/nitf/data/nitf_ext_row</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that NITF tile encodings are registered in the gpkg_extensions table
 using the "gpkg_nitf" extensions name.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="paragraph">
<p>/reg_ext/tiles/tile_encoding_nitf/data/nitf_ext_name</p>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 3.2.4.1.3 Req 89:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Capability</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_tile_encoding_other">Tile Encoding Other</h5>
<div class="sect5">
<h6 id="_data_59">Data</h6>
<div class="paragraph">
<p><strong>Other Mime Type - Extensions Name</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /reg_ext/tiles/tile_encoding/other/data/other_ext_name</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that an extension name in the form
 &lt;author_name&gt;_&lt;other&gt;_mime_type is defined for an author name other than "gpkg" for
 each other MIME image format used for tile_data columns in tile matrix set user data tables,
 where &lt;other&gt; is replaced by the other MIME type abbreviation in uppercase.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name FROM geopackage_contents WHERE data_type = <em>tiles</em></p>
</li>
<li>
<p>Not testable if empty result set</p>
</li>
<li>
<p>For each row table_name from step 3
+ Select tile_data FROM row table_name
+ For each row tile_data from step a</p>
<div class="ulist">
<ul>
<li>
<p>Log other MIME type name if tile data not in MIME type png, jpeg, webp, tiff or nitf
+ Not testable if no logged others
+ /opt/extension_mechanism/extensions/data/table_def
+ Fail if failed
+ For each other logged MIME type name for this table_name</p>
</li>
<li>
<p>SELECT extension_name FROM gpkg_extensions WHERE
table_name = result set table name AND column_name = <em>tile_data</em>
AND substr(lower(extension_name),1,4. !- <em>gpkg</em>) AND
instr(extension_name, logged MIME type name) != 0</p>
</li>
<li>
<p>Fail if returns an empty result set</p>
</li>
<li>
<p>Separate extension_name into &lt;author&gt; and &lt;extension&gt; at the first "_"</p>
</li>
<li>
<p>Separate &lt;extension&gt; into &lt;mime&gt; and &lt;ext&gt; at the first "_"</p>
</li>
<li>
<p>Fail if &lt;mime&gt; not logged MIME type</p>
</li>
<li>
<p>Fail if &lt;ext&gt; not "mime_type"</p>
</li>
<li>
<p>Log pass otherwise</p>
</li>
</ul>
</div>
</li>
<li>
<p>Pass if logged pass and no fails"</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:     Clause 3.2.5.1.2 Req 90:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:     Basic</p>
</div>
<div class="paragraph">
<p><strong>Other Mime Type - Extensions Row</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /reg_ext/tiles_tile_encoding/other/data/other_ext_row</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that other mime image type tile encodings are registered in the
 gpkg_extensions table using names of the form &lt;author_name&gt;_&lt;other&gt;_mime_type.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="paragraph">
<p>/reg_ext/tiles/tile_encoding/other/data/other_ext_name</p>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:    Clause 3.2.5.1.3 Req 91:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:    Capability</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_any_tables">A.3.3. Any Tables</h4>
<div class="sect4">
<h5 id="_other_trigger_2">Other Trigger</h5>
<div class="sect5">
<h6 id="_data_60">Data</h6>
<div class="paragraph">
<p><strong>Other Trigger - Extensions Name</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /reg_ext/any/other_triggers/data/ext_name</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that an extension name in the form &lt;author_name&gt;_&lt;extension&gt; is
 defined for an author name other than "gpkg" for each other trigger implementation that
 uses SQL functions other than those provided by SQLite or the GeoPackage Minimal
 Runtime SQL Functions.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT sql, tbl_name FROM sqlite_master WHERE type=<em>trigger</em></p>
</li>
<li>
<p>For each row sql, tbl_name from step 1</p>
<div class="ulist">
<ul>
<li>
<p>If sql contains an SQL function other than those provided by SQLite or the
GeoPackage Minimal Runtime SQL Functions
  + Log trigger
      + /opt/extension_mechanism/extensions/data/table_def
      + Fail if failed
      + SELECT extension_name FROM gpkg_extensions WHERE
    table_name = tbl_name AND substr(lower(extension_name),1,4. !-
    <em>gpkg</em>)
      + Fail if returns an empty result set
      + Log pass otherwise</p>
</li>
</ul>
</div>
</li>
<li>
<p>Not testable if no logged triggers</p>
</li>
<li>
<p>Pass if logged pass and no fails</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:    Clause 3.3.1.1.2 Req 92:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:    Basic</p>
</div>
<div class="paragraph">
<p><strong>Other Trigger - Extensions Row</strong></p>
</div>
<div class="paragraph">
<p><strong>Test Case ID</strong>: /reg_ext/any/other_triggers/data/ext_row</p>
</div>
<div class="paragraph">
<p><strong>Test Purpose</strong>: Verify that other trigger implementations that use SQL functions other than
 those provided by SQLite or the GeoPackage Minimal Runtime SQL Functions.are
 registered with &lt;author_name&gt;_&lt;extension&gt; names in the gpkg_extensions table.</p>
</div>
<div class="paragraph">
<p><strong>Test Method</strong>:</p>
</div>
<div class="paragraph">
<p>/reg_ext/any/other_triggers/data/ext_name</p>
</div>
<div class="paragraph">
<p><strong>Reference</strong>:    Clause 3.3.1.1.3 Req 93:</p>
</div>
<div class="paragraph">
<p><strong>Test Type</strong>:   Capability</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="background_and_context"> Annex B: Background and Context (Informative)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_preface">B.1. Preface</h3>
<div class="paragraph">
<p>An open standard non-proprietary platform-independent GeoPackage container for distribution and direct use of all kinds
of geospatial data will increase the cross-platform interoperability of geospatial applications and web services.
Standard APIs for access and management of GeoPackage data will provide consistent query and update results across such
applications and services. Increased interoperability and result consistency will enlarge the potential market for such
 applications and services, particularly in resource-constrained mobile computing environments like cell phones and
 tablets. GeoPackages will become the standard containers for “MyGeoData” that are used as a transfer format by users
 and Geospatial Web Services and a storage format on personal and enterprise devices.</p>
</div>
<div class="paragraph">
<p>This OGC® GeoPackage Encoding Standard defines a GeoPackage as a self-contained, single-file,
cross-platform, serverless, transactional, open source SQLite data container with table definitions, relational
integrity constraints, an SQL API exposed via a “C” CLI and JDBC, and manifest tables that together act as an exchange
and direct-use format for multiple types of geospatial data including vector features, features with raster attributes
and tile matrix pyramids, especially on mobile / hand held devices in disconnected or limited network connectivity
environments.</p>
</div>
<div class="paragraph">
<p>Table formats, definitions of geometry types and metadata tables, relational integrity constraints, and SQL API are
interdependent specification facets of the SF-SQL [13][11][12] and SQL-MM (Spatial) [14] standards that serve as
normative references for the vector feature portion of this specification.</p>
</div>
<div class="paragraph">
<p>This specification attempts to support and use relevant raster types, storage table definitions, and metadata from
widely adopted implementations and existing standards such as WMTS [22] and ISO metadata [42], to integrate use of
rasters as attributes of geospatial features, and to define relational integrity constraints and an SQL API thereon to
provide a raster analogy to the SF-SQL and SF-MM data access and data quality assurance capabilities.</p>
</div>
<div class="paragraph">
<p>Conformance classes for this specification are classified as core (mandatory) and extension (optional). The simple core
of an Empty GeoPackage contains two SQL tables.</p>
</div>
<div class="paragraph">
<p>Future versions of this specification willmay include requirements for elevation data and routes. Future enhancements to
this specification, a future GeoPackage Web Service specification, and modifications to existing OGC Web Service (OWS)
specifications to use GeoPackages as exchange formats willmay allow OWS to support provisioning of GeoPackages
throughout an enterprise or information community.  </p>
</div>
</div>
<div class="sect2">
<h3 id="_submitting_organizations">B.2. Submitting Organizations</h3>
<div class="paragraph">
<p>The following organizations submitted this Encoding Standard to the Open Geospatial Consortium Inc. as a
Request For Comment (RFC).</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Envitia</p>
</li>
<li>
<p>Luciad</p>
</li>
<li>
<p>Sigma Bravo</p>
</li>
<li>
<p>The Carbon Project</p>
</li>
<li>
<p>U.S. Army Geospatial Center</p>
</li>
<li>
<p>U.S. National Geospatial Intelligence Agency</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_revision_history">B.3. Revision History</h3>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Date</th>
<th class="tableblock halign-left valign-top">Rel</th>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Paragraph modified</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">----</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">---</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">------</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">------------------</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Revision history omitted</p></td>
</tr>
</tbody>
</table>

</div>
<div class="sect2">
<h3 id="_changes_to_the_ogc_abstract_specification">B.4. Changes to the OGC® Abstract Specification</h3>
<div class="paragraph">
<p>The OGC® Abstract Specification does not require changes to accommodate this OGC® standard.</p>
</div>
</div>
<div class="sect2">
<h3 id="_changes_to_ogc_implementation_standards">B.5. Changes to OGC® Implementation Standards</h3>
<div class="paragraph">
<p>None at present.</p>
</div>
</div>
<div class="sect2">
<h3 id="_potential_future_work">B.6. Potential Future Work</h3>
<div class="ulist">
<ul>
<li>
<p>MAY investigate GeoPackage implementation on SQLite version 4 <a href="#B46">[B46]</a>.</p>
</li>
<li>
<p>Future versions of this specification MAY include requirements for elevation data and routes.</p>
</li>
<li>
<p>Future enhancements to this specification, a future GeoPackage Web Service specification and modifications to existing OGC Web Service (OWS) specifications to use GeoPackages as exchange formats MAY allow OWS to support provisioning of GeoPackages throughout an enterprise.</p>
</li>
<li>
<p>Future versions of this specification MAY include additional raster / image formats, including fewer restrictions on the image/tiff format.</p>
</li>
<li>
<p>Future versions of this specification MAY include additional SQL API routines for interrogation and conversion of raster / image BLOBs.</p>
</li>
<li>
<p>Future versions of this specification and/or one for a GeoPackage Web Service MAY address utilities for importing and exporting vector, raster and tile data in various formats.</p>
</li>
<li>
<p>Future versions of this specification and/or one for a GeoPackage Web Service MAY address encryption of GeoPackages and/or individual tables or column values.</p>
</li>
<li>
<p>Future versions of this specification MAY add infrastructure to the metadata tables such as a <code>temporal_columns</code> table that refers to the time properties of data records.</p>
</li>
<li>
<p>MAY specify a streaming synchronization protocol for GeoPackage as part of a future GeoPackage Web Service specification, and/or a future version of the GeoPackage and/or Web Synchronization Service specification(s).</p>
</li>
<li>
<p>Future versions of this specification MAY address symbology and styling information.</p>
</li>
<li>
<p>Future version of this specification MAY include geographic / geodesic geometry types.</p>
</li>
<li>
<p>MAY create a GeoPackage Abstract Object Model to support data encodings other than SQL in a future version of this specification.</p>
</li>
<li>
<p>MAY add <a href="https://github.com/mapbox/utfgrid-spec">UTFGrid</a> support in a future version of this specification</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_contributors">B.7. Contributors</h3>
<div class="paragraph">
<p>The following organizations and individuals have contributed to the preparation of this standard:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Alessandro Furieri</p>
</li>
<li>
<p>Compusult Limited</p>
</li>
<li>
<p>Development Seed</p>
</li>
<li>
<p>Environmental Systems Research Institute, Inc. (Esri)</p>
</li>
<li>
<p>Envitia</p>
</li>
<li>
<p>Feng China University</p>
</li>
<li>
<p>George Mason University</p>
</li>
<li>
<p>Image Matters LLC</p>
</li>
<li>
<p>International Geospatial Services Institute (iGSI) GmbH</p>
</li>
<li>
<p>LMN Solutions</p>
</li>
<li>
<p>Luciad</p>
</li>
<li>
<p>MapBox</p>
</li>
<li>
<p>OpenGeo</p>
</li>
<li>
<p>Open Site Plan</p>
</li>
<li>
<p>Sigma Bravo</p>
</li>
<li>
<p>The Carbon Project</p>
</li>
<li>
<p>Universitat Autònoma de Barcelona (CREAF)</p>
</li>
<li>
<p>U.S. Army Geospatial Center (AGC)</p>
</li>
<li>
<p>U.S. National Aeronautics and Space Administration (NASA)</p>
</li>
<li>
<p>U.S. National Geospatial Intelligence Agency (NGA)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_terms_and_definitions">B.8. Terms and Definitions</h3>
<div class="paragraph">
<p>For the purposes of this document, the following terms and definitions apply.</p>
</div>
<div class="dlist gloassary">
<dl>
<dt>Empty GeoPackage</dt>
<dd>
<p>A GeoPackage file that contains a <code>spatial_ref_sys</code> table, <code>agpkg_contents</code> table with row record(s) with <code>data_type</code> column values of “features” or “tiles”, and corresponding features tables per clause 2.1. and/or tiles tables per clause 2.2 where the user data tables per clauses 2.1.6. and 2.2.7 exist but contain no rows.</p>
</dd>
<dt>geolocate</dt>
<dd>
<p>identify a real-world geographic location</p>
</dd>
<dt>GeoPackage</dt>
<dd>
<p>A GeoPackage file used with a GeoPackage SQLite Extension</p>
</dd>
<dt>GeoPackage file</dt>
<dd>
<p>a platform-independent SQLite database file that contains GeoPackage data and metadata tables with specified definitions, integrity assertions, format limitations and content constraints.</p>
</dd>
<dt>GeoPackage SQLite Extension</dt>
<dd>
<p>executable software linked to a SQLite library with specified configuration requirements to provide SQL API access to and functional manipulation of GeoPackage file contents.</p>
</dd>
<dt>georectified</dt>
<dd>
<p>raster whose pixels have been regularly spaced in a geographic (i.e., latitude / longitude) or projected map coordinate system using ground control points so that any pixel can be geolocated given its grid coordinate and the grid origin, cell spacing, and orientation.</p>
</dd>
<dt>orthorectified</dt>
<dd>
<p>georectified raster that has also been corrected to remove image perspective (camera angle tilt), camera and lens induced distortions, and terrain induced distortions using camera calibration parameters and DEM elevation data to accurately align with real world coordinates, have constant scale, and support direct measurement of distances, angles, and areas.</p>
</dd>
<dt>Valid GeoPackage</dt>
<dd>
<p>A GeoPackage file that contains features per clause Error! Reference source not found. and/or tiles per clause Error! Reference source not found. and row(s) in the <code>gpkg_contents</code> table with <code>data_type</code> column values of “features” and/or “tiles” describing the user data tables.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_conventions">B.9. Conventions</h3>
<div class="paragraph">
<p>Symbols (and abbreviated terms)</p>
</div>
<div class="paragraph">
<p>Some frequently used abbreviated terms:</p>
</div>
<div class="dlist gloassary">
<dl>
<dt>ACID</dt>
<dd>
<p>Atomic, Consistent, Isolated, and Durable</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_uml_notation">B.10. UML Notation</h3>
<div class="paragraph">
<p>The diagrams that appear in this standard are presented using the Unified Modeling Language (UML) static structure diagrams.
The UML notations used in this standard for RDBMS tables in the GeoPackage container are described in Figure 1 below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="umlnotationforrdbmstables.png" alt="umlnotationforrdbmstables">
</div>
<div class="title">Figure 3. UML Notation for RDBMS Tables</div>
</div>
<div class="paragraph">
<p>In this standard, the following two stereotypes of UML classes are used to represent RDBMS tables:</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><a href="#table">[table]</a> An instantiation of a UML class as an RDMBS table.</p>
</li>
<li>
<p><a href="#column">[column]</a> An instantiation of a UML attribute as an RDBMS table column.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In this standard, the following standard data types are used for RDBMS
columns:</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>NULL – The value is a NULL value.</p>
</li>
<li>
<p>INTEGER – A signed integer, stored in 1, 2, 3, 4, 6, or 8 bytes depending on the magnitude of the value</p>
</li>
<li>
<p>REAL – The value is a floating point value, stored as an 8-byte IEEE floating point number.</p>
</li>
<li>
<p>TEXT – A sequence of characters, stored using the database encoding (UTF-8, UTF-16BE or UTF-16LE).</p>
</li>
<li>
<p>BLOB – The value is a blob of data, stored exactly as it was input.</p>
</li>
<li>
<p>NONE – The value is a Date / Time Timestamp</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The UML notations used in this standard for the eXtensible Markup Language (XML) schema for the GeoPackage manifest are described in Figure 2 below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="umlnotationforxmlschema.png" alt="umlnotationforxmlschema">
</div>
<div class="title">Figure 4. UML notation for XML Schema</div>
</div>
<div class="paragraph">
<p>In this standard, the following stereotypes of UML classes are used to describe XML schemas:</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><a href="#DataType">[DataType]</a> A descriptor of a set of values that lack identity (independent existence and the possibility of side effects). A DataType is a class with no operations whose primary purpose is to hold the information.</p>
</li>
<li>
<p><a href="#Enumeration">[Enumeration]</a> is a fixed enumeration that uses string values for expressing a list of potential values.</p>
</li>
<li>
<p><a href="#CodeList">[CodeList]</a> is an extensible enumeration that uses string values for expressing a list of potential values.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In this standard, the standard data types defined in <a href="http://www.w3.org/TR/xmlschema-2/">XML Schema Part 2: Datatypes</a> are used to describe XML Schemas.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="table_definition_sql"> Annex C: Table Definition SQL (Normative)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_gpkg_spatial_ref_sys">C.1. gpkg_spatial_ref_sys</h3>
<div id="gpkg_spatial_ref_sys_sql" class="listingblock">
<div class="title">gpkg_spatial_ref_sys Table Definition SQL</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TABLE</span> gpkg_spatial_ref_sys (
  srs_name <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  srs_id <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">PRIMARY</span> <span class="type">KEY</span>,
  organization <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  organization_coordsys_id <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  definition  <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  description <span class="predefined-type">TEXT</span>
);</code></pre>
</div>
</div>
<div id="sqlmm_gpkg_spatial_ref_sys_sql" class="listingblock">
<div class="title">SQL/MM View of gpkg_spatial_ref_sys Definition SQL</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">VIEW</span> st_spatial_ref_sys <span class="keyword">AS</span>
  <span class="class">SELECT</span>
    srs_name,
    srs_id,
    organization,
    organization_coordsys_id,
    definition,
    description
  <span class="keyword">FROM</span> gpkg_spatial_ref_sys;</code></pre>
</div>
</div>
<div id="sfsql_gpkg_spatial_ref_sys_sql" class="listingblock">
<div class="title">SF/SQL View of gpkg_spatial_ref_sys Definition SQL</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">VIEW</span> spatial_ref_sys <span class="keyword">AS</span>
  <span class="class">SELECT</span>
    srs_id <span class="keyword">AS</span> srid,
    organization <span class="keyword">AS</span> auth_name,
    organization_coordsys_id <span class="keyword">AS</span> auth_srid,
    definition <span class="keyword">AS</span> srtext
  <span class="keyword">FROM</span> gpkg_spatial_ref_sys;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gpkg_contents">C.2. gpkg_contents</h3>
<div id="gpkg_contents_sql" class="listingblock">
<div class="title">gpkg_contents Table Definition SQL</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TABLE</span> gpkg_contents (
  table_name <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">PRIMARY</span> <span class="type">KEY</span>,
  data_type <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  identifier <span class="predefined-type">TEXT</span> <span class="directive">UNIQUE</span>,
  description <span class="predefined-type">TEXT</span> <span class="directive">DEFAULT</span> <span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>,
  last_change <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">DEFAULT</span> (strftime(<span class="string"><span class="delimiter">'</span><span class="content">%Y-%m-%dT%H:%M:%fZ</span><span class="delimiter">'</span></span>,CURRENT_TIMESTAMP)),
  min_x <span class="predefined-type">DOUBLE</span>,
  min_y <span class="predefined-type">DOUBLE</span>,
  max_x <span class="predefined-type">DOUBLE</span>,
  max_y <span class="predefined-type">DOUBLE</span>,
  srs_id <span class="predefined-type">INTEGER</span>,
  <span class="type">CONSTRAINT</span> fk_gc_r_srs_id <span class="directive">FOREIGN</span> <span class="type">KEY</span> (srs_id) <span class="keyword">REFERENCES</span> gpkg_spatial_ref_sys(srs_id)
);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gpkg_extension">C.3. gpkg_extension</h3>
<div id="gpkg_extension_sql" class="listingblock">
<div class="title">gpkg_extensions Table Definition SQL</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TABLE</span> gpkg_extensions (
  table_name <span class="predefined-type">TEXT</span>,
  column_name <span class="predefined-type">TEXT</span>,
  extension_name <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  scope <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  <span class="type">CONSTRAINT</span> ge_tce <span class="directive">UNIQUE</span> (table_name, column_name, extension_name)
);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gpkg_geometry_columns">C.4. gpkg_geometry_columns</h3>
<div id="gpkg_geometry_columns_sql" class="listingblock">
<div class="title">gpkg_geometry_columns Table Definition SQL</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TABLE</span> gpkg_geometry_columns (
  table_name <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  column_name <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  geometry_type_name <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  srs_id <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  z <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  m <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  <span class="type">CONSTRAINT</span> pk_geom_cols <span class="directive">PRIMARY</span> <span class="type">KEY</span> (table_name, column_name),
  <span class="type">CONSTRAINT</span> uk_gc_table_name <span class="directive">UNIQUE</span> (table_name),
  <span class="type">CONSTRAINT</span> fk_gc_tn <span class="directive">FOREIGN</span> <span class="type">KEY</span> (table_name) <span class="keyword">REFERENCES</span> gpkg_contents(table_name),
  <span class="type">CONSTRAINT</span> fk_gc_srs <span class="directive">FOREIGN</span> <span class="type">KEY</span> (srs_id) <span class="keyword">REFERENCES</span> gpkg_spatial_ref_sys (srs_id)
);</code></pre>
</div>
</div>
<div id="sqlmm_gpkg_geometry_columns_sql" class="listingblock">
<div class="title">SQL/MM View of gpkg_geometry_columns Definition SQL</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">VIEW</span> st_geometry_columns <span class="keyword">AS</span>
  <span class="class">SELECT</span>
    table_name,
    column_name,
    <span class="string"><span class="delimiter">&quot;</span><span class="content">ST_</span><span class="delimiter">&quot;</span></span> || geometry_type_name,
    g.srs_id,
    srs_name
  <span class="keyword">FROM</span> gpkg_geometry_columns <span class="keyword">as</span> g <span class="keyword">JOIN</span> gpkg_spatial_ref_sys <span class="keyword">AS</span> s
  <span class="keyword">WHERE</span> g.srs_id = s.srs_id;</code></pre>
</div>
</div>
<div id="sfsql_gpkg_geometry_columns_sql" class="listingblock">
<div class="title">SF/SQL VIEW of gpkg_geometry_columns Definition SQL</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">VIEW</span> geometry_columns <span class="keyword">AS</span>
  <span class="class">SELECT</span>
    table_name <span class="keyword">AS</span> f_table_name,
    column_name <span class="keyword">AS</span> f_geometry_column,
    code4name <span class="integer">1</span> (geometry_type_name) <span class="keyword">AS</span> geometry_type,
    <span class="integer">2</span> + (<span class="keyword">CASE</span> z <span class="keyword">WHEN</span> <span class="integer">1</span> <span class="keyword">THEN</span> <span class="integer">1</span> <span class="keyword">WHEN</span> <span class="integer">2</span> <span class="keyword">THEN</span> <span class="integer">1</span> <span class="keyword">ELSE</span> <span class="integer">0</span> <span class="keyword">END</span>) + (<span class="keyword">CASE</span> m <span class="keyword">WHEN</span> <span class="integer">1</span> <span class="keyword">THEN</span> <span class="integer">1</span> <span class="keyword">WHEN</span> <span class="integer">2</span> <span class="keyword">THEN</span> <span class="integer">1</span> <span class="keyword">ELSE</span> <span class="integer">0</span> <span class="keyword">END</span>) <span class="keyword">AS</span> coord_dimension,
    srs_id <span class="keyword">AS</span> srid
  <span class="keyword">FROM</span> gpkg_geometry_columns;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_sample_feature_table_informative">C.5. sample_feature_table (Informative)</h3>
<div id="example_feature_table_sql" class="listingblock">
<div class="title">sample_feature_table Table Definition SQL</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TABLE</span> sample_feature_table (
  id <span class="predefined-type">INTEGER</span> <span class="directive">PRIMARY</span> <span class="type">KEY</span> AUTOINCREMENT,
  geometry GEOMETRY,
  text_attribute <span class="predefined-type">TEXT</span>,
  real_attribute REAL,
  boolean_attribute <span class="predefined-type">BOOLEAN</span>,
  raster_or_photo <span class="predefined-type">BLOB</span>
);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gpkg_tile_matrix_set">C.6. gpkg_tile_matrix_set</h3>
<div id="gpkg_tile_matrix_set_sql" class="listingblock">
<div class="title">gpkg_tile_matrix_set Table Creation SQL</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TABLE</span> gpkg_tile_matrix_set (
  table_name <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">PRIMARY</span> <span class="type">KEY</span>,
  srs_id <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>
  min_x <span class="predefined-type">DOUBLE</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  min_y <span class="predefined-type">DOUBLE</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  max_x <span class="predefined-type">DOUBLE</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  max_y <span class="predefined-type">DOUBLE</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  <span class="type">CONSTRAINT</span> fk_gtms_table_name <span class="directive">FOREIGN</span> <span class="type">KEY</span> (table_name) <span class="keyword">REFERENCES</span> gpkg_contents(table_name),
  <span class="type">CONSTRAINT</span> fk_gtms_srs <span class="directive">FOREIGN</span> <span class="type">KEY</span> (srs_id) <span class="keyword">REFERENCES</span> gpkg_spatial_ref_sys (srs_id)
);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gpkg_tile_matrix">C.7. gpkg_tile_matrix</h3>
<div id="gpkg_tile_matrix_sql" class="listingblock">
<div class="title">gpkg_tile_matrix Table Creation SQL</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TABLE</span> gpkg_tile_matrix (
  table_name <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  zoom_level <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  matrix_width <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  matrix_height <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  tile_width <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  tile_height <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  pixel_x_size <span class="predefined-type">DOUBLE</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  pixel_y_size <span class="predefined-type">DOUBLE</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  <span class="type">CONSTRAINT</span> pk_ttm <span class="directive">PRIMARY</span> <span class="type">KEY</span> (table_name, zoom_level),
  <span class="type">CONSTRAINT</span> fk_tmm_table_name <span class="directive">FOREIGN</span> <span class="type">KEY</span> (table_name) <span class="keyword">REFERENCES</span> gpkg_contents(table_name)
);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">EXAMPLE: gpkg_tile_matrix Insert Statement</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">INSERT</span> <span class="class">INTO</span> gpkg_tile_matrix <span class="keyword">VALUES</span> (
  <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_tile_pyramid</span><span class="delimiter">&quot;</span></span>,
  <span class="integer">0</span>,
  <span class="integer">1</span>,
  <span class="integer">1</span>,
  <span class="integer">512</span>,
  <span class="integer">512</span>,
  <span class="float">2.0</span>,
  <span class="float">2.0</span>
);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_sample_tile_pyramid_informative">C.8. sample_tile_pyramid (Informative)</h3>
<div id="example_tiles_table_sql" class="listingblock">
<div class="title">EXAMPLE: tiles table Create Table SQL</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TABLE</span> sample_tile_pyramid (
  id <span class="predefined-type">INTEGER</span> <span class="directive">PRIMARY</span> <span class="type">KEY</span> AUTOINCREMENT,
  zoom_level <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  tile_column <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  tile_row <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  tile_data <span class="predefined-type">BLOB</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>),
  <span class="directive">UNIQUE</span> (zoom_level, tile_column, tile_row)
)</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">EXAMPLE: tiles table Insert Statement</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">INSERT</span> <span class="class">INTO</span> sample_matrix_pyramid <span class="keyword">VALUES</span> (
  <span class="integer">1</span>,
  <span class="integer">1</span>,
  <span class="integer">1</span>,
  <span class="integer">1</span>,
  <span class="string"><span class="delimiter">&quot;</span><span class="content">BLOB VALUE</span><span class="delimiter">&quot;</span></span>
)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gpkg_data_columns">C.9. gpkg_data_columns</h3>
<div id="gpkg_data_columns_sql" class="listingblock">
<div class="title">gpkg_data_columns Table Definition SQL</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TABLE</span> gpkg_data_columns (
  table_name <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  column_name <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  name <span class="predefined-type">TEXT</span>,
  title <span class="predefined-type">TEXT</span>,
  description <span class="predefined-type">TEXT</span>,
  mime_type <span class="predefined-type">TEXT</span>,
  constraint_name <span class="predefined-type">TEXT</span>,
  constraint_type <span class="predefined-type">TEXT</span>,
  <span class="type">CONSTRAINT</span> pk_gdc <span class="directive">PRIMARY</span> <span class="type">KEY</span> (table_name, column_name),
  <span class="type">CONSTRAINT</span> fk_gdc_tn <span class="directive">FOREIGN</span> <span class="type">KEY</span> (table_name) <span class="keyword">REFERENCES</span> gpkg_contents(table_name)
);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gpkg_data_column_constraints">C.10. gpkg_data_column_constraints</h3>
<div id="gpkg_data_column_constraints_sql" class="listingblock">
<div class="title">gpkg_data_columns Table Definition SQL</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TABLE</span> gpkg_data_column_constraints (
  constraint_name <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  constraint_type <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>, // <span class="string"><span class="delimiter">'</span><span class="content">range</span><span class="delimiter">'</span></span> | <span class="string"><span class="delimiter">'</span><span class="content">enum</span><span class="delimiter">'</span></span> | <span class="string"><span class="delimiter">'</span><span class="content">glob</span><span class="delimiter">'</span></span>
  value <span class="predefined-type">TEXT</span>,
  <span class="predefined">min</span> NUMERIC,
  minIsInclusive <span class="predefined-type">INTEGER</span>, // <span class="integer">0</span> = <span class="predefined-constant">false</span>, <span class="integer">1</span> = <span class="predefined-constant">true</span>
  <span class="predefined">max</span> NUMERIC,
  maxIsInclusive <span class="predefined-type">INTEGER</span>, // <span class="integer">0</span> = <span class="predefined-constant">false</span>, <span class="integer">1</span> = <span class="predefined-constant">true</span>
)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gpkg_metadata">C.11. gpkg_metadata</h3>
<div id="gpkg_metadata_sql" class="listingblock">
<div class="title">gpkg_metadata Table Definition SQL</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TABLE</span> gpkg_metadata (
  id <span class="predefined-type">INTEGER</span> <span class="type">CONSTRAINT</span> m_pk <span class="directive">PRIMARY</span> <span class="type">KEY</span> <span class="directive">ASC</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">UNIQUE</span>,
  md_scope <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">DEFAULT</span> <span class="string"><span class="delimiter">'</span><span class="content">dataset</span><span class="delimiter">'</span></span>,
  metadata_standard_URI <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">DEFAULT</span> <span class="string"><span class="delimiter">'</span><span class="content">http://schemas.opengis.net/iso/19139/</span><span class="delimiter">'</span></span>,
  mime_type <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">DEFAULT</span> <span class="string"><span class="delimiter">'</span><span class="content">text/xml</span><span class="delimiter">'</span></span>,
  metadata <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">DEFAULT</span> <span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>
);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gpkg_metadata_reference">C.12. gpkg_metadata_reference</h3>
<div id="gpkg_metadata_reference_sql" class="listingblock">
<div class="title">gpkg_metadata_reference Table Definition SQL</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TABLE</span> gpkg_metadata_reference (
  reference_scope <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  table_name <span class="predefined-type">TEXT</span>,
  column_name <span class="predefined-type">TEXT</span>,
  row_id_value <span class="predefined-type">INTEGER</span>,
  <span class="predefined-type">timestamp</span> <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">DEFAULT</span> (strftime(<span class="string"><span class="delimiter">'</span><span class="content">%Y-%m-%dT%H:%M:%fZ</span><span class="delimiter">'</span></span>,CURRENT_TIMESTAMP)),
  md_file_id <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  md_parent_id <span class="predefined-type">INTEGER</span>,
  <span class="type">CONSTRAINT</span> crmr_mfi_fk <span class="directive">FOREIGN</span> <span class="type">KEY</span> (md_file_id) <span class="keyword">REFERENCES</span> gpkg_metadata(id),
  <span class="type">CONSTRAINT</span> crmr_mpi_fk <span class="directive">FOREIGN</span> <span class="type">KEY</span> (md_parent_id) <span class="keyword">REFERENCES</span> gpkg_metadata(id)
);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example: gpkg_metadata_reference SQL insert statement</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">INSERT</span> <span class="class">INTO</span> gpkg_metadata_reference <span class="keyword">VALUES</span> (
  <span class="string"><span class="delimiter">'</span><span class="content">table</span><span class="delimiter">'</span></span>,
  <span class="string"><span class="delimiter">'</span><span class="content">sample_rasters</span><span class="delimiter">'</span></span>,
  <span class="predefined-constant">NULL</span>,
  <span class="predefined-constant">NULL</span>,
  <span class="string"><span class="delimiter">'</span><span class="content">2012-08-17T14:49:32.932Z</span><span class="delimiter">'</span></span>,
  <span class="integer">98</span>,
  <span class="integer">99</span>
)</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="minimal_runtime_sql_functions"> Annex D: Minimal Runtime SQL Functions (Normative)</h2>
<div class="sectionbody">
<table id="minimal_runtime_sql_functions_table" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 19. Minimal Runtime SQL Functions</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">SQL Function</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST_SRID(geom. Geometry) : INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the spatial reference system id of a Geometry</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that geometry srid matches what&#8217;s specified in gpkg_geometry_columns.srid</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST_GeometryType(geom. Geometry) : TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the WKB geometry type name of a Geometry</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that the geometry type matches what’s specified in gpkg_geometry_columns.geometry_type_name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GPKG_IsAssignable(expected_type_name TEXT, actual_type_name TEXT): INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns 1 if a value of type expected_type_name is the same or a super type of type actual_type_name.
 Returns 0 otherwise.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Determine if the expected geometry type is the same as or a super type of the actual geometry type.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST_IsEmpty(geom. Geometry) : INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns 1 if geometry value is empty, 0 if not empty, NULL if geometry value is NULL.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test if a geometry value corresponds to the empty set</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST_Is3D(geom. Geometry) : INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that elevation values are present when they are required, and not present when they are prohibited.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tests whether a Geometry value has z coordinates</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST_IsMeasured(geom. Geometry) : INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Check that measure values are present when they are required, and not present when they are prohibited.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tests whether a Geometry value has m coordinates.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST_MinX(geom. Geometry) : REAL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the minimum X value of the bounding Envelope of a Geometry</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update the spatial index on a geometry column in a feature table.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST_MaxX(geom. Geometry) : REAL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the maximum X value of the bounding Envelope of a Geometry</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update the spatial index on a geometry column in a feature table.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST_MinY(geom. Geometry) : REAL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the minimum Y value of the bounding Envelope of a Geometry</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update the spatial index on a geometry column in a feature table.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST_MaxY(geom. Geometry) : REAL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the maximum Y value of the bounding Envelope of a Geometry</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update the spatial index on a geometry column in a feature table.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST_MinZ(geom. Geometry) : REAL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the minimum Z value of the bounding Envelope of a Geometry</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update the spatial index on a geometry column in a feature table.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST_MaxZ(geom. Geometry) : REAL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the maximum Z value of the bounding Envelope of a Geometry</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update the spatial index on a geometry column in a feature table.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST_MinM(geom. Geometry) : REAL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the minimum M value of the bounding Envelope of a Geometry</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update the spatial index on a geometry column in a feature table.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST_MaxM(geom. Geometry) : REAL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the maximum M value of the bounding Envelope of a Geometry</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update the spatial index on a geometry column in a feature table.</p></td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="sect1">
<h2 id="spatial_index_sql"> Annex E: Spatial Index SQL (Normative)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The tables below contain SQL templates with variables.
Replace the following template variables with the specified values to create the required SQL statements:<br>
&lt;t&gt;: The name of the feature table containing the geometry column<br>
&lt;c&gt;: The name of the geometry column in &lt;t&gt; that is being indexed<br>
&lt;i&gt;: The name of the integer primary key column in &lt;t&gt; as specified in Req 25</p>
</div>
<div class="sect2">
<h3 id="_create_virtual_table_sql_template">E.1. Create Virtual Table SQL Template</h3>
<div class="paragraph">
<p>GeoPackage files MAY contain a spatial index for each geometry column of a feature table.
These spatial indexes SHALL be created using the SQLite Virtual Table RTree extension.
An application that creates a spatial index SHALL create it using the following SQL statement template:</p>
</div>
<div class="listingblock">
<div class="title">create virtual table SQL</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> VIRTUAL <span class="type">TABLE</span> rtree_&lt;t&gt;_&lt;c&gt; <span class="keyword">USING</span> rtree(id, minx, maxx, miny, maxy)</code></pre>
</div>
</div>
<div class="paragraph">
<p>where &lt;t&gt; and &lt;c&gt; are replaced with the names of the feature table and geometry column being indexed.
The rtree function id parameter becomes the virtual table 64-bit signed integer primary key id column, and the min/max x/y parameters are min- and max-value pairs (stored as 32-bit floating point numbers) for each dimension that become the virtual table data columns that are populated to create the spatial rtree index.</p>
</div>
</div>
<div class="sect2">
<h3 id="_load_spatial_index_values">E.2. Load Spatial Index Values</h3>
<div class="paragraph">
<p>The indexes provided by the SQLite Virtual Table RTree extension are not automatic indices.
This means the index data structure needs to be manually populated, updated and queried.
Each newly created spatial index SHALL be populated using the following SQL statement</p>
</div>
<div class="listingblock">
<div class="title">load spatial index values SQL</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">INSERT</span> <span class="keyword">OR</span> <span class="class">REPLACE</span> <span class="class">INTO</span> rtree_&lt;t&gt;_&lt;c&gt;
  <span class="class">SELECT</span> &lt;i&gt;, st_minx(&lt;c&gt;), st_maxx(&lt;c&gt;), st_miny(&lt;c&gt;), st_maxy(&lt;c&gt;) <span class="keyword">FROM</span> &lt;t&gt;;</code></pre>
</div>
</div>
<div class="paragraph">
<p>where &lt;t&gt; and &lt;c&gt; are replaced with the names of the feature table and geometry column being indexed and &lt;i&gt; is replaced with the name of the feature table integer primary key column.</p>
</div>
</div>
<div class="sect2">
<h3 id="_define_triggers_to_maintain_spatial_index_values">E.3. Define Triggers to Maintain Spatial Index Values</h3>
<div class="paragraph">
<p>For each spatial index in a GeoPackage file, corresponding insert, update and delete triggers that update the spatial index SHALL be present on the indexed geometry column.
These spatial index triggers SHALL be defined as follows:</p>
</div>
<div class="listingblock">
<div class="title">Spatial Index SQL Triggers Template</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="comment">/* Conditions: Insertion of non-empty geometry
   Actions   : Insert record into rtree */</span>
<span class="class">CREATE</span> <span class="type">TRIGGER</span> rtree_&lt;t&gt;_&lt;c&gt;_insert <span class="directive">AFTER</span> <span class="class">INSERT</span> <span class="keyword">ON</span> &lt;t&gt;
  <span class="keyword">WHEN</span> (new.&lt;c&gt; <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="keyword">AND</span> <span class="keyword">NOT</span> ST_IsEmpty(NEW.&lt;c&gt;))
<span class="class">BEGIN</span>
  <span class="class">INSERT</span> <span class="keyword">OR</span> <span class="class">REPLACE</span> <span class="class">INTO</span> rtree_&lt;t&gt;_&lt;c&gt; <span class="keyword">VALUES</span> (
    NEW.&lt;i&gt;,
    ST_MinX(NEW.&lt;c&gt;), ST_MaxX(NEW.&lt;c&gt;),
    ST_MinY(NEW.&lt;c&gt;), ST_MaxY(NEW.&lt;c&gt;)
  );
<span class="keyword">END</span>;

<span class="comment">/* Conditions: Update of geometry column to non-empty geometry
               No row ID change
   Actions   : Update record in rtree */</span>
<span class="class">CREATE</span> <span class="type">TRIGGER</span> rtree_&lt;t&gt;_&lt;c&gt;_update1 <span class="directive">AFTER</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> &lt;c&gt; <span class="keyword">ON</span> &lt;t&gt;
  <span class="keyword">WHEN</span> OLD.&lt;i&gt; = NEW.&lt;i&gt; <span class="keyword">AND</span>
       (NEW.&lt;c&gt; NOTNULL <span class="keyword">AND</span> <span class="keyword">NOT</span> ST_IsEmpty(NEW.&lt;c&gt;))
<span class="class">BEGIN</span>
  <span class="class">INSERT</span> <span class="keyword">OR</span> <span class="class">REPLACE</span> <span class="class">INTO</span> rtree_&lt;t&gt;_&lt;c&gt; <span class="keyword">VALUES</span> (
    NEW.&lt;i&gt;,
    ST_MinX(NEW.&lt;c&gt;), ST_MaxX(NEW.&lt;c&gt;),
    ST_MinY(NEW.&lt;c&gt;), ST_MaxY(NEW.&lt;c&gt;)
  );
<span class="keyword">END</span>;

<span class="comment">/* Conditions: Update of geometry column to empty geometry
               No row ID change
   Actions   : Remove record from rtree */</span>
<span class="class">CREATE</span> <span class="type">TRIGGER</span> rtree_&lt;t&gt;_&lt;c&gt;_update2 <span class="directive">AFTER</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> &lt;c&gt; <span class="keyword">ON</span> &lt;t&gt;
  <span class="keyword">WHEN</span> OLD.&lt;i&gt; = NEW.&lt;i&gt; <span class="keyword">AND</span>
       (NEW.&lt;c&gt; ISNULL <span class="keyword">OR</span> ST_IsEmpty(NEW.&lt;c&gt;))
<span class="class">BEGIN</span>
  <span class="class">DELETE</span> <span class="keyword">FROM</span> rtree_&lt;t&gt;_&lt;c&gt; <span class="keyword">WHERE</span> id = OLD.&lt;i&gt;;
<span class="keyword">END</span>;

<span class="comment">/* Conditions: Update of any column
               Row ID change
               Non-empty geometry
   Actions   : Remove record from rtree for old &lt;i&gt;
               Insert record into rtree for new &lt;i&gt; */</span>
<span class="class">CREATE</span> <span class="type">TRIGGER</span> rtree_&lt;t&gt;_&lt;c&gt;_update3 <span class="directive">AFTER</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> &lt;c&gt; <span class="keyword">ON</span> &lt;t&gt;
  <span class="keyword">WHEN</span> OLD.&lt;i&gt; != NEW.&lt;i&gt; <span class="keyword">AND</span>
       (NEW.&lt;c&gt; NOTNULL <span class="keyword">AND</span> <span class="keyword">NOT</span> ST_IsEmpty(NEW.&lt;c&gt;))
<span class="class">BEGIN</span>
  <span class="class">DELETE</span> <span class="keyword">FROM</span> rtree_&lt;t&gt;_&lt;c&gt; <span class="keyword">WHERE</span> id = OLD.&lt;i&gt;;
  <span class="class">INSERT</span> <span class="keyword">OR</span> <span class="class">REPLACE</span> <span class="class">INTO</span> rtree_&lt;t&gt;_&lt;c&gt; <span class="keyword">VALUES</span> (
    NEW.&lt;i&gt;,
    ST_MinX(NEW.&lt;c&gt;), ST_MaxX(NEW.&lt;c&gt;),
    ST_MinY(NEW.&lt;c&gt;), ST_MaxY(NEW.&lt;c&gt;)
  );
<span class="keyword">END</span>;

<span class="comment">/* Conditions: Update of any column
               Row ID change
               Empty geometry
   Actions   : Remove record from rtree for old and new &lt;i&gt; */</span>
<span class="class">CREATE</span> <span class="type">TRIGGER</span> rtree_&lt;t&gt;_&lt;c&gt;_update4 <span class="directive">AFTER</span> <span class="class">UPDATE</span> <span class="keyword">ON</span> &lt;t&gt;
  <span class="keyword">WHEN</span> OLD.&lt;i&gt; != NEW.&lt;i&gt; <span class="keyword">AND</span>
       (NEW.&lt;c&gt; ISNULL <span class="keyword">OR</span> ST_IsEmpty(NEW.&lt;c&gt;))
<span class="class">BEGIN</span>
  <span class="class">DELETE</span> <span class="keyword">FROM</span> rtree_&lt;t&gt;_&lt;c&gt; <span class="keyword">WHERE</span> id <span class="keyword">IN</span> (OLD.&lt;i&gt;, NEW.&lt;i&gt;);
<span class="keyword">END</span>;

<span class="comment">/* Conditions: Row deleted
   Actions   : Remove record from rtree for old &lt;i&gt; */</span>
<span class="class">CREATE</span> <span class="type">TRIGGER</span> rtree_&lt;t&gt;_&lt;c&gt;_delete <span class="directive">AFTER</span> <span class="class">DELETE</span> <span class="keyword">ON</span> &lt;t&gt;
  <span class="keyword">WHEN</span> old.&lt;c&gt; <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>
<span class="class">BEGIN</span>
  <span class="class">DELETE</span> <span class="keyword">FROM</span> rtree_&lt;t&gt;_&lt;c&gt; <span class="keyword">WHERE</span> id = OLD.&lt;i&gt;;
<span class="keyword">END</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>where &lt;t&gt; and &lt;c&gt; are replaced with the names of the feature table and geometry column being indexed and &lt;i&gt; is replaced with the name of the feature table integer primary key column.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_trigger_definition_sql_informative"> Annex F: Trigger Definition SQL (Informative)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_geometry_columns_3">F.1. geometry_columns</h3>
<div class="listingblock">
<div class="title">gpkg_geometry_columns Trigger Definitions</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_geometry_columns_geometry_type_name_insert</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_geometry_columns</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT,<span class="string"><span class="delimiter">'</span><span class="content">geometry_type name must be one of GEOMETRY,
POINT, LINESTRING, POLYGON, MULTIPOINT, MULTILINESTRING, MULTIPOLYGON,
GEOMCOLLECTION, CIRCULARSTRING, COMPOUNDCURVE, CURVEPOLYGON, MULTICURVE,
MULTISURFACE, CURVE, SURFACE</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span>(NEW.geometry_type_name <span class="keyword">IN</span>(<span class="string"><span class="delimiter">'</span><span class="content">GEOMETRY</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">POINT</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">LINESTRING</span><span class="delimiter">'</span></span>,
<span class="string"><span class="delimiter">'</span><span class="content">POLYGON</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">MULTIPOINT</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">MULTILINESTRING</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">MULTIPOLYGON</span><span class="delimiter">'</span></span>,
<span class="string"><span class="delimiter">'</span><span class="content">GEOMCOLLECTION</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">CIRCULARSTRING</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">COMPOUNDCURVE</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">CURVEPOLYGON</span><span class="delimiter">'</span></span>,
<span class="string"><span class="delimiter">'</span><span class="content">MULTICURVE</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">MULTISURFACE</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">CURVE</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">SURFACE</span><span class="delimiter">'</span></span>));
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_geometry_columns_geometry_type_name_update</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> <span class="string"><span class="delimiter">'</span><span class="content">geometry_type_name</span><span class="delimiter">'</span></span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_geometry_columns</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT,<span class="string"><span class="delimiter">'</span><span class="content">geometry_type name must be one of GEOMETRY,
POINT, LINESTRING, POLYGON, MULTIPOINT, MULTILINESTRING, MULTIPOLYGON,
GEOMCOLLECTION, CIRCULARSTRING, COMPOUNDCURVE, CURVEPOLYGON, MULTICURVE,
MULTISURFACE, CURVE, SURFACE </span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span>(NEW.geometry_type_name <span class="keyword">IN</span> (<span class="string"><span class="delimiter">'</span><span class="content">GEOMETRY</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">POINT</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">LINESTRING</span><span class="delimiter">'</span></span>,
<span class="string"><span class="delimiter">'</span><span class="content">POLYGON</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">MULTIPOINT</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">MULTILINESTRING</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">MULTIPOLYGON</span><span class="delimiter">'</span></span>,
<span class="string"><span class="delimiter">'</span><span class="content">GEOMCOLLECTION</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">CIRCULARSTRING</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">COMPOUNDCURVE</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">CURVEPOLYGON</span><span class="delimiter">'</span></span>,
<span class="string"><span class="delimiter">'</span><span class="content">MULTICURVE</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">MULTISURFACE</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">CURVE</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">SURFACE</span><span class="delimiter">'</span></span>));
<span class="keyword">END</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gpkg_tile_matrix_2">F.2. gpkg_tile_matrix</h3>
<div class="listingblock">
<div class="title">gpkg_tile_matrix Trigger Definition SQL</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix_zoom_level_insert</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table ''gpkg_tile_matrix'' violates constraint: zoom_level cannot be less than 0</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> (NEW.zoom_level &lt; <span class="integer">0</span>);
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix_zoom_level_update</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">of</span> zoom_level <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table ''gpkg_tile_matrix'' violates constraint: zoom_level cannot be less than 0</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> (NEW.zoom_level &lt; <span class="integer">0</span>);
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix_matrix_width_insert</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table ''gpkg_tile_matrix'' violates constraint: matrix_width cannot be less than 1</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> (NEW.matrix_width &lt; <span class="integer">1</span>);
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix_matrix_width_update</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> matrix_width <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table ''gpkg_tile_matrix'' violates constraint: matrix_width cannot be less than 1</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> (NEW.matrix_width &lt; <span class="integer">1</span>);
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix_matrix_height_insert</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table ''gpkg_tile_matrix'' violates constraint: matrix_height cannot be less than 1</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> (NEW.matrix_height &lt; <span class="integer">1</span>);
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix_matrix_height_update</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> matrix_height <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table ''gpkg_tile_matrix'' violates constraint: matrix_height cannot be less than 1</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> (NEW.matrix_height &lt; <span class="integer">1</span>);
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix_pixel_x_size_insert</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table ''gpkg_tile_matrix'' violates constraint: pixel_x_size must be greater than 0</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> (NEW.pixel_x_size &gt; <span class="integer">0</span>);
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix_pixel_x_size_update</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> pixel_x_size <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table ''gpkg_tile_matrix'' violates constraint: pixel_x_size must be greater than 0</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> (NEW.pixel_x_size &gt; <span class="integer">0</span>);
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix_pixel_y_size_insert</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table ''gpkg_tile_matrix'' violates constraint: pixel_y_size must be greater than 0</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> (NEW.pixel_y_size &gt; <span class="integer">0</span>);
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix_pixel_y_size_update</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> pixel_y_size <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table ''gpkg_tile_matrix'' violates constraint: pixel_y_size must be greater than 0</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> (NEW.pixel_y_size &gt; <span class="integer">0</span>);
<span class="keyword">END</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_metadata_3">F.3. metadata</h3>
<div class="listingblock">
<div class="title">metadata Trigger Definition SQL</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_md_scope_insert</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table gpkg_metadata violates
constraint: md_scope must be one of undefined | fieldSession |
collectionSession | series | dataset | featureType | feature |
attributeType | attribute | tile | model | catalogue | schema |
taxonomy software | service | collectionHardware |
nonGeographicDataset | dimensionGroup</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span>(NEW.md_scope <span class="keyword">IN</span>
(<span class="string"><span class="delimiter">'</span><span class="content">undefined</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">fieldSession</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">collectionSession</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">series</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">dataset</span><span class="delimiter">'</span></span>,
<span class="string"><span class="delimiter">'</span><span class="content">featureType</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">feature</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">attributeType</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">attribute</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">tile</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">model</span><span class="delimiter">'</span></span>,
<span class="string"><span class="delimiter">'</span><span class="content">catalogue</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">schema</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">taxonomy</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">software</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">service</span><span class="delimiter">'</span></span>,
<span class="string"><span class="delimiter">'</span><span class="content">collectionHardware</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">nonGeographicDataset</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">dimensionGroup</span><span class="delimiter">'</span></span>));
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_md_scope_update</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> <span class="string"><span class="delimiter">'</span><span class="content">md_scope</span><span class="delimiter">'</span></span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table gpkg_metadata violates
constraint: md_scope must be one of undefined | fieldSession |
collectionSession | series | dataset | featureType | feature |
attributeType | attribute | tile | model | catalogue | schema |
taxonomy software | service | collectionHardware |
nonGeographicDataset | dimensionGroup</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span>(NEW.md_scope <span class="keyword">IN</span>
(<span class="string"><span class="delimiter">'</span><span class="content">undefined</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">fieldSession</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">collectionSession</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">series</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">dataset</span><span class="delimiter">'</span></span>,
<span class="string"><span class="delimiter">'</span><span class="content">featureType</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">feature</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">attributeType</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">attribute</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">tile</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">model</span><span class="delimiter">'</span></span>,
<span class="string"><span class="delimiter">'</span><span class="content">catalogue</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">schema</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">taxonomy</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">software</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">service</span><span class="delimiter">'</span></span>,
<span class="string"><span class="delimiter">'</span><span class="content">collectionHardware</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">nonGeographicDataset</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">dimensionGroup</span><span class="delimiter">'</span></span>));
<span class="keyword">END</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_metadata_reference">F.4. metadata_reference</h3>
<div class="listingblock">
<div class="title">gpkg_metadata_reference Trigger Definition SQL</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference_reference_scope_insert</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table gpkg_metadata_reference
violates constraint: reference_scope must be one of &quot;geopackage&quot;,
table&quot;, &quot;column&quot;, &quot;row&quot;, &quot;row/col&quot;</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> NEW.reference_scope <span class="keyword">IN</span>
(<span class="string"><span class="delimiter">'</span><span class="content">geopackage</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">table</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">column</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">row</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">row/col</span><span class="delimiter">'</span></span>);
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference_reference_scope_update</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> <span class="string"><span class="delimiter">'</span><span class="content">reference_scope</span><span class="delimiter">'</span></span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table gpkg_metadata_reference
violates constraint: referrence_scope must be one of &quot;geopackage&quot;,
&quot;table&quot;, &quot;column&quot;, &quot;row&quot;, &quot;row/col&quot;</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> NEW.reference_scope <span class="keyword">IN</span>
(<span class="string"><span class="delimiter">'</span><span class="content">geopackage</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">table</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">column</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">row</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">row/col</span><span class="delimiter">'</span></span>);
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference_column_name_insert</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table gpkg_metadata_reference
violates constraint: column name must be NULL when reference_scope
is &quot;geopackage&quot;, &quot;table&quot; or &quot;row&quot;</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> (NEW.reference_scope <span class="keyword">IN</span> (<span class="string"><span class="delimiter">'</span><span class="content">geopackage</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">table</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">row</span><span class="delimiter">'</span></span>)
<span class="keyword">AND</span> NEW.column_name <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>);
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table gpkg_metadata_reference
violates constraint: column name must be defined for the specified
table when reference_scope is &quot;column&quot; or &quot;row/col&quot;</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> (NEW.reference_scope <span class="keyword">IN</span> (<span class="string"><span class="delimiter">'</span><span class="content">column</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">row/col</span><span class="delimiter">'</span></span>)
<span class="keyword">AND</span> <span class="keyword">NOT</span> NEW.table_name <span class="keyword">IN</span> (
<span class="class">SELECT</span> name <span class="keyword">FROM</span> SQLITE_MASTER <span class="keyword">WHERE</span> type = <span class="string"><span class="delimiter">'</span><span class="content">table</span><span class="delimiter">'</span></span>
<span class="keyword">AND</span> name = NEW.table_name
<span class="keyword">AND</span> sql <span class="keyword">LIKE</span> (<span class="string"><span class="delimiter">'</span><span class="content">%</span><span class="delimiter">'</span></span> || NEW.column_name || <span class="string"><span class="delimiter">'</span><span class="content">%</span><span class="delimiter">'</span></span>)));
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference_column_name_update</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> column_name <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table gpkg_metadata_reference
violates constraint: column name must be NULL when reference_scope
is &quot;geopackage&quot;, &quot;table&quot; or &quot;row&quot;</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> (NEW.reference_scope <span class="keyword">IN</span> (<span class="string"><span class="delimiter">'</span><span class="content">geopackage</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">table</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">row</span><span class="delimiter">'</span></span>)
<span class="keyword">AND</span> NEW.column_nameIS <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>);
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table gpkg_metadata_reference
violates constraint: column name must be defined for the specified
table when reference_scope is &quot;column&quot; or &quot;row/col&quot;</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> (NEW.reference_scope <span class="keyword">IN</span> (<span class="string"><span class="delimiter">'</span><span class="content">column</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">row/col</span><span class="delimiter">'</span></span>)
<span class="keyword">AND</span> <span class="keyword">NOT</span> NEW.table_name <span class="keyword">IN</span> (
<span class="class">SELECT</span> name <span class="keyword">FROM</span> SQLITE_MASTER <span class="keyword">WHERE</span> type = <span class="string"><span class="delimiter">'</span><span class="content">table</span><span class="delimiter">'</span></span>
<span class="keyword">AND</span> name = NEW.table_name
<span class="keyword">AND</span> sql <span class="keyword">LIKE</span> (<span class="string"><span class="delimiter">'</span><span class="content">%</span><span class="delimiter">'</span></span> || NEW.column_name || <span class="string"><span class="delimiter">'</span><span class="content">%</span><span class="delimiter">'</span></span>)));
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference_row_id_value_insert</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table gpkg_metadata_reference
violates constraint: row_id_value must be NULL when reference_scope
is &quot;geopackage&quot;, &quot;table&quot; or &quot;column&quot;</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> NEW.reference_scope <span class="keyword">IN</span> (<span class="string"><span class="delimiter">'</span><span class="content">geopackage</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">table</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">column</span><span class="delimiter">'</span></span>)
<span class="keyword">AND</span> NEW.row_id_value <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>;
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table gpkg_metadata_reference
violates constraint: row_id_value must exist in specified table when
reference_scope is &quot;row&quot; or &quot;row/col&quot;</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> NEW.reference_scope <span class="keyword">IN</span> (<span class="string"><span class="delimiter">'</span><span class="content">row</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">row/col</span><span class="delimiter">'</span></span>)
<span class="keyword">AND</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> (<span class="class">SELECT</span> rowid
<span class="keyword">FROM</span> (<span class="class">SELECT</span> NEW.table_name <span class="keyword">AS</span> table_name) <span class="keyword">WHERE</span> rowid =
NEW.row_id_value);
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference_row_id_value_update</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> <span class="string"><span class="delimiter">'</span><span class="content">row_id_value</span><span class="delimiter">'</span></span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table gpkg_metadata_reference
violates constraint: row_id_value must be NULL when reference_scope
is &quot;geopackage&quot;, &quot;table&quot; or &quot;column&quot;</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> NEW.reference_scope <span class="keyword">IN</span> (<span class="string"><span class="delimiter">'</span><span class="content">geopackage</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">table</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">column</span><span class="delimiter">'</span></span>)
<span class="keyword">AND</span> NEW.row_id_value <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>;
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table gpkg_metadata_reference
violates constraint: row_id_value must exist in specified table when
reference_scope is &quot;row&quot; or &quot;row/col&quot;</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> NEW.reference_scope <span class="keyword">IN</span> (<span class="string"><span class="delimiter">'</span><span class="content">row</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">row/col</span><span class="delimiter">'</span></span>)
<span class="keyword">AND</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> (<span class="class">SELECT</span> rowid
<span class="keyword">FROM</span> (<span class="class">SELECT</span> NEW.table_name <span class="keyword">AS</span> table_name) <span class="keyword">WHERE</span> rowid =
NEW.row_id_value);
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference_timestamp_insert</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table gpkg_metadata_reference
violates constraint: timestamp must be a valid time in ISO 8601
&quot;yyyy-mm-ddThh-mm-ss.cccZ&quot; form</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> (NEW.timestamp GLOB
<span class="string"><span class="delimiter">'</span><span class="content">[1-2][0-9][0-9][0-9]-[0-1][0-9]-[1-3][0-9]T[0-2][0-9]:[0-5][0-
9]:[0-5][0-9].[0-9][0-9][0-9]Z</span><span class="delimiter">'</span></span>
<span class="keyword">AND</span> strftime(<span class="string"><span class="delimiter">'</span><span class="content">%s</span><span class="delimiter">'</span></span>,NEW.timestamp) <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>);
<span class="keyword">END</span>
<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference_timestamp_update</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> <span class="string"><span class="delimiter">'</span><span class="content">timestamp</span><span class="delimiter">'</span></span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table gpkg_metadata_reference
violates constraint: timestamp must be a valid time in ISO 8601
&quot;yyyy-mm-ddThh-mm-ss.cccZ&quot; form</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> (NEW.timestamp GLOB
<span class="string"><span class="delimiter">'</span><span class="content">[1-2][0-9][0-9][0-9]-[0-1][0-9]-[1-3][0-9]T[0-2][0-9]:[0-5][0-
9]:[0-5][0-9].[0-9][0-9][0-9]Z</span><span class="delimiter">'</span></span>
<span class="keyword">AND</span> strftime(<span class="string"><span class="delimiter">'</span><span class="content">%s</span><span class="delimiter">'</span></span>,NEW.timestamp) <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>);
<span class="keyword">END</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_sample_feature_table">F.5. sample_feature_table</h3>
<div class="listingblock">
<div class="title">EXAMPLE: features table Trigger Definition SQL</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_feature_table_real_insert</span><span class="delimiter">&quot;</span></span>
<span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_feature_table</span><span class="delimiter">&quot;</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table ''sample_feature_table''
violates constraint: real_attribute must be greater than 0</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> (NEW.real_attribute &gt; <span class="integer">0</span>);
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_feature_table_real_update</span><span class="delimiter">&quot;</span></span>
<span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">real_attribute</span><span class="delimiter">&quot;</span></span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>where &lt;t&gt; and &lt;c&gt; are replaced with the names of the feature table and geometry column being inserted or updated.</p>
</div>
</div>
<div class="sect2">
<h3 id="_sample_tile_pyramid">F.6. sample_tile_pyramid</h3>
<div class="listingblock">
<div class="title">tiles table Trigger Definition SQL</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_tile_pyramid_zoom_insert</span><span class="delimiter">&quot;</span></span>
<span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_tile_pyramid</span><span class="delimiter">&quot;</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table ''sample_tile_pyramid'' violates constraint: zoom_level not specified for table in gpkg_tile_matrix</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> (NEW.zoom_level <span class="keyword">IN</span> (<span class="class">SELECT</span> zoom_level <span class="keyword">FROM</span> gpkg_tile_matrix <span class="keyword">WHERE</span> t_table_name = <span class="string"><span class="delimiter">'</span><span class="content">sample_tile_pyramid</span><span class="delimiter">'</span></span>)) ;
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_tile_pyramid_zoom_update</span><span class="delimiter">&quot;</span></span>
<span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> zoom_level <span class="keyword">ON</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_tile_pyramid</span><span class="delimiter">&quot;</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table ''sample_tile_pyramid'' violates constraint: zoom_level not specified for table in gpkg_tile_matrix</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> (NEW.zoom_level <span class="keyword">IN</span> (<span class="class">SELECT</span> zoom_level <span class="keyword">FROM</span> gpkg_tile_matrix <span class="keyword">WHERE</span> t_table_name = <span class="string"><span class="delimiter">'</span><span class="content">sample_tile_pyramid</span><span class="delimiter">'</span></span>)) ;
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_tile_pyramid_tile_column_insert</span><span class="delimiter">&quot;</span></span>
<span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_tile_pyramid</span><span class="delimiter">&quot;</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table ''sample_tile_pyramid'' violates constraint: tile_column cannot be &lt; 0</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> (NEW.tile_column &lt; <span class="integer">0</span>) ;
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table ''sample_tile_pyramid'' violates constraint: tile_column must by &lt; matrix_width specified for table and zoom level in gpkg_tile_matrix</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> (NEW.tile_column &lt; (<span class="class">SELECT</span> matrix_width <span class="keyword">FROM</span> gpkg_tile_matrix <span class="keyword">WHERE</span> t_table_name = <span class="string"><span class="delimiter">'</span><span class="content">sample_tile_pyramid</span><span class="delimiter">'</span></span> <span class="keyword">AND</span> zoom_level = NEW.zoom_level));
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_tile_pyramid_tile_column_update</span><span class="delimiter">&quot;</span></span>
<span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> tile_column <span class="keyword">ON</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_tile_pyramid</span><span class="delimiter">&quot;</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table ''sample_tile_pyramid'' violates constraint: tile_column cannot be &lt; 0</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> (NEW.tile_column &lt; <span class="integer">0</span>) ;
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table ''sample_tile_pyramid'' violates constraint: tile_column must by &lt; matrix_width specified for table and zoom level in gpkg_tile_matrix</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> (NEW.tile_column &lt; (<span class="class">SELECT</span> matrix_width <span class="keyword">FROM</span> gpkg_tile_matrix <span class="keyword">WHERE</span> t_table_name = <span class="string"><span class="delimiter">'</span><span class="content">sample_tile_pyramid</span><span class="delimiter">'</span></span> <span class="keyword">AND</span> zoom_level = NEW.zoom_level));
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_tile_pyramid_tile_row_insert</span><span class="delimiter">&quot;</span></span>
<span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_tile_pyramid</span><span class="delimiter">&quot;</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table ''sample_tile_pyramid'' violates constraint: tile_row cannot be &lt; 0</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> (NEW.tile_row &lt; <span class="integer">0</span>) ;
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table ''sample_tile_pyramid'' violates constraint: tile_row must by &lt; matrix_height specified for table and zoom level in gpkg_tile_matrix</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> (NEW.tile_row &lt; (<span class="class">SELECT</span> matrix_height <span class="keyword">FROM</span> gpkg_tile_matrix <span class="keyword">WHERE</span> t_table_name = <span class="string"><span class="delimiter">'</span><span class="content">sample_tile_pyramid</span><span class="delimiter">'</span></span> <span class="keyword">AND</span> zoom_level = NEW.zoom_level));
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_tile_pyramid_tile_row_update</span><span class="delimiter">&quot;</span></span>
<span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> tile_row <span class="keyword">ON</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_tile_pyramid</span><span class="delimiter">&quot;</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table ''sample_tile_pyramid'' violates constraint: tile_row cannot be &lt; 0</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> (NEW.tile_row &lt; <span class="integer">0</span>) ;
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table ''sample_tile_pyramid'' violates constraint: tile_row must by &lt; matrix_height specified for table and zoom level in gpkg_tile_matrix</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> (NEW.tile_row &lt; (<span class="class">SELECT</span> matrix_height <span class="keyword">FROM</span> gpkg_tile_matrix <span class="keyword">WHERE</span> t_table_name = <span class="string"><span class="delimiter">'</span><span class="content">sample_tile_pyramid</span><span class="delimiter">'</span></span> <span class="keyword">AND</span> zoom_level = NEW.zoom_level));
<span class="keyword">END</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="geometry_types"> Annex G: Geometry Types (Normative)</h2>
<div class="sectionbody">
<table id="geometry_types_core" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 20. Geometry Type Codes (Core)</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Code</th>
<th class="tableblock halign-left valign-top">Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Geometry</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Point</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LineString</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Polygon</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MultiPoint</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MultiLineString</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MultiPolygon</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GeometryCollection</p></td>
</tr>
</tbody>
</table>

<table id="geometry_types_extension" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 21. Geometry Type Codes (Extension)</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Code</th>
<th class="tableblock halign-left valign-top">Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CircularString</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CompoundCurve</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CurvePolygon</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MultiCurve</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MultiSurface</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">13</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Curve</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">14</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Surface</p></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>Geometry subtypes are Point, Curve, Surface and GeometryCollection. Curve subtypes are LineString, CircularString and CompoundCurve.</p>
</div>
<div class="paragraph">
<p>Surface subtype is CurvePolygon.</p>
</div>
<div class="paragraph">
<p>CurvePolygon subtype is Polygon.</p>
</div>
<div class="paragraph">
<p>GeometryCollection subtypes are MultiPoint, MultiCurve and MultiSurface.</p>
</div>
<div class="paragraph">
<p>MultiCurve subtype is MultiLineString.</p>
</div>
<div class="paragraph">
<p>MultiSurface subtype is MultiPolygon.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_other_sql_mm_functions_informative"> Annex H: Other SQL/MM Functions (Informative)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To be completed.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="tiles_factor2_example_appendix"> Annex I: Tiles Zoom Times Two Example (Informative)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To be completed.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="metadata_example_appendix"> Annex J: Hierarchical Metadata Example (Informative)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To be completed.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="raster_or_tile_metadata_example_appendix"> Annex K: Raster or Tile Metadata Example (Informative)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To be completed.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_normative_references_normative"> Annex L: Normative References (Normative)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following normative documents contain provisions which, through reference in this text, constitute provisions of OGC 12-128.
For dated references, subsequent amendments to, or revisions of, any of these publications do not apply.
However, parties to agreements based on this part of OGC 12-128 are encouraged to investigate the possibility of applying the most recent editions of the normative documents indicated below.
For undated references, the latest edition of the normative document referred to applies.</p>
</div>
<div class="ulist bibliography">
<ul class="bibliography">
<li>
<p><a id="1"></a>[1] ISO 19105: Geographic information — Conformance and Testing</p>
</li>
<li>
<p><a id="2"></a>[2] ISO/IEC 9075:1992 Information Technology - Database Language SQL SQL92)</p>
</li>
<li>
<p><a id="3"></a>[3] ISO/IEC 9075-1:2011 Information Technology - Database Language SQL - Part 1: Framework</p>
</li>
<li>
<p><a id="4"></a>[4] ISO/IEC 9075-2:2011 Information Technology - Database Language SQL - Part 2: Foundation</p>
</li>
<li>
<p><a id="5"></a>[5] ISO/IEC 9075-3:2008 Information Technology - Database Language SQL - Part 3: Call- Level Interface (SQL/CLI)</p>
</li>
<li>
<p><a id="6"></a>[6] ISO/IEC 9075-4:2011 Information Technology - Database Language SQL - Part 4: Persistent Stored Modules (SQL/PSM)</p>
</li>
<li>
<p><a id="7"></a>[7] ISO/IEC 9075-10:2008 Information Technology - Database Language SQL – Part 10: Object Language Bindings (SQL/OLB)</p>
</li>
<li>
<p><a id="8"></a>[8] JDBCTM 3.0 Specification, Final Release, John Ellis &amp; Linda Ho with Maydene Fisher, Sun Microsystems, Inc., October, 2001.</p>
</li>
<li>
<p><a id="9"></a>[9] SQLite (all parts) <a href="http://www.sqlite.org/">http://www.sqlite.org/</a> (online) <a href="http://www.sqlite.org/sqlite-doc-3071300.zip">http://www.sqlite.org/sqlite-doc-3071300.zip</a> (offline)</p>
</li>
<li>
<p><a id="10"></a>[10] <a href="http://sqlite.org/fileformat2.html">http://sqlite.org/fileformat2.html</a></p>
</li>
<li>
<p><a id="11"></a>[11] <a href="http://www.sqlite.org/formatchng.html">http://www.sqlite.org/formatchng.html</a></p>
</li>
<li>
<p><a id="12"></a>[12] <a href="http://www.sqlite.org/download.html">http://www.sqlite.org/download.html</a></p>
</li>
<li>
<p><a id="13"></a>[13] OGC 06-103r4 OpenGIS® Implementation Standard for Geographic information - Simple feature access - Part 1: Common architecture Version: 1.2.1 2011-05-28 <a href="http://portal.opengeospatial.org/files/?artifact_id=25355">http://portal.opengeospatial.org/files/?artifact_id=25355</a> (also ISO/TC211 19125 Part 1)</p>
</li>
<li>
<p><a id="14"></a>[14] OGC 06-104r4 OpenGIS® Implementation Standard for Geographic information - Simple feature access - Part 2: SQL option Version: 1.2.1 2010-08-04 <a href="http://portal.opengeospatial.org/files/?artifact_id=25354">http://portal.opengeospatial.org/files/?artifact_id=25354</a> (also ISO/TC211 19125 Part 2)</p>
</li>
<li>
<p><a id="15"></a>[15] OGC 99-049 OpenGIS® Simple Features Specification for SQL Revision 1.1 5, 1999, Clause 2.3.8 <a href="http://portal.opengeospatial.org/files/?artifact_id=829">http://portal.opengeospatial.org/files/?artifact_id=829</a> May</p>
</li>
<li>
<p><a id="16"></a>[16] ISO/IEC 13249-3:2011 Information technology — SQL Multimedia and Application Packages - Part 3: Spatial (SQL/MM)</p>
</li>
<li>
<p><a id="17"></a>[17] <a href="http://www.epsg.org/Geodetic.html">http://www.epsg.org/Geodetic.html</a></p>
</li>
<li>
<p><a id="18"></a>[18] <a href="http://www.epsg-registry.org/">http://www.epsg-registry.org/</a></p>
</li>
<li>
<p><a id="19"></a>[19] MIL_STD_2401 DoD World Geodetic System 84 (WGS84), 11 January 1994</p>
</li>
<li>
<p><a id="20"></a>[20] OGC 07-057r7 OpenGIS® Web Map Tile Service Implementation Standard ersion 1.0.0 2010-04-06 (WMTS) <a href="http://portal.opengeospatial.org/files/?artifact_id=35326">http://portal.opengeospatial.org/files/?artifact_id=35326</a></p>
</li>
<li>
<p><a id="21"></a>[21] ITU-T Recommendation T.81 (09/92) with Corrigendum (JPEG)</p>
</li>
<li>
<p><a id="22"></a>[22] JPEG File Interchange Format Version 1.02, September 1, 1992 <a href="http://www.jpeg.org/public/jfif.pdf">http://www.jpeg.org/public/jfif.pdf</a></p>
</li>
<li>
<p><a id="23"></a>[23] IETF RFC 2046 Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types <a href="http://www.ietf.org/rfc/rfc2046.txt">http://www.ietf.org/rfc/rfc2046.txt</a></p>
</li>
<li>
<p><a id="24"></a>[24] Portable Network Graphics <a href="http://libpng.org/pub/png/">http://libpng.org/pub/png/</a></p>
</li>
<li>
<p><a id="25"></a>[25] MIME Media Types <a href="http://www.iana.org/assignments/media-types/index.html">http://www.iana.org/assignments/media-types/index.html</a></p>
</li>
<li>
<p><a id="26"></a>[26] WebP <a href="https://developers.google.com/speed/webp/">https://developers.google.com/speed/webp/</a></p>
</li>
<li>
<p><a id="27"></a>[27] TIFF – Tagged Image File Format, Revision 6.0, Adobe Systems Inc., June 1992 <a href="http://partners.adobe.com/public/developer/en/tiff/TIFF6.pdf">http://partners.adobe.com/public/developer/en/tiff/TIFF6.pdf</a></p>
</li>
<li>
<p><a id="28"></a>[28] GeoTIFF Format Specification, Revision 1.0, 10 November 1995; version 1.8.2 <a href="http://www.remotesensing.org/geotiff/spec/geotiffhome.html">http://www.remotesensing.org/geotiff/spec/geotiffhome.html</a></p>
</li>
<li>
<p><a id="29"></a>[29] NGA Standardization Document: Implementation Profile for Tagged Image File Format (TIFF) and Geographic Tagged Image File Format (GeoTIFF), Version 2.0, 2001-10-26 <a href="https://nsgreg.nga.mil/doc/view?i=2224">https://nsgreg.nga.mil/doc/view?i=2224</a></p>
</li>
<li>
<p><a id="30"></a>[30] IETF RFC 3986 Uniform Resource Identifier (URI): Generic Syntax <a href="http://www.ietf.org/rfc/rfc3986.txt">http://www.ietf.org/rfc/rfc3986.txt</a></p>
</li>
<li>
<p><a id="31"></a>[31] OGC08-131r3 The Specification Model — A Standard for Modular specifications <a href="https://portal.opengeospatial.org/files/?artifact_id=34762">https://portal.opengeospatial.org/files/?artifact_id=34762</a></p>
</li>
<li>
<p><a id="32"></a>[32] OGC10-103 Name type specification - specification elements <a href="http://portal.opengeospatial.org/files/?artifact_id=39194">http://portal.opengeospatial.org/files/?artifact_id=39194</a></p>
</li>
<li>
<p><a id="33"></a>[33] W3C Recommendation 26 November 2008 Extensible Markup Language (XML) 1.0 (Fifth Edition) <a href="http://www.w3.org/TR/xml/">http://www.w3.org/TR/xml/</a></p>
</li>
<li>
<p><a id="34"></a>[34] W3C Recommendation 8 December 2009 Namespaces in XML 1.0 (Third Edition) <a href="http://www.w3.org/TR/REC-xml-names/">http://www.w3.org/TR/REC-xml-names/</a></p>
</li>
<li>
<p><a id="35"></a>[35] W3C Recommendation 28 January 2009 XML Base (Second Edition) <a href="http://www.w3.org/TR/xmlbase/">http://www.w3.org/TR/xmlbase/</a></p>
</li>
<li>
<p><a id="36"></a>[36] W3C Recommendation 06 May 2010 XML Linking Language (XLink) Version 1.1 <a href="http://www.w3.org/TR/xlink11/">http://www.w3.org/TR/xlink11/</a></p>
</li>
<li>
<p><a id="37"></a>[37] W3C Recommendation 28 October 2004 XML Schema Part 0: Primer Second Edition <a href="http://www.w3.org/TR/xmlschema-0/">http://www.w3.org/TR/xmlschema-0/</a></p>
</li>
<li>
<p><a id="38"></a>[38] W3C Recommendation 28 October 2004 XML Schema Part 1: Structures Second Edition <a href="http://www.w3.org/TR/xmlschema-1/">http://www.w3.org/TR/xmlschema-1/</a></p>
</li>
<li>
<p><a id="39"></a>[39] W3C Recommendation 28 October 2004 XML Schema Part 2: Datatypes Second Edition <a href="http://www.w3.org/TR/xmlschema-2/">http://www.w3.org/TR/xmlschema-2/</a></p>
</li>
<li>
<p><a id="40"></a>[40] ISO 19115 Geographic information&#8201;&#8212;&#8201;Metadata, 8 May 2003, with Technical Corrigendum 1, 5 July 2006</p>
</li>
<li>
<p><a id="41"></a>[41] ISO 8601 Representation of dates and times <a href="http://www.iso.org/iso/catalogue_detail?csnumber=40874">http://www.iso.org/iso/catalogue_detail?csnumber=40874</a></p>
</li>
<li>
<p><a id="42"></a>[42] OGC® 10-100r3 Geography Markup Language (GML) simple features profile (with technical note) <a href="http://portal.opengeospatial.org/files/?artifact_id=42729">http://portal.opengeospatial.org/files/?artifact_id=42729</a></p>
</li>
<li>
<p><a id="43"></a>[43] Atom Syndication Format - IETF RFC 4287 <a href="http://tools.ietf.org/html/rfc4287">http://tools.ietf.org/html/rfc4287</a></p>
</li>
<li>
<p><a id="44"></a>[44] OGC® OWS Context Documen Conceptual Model 12-080 OWS Context Conceptual Model <a href="https://portal.opengeospatial.org/wiki/OWSContextswg/ConceptualModelHome">https://portal.opengeospatial.org/wiki/OWSContextswg/ConceptualModelHome</a></p>
</li>
<li>
<p><a id="45"></a>[45] OGC® OWS Context Atom Encoding 2-084 OWS Context Atom Encoding <a href="https://portal.opengeospatial.org/wiki/OWS9/GeoPackageOWSContext">https://portal.opengeospatial.org/wiki/OWS9/GeoPackageOWSContext</a></p>
</li>
<li>
<p><a id="46"></a>[46] MIL-STD-2500C DoD Interface Standard: National Imagery Transmission Format</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_bibliography_informative"> Annex M: Bibliography (Informative)</h2>
<div class="sectionbody">
<div class="ulist bibliography">
<ul class="bibliography">
<li>
<p><a id="B1"></a>[B1] <a href="http://developer.android.com/guide/topics/data/data-storage.html#db">http://developer.android.com/guide/topics/data/data-storage.html#db</a></p>
</li>
<li>
<p><a id="B2"></a>[B2] <a href="https://developer.apple.com/technologies/ios/data-management.html">https://developer.apple.com/technologies/ios/data-management.html</a></p>
</li>
<li>
<p><a id="B3"></a>[B3] <a href="http://www.epsg.org/guides/docs/G7-1.pdf">http://www.epsg.org/guides/docs/G7-1.pdf</a></p>
</li>
<li>
<p><a id="B4"></a>[B4] <a href="http://www.gdal.org/ogr/">http://www.gdal.org/ogr/</a></p>
</li>
<li>
<p><a id="B5"></a>[B5] <a href="http://www.gdal.org/ogr/drv_sqlite.html">http://www.gdal.org/ogr/drv_sqlite.html</a></p>
</li>
<li>
<p><a id="B6"></a>[B6] <a href="http://trac.osgeo.org/geos/wiki/Applications">http://trac.osgeo.org/geos/wiki/Applications</a></p>
</li>
<li>
<p><a id="B7"></a>[B7] <a href="http://www.qgis.org/">http://www.qgis.org/</a></p>
</li>
<li>
<p><a id="B8"></a>[B8] <a href="http://hub.qgis.org/projects/android-qgis">http://hub.qgis.org/projects/android-qgis</a></p>
</li>
<li>
<p><a id="B9"></a>[B9] <a href="http://www.luciad.com/products/LuciadMobile">http://www.luciad.com/products/LuciadMobile</a></p>
</li>
<li>
<p><a id="B10"></a>[B10] <a href="http://www.falconview.org/trac/FalconView/downloads/26">http://www.falconview.org/trac/FalconView/downloads/26</a></p>
</li>
<li>
<p><a id="B11"></a>[B11] <a href="http://wiki.openstreetmap.org/wiki/TMS">http://wiki.openstreetmap.org/wiki/TMS</a></p>
</li>
<li>
<p><a id="B12"></a>[B12] <a href="https://github.com/mapbox/mbtiles-spec">https://github.com/mapbox/mbtiles-spec</a></p>
</li>
<li>
<p><a id="B13"></a>[B13] <a href="https://www.gaia-gis.it/fossil/librasterlite/index">https://www.gaia-gis.it/fossil/librasterlite/index</a></p>
</li>
<li>
<p><a id="B14"></a>[B14] <a href="http://wiki.openstreetmap.org/wiki/Main_Page">http://wiki.openstreetmap.org/wiki/Main_Page</a></p>
</li>
<li>
<p><a id="B15"></a>[B15] <a href="http://code.google.com/p/osmdroid/">http://code.google.com/p/osmdroid/</a></p>
</li>
<li>
<p><a id="B16"></a>[B16] <a href="http://www.falconview.org/trac/FalconView">http://www.falconview.org/trac/FalconView</a></p>
</li>
<li>
<p><a id="B17"></a>[B17] <a href="http://code.google.com/p/big-planet-tracks/">http://code.google.com/p/big-planet-tracks/</a></p>
</li>
<li>
<p><a id="B18"></a>[B18] <a href="http://en.wikipedia.org/wiki/ASCII">http://en.wikipedia.org/wiki/ASCII</a></p>
</li>
<li>
<p><a id="B19"></a>[B19] “SQL for Smarties: Advanced SQL Programming” Joe Selko, Morgan Kaufmann, 1995, ISBN 1-55860-323-9</p>
</li>
<li>
<p><a id="B20"></a>[B20] NATO IIRS STANAG, NATO Imagery Interpretability Rating Scale (NIIRS) STANAG 7194 Edition 1 2009</p>
</li>
<li>
<p><a id="B21"></a>[B21] <a href="https://nsgreg.nga.mil/doc/view?i=2129">https://nsgreg.nga.mil/doc/view?i=2129</a></p>
</li>
<li>
<p><a id="B22"></a>[B22] U.S. National Image Interpretability Rating Scales <a href="http://www.fas.org/irp/imint/niirs.htm">http://www.fas.org/irp/imint/niirs.htm</a></p>
</li>
<li>
<p><a id="B23"></a>[B23] Civil NIIRS <a href="http://www.fas.org/irp/imint/niirs_c/index.html">http://www.fas.org/irp/imint/niirs_c/index.html</a></p>
</li>
<li>
<p><a id="B24"></a>[B24] Civil NIIRS Reference Guide <a href="http://www.fas.org/irp/imint/niirs_c/guide.htm">http://www.fas.org/irp/imint/niirs_c/guide.htm</a></p>
</li>
<li>
<p><a id="B25"></a>[B25] Additional Civil NIIRS Criteria <a href="http://www.fas.org/irp/imint/niirs_c/app2.htm">http://www.fas.org/irp/imint/niirs_c/app2.htm</a></p>
</li>
<li>
<p><a id="B26"></a>[B26] Sample Civil NIIRS Images <a href="http://www.fas.org/irp/imint/niirs_c/append.htm">http://www.fas.org/irp/imint/niirs_c/append.htm</a></p>
</li>
<li>
<p><a id="B27"></a>[B27] History of NIIRS <a href="http://www.fas.org/irp/imint/niirs_c/app3.htm">http://www.fas.org/irp/imint/niirs_c/app3.htm</a></p>
</li>
<li>
<p><a id="B28"></a>[B28] <a href="http://www.ucgis.org/priorities/research/research_white/1998%20Papers/data.html">http://www.ucgis.org/priorities/research/research_white/1998%20Papers/data.html</a></p>
</li>
<li>
<p><a id="B29"></a>[B29] <a href="http://www.gdal.org/frmt_rasterlite.html">http://www.gdal.org/frmt_rasterlite.html</a></p>
</li>
<li>
<p><a id="B30"></a>[B30] <a href="https://www.gaia-gis.it/fossil/libspatialite/wiki?name=switching-to-4.0">https://www.gaia-gis.it/fossil/libspatialite/wiki?name=switching-to-4.0</a></p>
</li>
<li>
<p><a id="B31"></a>[B31] <a href="http://www.sqlite.org/lang_createtable.html#rowid">http://www.sqlite.org/lang_createtable.html#rowid</a></p>
</li>
<li>
<p><a id="B32"></a>[B32] ISO 19115-2 Geographic information - - Metadata - Part 2: Metadata for imagery and gridded data</p>
</li>
<li>
<p><a id="B33"></a>[B33] ISO 19139: Geographic information&#8201;&#8212;&#8201;Metadata&#8201;&#8212;&#8201;XML schema implementation</p>
</li>
<li>
<p><a id="B34"></a>[B34] Dublin Core Metadata Initiative <a href="http://dublincore.org/">http://dublincore.org/</a> IETF RFC 5013</p>
</li>
<li>
<p><a id="B35"></a>[B35] ISO 15836:2009 <a href="http://www.iso.org/iso/home/store/catalogue_tc/catalogue_detail.htm?csnumber=52142">http://www.iso.org/iso/home/store/catalogue_tc/catalogue_detail.htm?csnumber=52142</a></p>
</li>
<li>
<p><a id="B36"></a>[B36] Content Standard for Digital Geospatial Metadata (CSDGM)</p>
</li>
<li>
<p><a id="B37"></a>[B37] <a href="http://www.fgdc.gov/standards/projects/FGDC-standards-projects/metadata/base-metadata/index_html">http://www.fgdc.gov/standards/projects/FGDC-standards-projects/metadata/base-metadata/index_html</a></p>
</li>
<li>
<p><a id="B38"></a>[B38] Department of Defense Discovery Metadata Specification (DDMS) <a href="http://metadata.ces.mil/mdr/irs/DDMS/">http://metadata.ces.mil/mdr/irs/DDMS/</a></p>
</li>
<li>
<p><a id="B39"></a>[B39] NMF NGA.STND.0012_2.0 / NMIS NGA.STND.0018_1.0</p>
</li>
<li>
<p><a id="B40"></a>[B40] Unified Modeling Language (UML) <a href="http://www.uml.org/">http://www.uml.org/</a></p>
</li>
<li>
<p><a id="B41"></a>[B41] XML for Metadata Interchange (XMI) <a href="http://www.omg.org/spec/XMI/">http://www.omg.org/spec/XMI/</a></p>
</li>
<li>
<p><a id="B42"></a>[B42] Geography Markup Language (GML) ISO 19136:2007</p>
</li>
<li>
<p><a id="B43"></a>[B43] ISO 19110 Geographic information – Methodology for feature cataloguing</p>
</li>
<li>
<p><a id="B44"></a>[B44] Web Ontology Language (OWL) <a href="http://www.w3.org/TR/2009/REC-owl2-xml-">http://www.w3.org/TR/2009/REC-owl2-xml-</a> serialization-20091027/</p>
</li>
<li>
<p><a id="B45"></a>[B45] Simple Knowledge Organization System (SKOS) <a href="http://www.w3.org/TR/skos-reference/">http://www.w3.org/TR/skos-reference/</a></p>
</li>
<li>
<p><a id="B46"></a>[B46] STANAG 7074 Digital Geographic Information Exchange Standard (DIGEST) - AGeoP-3A, edition 1, 19 October 1994 <a href="http://www.dgiwg.org/dgiwg/htm/documents/historical_documents.htm">http://www.dgiwg.org/dgiwg/htm/documents/historical_documents.htm</a></p>
</li>
<li>
<p><a id="B47"></a>[B47] ISO 19109 Geographic information - Rules for application schema</p>
</li>
<li>
<p><a id="B48"></a>[B48] <a href="http://www.sqlite.org/changes.html">http://www.sqlite.org/changes.html</a></p>
</li>
<li>
<p><a id="B49"></a>[B49] <a href="http://sqlite.org/src4/doc/trunk/www/design.wiki">http://sqlite.org/src4/doc/trunk/www/design.wiki</a></p>
</li>
<li>
<p><a id="B50"></a>[B50] <a href="http://trac.osgeo.org/geos/">http://trac.osgeo.org/geos/</a></p>
</li>
<li>
<p><a id="B51"></a>[B51] <a href="http://trac.osgeo.org/proj">http://trac.osgeo.org/proj</a></p>
</li>
<li>
<p><a id="B52"></a>[B52] <a href="https://www.gaia-gis.it/fossil/libspatialite/index">https://www.gaia-gis.it/fossil/libspatialite/index</a></p>
</li>
<li>
<p><a id="B53"></a>[B53] <a href="http://www.gaia-gis.it/gaia-sins/BLOB-Geometry.html">http://www.gaia-gis.it/gaia-sins/BLOB-Geometry.html</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnote_1">
<a href="#_footnoteref_1">1</a>. SQLite version 4 <<B49>>, which will be an alternative to version 3, not a replacement thereof, was not available when this specification was written. See Future Work clause in Annex B.
</div>
<div class="footnote" id="_footnote_2">
<a href="#_footnoteref_2">2</a>. SQLite is in the public domain (see <a href="http://www.sqlite.org/copyright.html)">http://www.sqlite.org/copyright.html)</a>
</div>
<div class="footnote" id="_footnote_3">
<a href="#_footnoteref_3">3</a>. New applications should use the latest available SQLite version software
</div>
<div class="footnote" id="_footnote_4">
<a href="#_footnoteref_4">4</a>. The following statement selects an ISO 8601timestamp value using the SQLite strftime function: SELECT (strftime('%Y-%m-%dT%H:%M:%fZ','now')).
</div>
<div class="footnote" id="_footnote_5">
<a href="#_footnoteref_5">5</a>. OGC WKB simple feature geometry types specified in <<13>> are a subset of the ISO WKB geometry types specified in <<16>>
</div>
<div class="footnote" id="_footnote_6">
<a href="#_footnoteref_6">6</a>. Functions other than the minimal runtime SQL functions required by triggers in a GeoPackage file SHOULD be documented in the gpkg_extensions table and provided by a GeoPackage SQLite Extension.
</div>
<div class="footnote" id="_footnote_7">
<a href="#_footnoteref_7">7</a>. SQL functions on geometries in addition to those defined in this clause SHOULD conform to the SF/SQL <<13>><<14>><<15>> and SQL/MM <<16>> specifications cited in clause <<sfsql_intro>> above.
</div>
<div class="footnote" id="_footnote_8">
<a href="#_footnoteref_8">8</a>. A GeoPackage is not required to contain any feature data tables. Feature data tables in a GeoPackage MAY be empty.
</div>
<div class="footnote" id="_footnote_9">
<a href="#_footnoteref_9">9</a>. GeoPackage applications MAY use SQL triggers or tests in application code to meet this requirement
</div>
<div class="footnote" id="_footnote_10">
<a href="#_footnoteref_10">10</a>. Images of multiple MIME types MAY be stored in given table. For example, in a tiles table, image/png format tiles could be used for transparency where there is no data on the tile edges, and image/jpeg format tiles could be used for storage efficiency where there is image data for all pixels. Images of multiple bit depths of the same MIME type MAY also be stored in a given table, for example image/png tiles in both 8 and 24 bit depths.
</div>
<div class="footnote" id="_footnote_11">
<a href="#_footnoteref_11">11</a>. See clause 3.2.1.1.1 for use of other zoom levels as a registered extensions.
</div>
<div class="footnote" id="_footnote_12">
<a href="#_footnoteref_12">12</a>. See Clauses <<ext_webp_tiles>>, <<ext_tiff_tiles>>, <<ext_nitf_tiles>> and <<ext_other_tiles>> regarding use of alternative tile MIME types as registered extensions.
</div>
<div class="footnote" id="_footnote_13">
<a href="#_footnoteref_13">13</a>. See Clauses <<ext_webp_tiles>>, <<ext_tiff_tiles>>, <<ext_nitf_tiles>> and <<ext_other_tiles>> regarding use of alternative tile MIME types as registered extensions.
</div>
<div class="footnote" id="_footnote_14">
<a href="#_footnoteref_14">14</a>. GeoPackage applications MAY query the gpkg_tile_matrix_metadata table or the tile matrix user data table to determine the minimum and maximum zoom levels for a given tile matrix table.
</div>
<div class="footnote" id="_footnote_15">
<a href="#_footnoteref_15">15</a>. GeoPackage applications MAY query the tiles (matrix set) table to determine which tiles are available at each zoom level.
</div>
<div class="footnote" id="_footnote_16">
<a href="#_footnoteref_16">16</a>. GeoPackage applications that insert, update, or delete tiles (matrix set) table tiles row records are responsible for maintaining the corresponding descriptive contents of the gpkg_tile_matrix_metadata table.
</div>
<div class="footnote" id="_footnote_17">
<a href="#_footnoteref_17">17</a>. A GeoPackage is not required to contain any tile matrix data tables. Tile matrix user data tables in a GeoPackage MAY be empty.
</div>
<div class="footnote" id="_footnote_18">
<a href="#_footnoteref_18">18</a>. A GeoPackage is not required to contain a gpkg_data_columns table. The gpkg_data_columns table in a GeoPackage MAY be empty.
</div>
<div class="footnote" id="_footnote_19">
<a href="#_footnoteref_19">19</a>. GeoPackages MAY contain MIME types other than the raster image types specified in clauses 2.2.4, 2.2.5, 3.2.2, 3.2.3, and 3.2.4 as feature attributes, but they are not required to do so.
</div>
<div class="footnote" id="_footnote_20">
<a href="#_footnoteref_20">20</a>. Informative examples of hierarchical metadata are provided in &lt;&lt;metadata_example_appendix&gt;&gt;
</div>
<div class="footnote" id="_footnote_21">
<a href="#_footnoteref_21">21</a>. An informative example of raster image metadata is provided in &lt;&lt;tiles_example_appendix&gt;&gt;
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 0.9.1<br>
Last updated 2013-10-05 21:27:21 UTC
</div>
</div>
</body>
</html>